"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[83676],{3905:(t,e,a)=>{a.d(e,{Zo:()=>m,kt:()=>d});var n=a(67294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function p(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var o=n.createContext({}),s=function(t){var e=n.useContext(o),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},m=function(t){var e=s(t.components);return n.createElement(o.Provider,{value:e},t.children)},u={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},c=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,o=t.parentName,m=p(t,["components","mdxType","originalType","parentName"]),c=s(a),d=r,k=c["".concat(o,".").concat(d)]||c[d]||u[d]||l;return a?n.createElement(k,i(i({ref:e},m),{},{components:a})):n.createElement(k,i({ref:e},m))}));function d(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,i=new Array(l);i[0]=c;var p={};for(var o in e)hasOwnProperty.call(e,o)&&(p[o]=e[o]);p.originalType=t,p.mdxType="string"==typeof t?t:r,i[1]=p;for(var s=2;s<l;s++)i[s]=a[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},45524:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>u,contentTitle:()=>s,default:()=>k,frontMatter:()=>o,metadata:()=>m,toc:()=>c});a(67294);var n=a(3905),r=a(67709),l=a(7626);function i(){return i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},i.apply(this,arguments)}function p(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}const o={id:"virtualization-hyperv-nscp-restapi",title:"Hyper-V NSCP Rest API"},s=void 0,m={unversionedId:"integrations/plugin-packs/procedures/virtualization-hyperv-nscp-restapi",id:"integrations/plugin-packs/procedures/virtualization-hyperv-nscp-restapi",title:"Hyper-V NSCP Rest API",description:"Contenu du Pack",source:"@site/i18n/fr/docusaurus-plugin-content-docs-pp/current/integrations/plugin-packs/procedures/virtualization-hyperv-nscp-restapi.md",sourceDirName:"integrations/plugin-packs/procedures",slug:"/integrations/plugin-packs/procedures/virtualization-hyperv-nscp-restapi",permalink:"/centreon-documentation/pr-preview/pr-2832/fr/pp/integrations/plugin-packs/procedures/virtualization-hyperv-nscp-restapi",draft:!1,tags:[],version:"current",frontMatter:{id:"virtualization-hyperv-nscp-restapi",title:"Hyper-V NSCP Rest API"},sidebar:"pp",previous:{title:"Hyper-V 2012 NSClient++ NRPE",permalink:"/centreon-documentation/pr-preview/pr-2832/fr/pp/integrations/plugin-packs/procedures/virtualization-hyperv-2012-nrpe"},next:{title:"Nutanix",permalink:"/centreon-documentation/pr-preview/pr-2832/fr/pp/integrations/plugin-packs/procedures/virtualization-nutanix-snmp"}},u={},c=[{value:"Contenu du Pack",id:"contenu-du-pack",level:2},{value:"Mod\xe8les",id:"mod\xe8les",level:3},{value:"R\xe8gles de d\xe9couverte",id:"r\xe8gles-de-d\xe9couverte",level:3},{value:"M\xe9triques &amp; statuts collect\xe9s",id:"m\xe9triques--statuts-collect\xe9s",level:3},{value:"Pr\xe9requis",id:"pr\xe9requis",level:2},{value:"NSClient Configuration",id:"nsclient-configuration",level:3},{value:"Flux r\xe9seau",id:"flux-r\xe9seau",level:3},{value:"Installation",id:"installation",level:2},{value:"Configuration",id:"configuration",level:2},{value:"H\xf4te",id:"h\xf4te",level:3},{value:"Comment puis-je tester le Plugin et que signifient les options des commandes ?",id:"comment-puis-je-tester-le-plugin-et-que-signifient-les-options-des-commandes-",level:2},{value:"Diagnostic des erreurs communes",id:"diagnostic-des-erreurs-communes",level:3}],d={toc:c};function k(t){var{components:e}=t,a=p(t,["components"]);return(0,n.kt)("wrapper",i({},d,a,{components:e,mdxType:"MDXLayout"}),(0,n.kt)("h2",i({},{id:"contenu-du-pack"}),"Contenu du Pack"),(0,n.kt)("h3",i({},{id:"mod\xe8les"}),"Mod\xe8les"),(0,n.kt)("p",null,"Le Pack Centreon Hyper-V apporte 2 mod\xe8les d'h\xf4tes :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Virt-Hyperv-Node-Nscp-Restapi-custom"),(0,n.kt)("li",{parentName:"ul"},"Virt-Hyperv-Scvmm-Nscp-Restapi-custom")),(0,n.kt)("p",null,"Il apporte les mod\xe8les de service suivants :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Service Alias"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Service Template"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Default"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Discovery"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Node-Integration-Service"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Virt-Hyperv-Node-Integration-Service-Nscp-Restapi"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Node-Replication"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Virt-Hyperv-Node-Replication-Nscp-Restapi"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Node-Snapshot"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Virt-Hyperv-Node-Snapshot-Nscp-Restapi"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Node-Vm-Status"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Virt-Hyperv-Node-Vm-Status-Nscp-Restapi"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Scvmm-Integration-Service"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Virt-Hyperv-Scvmm-Integration-Service-Nscp-Restapi"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Scvmm-Snapshot"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Virt-Hyperv-Scvmm-Snapshot-Nscp-Restapi"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Scvmm-Vm-Status"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Virt-Hyperv-Scvmm-Vm-Status-Nscp-Restapi"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))))),(0,n.kt)("h3",i({},{id:"r\xe8gles-de-d\xe9couverte"}),"R\xe8gles de d\xe9couverte"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Hosts",label:"Hosts",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Rule name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Virt-Hyperv-Nscp-Restapi-HostDiscovery-Scvmm-Vm"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"D\xe9couvrez vos machines virtuelles li\xe9es \xe0 un SCVMM")))))),(0,n.kt)("h3",i({},{id:"m\xe9triques--statuts-collect\xe9s"}),"M\xe9triques & statuts collect\xe9s"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Node-Integration-Service",label:"Node-Integration-Service",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"global status"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Global status of virtual machines integration services"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"service status"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Primary and secondary status of each virtual machines services"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"})))))),(0,n.kt)(l.Z,{value:"Node-Replication",label:"Node-Replication",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"replication status"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Health replication status of each virtual machines"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"})))))),(0,n.kt)(l.Z,{value:"Node-Snapshot",label:"Node-Snapshot",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"vm.snapshot.time.last.execution.seconds"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Last snapshot execution time of each virtual machines"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"s"))))),(0,n.kt)(l.Z,{value:"Node-Vm-Status",label:"Node-Vm-Status",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"vm status"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Status of each virtual machines"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"})))))),(0,n.kt)(l.Z,{value:"Scvmm-Integration-Service",label:"Scvmm-Integration-Service",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"status"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Addition status of each virtual machines"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"osshutdown status"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Operating system shutdown status of each virtual machines"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"timesync status"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Time synchronization status of each virtual machines"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"dataexchange status"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Data exchange status of each virtual machines"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"heartbeat status"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Heartbeat status of each virtual machines"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"backup status"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Backup status of each virtual machines"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"})))))),(0,n.kt)(l.Z,{value:"Scvmm-Snapshot",label:"Scvmm-Snapshot",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"vm.snapshot.time.last.execution.seconds"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Last snapshot execution time of each virtual machines"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"s"))))),(0,n.kt)(l.Z,{value:"Scvmm-Vm-Status",label:"Scvmm-Vm-Status",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"vm status"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Status of each virtual machines"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))))))),(0,n.kt)("h2",i({},{id:"pr\xe9requis"}),"Pr\xe9requis"),(0,n.kt)("h3",i({},{id:"nsclient-configuration"}),"NSClient Configuration"),(0,n.kt)("p",null,"Pour superviser un ",(0,n.kt)("strong",{parentName:"p"},"Hyper-V")," via NRPE, installez la version packag\xe9e Centreon de l'agent NSClient++.\nSuivez notre ",(0,n.kt)("a",i({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/fr/pp/integrations/plugin-packs/getting-started/how-to-guides/centreon-nsclient-tutorial"}),"documentation officielle")),(0,n.kt)("p",null,"Veuillez t\xe9l\xe9charger et installer la derni\xe8re version en date de ",(0,n.kt)("strong",{parentName:"p"},"Centreon-NSClient-xxx.exe"),": ",(0,n.kt)("a",i({parentName:"p"},{href:"https://github.com/centreon/centreon-nsclient-build/releases"}),"https://github.com/centreon/centreon-nsclient-build/releases")),(0,n.kt)("p",null,"Par d\xe9faut, l'utilisateur ",(0,n.kt)("strong",{parentName:"p"},"centreon")," avec le mot de passe ",(0,n.kt)("strong",{parentName:"p"},"centreon")," est utilis\xe9 pour se connecter \xe0 NSClient."),(0,n.kt)("h3",i({},{id:"flux-r\xe9seau"}),"Flux r\xe9seau"),(0,n.kt)("p",null,"La communication doit \xeatre possible sur le port TCP 8443 depuis le collecteur\nCentreon vers l'\xe9quipement supervis\xe9."),(0,n.kt)("h2",i({},{id:"installation"}),"Installation"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Online License",label:"Online License",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Installez le Plugin Centreon sur tous les collecteurs Centreon devant superviser des resources ",(0,n.kt)("strong",{parentName:"li"},"Hyper-V NSCP API")," :")),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"yum install centreon-plugin-Applications-Protocol-Nrpe\n")),(0,n.kt)("ol",i({},{start:2}),(0,n.kt)("li",{parentName:"ol"},"Sur l'interface Web de Centreon, installez le Pack ",(0,n.kt)("strong",{parentName:"li"},"Hyper-V NSCP API")," depuis la page ",(0,n.kt)("strong",{parentName:"li"},"Configuration > Packs de plugins"),"."))),(0,n.kt)(l.Z,{value:"Offline License",label:"Offline License",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Installez le Plugin Centreon sur tous les collecteurs Centreon devant superviser des resources ",(0,n.kt)("strong",{parentName:"li"},"Hyper-V NSCP API")," :")),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"yum install centreon-plugin-Applications-Protocol-Nrpe\n")),(0,n.kt)("ol",i({},{start:2}),(0,n.kt)("li",{parentName:"ol"},"Sur le serveur Central Centreon, installez le RPM du Pack ",(0,n.kt)("strong",{parentName:"li"},"Hyper-V NSCP API")," :")),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"yum install centreon-pack-virtualization-hyperv-nscp-restapi\n")),(0,n.kt)("ol",i({},{start:3}),(0,n.kt)("li",{parentName:"ol"},"Sur l'interface Web de Centreon, installez le Pack ",(0,n.kt)("strong",{parentName:"li"},"Hyper-V NSCP API")," depuis la page ",(0,n.kt)("strong",{parentName:"li"},"Configuration > Packs de plugins"),".")))),(0,n.kt)("h2",i({},{id:"configuration"}),"Configuration"),(0,n.kt)("h3",i({},{id:"h\xf4te"}),"H\xf4te"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Ajoutez un h\xf4te \xe0 Centreon depuis la page ",(0,n.kt)("strong",{parentName:"li"},"Configuration > H\xf4tes"),"."),(0,n.kt)("li",{parentName:"ul"},"Compl\xe9tez les champs ",(0,n.kt)("strong",{parentName:"li"},"Nom"),", ",(0,n.kt)("strong",{parentName:"li"},"Alias")," et ",(0,n.kt)("strong",{parentName:"li"},"IP Address / DNS")," correspondant \xe0 votre serveur ",(0,n.kt)("strong",{parentName:"li"},"Hyper-V"),"."),(0,n.kt)("li",{parentName:"ul"},"Appliquez un des mod\xe8les d'h\xf4tes suivants :")),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Virt-Hyperv-Node-Nscp-Restapi-custom",label:"Virt-Hyperv-Node-Nscp-Restapi-custom",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Mandatory"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"NSCPRESTAPIPORT"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Port used (Default: 8443)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"NSCPRESTAPIPROTO"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Protocol used (Default: https)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"NSCPRESTAPIUSERNAME"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"NSClient API username")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"NSCPRESTAPIPASSWORD"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"NSClient API password")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"NSCPRESTAPILEGACYPASSWORD"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"NSClient API legacy authentication password")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"NSCPRESTAPIEXTRAOPTIONS"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Any extra option you may want to add to the command (eg. a --insecure)"))))),(0,n.kt)(l.Z,{value:"Virt-Hyperv-Scvmm-Nscp-Restapi-custom",label:"Virt-Hyperv-Scvmm-Nscp-Restapi-custom",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Mandatory"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"NSCPRESTAPIPORT"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Port used (Default: 8443)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"NSCPRESTAPIPROTO"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Protocol used (Default: https)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"NSCPRESTAPIUSERNAME"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"NSClient API username")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"NSCPRESTAPIPASSWORD"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"NSClient API password")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"NSCPRESTAPILEGACYPASSWORD"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"NSClient API legacy authentication password")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"NSCPRESTAPIEXTRAOPTIONS"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Any extra option you may want to add to the command (eg. a --insecure)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"SCVMMHOSTNAME"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"SCVMM address (Default: localhost)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"SCVMMUSERNAME"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"SCVMM username")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"SCVMMPASSWORD"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"SCVMM password")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"SCVMMPORT"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"SCVMM port used (Default: 8001)")))))),(0,n.kt)("h2",i({},{id:"comment-puis-je-tester-le-plugin-et-que-signifient-les-options-des-commandes-"}),"Comment puis-je tester le Plugin et que signifient les options des commandes ?"),(0,n.kt)("p",null,"Une fois le Plugin install\xe9, vous pouvez tester la bonne configuration NSClient directement en ligne\nde commande depuis votre collecteur Centreon en vous connectant avec\nl'utilisateur ",(0,n.kt)("strong",{parentName:"p"},"centreon-engine")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins/centreon_protocol_nrpe.pl \\\n    --plugin=apps::protocols::nrpe::plugin \\\n    --mode=query \\\n    --custommode=nsclient \\\n    --hostname='10.0.0.1' \\\n    --username=centreon \\\n    --password=centreon \\\n    --insecure \\\n    --http-backend=curl \\\n    --command=check_version\n")),(0,n.kt)("p",null,"La commande devrait retourner un message de sortie similaire \xe0 :"),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"0.5.2.41 2018-04-26\n")),(0,n.kt)("p",null,"Vous pouvez maintenant tester le Plugin Hyper-V :"),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins/centreon_protocol_nrpe.pl \\\n    --plugin=apps::protocols::nrpe::plugin \\\n    --mode=query \\\n    --custommode=nsclient \\\n    --hostname='10.0.0.1' \\\n    --username=centreon \\\n    --password=centreon \\\n    --insecure \\\n    --http-backend=curl \\\n    --command=check_centreon_plugins \\\n    --arg='apps::microsoft::hyperv::2012::local::plugin' \\\n    --arg='node-vm-status' \\\n    --arg='--filter-vm=\"\" --verbose' \\\n    --verbose\n")),(0,n.kt)("p",null,"La commande devrait retourner un message de sortie similaire \xe0 :"),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"OK: All virtual machines are ok \nVM 'vm1' status: Operating normally (state: Running, is clustered: 1)\nVM 'vm2' status: Operating normally (state: Running, is clustered: 0)\nVM 'vm3' status: Operating normally (state: Running, is clustered: 1)\n")),(0,n.kt)("p",null,"La liste de toutes les options compl\xe9mentaires et leur signification peut \xeatre\naffich\xe9e en ajoutant le param\xe8tre ",(0,n.kt)("inlineCode",{parentName:"p"},"--help")," \xe0 la commande:"),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins/centreon_protocol_nrpe.pl \\\n    --plugin=apps::protocols::nrpe::plugin \\\n    --mode=query \\\n    --custommode=nsclient \\\n    --hostname='10.0.0.1' \\\n    --username=centreon \\\n    --password=centreon \\\n    --insecure \\\n    --http-backend=curl \\\n    --command=check_centreon_plugins \\\n    --arg='apps::microsoft::hyperv::2012::local::plugin' \\\n    --arg='node-vm-status' \\\n    --arg='--help'\n")),(0,n.kt)("p",null,"Tous les modes disponibles peuvent \xeatre affich\xe9s en ajoutant le param\xe8tre\n",(0,n.kt)("inlineCode",{parentName:"p"},"--list-mode")," \xe0 la commande:"),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins/centreon_protocol_nrpe.pl \\\n    --plugin=apps::protocols::nrpe::plugin \\\n    --mode=query \\\n    --custommode=nsclient \\\n    --hostname='10.0.0.1' \\\n    --username=centreon \\\n    --password=centreon \\\n    --insecure \\\n    --http-backend=curl \\\n    --command=check_centreon_plugins \\\n    --arg='apps::microsoft::hyperv::2012::local::plugin' \\\n    --arg='xxx' \\\n    --arg='--list-mode'\n")),(0,n.kt)("h3",i({},{id:"diagnostic-des-erreurs-communes"}),"Diagnostic des erreurs communes"),(0,n.kt)("p",null,"Rendez-vous sur la ",(0,n.kt)("a",i({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/fr/pp/integrations/plugin-packs/getting-started/how-to-guides/troubleshooting-plugins"}),"documentation d\xe9di\xe9e"),"\npour le diagnostic des erreurs communes des Plugins Centreon."))}k.isMDXComponent=!0},7626:(t,e,a)=>{a.d(e,{Z:()=>p});var n=a(67294),r=a(86010);const l="tabItem_Ymn6";function i(){return i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},i.apply(this,arguments)}function p({children:t,hidden:e,className:a}){return n.createElement("div",i({role:"tabpanel",className:(0,r.Z)(l,a)},{hidden:e}),t)}},67709:(t,e,a)=>{a.d(e,{Z:()=>d});var n=a(67294),r=a(86010),l=a(90980),i=a(35715),p=a(8854),o=a(8241);const s="tabList__CuJ",m="tabItem_LNqP";function u(){return u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},u.apply(this,arguments)}function c(t){var e;const{lazy:a,block:l,defaultValue:c,values:d,groupId:k,className:N}=t,g=n.Children.map(t.children,(t=>{if((0,n.isValidElement)(t)&&"value"in t.props)return t;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof t.type?t.type:t.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),f=null!=d?d:g.map((({props:{value:t,label:e,attributes:a}})=>({value:t,label:e,attributes:a}))),v=(0,i.l)(f,((t,e)=>t.value===e.value));if(v.length>0)throw new Error(`Docusaurus error: Duplicate values "${v.map((t=>t.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);var h;const b=null===c?c:null!==(h=null!=c?c:null===(e=g.find((t=>t.props.default)))||void 0===e?void 0:e.props.value)&&void 0!==h?h:g[0].props.value;if(null!==b&&!f.some((t=>t.value===b)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${b}" but none of its children has the corresponding value. Available values are: ${f.map((t=>t.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:y,setTabGroupChoices:S}=(0,p.U)(),[P,C]=(0,n.useState)(b),T=[],{blockElementScrollPositionUntilNextRender:O}=(0,o.o5)();if(null!=k){const t=y[k];null!=t&&t!==P&&f.some((e=>e.value===t))&&C(t)}const I=t=>{const e=t.currentTarget,a=T.indexOf(e),n=f[a].value;n!==P&&(O(e),C(n),null!=k&&S(k,String(n)))},R=t=>{let e=null;switch(t.key){case"ArrowRight":{const n=T.indexOf(t.currentTarget)+1;var a;e=null!==(a=T[n])&&void 0!==a?a:T[0];break}case"ArrowLeft":{const a=T.indexOf(t.currentTarget)-1;var n;e=null!==(n=T[a])&&void 0!==n?n:T[T.length-1];break}}null==e||e.focus()};return n.createElement("div",{className:(0,r.Z)("tabs-container",s)},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":l},N)},f.map((({value:t,label:e,attributes:a})=>n.createElement("li",u({role:"tab",tabIndex:P===t?0:-1,"aria-selected":P===t,key:t,ref:t=>T.push(t),onKeyDown:R,onFocus:I,onClick:I},a,{className:(0,r.Z)("tabs__item",m,null==a?void 0:a.className,{"tabs__item--active":P===t})}),null!=e?e:t)))),a?(0,n.cloneElement)(g.filter((t=>t.props.value===P))[0],{className:"margin-top--md"}):n.createElement("div",{className:"margin-top--md"},g.map(((t,e)=>(0,n.cloneElement)(t,{key:e,hidden:t.props.value!==P})))))}function d(t){const e=(0,l.Z)();return n.createElement(c,u({key:String(e)},t))}}}]);