"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[20187],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>d});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),u=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(o.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,o=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),m=u(n),d=r,g=m["".concat(o,".").concat(d)]||m[d]||c[d]||s;return n?a.createElement(g,l(l({ref:t},p),{},{components:n})):a.createElement(g,l({ref:t},p))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,l=new Array(s);l[0]=m;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var u=2;u<s;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3914:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>u,default:()=>g,frontMatter:()=>o,metadata:()=>p,toc:()=>m});n(67294);var a=n(3905),r=n(67709),s=n(7626);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l.apply(this,arguments)}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const o={id:"cloud-aws-sqs",title:"Amazon SQS"},u=void 0,p={unversionedId:"integrations/plugin-packs/procedures/cloud-aws-sqs",id:"integrations/plugin-packs/procedures/cloud-aws-sqs",title:"Amazon SQS",description:"Vue d'ensemble",source:"@site/i18n/fr/docusaurus-plugin-content-docs-pp/current/integrations/plugin-packs/procedures/cloud-aws-sqs.md",sourceDirName:"integrations/plugin-packs/procedures",slug:"/integrations/plugin-packs/procedures/cloud-aws-sqs",permalink:"/centreon-documentation/pr-preview/pr-2832/fr/pp/integrations/plugin-packs/procedures/cloud-aws-sqs",draft:!1,tags:[],version:"current",frontMatter:{id:"cloud-aws-sqs",title:"Amazon SQS"},sidebar:"pp",previous:{title:"Amazon SNS",permalink:"/centreon-documentation/pr-preview/pr-2832/fr/pp/integrations/plugin-packs/procedures/cloud-aws-sns"},next:{title:"AWS Billing",permalink:"/centreon-documentation/pr-preview/pr-2832/fr/pp/integrations/plugin-packs/procedures/cloud-aws-billing"}},c={},m=[{value:"Vue d&#39;ensemble",id:"vue-densemble",level:2},{value:"Contenu du Plugin-Pack",id:"contenu-du-plugin-pack",level:2},{value:"Objets supervis\xe9s",id:"objets-supervis\xe9s",level:3},{value:"R\xe8gles de d\xe9couvertes",id:"r\xe8gles-de-d\xe9couvertes",level:3},{value:"M\xe9triques collect\xe9es",id:"m\xe9triques-collect\xe9es",level:3},{value:"Pr\xe9requis",id:"pr\xe9requis",level:2},{value:"Privil\xe8ges AWS",id:"privil\xe8ges-aws",level:3},{value:"D\xe9pendances du Plugin",id:"d\xe9pendances-du-plugin",level:3},{value:"Installation",id:"installation",level:2},{value:"Configuration",id:"configuration",level:2},{value:"H\xf4te",id:"h\xf4te",level:3},{value:"Services",id:"services",level:3},{value:"FAQ",id:"faq",level:2},{value:"Comment puis-je tester le Plugin et que signifient les options des commandes ?",id:"comment-puis-je-tester-le-plugin-et-que-signifient-les-options-des-commandes-",level:3},{value:"J&#39;obtiens le message d&#39;erreur suivant:",id:"jobtiens-le-message-derreur-suivant",level:4},{value:"<code>UNKNOWN: No metrics. Check your options or use --zeroed option to set 0 on undefined values</code>",id:"unknown-no-metrics-check-your-options-or-use---zeroed-option-to-set-0-on-undefined-values",level:4},{value:"<code>UNKNOWN: Command error:  - An error occurred (AuthFailure) [...]</code>",id:"unknown-command-error----an-error-occurred-authfailure-",level:4},{value:"<code>UNKNOWN: 500 Can&#39;t connect to monitoring.eu-west-1.amazonaws.com:443 |</code>",id:"unknown-500-cant-connect-to-monitoringeu-west-1amazonawscom443-",level:4}],d={toc:m};function g(e){var{components:t}=e,n=i(e,["components"]);return(0,a.kt)("wrapper",l({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",l({},{id:"vue-densemble"}),"Vue d'ensemble"),(0,a.kt)("p",null,"La solution Amazon Simple Queue Service (SQS) est un service de file d'attente de messagerie enti\xe8rement g\xe9r\xe9\nqui vous permet de d\xe9coupler et mettre \xe0 l'\xe9chelle des microservices, des syst\xe8mes d\xe9centralis\xe9s et des applications sans serveur."),(0,a.kt)("p",null,"Les m\xe9triques Amazon SQS rapport\xe9es dans CloudWatch ne sont pas factur\xe9es. Elles sont fournies dans le cadre du service Amazon SQS."),(0,a.kt)("p",null,"Le Plugin Centreon Amazon SQS s'appuie sur les APIs Amazon Cloudwatch pour la collecte des donn\xe9es et m\xe9triques relatives au service SQS. "),(0,a.kt)("h2",l({},{id:"contenu-du-plugin-pack"}),"Contenu du Plugin-Pack"),(0,a.kt)("h3",l({},{id:"objets-supervis\xe9s"}),"Objets supervis\xe9s"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},'SQS Message queues (les types "standard" et "FiFo" sont tout deux support\xe9es)')),(0,a.kt)("h3",l({},{id:"r\xe8gles-de-d\xe9couvertes"}),"R\xe8gles de d\xe9couvertes"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(s.Z,{value:"Services",label:"Services",mdxType:"TabItem"},(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",l({parentName:"tr"},{align:"left"}),"Rule name"),(0,a.kt)("th",l({parentName:"tr"},{align:"left"}),"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"Cloud-Aws-Sqs-Queues"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"Discover Amazon SQS queues and monitor their status and related metrics")))))),(0,a.kt)("h3",l({},{id:"m\xe9triques-collect\xe9es"}),"M\xe9triques collect\xe9es"),(0,a.kt)("p",null,"Plus de d\xe9tails sur les m\xe9triques pr\xe9sent\xe9es ci-apr\xe8s sont disponibles sur la documentation officielle du service SQS:\n",(0,a.kt)("a",l({parentName:"p"},{href:"https://docs.aws.amazon.com/fr_fr/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-monitoring-using-cloudwatch"}),"https://docs.aws.amazon.com/fr_fr/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-monitoring-using-cloudwatch")),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(s.Z,{value:"Sqs-Queues",label:"Sqs-Queues",mdxType:"TabItem"},(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",l({parentName:"tr"},{align:"left"}),"Metric name"),(0,a.kt)("th",l({parentName:"tr"},{align:"left"}),"Description"),(0,a.kt)("th",l({parentName:"tr"},{align:"left"}),"Unit"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"sqs.queue.messages.oldest.seconds"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"The approximate age of the oldest non-deleted message in the queue."),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"s")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"sqs.queue.messages.delayed.count"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"The number of messages in the queue that are delayed and not available for reading immediately."),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"sqs.queue.messages.notvisible.count"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"The number of messages that are in flight."),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"sqs.queue.messages.visible.count"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"The number of messages available for retrieval from the queue."),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"sqs.queue.messages.empty.count"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"The number of ReceiveMessage API calls that did not return a message."),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"sqs.queue.messages.deleted.count"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"The number of messages deleted from the queue."),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"sqs.queue.messages.received.count"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"The number of messages returned by calls to the ReceiveMessage action."),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"sqs.queue.messages.sent.count"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"The number of messages added to a queue."),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}))))))),(0,a.kt)("h2",l({},{id:"pr\xe9requis"}),"Pr\xe9requis"),(0,a.kt)("h3",l({},{id:"privil\xe8ges-aws"}),"Privil\xe8ges AWS"),(0,a.kt)("p",null,"Un compte de service (paire d'identifiants ",(0,a.kt)("em",{parentName:"p"},"access/secret keys"),") est n\xe9cessaire afin de pouvoir superviser les resources Amazon SQS.\nCe compte doit b\xe9n\xe9ficier des privil\xe8ges suivants:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",l({parentName:"tr"},{align:"left"}),"AWS Privilege"),(0,a.kt)("th",l({parentName:"tr"},{align:"left"}),"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"sqs:ListQueues"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"Returns a list of your queues in the current region.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"cloudwatch:listMetrics"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"List all metrics from Cloudwatch AWS/VPN namespace")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"cloudwatch:getMetricStatistics"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"Get metrics values from Cloudwatch AWS/VPN namespace")))),(0,a.kt)("h3",l({},{id:"d\xe9pendances-du-plugin"}),"D\xe9pendances du Plugin"),(0,a.kt)("p",null,"Afin de r\xe9cup\xe9rer les informations n\xe9cessaires via les APIs AWS, il est possible d'utiliser soit le binaire ",(0,a.kt)("em",{parentName:"p"},"awscli"),", soit le SDK perl Paws. Le SDK est recommand\xe9 car plus performant. "),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Attention")," il n'est pas possible d'utiliser perl-Paws si la connexion s'effectue au travers d'un proxy."),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(s.Z,{value:"perl-Paws-installation",label:"perl-Paws-installation",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"yum install perl-Paws\n"))),(0,a.kt)(s.Z,{value:"aws-cli-installation",label:"aws-cli-installation",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"yum install awscli\n")))),(0,a.kt)("h2",l({},{id:"installation"}),"Installation"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(s.Z,{value:"Online License",label:"Online License",mdxType:"TabItem"},(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Installer le Plugin sur tous les collecteurs Centreon devant superviser des ressources Amazon SQS:")),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"yum install centreon-plugin-Cloud-Aws-Sqs-Api\n")),(0,a.kt)("ol",l({},{start:2}),(0,a.kt)("li",{parentName:"ol"},"Sur l'interface Web de Centreon, installer le Plugin-Pack ",(0,a.kt)("em",{parentName:"li"},"Amazon SQS"),' depuis la page "Configuration > Plugin packs > Manager"'))),(0,a.kt)(s.Z,{value:"Offline License",label:"Offline License",mdxType:"TabItem"},(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Installer le Plugin sur tous les collecteurs Centreon devant superviser des ressources Amazon SQS:")),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"yum install centreon-plugin-Cloud-Aws-Sqs-Api\n")),(0,a.kt)("p",null,"2.Sur le serveur Central Centreon, installer le RPM du Plugin-Pack ",(0,a.kt)("em",{parentName:"p"},"Amazon SQS"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"yum install centreon-pack-cloud-aws-sqs.noarch\n")),(0,a.kt)("ol",l({},{start:3}),(0,a.kt)("li",{parentName:"ol"},"Sur l'interface Web de Centreon, installer le Plugin-Pack ",(0,a.kt)("em",{parentName:"li"},"Amazon SQS"),' depuis la page "Configuration > Plugin packs > Manager"')))),(0,a.kt)("h2",l({},{id:"configuration"}),"Configuration"),(0,a.kt)("h3",l({},{id:"h\xf4te"}),"H\xf4te"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Ajoutez un H\xf4te \xe0 Centreon et appliquez-lui le Mod\xe8le d'H\xf4te ",(0,a.kt)("em",{parentName:"li"},"Cloud-Aws-Sqs-custom"),"."),(0,a.kt)("li",{parentName:"ul"},"Une fois le mod\xe8le appliqu\xe9, les Macros ci-dessous indiqu\xe9es comme requises (",(0,a.kt)("em",{parentName:"li"},"Mandatory"),") doivent \xeatre renseign\xe9es:")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",l({parentName:"tr"},{align:"left"}),"Mandatory"),(0,a.kt)("th",l({parentName:"tr"},{align:"left"}),"Nom"),(0,a.kt)("th",l({parentName:"tr"},{align:"left"}),"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"X"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"AWSSECRETKEY"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"AWS Secret key of your IAM role. Password checkbox must be checked")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"X"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"AWSACESSKEY"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"AWS Access key of your IAM role. Password checkbox must be checked")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"X"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"AWSREGION"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"Region where the instance is running")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"X"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"AWSCUSTOMMODE"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"Custom mode to get metrics, 'awscli' is the default, you can also use 'paws' perl library")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:"left"})),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"PROXYURL"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"Configure proxy URL")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:"left"})),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"EXTRAOPTIONS"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"Any extra option you may want to add to every command","_","line (eg. a --verbose flag)")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:"left"})),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"DUMMYSTATUS"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"Host state. Default is OK, do not modify it unless you know what you are doing")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",l({parentName:"tr"},{align:"left"})),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"DUMMYOUTPUT"),(0,a.kt)("td",l({parentName:"tr"},{align:"left"}),"Host check output. Default is 'This is a dummy check'. Customize it with your own if needed")))),(0,a.kt)("h3",l({},{id:"services"}),"Services"),(0,a.kt)("p",null,'Une fois l\'h\xf4te cr\xe9\xe9 et sauvegard\xe9 dans Centreon, un service "Sqs-Queues" est cr\xe9\xe9 et associ\xe9 \xe0 l\'H\xf4te.\nCe service est "g\xe9n\xe9rique"; afin que celui-ci puisse commencer \xe0 remonter des informations, il vous sera n\xe9cessaire de\nsp\xe9cifier le nom de la ',(0,a.kt)("em",{parentName:"p"},"queue")," SQS \xe0 superviser sur la Macro de Service ",(0,a.kt)("strong",{parentName:"p"},"QUEUENAME")," (le nom du Service peut \xe9galement \xeatre modifi\xe9 en cons\xe9quence).\nCe service peut ensuite \xeatre dupliqu\xe9 et la valeur de la Macro ajust\xe9e pour chaque ",(0,a.kt)("em",{parentName:"p"},"queue")," \xe0 superviser."),(0,a.kt)("h2",l({},{id:"faq"}),"FAQ"),(0,a.kt)("h3",l({},{id:"comment-puis-je-tester-le-plugin-et-que-signifient-les-options-des-commandes-"}),"Comment puis-je tester le Plugin et que signifient les options des commandes ?"),(0,a.kt)("p",null,"Une fois le Plugin install\xe9, vous pouvez tester celui-ci directement en ligne de commande depuis votre collecteur Centreon en vous connectant\navec l'utilisateur ",(0,a.kt)("em",{parentName:"p"},"centreon-engine"),"\n(certaines options comme ",(0,a.kt)("inlineCode",{parentName:"p"},"--proxyurl")," doivent \xeatre ajust\xe9es en fonction du contexte):"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins/centreon_aws_sqs_api.pl \\\n    --plugin=cloud::aws::sqs::plugin \\\n    --mode=queues \\\n    --custommode=awscli \\\n    --aws-secret-key='*******************' \\\n    --aws-access-key='**********' \\\n    --region='eu-west-1' \\\n    --proxyurl='http://myproxy.mycompany.org:8080'\n    --statistic=average \\\n    --timeframe='600' \\\n    --period='60' \\\n    --queue-name='my_sqs_queue_1' \\\n    --filter-metric='NumberOfMessagesSent|NumberOfMessagesReceived' \\\n    --critical-messages-sent=1: \\\n    --critical-messages-received=1: \\\n    --verbose\n")),(0,a.kt)("p",null,"La commande devrait retourner un message de sortie de la forme ci-dessous:"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"OK: 'my_sqs_queue_1' Statistic 'Average' number of messages sent: 45, number of \nmessages received: 32 | 'my_sqs_queue_1~average#sqs.queue.messages.sent.count'=45;;1:;; 'my_sqs_queue_1~average#sqs.queue.messages.received.count'=32;;1:;;\nSQS Queue'my_sqs_queue_1'\n    Statistic 'Average' number of messages sent: 45, number of messages received: 32  \n")),(0,a.kt)("p",null,"La commande ci-dessus collecte les m\xe9triques de la 'queue' nomm\xe9e ",(0,a.kt)("em",{parentName:"p"},"my_sqs_queue_1")," (",(0,a.kt)("inlineCode",{parentName:"p"},"--mode=queues --queue-name='my_sqs_queue_1'"),").\nCette ressource SQS est h\xe9berg\xe9e dans la r\xe9gion AWS ",(0,a.kt)("em",{parentName:"p"},"eu-west-1")," (",(0,a.kt)("inlineCode",{parentName:"p"},"--region='eu-west-1'"),"). La connexion \xe0 l'API Cloudwatch s'effectue\n\xe0 l'aide des identifiants ",(0,a.kt)("em",{parentName:"p"},"aws-secret-key")," et ",(0,a.kt)("em",{parentName:"p"},"aws-access-key")," pr\xe9alablement configur\xe9s sur la console AWS (",(0,a.kt)("inlineCode",{parentName:"p"},"--aws-secret-key='****' --aws-access-key='****'"),").\nLes m\xe9triques retourn\xe9es seront une moyenne de valeurs (",(0,a.kt)("inlineCode",{parentName:"p"},"--statistic='average'"),") sur un intervalle de 10 minutes / 600 secondes  (",(0,a.kt)("inlineCode",{parentName:"p"},"--timeframe='600'"),")\navec un point par minute / 60 secondes (",(0,a.kt)("inlineCode",{parentName:"p"},"--period='60'"),").\nDans l'exemple ci-dessus, on choisit de ne r\xe9cup\xe9rer que les statistiques sur le nombre de messages ",(0,a.kt)("em",{parentName:"p"},"sent")," et ",(0,a.kt)("em",{parentName:"p"},"received")," (",(0,a.kt)("inlineCode",{parentName:"p"},"--filter-metric='NumberOfMessagesSent|NumberOfMessagesReceived'"),")."),(0,a.kt)("p",null,"Une alarme CRITICAL sera d\xe9clench\xe9e si aucun message (",(0,a.kt)("em",{parentName:"p"},"nombre inf\xe9rieur \xe0 1"),") n'a \xe9t\xe9 envoy\xe9 ou re\xe7u durant la p\xe9riode de temps sur lesquelles sont calcul\xe9es les valeurs\n(",(0,a.kt)("inlineCode",{parentName:"p"},"--critical-messages-sent=1: --critical-messages-received=1:"),")."),(0,a.kt)("p",null,"La liste de toutes les m\xe9triques, seuils associ\xe9s et options compl\xe9mentaires peut \xeatre affich\xe9e en ajoutant le param\xe8tre ",(0,a.kt)("inlineCode",{parentName:"p"},"--help")," \xe0 la commande:"),(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins/centreon_aws_sqs_api.pl --plugin=cloud::aws::sqs::plugin --mode=queues --help\n")),(0,a.kt)("h4",l({},{id:"jobtiens-le-message-derreur-suivant"}),"J'obtiens le message d'erreur suivant:"),(0,a.kt)("h4",l({},{id:"unknown-no-metrics-check-your-options-or-use---zeroed-option-to-set-0-on-undefined-values"}),(0,a.kt)("inlineCode",{parentName:"h4"},"UNKNOWN: No metrics. Check your options or use --zeroed option to set 0 on undefined values")),(0,a.kt)("p",null,"Lors du d\xe9ploiement de mes contr\xf4les, j'obtiens le message suivant 'UNKNOWN: No metrics. Check your options or use --zeroed option to set 0 on undefined values'. "),(0,a.kt)("p",null,"Cela signifie qu'Amazon Cloudwatch n'a pas consolid\xe9 de donn\xe9es sur la p\xe9riode."),(0,a.kt)("p",null,"Vous pouvez ajouter ",(0,a.kt)("inlineCode",{parentName:"p"},"--zeroed")," \xe0 la macro ",(0,a.kt)("strong",{parentName:"p"},"EXTRAOPTIONS")," du ",(0,a.kt)("em",{parentName:"p"},"Service")," en question afin de forcer le stockage d'un 0 et ainsi \xe9viter un statut UNKNOWN."),(0,a.kt)("h4",l({},{id:"unknown-command-error----an-error-occurred-authfailure-"}),(0,a.kt)("inlineCode",{parentName:"h4"},"UNKNOWN: Command error:  - An error occurred (AuthFailure) [...]")),(0,a.kt)("p",null,"Cette erreur signifie que le r\xf4le IAM associ\xe9 au combo access-key/secret-key n'a pas les droits suffisants pour r\xe9aliser une op\xe9ration donn\xe9e."),(0,a.kt)("h4",l({},{id:"unknown-500-cant-connect-to-monitoringeu-west-1amazonawscom443-"}),(0,a.kt)("inlineCode",{parentName:"h4"},"UNKNOWN: 500 Can't connect to monitoring.eu-west-1.amazonaws.com:443 |")),(0,a.kt)("p",null,"Lors du d\xe9ploiement de mes contr\xf4les, j'obtiens le message suivant: ",(0,a.kt)("inlineCode",{parentName:"p"},"UNKNOWN: 500 Can't connect to monitoring.eu-west-1.amazonaws.com:443 |"),"."),(0,a.kt)("p",null,"Cela signifie que Centreon n'a pas r\xe9ussi \xe0 se connecter \xe0 l'API AWS Cloudwatch."),(0,a.kt)("p",null,"Si l'utilisation d'un proxy est requise pour les connexions HTTP depuis le collecteur Centreon,\nil est n\xe9cessaire de le pr\xe9ciser dans la commande en utilisant l'option ",(0,a.kt)("inlineCode",{parentName:"p"},"--proxyurl='http://proxy.mycompany.com:8080'"),"."))}g.isMDXComponent=!0},7626:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(67294),r=n(86010);const s="tabItem_Ymn6";function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},l.apply(this,arguments)}function i({children:e,hidden:t,className:n}){return a.createElement("div",l({role:"tabpanel",className:(0,r.Z)(s,n)},{hidden:t}),e)}},67709:(e,t,n)=>{n.d(t,{Z:()=>d});var a=n(67294),r=n(86010),s=n(90980),l=n(35715),i=n(8854),o=n(8241);const u="tabList__CuJ",p="tabItem_LNqP";function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c.apply(this,arguments)}function m(e){var t;const{lazy:n,block:s,defaultValue:m,values:d,groupId:g,className:k}=e,f=a.Children.map(e.children,(e=>{if((0,a.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),v=null!=d?d:f.map((({props:{value:e,label:t,attributes:n}})=>({value:e,label:t,attributes:n}))),N=(0,l.l)(v,((e,t)=>e.value===t.value));if(N.length>0)throw new Error(`Docusaurus error: Duplicate values "${N.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);var b;const h=null===m?m:null!==(b=null!=m?m:null===(t=f.find((e=>e.props.default)))||void 0===t?void 0:t.props.value)&&void 0!==b?b:f[0].props.value;if(null!==h&&!v.some((e=>e.value===h)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${h}" but none of its children has the corresponding value. Available values are: ${v.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:y,setTabGroupChoices:S}=(0,i.U)(),[q,w]=(0,a.useState)(h),C=[],{blockElementScrollPositionUntilNextRender:O}=(0,o.o5)();if(null!=g){const e=y[g];null!=e&&e!==q&&v.some((t=>t.value===e))&&w(e)}const A=e=>{const t=e.currentTarget,n=C.indexOf(t),a=v[n].value;a!==q&&(O(t),w(a),null!=g&&S(g,String(a)))},P=e=>{let t=null;switch(e.key){case"ArrowRight":{const a=C.indexOf(e.currentTarget)+1;var n;t=null!==(n=C[a])&&void 0!==n?n:C[0];break}case"ArrowLeft":{const n=C.indexOf(e.currentTarget)-1;var a;t=null!==(a=C[n])&&void 0!==a?a:C[C.length-1];break}}null==t||t.focus()};return a.createElement("div",{className:(0,r.Z)("tabs-container",u)},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":s},k)},v.map((({value:e,label:t,attributes:n})=>a.createElement("li",c({role:"tab",tabIndex:q===e?0:-1,"aria-selected":q===e,key:e,ref:e=>C.push(e),onKeyDown:P,onFocus:A,onClick:A},n,{className:(0,r.Z)("tabs__item",p,null==n?void 0:n.className,{"tabs__item--active":q===e})}),null!=t?t:e)))),n?(0,a.cloneElement)(f.filter((e=>e.props.value===q))[0],{className:"margin-top--md"}):a.createElement("div",{className:"margin-top--md"},f.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==q})))))}function d(e){const t=(0,s.Z)();return a.createElement(m,c({key:String(t)},e))}}}]);