"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[16870],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>d});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=n.createContext({}),p=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(o.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=p(a),d=r,k=c["".concat(o,".").concat(d)]||c[d]||m[d]||i;return a?n.createElement(k,l(l({ref:t},u),{},{components:a})):n.createElement(k,l({ref:t},u))}));function d(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=c;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:r,l[1]=s;for(var p=2;p<i;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},13625:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>m,contentTitle:()=>p,default:()=>k,frontMatter:()=>o,metadata:()=>u,toc:()=>c});a(67294);var n=a(3905),r=a(67709),i=a(7626);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l.apply(this,arguments)}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const o={id:"cloud-azure-management-insightsmetrics",title:"Azure InsightsMetrics"},p=void 0,u={unversionedId:"integrations/plugin-packs/procedures/cloud-azure-management-insightsmetrics",id:"integrations/plugin-packs/procedures/cloud-azure-management-insightsmetrics",title:"Azure InsightsMetrics",description:"Vue d'ensemble",source:"@site/i18n/fr/docusaurus-plugin-content-docs-pp/current/integrations/plugin-packs/procedures/cloud-azure-management-insightsmetrics.md",sourceDirName:"integrations/plugin-packs/procedures",slug:"/integrations/plugin-packs/procedures/cloud-azure-management-insightsmetrics",permalink:"/centreon-documentation/pr-preview/pr-2832/fr/pp/integrations/plugin-packs/procedures/cloud-azure-management-insightsmetrics",draft:!1,tags:[],version:"current",frontMatter:{id:"cloud-azure-management-insightsmetrics",title:"Azure InsightsMetrics"},sidebar:"pp",previous:{title:"Azure Front Door",permalink:"/centreon-documentation/pr-preview/pr-2832/fr/pp/integrations/plugin-packs/procedures/cloud-azure-network-frontdoor"},next:{title:"Azure Key Vault",permalink:"/centreon-documentation/pr-preview/pr-2832/fr/pp/integrations/plugin-packs/procedures/cloud-azure-security-keyvault"}},m={},c=[{value:"Vue d&#39;ensemble",id:"vue-densemble",level:2},{value:"Contenu du Pack",id:"contenu-du-pack",level:2},{value:"Objets supervis\xe9s",id:"objets-supervis\xe9s",level:3},{value:"M\xe9triques &amp; statuts collect\xe9s",id:"m\xe9triques--statuts-collect\xe9s",level:3},{value:"R\xe8gles de d\xe9couverte",id:"r\xe8gles-de-d\xe9couverte",level:3},{value:"Pr\xe9requis",id:"pr\xe9requis",level:2},{value:"Identifiants",id:"identifiants",level:3},{value:"Installation",id:"installation",level:2},{value:"Configuration",id:"configuration",level:2},{value:"H\xf4te",id:"h\xf4te",level:3},{value:"FAQ",id:"faq",level:2},{value:"Comment puis-je tester le Plugin et que signifient les options des commandes ?",id:"comment-puis-je-tester-le-plugin-et-que-signifient-les-options-des-commandes-",level:3}],d={toc:c};function k(e){var{components:t}=e,a=s(e,["components"]);return(0,n.kt)("wrapper",l({},d,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",l({},{id:"vue-densemble"}),"Vue d'ensemble"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Ce Pack est fourni \xe0 titre exp\xe9rimental (version 2.x.x).")),(0,n.kt)("p",null,"Le Pack Centreon ",(0,n.kt)("em",{parentName:"p"},"Azure InsightsMetrics")," permet de superviser des m\xe9triques additionelles relatives aux resources Azure. Pour cela,\nelle se base sur l'API ",(0,n.kt)("em",{parentName:"p"},"LogAnalytics")," d'Azure et ex\xe9cutes des requ\xeates KustoQL sur la base de donn\xe9es InsightsMetrics.\nCe Pack permet par exemple de r\xe9cup\xe9rer et de superviser les indicateurs syst\xe8me (CPU, m\xe9moire, disques...) de Virtual Machines directement sur Azure."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Le Plugin associ\xe9 est uniquement compatible avec le ",(0,n.kt)("em",{parentName:"p"},"custom-mode")," 'api'.")),(0,n.kt)("h2",l({},{id:"contenu-du-pack"}),"Contenu du Pack"),(0,n.kt)("h3",l({},{id:"objets-supervis\xe9s"}),"Objets supervis\xe9s"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Azure Virtual Machines",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"CPU"),(0,n.kt)("li",{parentName:"ul"},"Memory"),(0,n.kt)("li",{parentName:"ul"},"Logical-Disks")))),(0,n.kt)("h3",l({},{id:"m\xe9triques--statuts-collect\xe9s"}),"M\xe9triques & statuts collect\xe9s"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(i.Z,{value:"Cpu",label:"Cpu",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Metric Name"),(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"instance"),"#azure.insights.cpu.average.utilization.percentage"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Average utilization percentage"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"%")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"instance","~","ID"),"#azure.insights.cpu.core.utilization.percentage"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Current utilization per core"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"%"))))),(0,n.kt)(i.Z,{value:"Logical-Disks",label:"Logical-Disks",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Metric Name"),(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"instance","~","mount_point"),"#azure.insights.logicaldisk.used.bytes"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Logical Disk current usage"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"B")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"instance","~","mount_point"),"#azure.insights.logicaldisk.used.percentage"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Logical Disk current usage percentage"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"%")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"instance","~","mount_point"),"#azure.insights.logicaldisk.free.percentage"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Logical Disk current free percentage"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"%")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"instance","~","mount_point"),"#azure.insights.logicaldisks.io.readspersecond"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Logical Disk current IO/s reads rate"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"count/s")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"instance","~","mount_point"),"#azure.insights.logicaldisks.io.readbytespersecond"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Logical Disk current IO B/s reads rate"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"B/s")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"instance","~","mount_point"),"#azure.insights.logicaldisks.io.writespersecond"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Logical Disk current IO writes rate"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"count/s")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"instance","~","mount_point"),"#azure.insights.logicaldisks.io.transferspersecond"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Logical Disk current IO transfers rate"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"count/s"))))),(0,n.kt)(i.Z,{value:"Memory",label:"Memory",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Metric Name"),(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"instance"),"#azure.insights.memory.usage.bytes"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Current memory usage"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"B")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"instance"),"#azure.insights.memory.usage.percentage"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Current memory usage percentage"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"%")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"instance"),"#azure.insights.memory.usage.percentage"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Current memory usage percentage"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"%")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"instance"),"#azure.insights.memory.available.percentage"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Current memory available percentage"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"%")))))),(0,n.kt)("h3",l({},{id:"r\xe8gles-de-d\xe9couverte"}),"R\xe8gles de d\xe9couverte"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(i.Z,{value:"Services",label:"Services",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Rule name"),(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Cloud-Azure-Management-InsightsMetrics-Api-VirtualMachine-Logical-Disks-Name"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Discover logical disks associated to Azure Virtual Machines")))))),(0,n.kt)("h2",l({},{id:"pr\xe9requis"}),"Pr\xe9requis"),(0,n.kt)("h3",l({},{id:"identifiants"}),"Identifiants"),(0,n.kt)("p",null,"Le Plugin associ\xe9 au Pack Centreon ",(0,n.kt)("em",{parentName:"p"},"Azure InsightsMetrics")," est uniquement compatible avec le ",(0,n.kt)("em",{parentName:"p"},"custom-mode")," 'api'."),(0,n.kt)("p",null,"R\xe9cup\xe9rez les informations d'identification associ\xe9es en suivant la proc\xe9dure ci-dessous (en anglais)\net notez celles-ci en lieu s\xfbr. Elles seront en effet indispensables lors de la configuration des ressources\ndans Centreon."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Create an ",(0,n.kt)("em",{parentName:"p"},"application")," in Azure Active Directory:"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Log in to your Azure account."),(0,n.kt)("li",{parentName:"ul"},"Select ",(0,n.kt)("em",{parentName:"li"},"Azure Active directory")," in the left sidebar."),(0,n.kt)("li",{parentName:"ul"},"Click on ",(0,n.kt)("em",{parentName:"li"},"App registrations"),"."),(0,n.kt)("li",{parentName:"ul"},"Click on ",(0,n.kt)("em",{parentName:"li"},"+ Add"),"."),(0,n.kt)("li",{parentName:"ul"},"Enter Centreon as the application name (or any name of your choice), select application type(api) and sign-on-url."),(0,n.kt)("li",{parentName:"ul"},"Click on the ",(0,n.kt)("em",{parentName:"li"},"Create")," button."))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Get ",(0,n.kt)("em",{parentName:"p"},"Subscription ID")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Log in to your Azure account."),(0,n.kt)("li",{parentName:"ul"},"Select ",(0,n.kt)("em",{parentName:"li"},"Subscriptions")," in the left sidebar."),(0,n.kt)("li",{parentName:"ul"},"Select whichever subscription is needed."),(0,n.kt)("li",{parentName:"ul"},"Click on ",(0,n.kt)("em",{parentName:"li"},"Overview"),"."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Copy the Subscription ID.")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Get ",(0,n.kt)("em",{parentName:"p"},"Tenant ID")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Log in to your Azure account."),(0,n.kt)("li",{parentName:"ul"},"Select ",(0,n.kt)("em",{parentName:"li"},"Azure Active directory")," in the left sidebar."),(0,n.kt)("li",{parentName:"ul"},"Click on ",(0,n.kt)("em",{parentName:"li"},"Properties"),"."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Copy the directory ID.")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Get ",(0,n.kt)("em",{parentName:"p"},"Client ID")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Log in to your Azure account."),(0,n.kt)("li",{parentName:"ul"},"Select ",(0,n.kt)("em",{parentName:"li"},"Azure Active directory")," in the left sidebar."),(0,n.kt)("li",{parentName:"ul"},"Click on ",(0,n.kt)("em",{parentName:"li"},"Enterprise applications"),"."),(0,n.kt)("li",{parentName:"ul"},"Click on ",(0,n.kt)("em",{parentName:"li"},"All applications"),"."),(0,n.kt)("li",{parentName:"ul"},"Select the application previously created."),(0,n.kt)("li",{parentName:"ul"},"Click on ",(0,n.kt)("em",{parentName:"li"},"Properties"),"."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Copy the Application ID.")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Get ",(0,n.kt)("em",{parentName:"p"},"Client secret")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Log in to your Azure account."),(0,n.kt)("li",{parentName:"ul"},"Select ",(0,n.kt)("em",{parentName:"li"},"Azure Active directory")," in the left sidebar."),(0,n.kt)("li",{parentName:"ul"},"Click on ",(0,n.kt)("em",{parentName:"li"},"App registrations"),"."),(0,n.kt)("li",{parentName:"ul"},"Select the application previously created."),(0,n.kt)("li",{parentName:"ul"},"Click on ",(0,n.kt)("em",{parentName:"li"},"All settings"),"."),(0,n.kt)("li",{parentName:"ul"},"Click on ",(0,n.kt)("em",{parentName:"li"},"Keys"),"."),(0,n.kt)("li",{parentName:"ul"},"Enter the key description and select the duration."),(0,n.kt)("li",{parentName:"ul"},"Click on ",(0,n.kt)("em",{parentName:"li"},"Save"),"."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Copy and store the key value. You won't be able to retrieve it after you leave this page."))))),(0,n.kt)("h2",l({},{id:"installation"}),"Installation"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(i.Z,{value:"Online License",label:"Online License",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Installer le Plugin sur tous les collecteurs Centreon devant superviser des resources ",(0,n.kt)("em",{parentName:"li"},"via")," InsightsMetrics:")),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"yum install centreon-plugin-Cloud-Azure-Management-InsightsMetrics-Api\n")),(0,n.kt)("ol",l({},{start:2}),(0,n.kt)("li",{parentName:"ol"},"Sur l'interface Web Centreon, installer le Pack ",(0,n.kt)("em",{parentName:"li"},"Azure InsightsMetrics")," depuis la page ",(0,n.kt)("strong",{parentName:"li"},"Configuration > Plugin packs > Manager"),"."))),(0,n.kt)(i.Z,{value:"Offline License",label:"Offline License",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Installer le Plugin sur tous les collecteurs Centreon devant superviser des resources ",(0,n.kt)("em",{parentName:"li"},"via")," InsightsMetrics:")),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"yum install centreon-plugin-Cloud-Azure-Management-InsightsMetrics-Api\n")),(0,n.kt)("ol",l({},{start:2}),(0,n.kt)("li",{parentName:"ol"},"Sur le serveur Central Centreon, installer le RPM du Pack ",(0,n.kt)("em",{parentName:"li"},"Azure InsightsMetrics"),":")),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"yum install centreon-pack-cloud-azure-management-insightsmetrics.noarch\n")),(0,n.kt)("ol",l({},{start:3}),(0,n.kt)("li",{parentName:"ol"},"Sur l'interface Web Centreon, installer le Pack ",(0,n.kt)("em",{parentName:"li"},"Azure InsightsMetrics")," depuis la page ",(0,n.kt)("strong",{parentName:"li"},"Configuration > Plugin packs > Gestionnaire"),".")))),(0,n.kt)("h2",l({},{id:"configuration"}),"Configuration"),(0,n.kt)("h3",l({},{id:"h\xf4te"}),"H\xf4te"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Ajoutez un H\xf4te \xe0 Centreon, remplissez le champ ",(0,n.kt)("em",{parentName:"li"},"Adresse IP/DNS")," avec l'adresse 127.0.0.1\net appliquez-lui le Mod\xe8le d'H\xf4te ",(0,n.kt)("em",{parentName:"li"},"Cloud-Azure-Management-InsightsMetrics-XXX-custom")," appropri\xe9 au type de ressource \xe0 superviser\n(par exemple ",(0,n.kt)("em",{parentName:"li"},"Cloud-Azure-Management-InsightsMetrics-VirtualMachine-custom")," pour une resource Azure VM)."),(0,n.kt)("li",{parentName:"ul"},"Une fois le mod\xe8le appliqu\xe9, les Macros ci-dessous indiqu\xe9es comme requises (",(0,n.kt)("em",{parentName:"li"},"Mandatory"),")\ndoivent \xeatre renseign\xe9es:")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Mandatory"),(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Nom"),(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"AZURECUSTOMMODE"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Custom mode 'api'")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"AZURELOGANALYTICSENDPOINT"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"LogAnalytics endpoint (default: ",(0,n.kt)("inlineCode",{parentName:"td"},"https://api.loganalytics.io"),")")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"AZURESUBSCRIPTION"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Subscription ID")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"AZUREWORKSPACEID"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"LogAnalytics workspace ID")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"AZURETENANT"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Tenant ID")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"AZURECLIENTID"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Client ID")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"AZURECLIENTSECRET"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Client secret")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"AZURERESOURCE"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"full ID of the resource to monitor")))),(0,n.kt)("h2",l({},{id:"faq"}),"FAQ"),(0,n.kt)("h3",l({},{id:"comment-puis-je-tester-le-plugin-et-que-signifient-les-options-des-commandes-"}),"Comment puis-je tester le Plugin et que signifient les options des commandes ?"),(0,n.kt)("p",null,"Une fois le Plugin install\xe9, vous pouvez tester celui-ci directement en ligne de\ncommande depuis votre collecteur Centreon en vous connectant avec l'utilisateur\n",(0,n.kt)("em",{parentName:"p"},"centreon-engine")," (",(0,n.kt)("inlineCode",{parentName:"p"},"#su - centreon-engine"),"):"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins//centreon_azure_management_insightsmetrics_api.pl \\\n    --plugin=cloud::azure::management::insightsmetrics::plugin \\\n    --mode=cpu --custommode='api' --management-endpoint='https://api.loganalytics.io' \\\n    --subscription='xxxxxxxxx' --tenant='xxxxxxx' --client-id='xxxxxxxx' --client-secret='xxxxxxxxxx' \\\n    --workspace-id='xxxxxxxxxxxxxxx' \\\n    --filter-resourceid='/subscriptions/XXXX/resourcegroups/my_resourcegroup1/providers/microsoft.compute/virtualmachines/my_vm1' \\\n    --warning-average-utilization-percentage='90' \\\n    --critical-average-utilization-percentage='95'\n")),(0,n.kt)("p",null,"La commande devrait retourner un message de sortie similaire \xe0: "),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"OK: 2 CPU(s) average utilization: 2.18 % - All CPUs are ok | 'azure.insights.cpu.average.utilization.percentage'=2.18%;0:90;0:95;0;100\n'1#azure.insights.cpu.core.utilization.percentage'=2.12%;;;0;100 '2#azure.insights.cpu.core.utilization.percentage'=2.25%;;;0;100\nComputer 'my_vm1'\n2 CPU(s) average utilization: 2.18 %\nCPU #1 usage : 2.12 %\nCPU #2 usage : 2.25 %\n")),(0,n.kt)("p",null,"La commande ci-dessus contr\xf4le le CPU d'une ressource Azure VM via les indicateurs InsightsMetrics\n(",(0,n.kt)("inlineCode",{parentName:"p"},"--plugin=cloud::azure::management::insightsmetrics::plugin --mode=cpu --custommode='api'"),")."),(0,n.kt)("p",null,"Les \xe9l\xe9ments r\xe9cup\xe9r\xe9s dans la partie pr\xe9requis pour l'authentification sont\najout\xe9s pour l'obtention d'un token (",(0,n.kt)("inlineCode",{parentName:"p"},"--subscription='xxxxxxxxx' --tenant='xxxxxxx' --client-id='xxxxxxxx' --client-secret='xxxxxxxxxx'"),"). "),(0,n.kt)("p",null,"Les options utilis\xe9es pour ce mode permettent de sp\xe9cifier le ",(0,n.kt)("em",{parentName:"p"},"workspace")," dans lequel\nsera lanc\xe9e la requ\xeate (",(0,n.kt)("inlineCode",{parentName:"p"},"--workspace-id='xxxxxxxxxxxxxxx'"),") ainsi que l'URL de l'API ",(0,n.kt)("em",{parentName:"p"},"LogAnalytics")," \xe0 utiliser (\n",(0,n.kt)("inlineCode",{parentName:"p"},"--management-endpoint='https://api.loganalytics.io'"),"). "),(0,n.kt)("p",null,"Dans cet exemple, une alarme de type WARNING sera d\xe9clench\xe9e si l'utilisation CPU moyenne est sup\xe9rieure \xe0 90% (",(0,n.kt)("inlineCode",{parentName:"p"},"--warning-average-utilization-percentage='90'"),");\nl'alarme sera de type CRITICAL au-del\xe0 de 95% d'utilisation (",(0,n.kt)("inlineCode",{parentName:"p"},"--critical-average-utilization-percentage='95'"),")."),(0,n.kt)("p",null,"La liste de toutes les options compl\xe9mentaires et leur signification peut \xeatre affich\xe9e en ajoutant le param\xe8tre ",(0,n.kt)("inlineCode",{parentName:"p"},"--help"),"\n\xe0 la commande:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins/centreon_azure_management_insightsmetrics_api.pl \\\n    --plugin=cloud::azure::management::insightsmetrics::plugin \\\n    --mode=cpu \\\n    --help\n")))}k.isMDXComponent=!0},7626:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(67294),r=a(86010);const i="tabItem_Ymn6";function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l.apply(this,arguments)}function s({children:e,hidden:t,className:a}){return n.createElement("div",l({role:"tabpanel",className:(0,r.Z)(i,a)},{hidden:t}),e)}},67709:(e,t,a)=>{a.d(t,{Z:()=>d});var n=a(67294),r=a(86010),i=a(90980),l=a(35715),s=a(8854),o=a(8241);const p="tabList__CuJ",u="tabItem_LNqP";function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m.apply(this,arguments)}function c(e){var t;const{lazy:a,block:i,defaultValue:c,values:d,groupId:k,className:g}=e,N=n.Children.map(e.children,(e=>{if((0,n.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),f=null!=d?d:N.map((({props:{value:e,label:t,attributes:a}})=>({value:e,label:t,attributes:a}))),b=(0,l.l)(f,((e,t)=>e.value===t.value));if(b.length>0)throw new Error(`Docusaurus error: Duplicate values "${b.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);var v;const h=null===c?c:null!==(v=null!=c?c:null===(t=N.find((e=>e.props.default)))||void 0===t?void 0:t.props.value)&&void 0!==v?v:N[0].props.value;if(null!==h&&!f.some((e=>e.value===h)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${h}" but none of its children has the corresponding value. Available values are: ${f.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:y,setTabGroupChoices:x}=(0,s.U)(),[C,z]=(0,n.useState)(h),A=[],{blockElementScrollPositionUntilNextRender:I}=(0,o.o5)();if(null!=k){const e=y[k];null!=e&&e!==C&&f.some((t=>t.value===e))&&z(e)}const O=e=>{const t=e.currentTarget,a=A.indexOf(t),n=f[a].value;n!==C&&(I(t),z(n),null!=k&&x(k,String(n)))},P=e=>{let t=null;switch(e.key){case"ArrowRight":{const n=A.indexOf(e.currentTarget)+1;var a;t=null!==(a=A[n])&&void 0!==a?a:A[0];break}case"ArrowLeft":{const a=A.indexOf(e.currentTarget)-1;var n;t=null!==(n=A[a])&&void 0!==n?n:A[A.length-1];break}}null==t||t.focus()};return n.createElement("div",{className:(0,r.Z)("tabs-container",p)},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":i},g)},f.map((({value:e,label:t,attributes:a})=>n.createElement("li",m({role:"tab",tabIndex:C===e?0:-1,"aria-selected":C===e,key:e,ref:e=>A.push(e),onKeyDown:P,onFocus:O,onClick:O},a,{className:(0,r.Z)("tabs__item",u,null==a?void 0:a.className,{"tabs__item--active":C===e})}),null!=t?t:e)))),a?(0,n.cloneElement)(N.filter((e=>e.props.value===C))[0],{className:"margin-top--md"}):n.createElement("div",{className:"margin-top--md"},N.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==C})))))}function d(e){const t=(0,i.Z)();return n.createElement(c,m({key:String(t)},e))}}}]);