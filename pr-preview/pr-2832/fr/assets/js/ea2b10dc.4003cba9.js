"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[64024],{3905:(e,a,t)=>{t.d(a,{Zo:()=>u,kt:()=>m});var n=t(67294);function l(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function s(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){l(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function o(e,a){if(null==e)return{};var t,n,l=function(e,a){if(null==e)return{};var t,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||(l[t]=e[t]);return l}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var i=n.createContext({}),p=function(e){var a=n.useContext(i),t=a;return e&&(t="function"==typeof e?e(a):s(s({},a),e)),t},u=function(e){var a=p(e.components);return n.createElement(i.Provider,{value:a},e.children)},c={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},d=n.forwardRef((function(e,a){var t=e.components,l=e.mdxType,r=e.originalType,i=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=p(t),m=l,k=d["".concat(i,".").concat(m)]||d[m]||c[m]||r;return t?n.createElement(k,s(s({ref:a},u),{},{components:t})):n.createElement(k,s({ref:a},u))}));function m(e,a){var t=arguments,l=a&&a.mdxType;if("string"==typeof e||l){var r=t.length,s=new Array(r);s[0]=d;var o={};for(var i in a)hasOwnProperty.call(a,i)&&(o[i]=a[i]);o.originalType=e,o.mdxType="string"==typeof e?e:l,s[1]=o;for(var p=2;p<r;p++)s[p]=t[p];return n.createElement.apply(null,s)}return n.createElement.apply(null,t)}d.displayName="MDXCreateElement"},7626:(e,a,t)=>{t.d(a,{Z:()=>o});var n=t(67294),l=t(86010);const r="tabItem_Ymn6";function s(){return s=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},s.apply(this,arguments)}function o({children:e,hidden:a,className:t}){return n.createElement("div",s({role:"tabpanel",className:(0,l.Z)(r,t)},{hidden:a}),e)}},67709:(e,a,t)=>{t.d(a,{Z:()=>m});var n=t(67294),l=t(86010),r=t(90980),s=t(35715),o=t(8854),i=t(8241);const p="tabList__CuJ",u="tabItem_LNqP";function c(){return c=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},c.apply(this,arguments)}function d(e){var a;const{lazy:t,block:r,defaultValue:d,values:m,groupId:k,className:g}=e,v=n.Children.map(e.children,(e=>{if((0,n.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),b=null!=m?m:v.map((({props:{value:e,label:a,attributes:t}})=>({value:e,label:a,attributes:t}))),f=(0,s.l)(b,((e,a)=>e.value===a.value));if(f.length>0)throw new Error(`Docusaurus error: Duplicate values "${f.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);var h;const N=null===d?d:null!==(h=null!=d?d:null===(a=v.find((e=>e.props.default)))||void 0===a?void 0:a.props.value)&&void 0!==h?h:v[0].props.value;if(null!==N&&!b.some((e=>e.value===N)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${N}" but none of its children has the corresponding value. Available values are: ${b.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:y,setTabGroupChoices:x}=(0,o.U)(),[E,T]=(0,n.useState)(N),L=[],{blockElementScrollPositionUntilNextRender:R}=(0,i.o5)();if(null!=k){const e=y[k];null!=e&&e!==E&&b.some((a=>a.value===e))&&T(e)}const O=e=>{const a=e.currentTarget,t=L.indexOf(a),n=b[t].value;n!==E&&(R(a),T(n),null!=k&&x(k,String(n)))},A=e=>{let a=null;switch(e.key){case"ArrowRight":{const n=L.indexOf(e.currentTarget)+1;var t;a=null!==(t=L[n])&&void 0!==t?t:L[0];break}case"ArrowLeft":{const t=L.indexOf(e.currentTarget)-1;var n;a=null!==(n=L[t])&&void 0!==n?n:L[L.length-1];break}}null==a||a.focus()};return n.createElement("div",{className:(0,l.Z)("tabs-container",p)},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":r},g)},b.map((({value:e,label:a,attributes:t})=>n.createElement("li",c({role:"tab",tabIndex:E===e?0:-1,"aria-selected":E===e,key:e,ref:e=>L.push(e),onKeyDown:A,onFocus:O,onClick:O},t,{className:(0,l.Z)("tabs__item",u,null==t?void 0:t.className,{"tabs__item--active":E===e})}),null!=a?a:e)))),t?(0,n.cloneElement)(v.filter((e=>e.props.value===E))[0],{className:"margin-top--md"}):n.createElement("div",{className:"margin-top--md"},v.map(((e,a)=>(0,n.cloneElement)(e,{key:a,hidden:e.props.value!==E})))))}function m(e){const a=(0,r.Z)();return n.createElement(d,c({key:String(a)},e))}},67622:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>c,contentTitle:()=>p,default:()=>k,frontMatter:()=>i,metadata:()=>u,toc:()=>d});t(67294);var n=t(3905),l=t(67709),r=t(7626);function s(){return s=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},s.apply(this,arguments)}function o(e,a){if(null==e)return{};var t,n,l=function(e,a){if(null==e)return{};var t,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||(l[t]=e[t]);return l}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}const i={id:"using-packages",title:"\xc0 partir des paquets"},p=void 0,u={unversionedId:"installation/installation-of-a-remote-server/using-packages",id:"version-23.10/installation/installation-of-a-remote-server/using-packages",title:"\xc0 partir des paquets",description:"Centreon fournit des paquets RPM et DEB pour ses produits au travers de la solution",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-23.10/installation/installation-of-a-remote-server/using-packages.md",sourceDirName:"installation/installation-of-a-remote-server",slug:"/installation/installation-of-a-remote-server/using-packages",permalink:"/centreon-documentation/pr-preview/pr-2832/fr/docs/installation/installation-of-a-remote-server/using-packages",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/next/i18n/fr/docusaurus-plugin-content-docs/version-23.10/installation/installation-of-a-remote-server/using-packages.md",tags:[],version:"23.10",lastUpdatedAt:1700565273,formattedLastUpdatedAt:"21 nov. 2023",frontMatter:{id:"using-packages",title:"\xc0 partir des paquets"},sidebar:"version-23.10/docs",previous:{title:"\xc0 partir des paquets",permalink:"/centreon-documentation/pr-preview/pr-2832/fr/docs/installation/installation-of-a-poller/using-packages"},next:{title:"Rattacher un collecteur \xe0 un serveur central ou distant",permalink:"/centreon-documentation/pr-preview/pr-2832/fr/docs/monitoring/monitoring-servers/add-a-poller-to-configuration"}},c={},d=[{value:"Pr\xe9requis",id:"pr\xe9requis",level:2},{value:"Configuration sp\xe9cifique",id:"configuration-sp\xe9cifique",level:3},{value:"Configuration sp\xe9cifique",id:"configuration-sp\xe9cifique-1",level:3},{value:"\xc9tape 1 : Pr\xe9-installation",id:"\xe9tape-1--pr\xe9-installation",level:2},{value:"D\xe9sactiver SELinux",id:"d\xe9sactiver-selinux",level:3},{value:"Configurer ou d\xe9sactiver le pare-feu",id:"configurer-ou-d\xe9sactiver-le-pare-feu",level:3},{value:"Installer les d\xe9p\xf4ts",id:"installer-les-d\xe9p\xf4ts",level:3},{value:"D\xe9p\xf4t remi",id:"d\xe9p\xf4t-remi",level:4},{value:"D\xe9p\xf4t remi et CodeReady Builder",id:"d\xe9p\xf4t-remi-et-codeready-builder",level:4},{value:"D\xe9p\xf4t remi et CodeReady Builder",id:"d\xe9p\xf4t-remi-et-codeready-builder-1",level:4},{value:"Installer les d\xe9pendances",id:"installer-les-d\xe9pendances",level:4},{value:"Installer le d\xe9p\xf4t Sury APT pour PHP 8.1",id:"installer-le-d\xe9p\xf4t-sury-apt-pour-php-81",level:4},{value:"D\xe9p\xf4t MariaDB",id:"d\xe9p\xf4t-mariadb",level:4},{value:"D\xe9p\xf4t Centreon",id:"d\xe9p\xf4t-centreon",level:4},{value:"\xc9tape 2 : Installation",id:"\xe9tape-2--installation",level:2},{value:"Avec base de donn\xe9es locale",id:"avec-base-de-donn\xe9es-locale",level:3},{value:"Avec base de donn\xe9es d\xe9port\xe9e",id:"avec-base-de-donn\xe9es-d\xe9port\xe9e",level:3},{value:"Configuration sp\xe9cifique \xe0 Debian 11",id:"configuration-sp\xe9cifique-\xe0-debian-11",level:4},{value:"\xc9tape 3 : Configuration",id:"\xe9tape-3--configuration",level:2},{value:"Nom du serveur",id:"nom-du-serveur",level:3},{value:"Fuseau horaire PHP",id:"fuseau-horaire-php",level:3},{value:"G\xe9rer le lancement des services au d\xe9marrage",id:"g\xe9rer-le-lancement-des-services-au-d\xe9marrage",level:3},{value:"S\xe9curiser la base de donn\xe9es",id:"s\xe9curiser-la-base-de-donn\xe9es",level:3},{value:"\xc9tape 4 : Installation web",id:"\xe9tape-4--installation-web",level:2},{value:"\xc9tape 5 : Enregistrer le Remote Server",id:"\xe9tape-5--enregistrer-le-remote-server",level:2},{value:"Principaux messages d&#39;erreur",id:"principaux-messages-derreur",level:3},{value:"\xc9tape 6 : \xc9tendre les droits du SGBD local",id:"\xe9tape-6--\xe9tendre-les-droits-du-sgbd-local",level:2},{value:"\xc9tape 7 : Ajouter le Remote Server \xe0 la configuration",id:"\xe9tape-7--ajouter-le-remote-server-\xe0-la-configuration",level:2},{value:"\xc9tape 8 : S\xe9curiser votre plateforme",id:"\xe9tape-8--s\xe9curiser-votre-plateforme",level:2}],m={toc:d};function k(e){var{components:a}=e,t=o(e,["components"]);return(0,n.kt)("wrapper",s({},m,t,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Centreon fournit des paquets RPM et DEB pour ses produits au travers de la solution\nCentreon Open Source disponible gratuitement sur notre d\xe9p\xf4t."),(0,n.kt)("p",null,"Les paquets peuvent \xeatre install\xe9s sur Alma/RHEL/Oracle Linux 8 et 9, et Debian 11."),(0,n.kt)("p",null,"L'ensemble de la proc\xe9dure d'installation doit \xeatre faite en tant qu'utilisateur privil\xe9gi\xe9."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Lorsque vous lancez une commande, v\xe9rifiez les messagez obtenus. En cas de message d'erreur, arr\xeatez la proc\xe9dure et d\xe9pannez les probl\xe8mes.")),(0,n.kt)("h2",s({},{id:"pr\xe9requis"}),"Pr\xe9requis"),(0,n.kt)("p",null,"Apr\xe8s avoir install\xe9 votre serveur, r\xe9alisez la mise \xe0 jour de votre syst\xe8me\nd'exploitation via la commande :"),(0,n.kt)(l.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(r.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"dnf update\n")),(0,n.kt)("h3",s({},{id:"configuration-sp\xe9cifique"}),"Configuration sp\xe9cifique"),(0,n.kt)("p",null,"Pour utiliser Centreon en fran\xe7ais, espagnol, portugais ou allemand, installez les paquets correspondants :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"dnf install glibc-langpack-fr\ndnf install glibc-langpack-es\ndnf install glibc-langpack-pt\ndnf install glibc-langpack-de\n")),(0,n.kt)("p",null,"Utilisez la commande suivante pour v\xe9rifier quelles langues sont install\xe9es sur votre syst\xe8me :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"locale -a\n"))),(0,n.kt)(r.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"dnf update\n")),(0,n.kt)("h3",s({},{id:"configuration-sp\xe9cifique-1"}),"Configuration sp\xe9cifique"),(0,n.kt)("p",null,"Pour utiliser Centreon en fran\xe7ais, espagnol, portugais ou allemand, installez les paquets correspondants :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"dnf install glibc-langpack-fr\ndnf install glibc-langpack-es\ndnf install glibc-langpack-pt\ndnf install glibc-langpack-de\n")),(0,n.kt)("p",null,"Utilisez la commande suivante pour v\xe9rifier quelles langues sont install\xe9es sur votre syst\xe8me :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"locale -a\n"))),(0,n.kt)(r.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"apt update && apt upgrade\n")))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Acceptez toutes les cl\xe9s GPG propos\xe9es et red\xe9marrez votre serveur\nsi une mise \xe0 jour du noyau est propos\xe9e.")),(0,n.kt)("h2",s({},{id:"\xe9tape-1--pr\xe9-installation"}),"\xc9tape 1 : Pr\xe9-installation"),(0,n.kt)("h3",s({},{id:"d\xe9sactiver-selinux"}),"D\xe9sactiver SELinux"),(0,n.kt)(l.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(r.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("p",null,"Pendant l'installation, SELinux doit \xeatre d\xe9sactiv\xe9. \xc9ditez le fichier\n",(0,n.kt)("strong",{parentName:"p"},"/etc/selinux/config")," et remplacez ",(0,n.kt)("strong",{parentName:"p"},"enforcing")," par ",(0,n.kt)("strong",{parentName:"p"},"disabled"),", ou bien\nex\xe9cutez la commande suivante :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"sed -i s/^SELINUX=.*$/SELINUX=disabled/ /etc/selinux/config\n")),(0,n.kt)("p",null,"Red\xe9marrez votre syst\xe8me d'exploitation pour prendre en compte le changement."),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"reboot\n")),(0,n.kt)("p",null,"Apr\xe8s le red\xe9marrage, une v\xe9rification rapide permet de confirmer le statut de\nSELinux :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"$ getenforce\nDisabled\n"))),(0,n.kt)(r.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("p",null,"Pendant l'installation, SELinux doit \xeatre d\xe9sactiv\xe9. \xc9ditez le fichier\n",(0,n.kt)("strong",{parentName:"p"},"/etc/selinux/config")," et remplacez ",(0,n.kt)("strong",{parentName:"p"},"enforcing")," par ",(0,n.kt)("strong",{parentName:"p"},"disabled"),", ou bien\nex\xe9cutez la commande suivante :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"sed -i s/^SELINUX=.*$/SELINUX=disabled/ /etc/selinux/config\n")),(0,n.kt)("p",null,"Red\xe9marrez votre syst\xe8me d'exploitation pour prendre en compte le changement."),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"reboot\n")),(0,n.kt)("p",null,"Apr\xe8s le red\xe9marrage, une v\xe9rification rapide permet de confirmer le statut de\nSELinux :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"$ getenforce\nDisabled\n"))),(0,n.kt)(r.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("p",null,"SELinux n'est pas install\xe9 sur Debian 11, continuez."))),(0,n.kt)("h3",s({},{id:"configurer-ou-d\xe9sactiver-le-pare-feu"}),"Configurer ou d\xe9sactiver le pare-feu"),(0,n.kt)("p",null,"Si votre pare-feu syst\xe8me est actif, ",(0,n.kt)("a",s({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/fr/docs/administration/secure-platform#enable-firewalld"}),"param\xe9trez-le"),".\nVous pouvez \xe9galement le d\xe9sactiver le temps de l'installation :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"systemctl stop firewalld\nsystemctl disable firewalld\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Vous pouvez trouver des instructions ",(0,n.kt)("a",s({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/fr/docs/administration/secure-platform#enable-firewalld"}),"ici"),"\npour configurer le pare-feu.")),(0,n.kt)("h3",s({},{id:"installer-les-d\xe9p\xf4ts"}),"Installer les d\xe9p\xf4ts"),(0,n.kt)(l.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(r.Z,{value:"Alma 8",label:"Alma 8",mdxType:"TabItem"},(0,n.kt)("h4",s({},{id:"d\xe9p\xf4t-remi"}),"D\xe9p\xf4t remi"),(0,n.kt)("p",null,"Afin d'installer les logiciels Centreon, le d\xe9p\xf4t ",(0,n.kt)("strong",{parentName:"p"},"remi")," doit \xeatre install\xe9."),(0,n.kt)("p",null,"Ex\xe9cutez les commandes suivantes :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"dnf install -y dnf-plugins-core\ndnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm\ndnf install -y https://rpms.remirepo.net/enterprise/remi-release-8.rpm\ndnf config-manager --set-enabled 'powertools'\n")),(0,n.kt)("p",null,"Activez PHP 8.1 en utilisant les commandes suivantes :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"dnf module reset php\ndnf module install php:remi-8.1\n"))),(0,n.kt)(r.Z,{value:"RHEL 8",label:"RHEL 8",mdxType:"TabItem"},(0,n.kt)("h4",s({},{id:"d\xe9p\xf4t-remi-et-codeready-builder"}),"D\xe9p\xf4t remi et CodeReady Builder"),(0,n.kt)("p",null,"Afin d'installer les logiciels Centreon, les d\xe9p\xf4ts ",(0,n.kt)("strong",{parentName:"p"},"remi")," et ",(0,n.kt)("strong",{parentName:"p"},"CodeReady Builder")," doivent \xeatre install\xe9s."),(0,n.kt)("p",null,"Ex\xe9cutez les commandes suivantes :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"dnf install -y dnf-plugins-core\ndnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm\ndnf install -y https://rpms.remirepo.net/enterprise/remi-release-8.rpm\nsubscription-manager repos --enable codeready-builder-for-rhel-8-x86_64-rpms\ndnf config-manager --set-enabled codeready-builder-for-rhel-8-rhui-rpms\n")),(0,n.kt)("p",null,"Activez PHP 8.1 en utilisant les commandes suivantes :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"dnf module reset php\ndnf module install php:remi-8.1\n"))),(0,n.kt)(r.Z,{value:"Oracle Linux 8",label:"Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("h4",s({},{id:"d\xe9p\xf4t-remi-et-codeready-builder-1"}),"D\xe9p\xf4t remi et CodeReady Builder"),(0,n.kt)("p",null,"Afin d'installer les logiciels Centreon, les d\xe9p\xf4ts ",(0,n.kt)("strong",{parentName:"p"},"remi")," et ",(0,n.kt)("strong",{parentName:"p"},"CodeReady Builder")," doivent \xeatre install\xe9s."),(0,n.kt)("p",null,"Ex\xe9cutez les commandes suivantes :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"dnf install -y dnf-plugins-core\ndnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm\ndnf install -y https://rpms.remirepo.net/enterprise/remi-release-8.rpm\ndnf config-manager --set-enabled ol8_codeready_builder\n")),(0,n.kt)("p",null,"Activez PHP 8.1 en utilisant les commandes suivantes :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"dnf module reset php\ndnf module install php:remi-8.1\n"))),(0,n.kt)(r.Z,{value:"Alma 9",label:"Alma 9",mdxType:"TabItem"},(0,n.kt)("p",null,"Ex\xe9cutez les commandes suivantes :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"dnf install dnf-plugins-core\ndnf install epel-release\ndnf config-manager --set-enabled crb\n")),(0,n.kt)("p",null,"Activez PHP 8.1 avec la commande suivante :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"dnf module reset php\ndnf module install php:8.1\n"))),(0,n.kt)(r.Z,{value:"RHEL 9",label:"RHEL 9",mdxType:"TabItem"},(0,n.kt)("p",null,"Ex\xe9cutez les commandes suivantes :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"dnf install -y dnf-plugins-core\ndnf install -y http://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm\nsubscription-manager repos --enable codeready-builder-for-rhel-9-x86_64-rpms\ndnf config-manager --set-enabled codeready-builder-for-rhel-9-rhui-rpms\n")),(0,n.kt)("p",null,"Activez PHP 8.1 avec la commande suivante :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"dnf module reset php\ndnf module install php:8.1\n"))),(0,n.kt)(r.Z,{value:"Oracle Linux 9",label:"Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("p",null,"Ex\xe9cutez les commandes suivantes :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"dnf install dnf-plugins-core\ndnf install -y http://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm\ndnf config-manager --set-enabled ol9_codeready_builder\n")),(0,n.kt)("p",null,"Activez PHP 8.1 avec la commande suivante :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"dnf module reset php\ndnf module install php:8.1\n"))),(0,n.kt)(r.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("h4",s({},{id:"installer-les-d\xe9pendances"}),"Installer les d\xe9pendances"),(0,n.kt)("p",null,"Installez les d\xe9pendances suivantes :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"apt update && apt install lsb-release ca-certificates apt-transport-https software-properties-common wget gnupg2 curl\n")),(0,n.kt)("h4",s({},{id:"installer-le-d\xe9p\xf4t-sury-apt-pour-php-81"}),"Installer le d\xe9p\xf4t Sury APT pour PHP 8.1"),(0,n.kt)("p",null,"Pour installer le d\xe9p\xf4t Sury, ex\xe9cutez la commande suivante :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),'echo "deb https://packages.sury.org/php/ $(lsb_release -sc) main" | tee /etc/apt/sources.list.d/sury-php.list\n')),(0,n.kt)("p",null,"Puis importez la cl\xe9 du d\xe9p\xf4t :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"wget -O- https://packages.sury.org/php/apt.gpg | gpg --dearmor | tee /etc/apt/trusted.gpg.d/php.gpg  > /dev/null 2>&1\n")))),(0,n.kt)("h4",s({},{id:"d\xe9p\xf4t-mariadb"}),"D\xe9p\xf4t MariaDB"),(0,n.kt)(l.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(r.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),'curl -LsS https://r.mariadb.com/downloads/mariadb_repo_setup | sudo bash -s -- --os-type=rhel --os-version=8 --mariadb-server-version="mariadb-10.5"\n'))),(0,n.kt)(r.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),'curl -LsS https://r.mariadb.com/downloads/mariadb_repo_setup | sudo bash -s -- --os-type=rhel --os-version=9 --mariadb-server-version="mariadb-10.5"\n'))),(0,n.kt)(r.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),'curl -LsS https://r.mariadb.com/downloads/mariadb_repo_setup | bash -s -- --os-type=debian --os-version=11 --mariadb-server-version="mariadb-10.5"\n')))),(0,n.kt)("h4",s({},{id:"d\xe9p\xf4t-centreon"}),"D\xe9p\xf4t Centreon"),(0,n.kt)("p",null,"Afin d'installer les logiciels Centreon \xe0 partir des d\xe9p\xf4ts, vous devez au\npr\xe9alable installer le fichier li\xe9 au d\xe9p\xf4t."),(0,n.kt)("p",null,"Ex\xe9cutez la commande suivante :"),(0,n.kt)(l.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(r.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"dnf config-manager --add-repo https://packages.centreon.com/rpm-standard/23.04/el8/centreon.repo\ndnf clean all --enablerepo=*\ndnf update\n"))),(0,n.kt)(r.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"dnf config-manager --add-repo https://packages.centreon.com/rpm-standard/23.04/el9/centreon.repo\ndnf clean all --enablerepo=*\ndnf update\n"))),(0,n.kt)(r.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),'echo "deb https://packages.centreon.com/apt-standard-23.04-stable/ $(lsb_release -sc) main" | tee /etc/apt/sources.list.d/centreon.list\necho "deb https://packages.centreon.com/apt-plugins-stable/ $(lsb_release -sc) main" | tee /etc/apt/sources.list.d/centreon-plugins.list\n')),(0,n.kt)("p",null,"Ensuite, importez la cl\xe9 du d\xe9p\xf4t :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"wget -O- https://apt-key.centreon.com | gpg --dearmor | tee /etc/apt/trusted.gpg.d/centreon.gpg > /dev/null 2>&1\napt update\n")))),(0,n.kt)("h2",s({},{id:"\xe9tape-2--installation"}),"\xc9tape 2 : Installation"),(0,n.kt)("p",null,"Ce chapitre d\xe9crit l'installation d'un serveur Centreon Remote Server."),(0,n.kt)("p",null,"Il est possible d'installer ce serveur avec une base de donn\xe9es locale au\nserveur, ou d\xe9port\xe9e sur un serveur d\xe9di\xe9."),(0,n.kt)("h3",s({},{id:"avec-base-de-donn\xe9es-locale"}),"Avec base de donn\xe9es locale"),(0,n.kt)(l.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(r.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"dnf install -y centreon\nsystemctl daemon-reload\nsystemctl restart mariadb\n"))),(0,n.kt)(r.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"yum install -y centreon\nsystemctl daemon-reload\nsystemctl restart mariadb\n"))),(0,n.kt)(r.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"apt update\napt install -y --no-install-recommends centreon\nsystemctl daemon-reload\nsystemctl restart mariadb\n")))),(0,n.kt)("p",null,"Passez maintenant \xe0 ",(0,n.kt)("a",s({parentName:"p"},{href:"#%C3%A9tape-3--configuration"}),"l'\xe9tape suivante"),"."),(0,n.kt)("h3",s({},{id:"avec-base-de-donn\xe9es-d\xe9port\xe9e"}),"Avec base de donn\xe9es d\xe9port\xe9e"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Dans le cas d'une installation avec un serveur d\xe9di\xe9 \xe0 la base de donn\xe9es, ce\ndernier doit aussi avoir les d\xe9p\xf4ts pr\xe9requis.")),(0,n.kt)("p",null,"Ex\xe9cutez la commande suivante sur le serveur Centreon Central :"),(0,n.kt)(l.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(r.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"dnf install -y centreon-central\n"))),(0,n.kt)(r.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"yum install -y centreon-central\n"))),(0,n.kt)(r.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"apt update\napt install -y --no-install-recommends centreon-central\n")))),(0,n.kt)("p",null,"Puis ex\xe9cutez les commandes suivantes sur le serveur d\xe9di\xe9 \xe0 la base de donn\xe9es :"),(0,n.kt)(l.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(r.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"dnf install -y centreon-database\nsystemctl daemon-reload\nsystemctl restart mariadb\n"))),(0,n.kt)(r.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"yum install -y centreon-database\nsystemctl daemon-reload\nsystemctl restart mariadb\n"))),(0,n.kt)(r.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"apt update\napt install -y --no-install-recommends centreon-database\nsystemctl daemon-reload\nsystemctl restart mariadb\n")))),(0,n.kt)("p",null,"S\xe9curisez votre installation MariaDB en ex\xe9cutant la commande suivante :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"mysql_secure_installation\n")),(0,n.kt)("p",null,"Cr\xe9ez enfin un utilisateur avec privil\xe8ges ",(0,n.kt)("strong",{parentName:"p"},"root")," n\xe9cessaire \xe0 l'installation de Centreon :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-SQL"}),"CREATE USER '<USER>'@'<IP>' IDENTIFIED BY '<PASSWORD>';\nGRANT ALL PRIVILEGES ON *.* TO '<USER>'@'<IP>' WITH GRANT OPTION;\nFLUSH PRIVILEGES;\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Remplacez ",(0,n.kt)("strong",{parentName:"p"},"<IP",">")," par l'adresse IP avec laquelle le serveur Centreon\nRemote Server se connectera au serveur de base de donn\xe9es."),(0,n.kt)("p",{parentName:"blockquote"},"Remplacez ",(0,n.kt)("strong",{parentName:"p"},"<USER",">")," et ",(0,n.kt)("strong",{parentName:"p"},"<PASSWORD",">")," par les identifiants de\nl'utilisateur.")),(0,n.kt)("p",null,"Une fois l'installation termin\xe9e, supprimez cet utilisateur via la commande :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-SQL"}),"DROP USER '<USER>'@'<IP>';\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Le paquet ",(0,n.kt)("strong",{parentName:"p"},"centreon-database")," installe une configuration MariaDB optimis\xe9e\npour l'utilisation avec Centreon."),(0,n.kt)("p",{parentName:"blockquote"},"Si ce paquet n'est pas install\xe9, il faut \xe0 minima adapter la limitation\n",(0,n.kt)("strong",{parentName:"p"},"LimitNOFILE")," \xe0 ",(0,n.kt)("strong",{parentName:"p"},"32000")," via une configuration d\xe9di\xe9e, exemple:"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"$ cat /etc/systemd/system/mariadb.service.d/centreon.conf\n[Service]\nLimitNOFILE=32000\n")),(0,n.kt)("p",{parentName:"blockquote"},"De m\xeame pour la directive MariaDB ",(0,n.kt)("strong",{parentName:"p"},"open_files_limit"),", exemple pour Centos 7, Alma/RHEL/OL 8 :"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"$ cat /etc/my.cnf.d/centreon.cnf\n[server]\ninnodb_file_per_table=1\nopen_files_limit=32000\n")),(0,n.kt)("p",{parentName:"blockquote"},"Pour Debian 11:"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"$ cat /etc/mysql/mariadb.conf.d/80-centreon.cnf\n[server]\ninnodb_file_per_table=1\nopen_files_limit=32000\n"))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Red\xe9marrez le service mariadb apr\xe8s chaque changement de configuration.")),(0,n.kt)("h4",s({},{id:"configuration-sp\xe9cifique-\xe0-debian-11"}),"Configuration sp\xe9cifique \xe0 Debian 11"),(0,n.kt)("p",null,"MariaDB doit \xe9couter sur toutes les interfaces au lieu d'\xe9couter sur localhost/127.0.0.1 (valeur par d\xe9faut). \xc9ditez le fichier suivant :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"/etc/mysql/mariadb.conf.d/50-server.cnf\n")),(0,n.kt)("p",null,"Attribuez au param\xe8tre ",(0,n.kt)("strong",{parentName:"p"},"bind-address")," la valeur ",(0,n.kt)("strong",{parentName:"p"},"0.0.0.0"),"."),(0,n.kt)("h2",s({},{id:"\xe9tape-3--configuration"}),"\xc9tape 3 : Configuration"),(0,n.kt)("h3",s({},{id:"nom-du-serveur"}),"Nom du serveur"),(0,n.kt)("p",null,"Si vous le souhaitez, vous pouvez changer le nom du serveur \xe0 l'aide de la commande suivante:"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"hostnamectl set-hostname new-server-name\n")),(0,n.kt)("p",null,"Remplacez ",(0,n.kt)("strong",{parentName:"p"},"new-server-name")," par le nom de votre choix. Exemple :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"hostnamectl set-hostname remote1\n")),(0,n.kt)("h3",s({},{id:"fuseau-horaire-php"}),"Fuseau horaire PHP"),(0,n.kt)("p",null,"La timezone par d\xe9faut de PHP doit \xeatre configur\xe9e."),(0,n.kt)(l.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(r.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("p",null,"Ex\xe9cutez la commande suivante :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),'echo "date.timezone = Europe/Paris" >> /etc/php.d/50-centreon.ini\n')),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Remplacez ",(0,n.kt)("strong",{parentName:"p"},"Europe/Paris")," par votre fuseau horaire. La liste des fuseaux\nhoraires est disponible ",(0,n.kt)("a",s({parentName:"p"},{href:"http://php.net/manual/en/timezones.php"}),"ici"),".")),(0,n.kt)("p",null,"Apr\xe8s avoir r\xe9alis\xe9 la modification, red\xe9marrez le service PHP-FPM :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"systemctl restart php-fpm\n"))),(0,n.kt)(r.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("p",null,"Ex\xe9cutez la commande suivante :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),'echo "date.timezone = Europe/Paris" >> /etc/php.d/50-centreon.ini\n')),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Remplacez ",(0,n.kt)("strong",{parentName:"p"},"Europe/Paris")," par votre fuseau horaire. La liste des fuseaux\nhoraires est disponible ",(0,n.kt)("a",s({parentName:"p"},{href:"http://php.net/manual/en/timezones.php"}),"ici"),".")),(0,n.kt)("p",null,"Apr\xe8s avoir r\xe9alis\xe9 la modification, red\xe9marrez le service PHP-FPM :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"systemctl restart php-fpm\n"))),(0,n.kt)(r.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("p",null,"Ex\xe9cutez la commande suivante :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),'echo "date.timezone = Europe/Paris" >> /etc/php/8.1/mods-available/centreon.ini\n')),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Celui-ci a \xe9t\xe9 d\xe9fini durant le processus d'installation en r\xe9cup\xe9rant le fuseau horaire configur\xe9 sur le\nsyst\xe8me d'exploitation.")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"La liste des fuseaux\nhoraires est disponible ",(0,n.kt)("a",s({parentName:"p"},{href:"http://php.net/manual/en/timezones.php"}),"ici"),".")),(0,n.kt)("p",null,"Apr\xe8s avoir sauvegard\xe9 le fichier, red\xe9marrez le service PHP-FPM :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"systemctl restart php8.1-fpm\n")))),(0,n.kt)("h3",s({},{id:"g\xe9rer-le-lancement-des-services-au-d\xe9marrage"}),"G\xe9rer le lancement des services au d\xe9marrage"),(0,n.kt)("p",null,"Pour activer le lancement automatique des services au d\xe9marrage, ex\xe9cutez la\ncommande suivante sur le serveur Central :"),(0,n.kt)(l.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(r.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"systemctl enable php-fpm httpd centreon cbd centengine gorgoned snmptrapd centreontrapd snmpd\nsystemctl enable crond\nsystemctl start crond\n"))),(0,n.kt)(r.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"systemctl enable php-fpm httpd centreon cbd centengine gorgoned snmptrapd centreontrapd snmpd\nsystemctl enable crond\nsystemctl start crond\n"))),(0,n.kt)(r.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"systemctl enable php8.1-fpm apache2 centreon cbd centengine gorgoned centreontrapd snmpd snmptrapd\n")))),(0,n.kt)("p",null,"Puis ex\xe9cutez la commande suivante (sur le serveur distant si vous utilisez une base de donn\xe9es locale, sinon sur le serveur de base de donn\xe9es d\xe9port\xe9):"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"systemctl enable mariadb\nsystemctl restart mariadb\n")),(0,n.kt)("h3",s({},{id:"s\xe9curiser-la-base-de-donn\xe9es"}),"S\xe9curiser la base de donn\xe9es"),(0,n.kt)("p",null,"Depuis MariaDB 10.5, il est obligatoire de s\xe9curiser l'acc\xe8s en root \xe0 la base avant d'installer Centreon. Si vous utilisez une base de donn\xe9es locale, ex\xe9cutez la commande suivante sur le serveur central :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"mysql_secure_installation\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'R\xe9pondez oui \xe0 toute question sauf \xe0 "Disallow root login remotely?". '),(0,n.kt)("li",{parentName:"ul"},"D\xe9finissez obligatoirement un mot de passe pour l'utilisateur ",(0,n.kt)("strong",{parentName:"li"},"root")," de la base de donn\xe9es.\nCe mot de passe vous sera demand\xe9 lors de l'",(0,n.kt)("a",s({parentName:"li"},{href:"/centreon-documentation/pr-preview/pr-2832/fr/docs/installation/web-and-post-installation"}),"installation web"),".")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Pour plus d'informations, consultez la ",(0,n.kt)("a",s({parentName:"p"},{href:"https://mariadb.com/kb/en/mysql_secure_installation/"}),"documentation officielle MariaDB"),".")),(0,n.kt)("h2",s({},{id:"\xe9tape-4--installation-web"}),"\xc9tape 4 : Installation web"),(0,n.kt)("p",null,"Avant de d\xe9marrer l'installation web, d\xe9marrez le serveur Apache avec la commande suivante :"),(0,n.kt)(l.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(r.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"systemctl start httpd\n"))),(0,n.kt)(r.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"systemctl start httpd\n"))),(0,n.kt)(r.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"systemctl start apache2\n")))),(0,n.kt)("p",null,"Terminez l'installation en r\xe9alisant les\n",(0,n.kt)("a",s({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/fr/docs/installation/web-and-post-installation#installation-web"}),"\xe9tapes de l'installation web"),"."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Pendant l'installation web, il n'est pas n\xe9cessaire d'installer le module\nAutodiscovery.")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"A l'\xe9tape d'",(0,n.kt)("strong",{parentName:"p"},"Initialisation de la supervision"),", seules les actions 6 \xe0 8\ndoivent \xeatre faites.")),(0,n.kt)("h2",s({},{id:"\xe9tape-5--enregistrer-le-remote-server"}),"\xc9tape 5 : Enregistrer le Remote Server"),(0,n.kt)("p",null,"Pour transformer le serveur en serveur distant et l'enregistrer sur le serveur Central, ex\xe9cutez la commande suivante sur le futur serveur distant :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"/usr/share/centreon/bin/registerServerTopology.sh -u <API_ACCOUNT> \\\n-t remote -h <IP_TARGET_NODE> -n <REMOTE_SERVER_NAME>\n")),(0,n.kt)("p",null,"Exemple:"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"/usr/share/centreon/bin/registerServerTopology.sh -u admin -t remote -h 192.168.0.1 -n remote-1\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Remplacez ",(0,n.kt)("strong",{parentName:"p"},"<IP_TARGET_NODE>")," par l'adresse IP du serveur Central auquel vous voulez rattacher le serveur distant (adresse IP vue par le serveur distant).")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Le compte ",(0,n.kt)("strong",{parentName:"p"},"<API_ACCOUNT>")," doit avoir acc\xe8s \xe0 l'API de configuration. Vous pouvez utiliser le compte ",(0,n.kt)("strong",{parentName:"p"},"admin"),".")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Pour changer le port et la m\xe9thode HTTP, le format de l'option ",(0,n.kt)("strong",{parentName:"p"},"-h")," est le suivant :\n",(0,n.kt)("inlineCode",{parentName:"p"},"HTTPS://<IP_TARGET_NODE>:PORT"))),(0,n.kt)("p",null,"Suivre ensuite les instructions"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Saisir le mot de passe :"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"192.168.0.1: please enter your password\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"S\xe9lectionner l'adresse IP si plusieurs interfaces r\xe9seau existent:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"Which IP do you want to use as CURRENT NODE IP ?\n1) 192.168.0.2\n2) 192.168.0.3\n1\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Valider les informations:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"Summary of the informations that will be send:\n\nApi Connection:\nusername: admin\npassword: ******\ntarget server: 192.168.0.1\n\nPending Registration Server:\nname: remote-1\ntype: remote\naddress: 192.168.0.2\n\nDo you want to register this server with those informations ? (y/n)y\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Ajouter les informations n\xe9cessaires pour permettre de futures communications entre votre Remote Server et son Central"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"<CURRENT_NODE_ADDRESS> : Please enter your username:\nadmin\n<CURRENT_NODE_ADDRESS> : Please enter your password:\n\n<CURRENT_NODE_ADDRESS> : Protocol [http]:\n<CURRENT_NODE_ADDRESS> : Port [80]:\n<CURRENT_NODE_ADDRESS> : centreon root folder [centreon]:\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"D\xe9finir les acc\xe8s au proxy du serveur Centreon du Central :"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"Are you using a proxy ? (y/n)\ny\nenter your proxy Host:\nmyproxy.example.com\nenter your proxy Port [3128]:\nAre you using a username/password ? (y/n)\ny\nenter your username:\nmy_proxy_username\nenter your password:\n\n")))),(0,n.kt)("p",null,"Vous recevrez la validation du serveur Centreon Central :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"2020-10-16T17:19:37+02:00 [INFO]: The CURRENT NODE 'remote: 'remote-1@192.168.0.2' has been converted and registered successfully.\n")),(0,n.kt)("h3",s({},{id:"principaux-messages-derreur"}),"Principaux messages d'erreur"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"2020-10-20T10:23:15+02:00 [ERROR]: Invalid credentials\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Vos informations d'identification sont incorrectes pour le compte ",(0,n.kt)("strong",{parentName:"p"},"<API_ACCOUNT>"),".")),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"2020-10-20T10:24:59+02:00 [ERROR]: Access Denied.\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"L'utilisateur ",(0,n.kt)("strong",{parentName:"p"},"<API_ACCOUNT>")," n'a pas acc\xe8s \xe0 l'API de configuration.")),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"Failed connect to 192.168.0.1:444; Connection refused\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Impossible d'acc\xe9der \xe0 l'API. Contr\xf4ler les valeurs ",(0,n.kt)("strong",{parentName:"p"},"<IP_TARGET_NODE>"),", m\xe9thode et port.")),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"2020-10-20T10:39:30+02:00 [ERROR]: Can\u2019t connect to the API using: https://192.168.0.1:443/centreon/api/latest/login\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"L'URL d'acc\xe8s n'est pas compl\xe8te ou invalide. Utilisez l'option ",(0,n.kt)("strong",{parentName:"p"},"-root")," pour d\xe9finir le chemin de l'URL de l'API.\nPar exemple : ",(0,n.kt)("strong",{parentName:"p"},"--root monitoring"),".")),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-shell"}),"2020-10-20T10:42:23+02:00 [ERROR]: No route found for \u201cPOST /centreon/api/latest/platform/topology\u201d\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"La version Centreon du serveur distant est invalide. Elle doit \xeatre sup\xe9rieure ou \xe9gale \xe0 23.04.")),(0,n.kt)("h2",s({},{id:"\xe9tape-6--\xe9tendre-les-droits-du-sgbd-local"}),"\xc9tape 6 : \xc9tendre les droits du SGBD local"),(0,n.kt)("p",null,"Enfin, il est n\xe9cessaire d'ajouter des droits \xe0 l'utilisateur de base de donn\xe9es ",(0,n.kt)("strong",{parentName:"p"},"centreon")," pour qu'il puisse\nutiliser la commande ",(0,n.kt)("strong",{parentName:"p"},"LOAD DATA INFILE")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",s({parentName:"pre"},{className:"language-sql"}),"mysql -u root -p\nGRANT FILE on *.* to 'centreon'@'localhost';\nexit\n")),(0,n.kt)("h2",s({},{id:"\xe9tape-7--ajouter-le-remote-server-\xe0-la-configuration"}),"\xc9tape 7 : Ajouter le Remote Server \xe0 la configuration"),(0,n.kt)("p",null,"Rendez-vous au chapitre\n",(0,n.kt)("a",s({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/fr/docs/monitoring/monitoring-servers/add-a-remote-server-to-configuration"}),"Ajouter un Remote Server \xe0 la configuration"),"."),(0,n.kt)("h2",s({},{id:"\xe9tape-8--s\xe9curiser-votre-plateforme"}),"\xc9tape 8 : S\xe9curiser votre plateforme"),(0,n.kt)("p",null,"S\xe9curisez votre plateforme Centreon en suivant nos\n",(0,n.kt)("a",s({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/fr/docs/administration/secure-platform"}),"recommandations"),"."))}k.isMDXComponent=!0}}]);