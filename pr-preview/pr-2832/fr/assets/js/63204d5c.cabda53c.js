"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[85504],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>m});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=n.createContext({}),u=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=u(e.components);return n.createElement(o.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=u(a),m=r,k=d["".concat(o,".").concat(m)]||d[m]||c[m]||l;return a?n.createElement(k,i(i({ref:t},p),{},{components:a})):n.createElement(k,i({ref:t},p))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=d;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var u=2;u<l;u++)i[u]=a[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},23984:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>u,default:()=>k,frontMatter:()=>o,metadata:()=>p,toc:()=>d});a(67294);var n=a(3905),r=a(67709),l=a(7626);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i.apply(this,arguments)}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const o={id:"cloud-aws-ec2",title:"Amazon EC2"},u=void 0,p={unversionedId:"integrations/plugin-packs/procedures/cloud-aws-ec2",id:"integrations/plugin-packs/procedures/cloud-aws-ec2",title:"Amazon EC2",description:"Vue d'ensemble",source:"@site/i18n/fr/docusaurus-plugin-content-docs-pp/current/integrations/plugin-packs/procedures/cloud-aws-ec2.md",sourceDirName:"integrations/plugin-packs/procedures",slug:"/integrations/plugin-packs/procedures/cloud-aws-ec2",permalink:"/centreon-documentation/pr-preview/pr-2832/fr/pp/integrations/plugin-packs/procedures/cloud-aws-ec2",draft:!1,tags:[],version:"current",frontMatter:{id:"cloud-aws-ec2",title:"Amazon EC2"},sidebar:"pp",previous:{title:"Amazon EBS",permalink:"/centreon-documentation/pr-preview/pr-2832/fr/pp/integrations/plugin-packs/procedures/cloud-aws-ebs"},next:{title:"Amazon ElastiCache",permalink:"/centreon-documentation/pr-preview/pr-2832/fr/pp/integrations/plugin-packs/procedures/cloud-aws-elasticache"}},c={},d=[{value:"Vue d&#39;ensemble",id:"vue-densemble",level:2},{value:"Contenu du Plugin-Pack",id:"contenu-du-plugin-pack",level:2},{value:"Objets supervis\xe9s",id:"objets-supervis\xe9s",level:3},{value:"R\xe8gles de d\xe9couvertes",id:"r\xe8gles-de-d\xe9couvertes",level:3},{value:"M\xe9triques supervis\xe9es",id:"m\xe9triques-supervis\xe9es",level:2},{value:"Pr\xe9requis",id:"pr\xe9requis",level:2},{value:"Privil\xe8ges AWS",id:"privil\xe8ges-aws",level:3},{value:"D\xe9pendances du Plugin",id:"d\xe9pendances-du-plugin",level:3},{value:"Installation",id:"installation",level:2},{value:"Configuration",id:"configuration",level:2},{value:"FAQ",id:"faq",level:2},{value:"Comment puis-je tester le Plugin et que signifient les options des commandes ?",id:"comment-puis-je-tester-le-plugin-et-que-signifient-les-options-des-commandes-",level:3},{value:"J&#39;obtiens le message d&#39;erreur suivant:  <code>UNKNOWN: No metrics. Check your options or use --zeroed option to set 0 on undefined values</code>",id:"jobtiens-le-message-derreur-suivant--unknown-no-metrics-check-your-options-or-use---zeroed-option-to-set-0-on-undefined-values",level:3},{value:"UNKNOWN: Command error:  - An error occurred (AuthFailure) ...",id:"unknown-command-error----an-error-occurred-authfailure-",level:3},{value:"UNKNOWN: Command error:  - An error occurred (InvalidParameterValue) ...",id:"unknown-command-error----an-error-occurred-invalidparametervalue-",level:3}],m={toc:d};function k(e){var{components:t}=e,a=s(e,["components"]);return(0,n.kt)("wrapper",i({},m,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",i({},{id:"vue-densemble"}),"Vue d'ensemble"),(0,n.kt)("p",null,"Amazon Elastic Compute Cloud (Amazon EC2) offre une capacit\xe9 de calcul \xe9volutive dans le cloud Amazon Web Services (AWS). L'utilisation d'Amazon EC2 vous dispense d'investir \xe0 l'avance dans du mat\xe9riel et, par cons\xe9quent, vous pouvez d\xe9velopper et d\xe9ployer les applications plus rapidement. Vous pouvez utiliser Amazon EC2 pour lancer autant de serveurs virtuels que n\xe9cessaire, configurer la s\xe9curit\xe9 et la mise en r\xe9seau, et g\xe9rer le stockage."),(0,n.kt)("h2",i({},{id:"contenu-du-plugin-pack"}),"Contenu du Plugin-Pack"),(0,n.kt)("h3",i({},{id:"objets-supervis\xe9s"}),"Objets supervis\xe9s"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Instances EC2"),(0,n.kt)("li",{parentName:"ul"},"Groupes Auto Scaling EC2"),(0,n.kt)("li",{parentName:"ul"},"Requ\xeates Spot Fleet EC2")),(0,n.kt)("h3",i({},{id:"r\xe8gles-de-d\xe9couvertes"}),"R\xe8gles de d\xe9couvertes"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Hosts",label:"Hosts",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Rule name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Cloud-Aws-Ec2-Api-HostDiscovery-Ec2"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"D\xe9couverte de vos instances EC2 Instances")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Cloud-Aws-Ec2-Api-HostDiscovery-Asg"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"D\xe9couverte de vos Groupes Auto Scaling EC2"))))),(0,n.kt)(l.Z,{value:"Services",label:"Services",mdxType:"TabItem"},(0,n.kt)("p",null,"Aucune r\xe8gle de d\xe9couverte de service n'est associ\xe9e \xe0 ce Plugin-Pack. "))),(0,n.kt)("h2",i({},{id:"m\xe9triques-supervis\xe9es"}),"M\xe9triques supervis\xe9es"),(0,n.kt)("p",null,"Vous pouvez vous renseigner en d\xe9tails sur les m\xe9triques pr\xe9sent\xe9es ci-apr\xe8s sur la documentation officielle du service EC2:\n",(0,n.kt)("a",i({parentName:"p"},{href:"https://docs.aws.amazon.com/fr_fr/autoscaling/ec2/userguide/as-monitoring-features"}),"https://docs.aws.amazon.com/fr_fr/autoscaling/ec2/userguide/as-monitoring-features")),(0,n.kt)("p",null,"Au del\xe0 des modes et m\xe9triques d\xe9taill\xe9es ci-apr\xe8s, les indicateurs suppl\xe9mentaires suivants sont \xe9galement disponibles:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Instance-Types: Nombre d'instances pour chaque famille d'instance AWS/EC2 et types associ\xe9s."),(0,n.kt)("li",{parentName:"ul"},"Instance-Status: Statuts unitaires et globaux de vos instances EC2 en cours d'ex\xe9cution (ainsi que le nombre total)")),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Ec2-Cpu-Credit",label:"Ec2-Cpu-Credit",mdxType:"TabItem"},(0,n.kt)("p",null,"Ce contr\xf4le est associ\xe9 aux Mod\xe8les d'H\xf4tes suivants: 'Cloud-Aws-Ec2-Asg' et 'Cloud-Aws-Ec2-Instance'."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"CPUCreditBalance"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"The number of earned CPU credits that an instance has accrued since it was launched or started. Unit: Credit vCPU-minutes)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"CPUCreditUsage"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of CPU credit consumed. Unit: Credits (vCPU-minutes)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"CPUSurplusCreditBalance"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"The number of surplus credits that have been spent by an unlimited instance when its CPUCreditBalance value is zero. Credits (vCPU-minutes)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"CPUSurplusCreditsCharged"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"The number of spent surplus credits that are not paid down by earned CPU credits, and which thus incur an additional charge. Unit: Credits(vCPU-minutes)"))))),(0,n.kt)(l.Z,{value:"Ec2-Cpu-Usage",label:"Ec2-Cpu-Usage",mdxType:"TabItem"},(0,n.kt)("p",null,"Ce contr\xf4le est associ\xe9 aux Mod\xe8les d'H\xf4tes suivants: 'Cloud-Aws-Ec2-Asg' et 'Cloud-Aws-Ec2-Instance'."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"CPUUtilization"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"The percentage of CPU utilization. Unit: Percent"))))),(0,n.kt)(l.Z,{value:"Ec2-Diskio",label:"Ec2-Diskio",mdxType:"TabItem"},(0,n.kt)("p",null,"Ce contr\xf4le est associ\xe9 aux Mod\xe8les d'H\xf4tes suivants: 'Cloud-Aws-Ec2-Asg' et 'Cloud-Aws-Ec2-Instance'."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"ReadIOPS"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"The average number of disk read I/O operations per second. Unit: Count/Second")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"WriteIOPS"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"The average number of disk write I/O operations per second. Unit: Count/Second")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"ReadThroughput"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"The average number of bytes read from disk per second. Unit: Bytes/Second")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"WriteThroughput"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"The average number of bytes write to disk per second. Unit: Bytes/Second")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"ReadLatency"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"The average amount of time taken per disk I/O read operation. Unit: Seconds")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"WriteLatency"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"The average amount of time taken per disk I/O write operation. Unit: Seconds")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"DiskQueueDepth"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"The number of outstanding IOs (read/write requests) waiting to access the disk. Unit: Count")))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"Remarque")," Ces m\xe9triques sont g\xe9n\xe9ralement nulles lorsque collect\xe9es sur un groupe d'AutoScaling."))),(0,n.kt)(l.Z,{value:"Ec2-Network",label:"Ec2-Network",mdxType:"TabItem"},(0,n.kt)("p",null,"Ce contr\xf4le est associ\xe9 aux Mod\xe8les d'H\xf4tes suivants: 'Cloud-Aws-Ec2-Asg' et 'Cloud-Aws-Ec2-Instance'."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"NetworkIn"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"The number of bytes received on all network interfaces by the instance. This metric identifies the volume of incoming network traffic to a single instance. Unit: Bytes/Second")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"NetworkOut"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"The number of bytes sent out on all network interfaces by the instance. This metric identifies the volume of outgoing network traffic from a single instance. Unit: Bytes/Second")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"NetworkPacketsIn"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"The number of packets received on all network interfaces by the instance. This metric identifies the volume of incoming traffic in terms of the number of packets on a single instance. This metric is available for basic monitoring only. Unit: Packets/Second")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"NetworkPacketsOut"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"The number of packets sent out on all network interfaces by the instance. This metric identifies the volume of outgoing traffic in terms of the number of packets on a single instance. This metric is available for basic monitoring only. Unit: Packets/Second"))))),(0,n.kt)(l.Z,{value:"EC2Spot-Active-Instances",label:"EC2Spot-Active-Instances",mdxType:"TabItem"},(0,n.kt)("p",null,"Ce contr\xf4le est associ\xe9 aux Mod\xe8les d'H\xf4tes suivants: 'Cloud-Aws-Ec2-Asg' et 'Cloud-Aws-Ec2-Instance'."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"ActiveInstances"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of active instances for a give EC2Spot fleet request. Unit: Count.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"HealthyInstances"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of healthy instances for a give EC2Spot fleet request. Unit: Count.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"UnhealthyInstances"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of unhealthy instances for a give EC2Spot fleet request. Unit: Count.")))))),(0,n.kt)("h2",i({},{id:"pr\xe9requis"}),"Pr\xe9requis"),(0,n.kt)("h3",i({},{id:"privil\xe8ges-aws"}),"Privil\xe8ges AWS"),(0,n.kt)("p",null,"Voici la liste des droits n\xe9cessaires au travers des access/secret key utilis\xe9es pour pouvoir utiliser le monitoring AWS/EC2: "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"AWS Privilege"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"ec2:DescribeInstances"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Display EC2 instances & ASG details")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"ec2:DescribeSpotFleetRequests"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Display EC2 Spot Fleet Requests details")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"cloudwatch:getMetricStatistics"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Get metrics from the AWS/EC2 namespace on Cloudwatch")))),(0,n.kt)("h3",i({},{id:"d\xe9pendances-du-plugin"}),"D\xe9pendances du Plugin"),(0,n.kt)("p",null,"Afin de r\xe9cup\xe9rer les informations n\xe9cessaires via les APIs AWS, il est possible d'utiliser soit le binaire ",(0,n.kt)("em",{parentName:"p"},"awscli")," fourni par Amazon, soit le SDK Perl ",(0,n.kt)("em",{parentName:"p"},"paws"),". Le SDK est recommand\xe9 car plus performant. "),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},(0,n.kt)("strong",{parentName:"p"},"Attention")," il n'est pas possible d'utiliser ",(0,n.kt)("em",{parentName:"p"},"paws")," si la connexion s'effectue au travers d'un proxy.")),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"perl-Paws-installation",label:"perl-Paws-installation",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"yum install perl-Paws\n"))),(0,n.kt)(l.Z,{value:"aws-cli-installation",label:"aws-cli-installation",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"yum install awscli\n")))),(0,n.kt)("h2",i({},{id:"installation"}),"Installation"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Online License",label:"Online License",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Installer le Plugin sur tous les collecteurs Centreon supervisant des ressources AWS/EC2:")),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"yum install centreon-plugin-Cloud-Aws-Ec2-Api\n")),(0,n.kt)("ol",i({},{start:2}),(0,n.kt)("li",{parentName:"ol"},"Dans l'interface Centreon, installer le Plugin-Pack 'Amazon EC2' depuis la page \"Configuration > Plugin Packs > Manager\""))),(0,n.kt)(l.Z,{value:"Offline License",label:"Offline License",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Installer le Plugin sur tous les collecteurs Centreon supervisant des ressources AWS/EC2:")),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"yum install centreon-plugin-Cloud-Aws-Ec2-Api\n")),(0,n.kt)("ol",i({},{start:2}),(0,n.kt)("li",{parentName:"ol"},"Sur le serveur Central Centreon, installer le RPM du Plugin-Pack 'Amazon EC2':")),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"yum install centreon-pack-cloud-aws-ec2.noarch\n")),(0,n.kt)("ol",i({},{start:3}),(0,n.kt)("li",{parentName:"ol"},"Dans l'interface Web de Centreon, installer le Plugin-Pack 'Amazon EC2' depuis la page \"Configuration > Plugin Packs > Manager\"")))),(0,n.kt)("h2",i({},{id:"configuration"}),"Configuration"),(0,n.kt)("p",null,'Lorsque vous ajoutez un H\xf4te \xe0 Centreon, choisissez le mod\xe8le de votre choix. Tous les mod\xe8les li\xe9s \xe0 la supervision du\nservice AWS/EC2 commencent par "Cloud-Aws-EC2*".'),(0,n.kt)("p",null,"Tous les Mod\xe8les d'H\xf4tes partagent certaines macros \xe0 renseigner:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Mandatory"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Nom"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"AWSSECRETKEY"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"AWS Secret key of your IAM role. Password checkbox must be checked")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"AWSACESSKEY"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"AWS Access key of your IAM role. Password checkbox must be checked")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"AWSREGION"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Region where the instance is running")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"AWSCUSTOMMODE"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Custom mode to get metrics, 'awscli' is the default, you can also use 'paws' perl library")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"PROXYURL"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Configure proxy URL")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"EXTRAOPTIONS"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Any extra option you may want to add to every command","_","line (eg. a --verbose flag)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"DUMMYSTATUS"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Host state. Default is OK, do not modify it until you know what you are doing")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"DUMMYOUTPUT"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Host check output. Default is 'This is a dummy check'. Customize it with your own if needed")))),(0,n.kt)("p",null,"Selon le Mod\xe8le d'H\xf4te utilis\xe9, il est n\xe9cessaire de param\xe9trer des macros suppl\xe9mentaires:"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Cloud-Aws-Ec2-Asg-&-Cloud-Aws-Ec2-Instance",label:"Cloud-Aws-Ec2-Asg-&-Cloud-Aws-Ec2-Instance",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Mandatory"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Nom"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"AWSINSTANCENAME"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Name of the instance you want to monitor")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"AWSINSTANCETYPE"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Type of instance to check ('instance' or 'cluster')"))))),(0,n.kt)(l.Z,{value:"Cloud-Aws-Ec2-Spot-Fleet-Request",label:"Cloud-Aws-Ec2-Spot-Fleet-Request",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Mandatory"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Nom"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"SPOTFLEETREQUESTID"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Spot Fleet Request identifier. (e.g: sfr-abcd1234)")))))),(0,n.kt)("h2",i({},{id:"faq"}),"FAQ"),(0,n.kt)("h3",i({},{id:"comment-puis-je-tester-le-plugin-et-que-signifient-les-options-des-commandes-"}),"Comment puis-je tester le Plugin et que signifient les options des commandes ?"),(0,n.kt)("p",null,"A partir du moment ou le Plugin est install\xe9, vous pouvez tester celui-ci directement depuis votre collecteur Centreon avec l'utilisateur ",(0,n.kt)("em",{parentName:"p"},"centreon-engine"),":\n(Certaines options, comme par exemple ",(0,n.kt)("inlineCode",{parentName:"p"},"--name")," doivent \xeatre ajust\xe9es en fonction du contexte):"),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins//centreon_aws_ec2_api.pl\n    --plugin=cloud::aws::ec2::plugin\n    --mode=cpu\n    --custommode='awscli'\n    --aws-secret-key='***'\n    --aws-access-key='AKIA5EDPTASPNBK5EMTM'\n    --region='eu-west-1'\n    --type='asg'\n    --name='centreon-front'\n    --filter-metric='Utilization'\n    --statistic='average'\n    --timeframe='600'\n    --period='60'\n    --warning-cpu-utilization='80'\n    --critical-cpu-utilization='90'\n")),(0,n.kt)("p",null,"La commande produit le message de sortie ci-dessous:"),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"OK: Asg 'centreon-front' Statistic 'Average' Metrics CPU Utilization: 35.81 | 'centreon-front~average#ec2.cpu.utilization.percentage'=35.81;80;90;;\n")),(0,n.kt)("p",null,"Cette commande supervise la consommation CPU (",(0,n.kt)("inlineCode",{parentName:"p"},"--mode=cpu"),") sur le groupe d'Auto Scaling ",(0,n.kt)("em",{parentName:"p"},"centreon-front")," (",(0,n.kt)("inlineCode",{parentName:"p"},"--name='centreon-front' --type='asg'"),").\nCe groupe est rattach\xe9 \xe0 la r\xe9gion ",(0,n.kt)("em",{parentName:"p"},"eu-west-1")," d'AWS (",(0,n.kt)("inlineCode",{parentName:"p"},"--region='eu-west-1'"),")."),(0,n.kt)("p",null,"La m\xe9trique obtenue est une moyenne de valeurs (",(0,n.kt)("inlineCode",{parentName:"p"},"--statistic='average'"),") sur un intervalle de 10 minutes / 600 secondes  (",(0,n.kt)("inlineCode",{parentName:"p"},"--timeframe='600'"),") avec un point par minute / 60 secondes (",(0,n.kt)("inlineCode",{parentName:"p"},"--period='60'"),")."),(0,n.kt)("p",null,"Une alerte WARNING sera d\xe9clench\xe9e lorsque la consommation CPU sera sup\xe9rieure \xe0 80M, et CRITICAL si elle est sup\xe9rieure \xe0 90%."),(0,n.kt)("p",null,"Pour chaque mode, les options disponibles peuvent \xeatre consult\xe9es en ajoutant l'option ",(0,n.kt)("inlineCode",{parentName:"p"},"--help")," \xe0 la commande:"),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins/centreon_aws_ec2_api.pl --plugin=cloud::aws::ec2::plugin --mode=cpu --help\n")),(0,n.kt)("h3",i({},{id:"jobtiens-le-message-derreur-suivant--unknown-no-metrics-check-your-options-or-use---zeroed-option-to-set-0-on-undefined-values"}),"J'obtiens le message d'erreur suivant:  ",(0,n.kt)("inlineCode",{parentName:"h3"},"UNKNOWN: No metrics. Check your options or use --zeroed option to set 0 on undefined values")),(0,n.kt)("p",null,"Lors du d\xe9ploiement de mes contr\xf4les, j'obtiens le message suivant 'UNKNOWN: No metrics. Check your options or use --zeroed option to set 0 on undefined values'. "),(0,n.kt)("p",null,"Cela signifie qu'Amazon Cloudwatch n'a pas consolid\xe9 de donn\xe9es sur la p\xe9riode."),(0,n.kt)("p",null,"Vous pouvez ajouter ",(0,n.kt)("inlineCode",{parentName:"p"},"--zeroed")," \xe0 la macro EXTRAOPTIONS du ",(0,n.kt)("strong",{parentName:"p"},"service")," en question afin de forcer le stockage d'un 0 et ainsi \xe9viter un statut UNKNOWN."),(0,n.kt)("h3",i({},{id:"unknown-command-error----an-error-occurred-authfailure-"}),"UNKNOWN: Command error:  - An error occurred (AuthFailure) ","[...]"),(0,n.kt)("p",null,"Cette erreur signifie que le r\xf4le IAM associ\xe9 au combo access-key/secret-key n'a pas les droits suffisants pour r\xe9aliser une op\xe9ration donn\xe9e."),(0,n.kt)("h3",i({},{id:"unknown-command-error----an-error-occurred-invalidparametervalue-"}),"UNKNOWN: Command error:  - An error occurred (InvalidParameterValue) ","[...]"),(0,n.kt)("p",null,"Le plus souvent, cette erreur est le r\xe9sultat d'une erreur dans le nom de l'\xe9l\xe9ment supervis\xe9 (option ",(0,n.kt)("inlineCode",{parentName:"p"},"--name"),")."))}k.isMDXComponent=!0},7626:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(67294),r=a(86010);const l="tabItem_Ymn6";function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i.apply(this,arguments)}function s({children:e,hidden:t,className:a}){return n.createElement("div",i({role:"tabpanel",className:(0,r.Z)(l,a)},{hidden:t}),e)}},67709:(e,t,a)=>{a.d(t,{Z:()=>m});var n=a(67294),r=a(86010),l=a(90980),i=a(35715),s=a(8854),o=a(8241);const u="tabList__CuJ",p="tabItem_LNqP";function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c.apply(this,arguments)}function d(e){var t;const{lazy:a,block:l,defaultValue:d,values:m,groupId:k,className:g}=e,f=n.Children.map(e.children,(e=>{if((0,n.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),N=null!=m?m:f.map((({props:{value:e,label:t,attributes:a}})=>({value:e,label:t,attributes:a}))),b=(0,i.l)(N,((e,t)=>e.value===t.value));if(b.length>0)throw new Error(`Docusaurus error: Duplicate values "${b.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);var v;const h=null===d?d:null!==(v=null!=d?d:null===(t=f.find((e=>e.props.default)))||void 0===t?void 0:t.props.value)&&void 0!==v?v:f[0].props.value;if(null!==h&&!N.some((e=>e.value===h)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${h}" but none of its children has the corresponding value. Available values are: ${N.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:y,setTabGroupChoices:C}=(0,s.U)(),[w,A]=(0,n.useState)(h),E=[],{blockElementScrollPositionUntilNextRender:T}=(0,o.o5)();if(null!=k){const e=y[k];null!=e&&e!==w&&N.some((t=>t.value===e))&&A(e)}const P=e=>{const t=e.currentTarget,a=E.indexOf(t),n=N[a].value;n!==w&&(T(t),A(n),null!=k&&C(k,String(n)))},S=e=>{let t=null;switch(e.key){case"ArrowRight":{const n=E.indexOf(e.currentTarget)+1;var a;t=null!==(a=E[n])&&void 0!==a?a:E[0];break}case"ArrowLeft":{const a=E.indexOf(e.currentTarget)-1;var n;t=null!==(n=E[a])&&void 0!==n?n:E[E.length-1];break}}null==t||t.focus()};return n.createElement("div",{className:(0,r.Z)("tabs-container",u)},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":l},g)},N.map((({value:e,label:t,attributes:a})=>n.createElement("li",c({role:"tab",tabIndex:w===e?0:-1,"aria-selected":w===e,key:e,ref:e=>E.push(e),onKeyDown:S,onFocus:P,onClick:P},a,{className:(0,r.Z)("tabs__item",p,null==a?void 0:a.className,{"tabs__item--active":w===e})}),null!=t?t:e)))),a?(0,n.cloneElement)(f.filter((e=>e.props.value===w))[0],{className:"margin-top--md"}):n.createElement("div",{className:"margin-top--md"},f.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==w})))))}function m(e){const t=(0,l.Z)();return n.createElement(d,c({key:String(t)},e))}}}]);