"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[71237],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>m});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=p(a),m=r,k=d["".concat(s,".").concat(m)]||d[m]||c[m]||l;return a?n.createElement(k,i(i({ref:t},u),{},{components:a})):n.createElement(k,i({ref:t},u))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var p=2;p<l;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},48520:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>p,default:()=>k,frontMatter:()=>s,metadata:()=>u,toc:()=>d});a(67294);var n=a(3905),r=a(67709),l=a(7626);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i.apply(this,arguments)}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const s={id:"network-versa-director-restapi",title:"Versa Director Restapi"},p=void 0,u={unversionedId:"integrations/plugin-packs/procedures/network-versa-director-restapi",id:"integrations/plugin-packs/procedures/network-versa-director-restapi",title:"Versa Director Restapi",description:"Vue d'ensemble",source:"@site/i18n/fr/docusaurus-plugin-content-docs-pp/current/integrations/plugin-packs/procedures/network-versa-director-restapi.md",sourceDirName:"integrations/plugin-packs/procedures",slug:"/integrations/plugin-packs/procedures/network-versa-director-restapi",permalink:"/centreon-documentation/pr-preview/pr-2832/fr/pp/integrations/plugin-packs/procedures/network-versa-director-restapi",draft:!1,tags:[],version:"current",frontMatter:{id:"network-versa-director-restapi",title:"Versa Director Restapi"},sidebar:"pp",previous:{title:"Versa SNMP",permalink:"/centreon-documentation/pr-preview/pr-2832/fr/pp/integrations/plugin-packs/procedures/network-versa-snmp"},next:{title:"Base Pack",permalink:"/centreon-documentation/pr-preview/pr-2832/fr/pp/integrations/plugin-packs/procedures/base-generic"}},c={},d=[{value:"Vue d&#39;ensemble",id:"vue-densemble",level:2},{value:"Contenu du Plugin-Pack",id:"contenu-du-plugin-pack",level:2},{value:"Elements supervis\xe9s",id:"elements-supervis\xe9s",level:3},{value:"R\xe8gles de d\xe9couvertes",id:"r\xe8gles-de-d\xe9couvertes",level:3},{value:"M\xe9triques Collect\xe9es",id:"m\xe9triques-collect\xe9es",level:3},{value:"Pr\xe9requis",id:"pr\xe9requis",level:2},{value:"API",id:"api",level:3},{value:"Flux r\xe9seaux",id:"flux-r\xe9seaux",level:3},{value:"Installation",id:"installation",level:2},{value:"Configuration",id:"configuration",level:2},{value:"FAQ",id:"faq",level:2},{value:"Comment tester un contr\xf4le en ligne de commande et que signifient les options principales ?",id:"comment-tester-un-contr\xf4le-en-ligne-de-commande-et-que-signifient-les-options-principales-",level:3},{value:"J&#39;obtiens le message d&#39;erreur suivant:",id:"jobtiens-le-message-derreur-suivant",level:3},{value:"<code>UNKNOWN: 500 Can&#39;t connect to myversadirector:9182 |</code>",id:"unknown-500-cant-connect-to-myversadirector9182-",level:4},{value:"<code>UNKNOWN: 501 Protocol scheme &#39;connect&#39; is not supported |</code>",id:"unknown-501-protocol-scheme-connect-is-not-supported-",level:4},{value:"<code>UNKNOWN: Cannot load module &#39;Net::Curl::Easy&#39;</code>",id:"unknown-cannot-load-module-netcurleasy",level:4}],m={toc:d};function k(e){var{components:t}=e,a=o(e,["components"]);return(0,n.kt)("wrapper",i({},m,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",i({},{id:"vue-densemble"}),"Vue d'ensemble"),(0,n.kt)("p",null,"Versa Director est la plateforme de management, supervision et d'orchestration\npour d\xe9livrer les services de s\xe9curit\xe9 et de r\xe9seau VNF de la suite Versa Networks."),(0,n.kt)("p",null,"Le Plugin-Pack Centreon utilise l'API de Versa Director pour se connecter et\nr\xe9cup\xe9rer des informations et des m\xe9triques relatives aux \xe9quipements Versa."),(0,n.kt)("p",null,"Vous trouverez plus d'information \xe0 propos de l'API Versa Director sur la documentation officielle :\n",(0,n.kt)("a",i({parentName:"p"},{href:"https://apidocs.versa-networks.com/"}),"https://apidocs.versa-networks.com/")),(0,n.kt)("h2",i({},{id:"contenu-du-plugin-pack"}),"Contenu du Plugin-Pack"),(0,n.kt)("h3",i({},{id:"elements-supervis\xe9s"}),"Elements supervis\xe9s"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Versa Networks devices")),(0,n.kt)("h3",i({},{id:"r\xe8gles-de-d\xe9couvertes"}),"R\xe8gles de d\xe9couvertes"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Hosts",label:"Hosts",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Nom de la r\xe8gle"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Net-Versa-Director-Restapi-HostDiscovery-devices"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"D\xe9couvrez vos \xe9quipements Versa manag\xe9s par un Versa Director")))))),(0,n.kt)("h3",i({},{id:"m\xe9triques-collect\xe9es"}),"M\xe9triques Collect\xe9es"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Devices",label:"Devices",mdxType:"TabItem"},(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Global")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"status"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Status of the device"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"memory.usage.bytes"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Memory usage on the device"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"B")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"memory.free.bytes"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Free memory on the device"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"B")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"memory.usage.percentage"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Percentage of memory usage on the device"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"%")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"disk.usage.bytes"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Disk usage on the device"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"B")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"disk.free.bytes"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Free disk space on the device"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"B")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"disk.usage.percentage"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Percentage of disk usage on the device"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"%")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"alarms.critical.count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of critical alarms on the device"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"alarms.major.count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of major alarms on the device"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"alarms.minor.count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of minor alarms on the device"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"alarms.warning.count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of warning alarms on the device"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"alarms.indeterminate.count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of indeterminate alarms on the device"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"policy.violation.packets.dropped.novalidlink.count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of packets dropped by no valid link"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"policy.violation.packets.dropped.slaaction.count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of packets dropped by sla action"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Count")))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Per health monitor. monitor-name are 'bgp', 'config', 'ike', 'interface', 'port', 'path', 'reachability', 'service'.")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),(0,n.kt)("inlineCode",{parentName:"td"},"<monitor-name>"),".health.up.count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of health monitors up"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),(0,n.kt)("inlineCode",{parentName:"td"},"<monitor-name>"),".health.disabled.count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of health monitors disabled"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),(0,n.kt)("inlineCode",{parentName:"td"},"<monitor-name>"),".health.down.count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of health monitors down"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Count")))))),(0,n.kt)("h2",i({},{id:"pr\xe9requis"}),"Pr\xe9requis"),(0,n.kt)("h3",i({},{id:"api"}),"API"),(0,n.kt)("p",null,"l'API doit \xeatre activ\xe9e et d\xe9marr\xe9e sur le Versa Director.\nR\xe9f\xe9rencez-vous \xe0 la documentation officielle de Versa Networks pour l'activation de l'API."),(0,n.kt)("h3",i({},{id:"flux-r\xe9seaux"}),"Flux r\xe9seaux"),(0,n.kt)("p",null,"La communication doit \xeatre possible sur le port TCP 9182 (en HTTPS) depuis le collecteur Centreon vers le Versa Director."),(0,n.kt)("h2",i({},{id:"installation"}),"Installation"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Online License",label:"Online License",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Installer le Plugin sur l'ensemble des collecteurs Centreon supervisant\ndes \xe9quipements Versa via l'API du Versa Director :")),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"yum install centreon-plugin-Network-Versa-Director-Restapi\n")),(0,n.kt)("ol",i({},{start:2}),(0,n.kt)("li",{parentName:"ol"},"Installer le Plugin-Pack ",(0,n.kt)("em",{parentName:"li"},"Versa Director Restapi"),' depuis la page "Configuration > Plugin packs > Manager" sur l\'interface Web de Centreon.'))),(0,n.kt)(l.Z,{value:"Offline License",label:"Offline License",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Installer le Plugin sur l'ensemble des collecteurs Centreon supervisant\ndes \xe9quipements Versa via l'API du Versa Director :")),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"yum install centreon-plugin-Network-Versa-Director-Restapi\n")),(0,n.kt)("ol",i({},{start:2}),(0,n.kt)("li",{parentName:"ol"},"Installer le RPM du Plugin-Pack contenant les mod\xe8les de supervision:")),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"yum install centreon-pack-network-versa-director-restapi\n")),(0,n.kt)("ol",i({},{start:3}),(0,n.kt)("li",{parentName:"ol"},"Installer le Plugin-Pack ",(0,n.kt)("em",{parentName:"li"},"Versa Director Restapi"),' depuis la page "Configuration > Plugin packs > Manager" sur l\'interface Web de Centreon.')))),(0,n.kt)("h2",i({},{id:"configuration"}),"Configuration"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'Depuis l\'interface Web de Centreon, ajoutez un nouvel H\xf4te depuis la page "Configuration > H\xf4tes".'),(0,n.kt)("li",{parentName:"ul"},"Appliquez le mod\xe8le ",(0,n.kt)("em",{parentName:"li"},"Net-Versa-Director-Device-Restapi-custom")," et configurez tous les macros n\xe9cessaires :")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Mandatory"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"DIRECTORAPIPORT"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Port used. Default: 9182")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"DIRECTORAPIPROTO"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Protocol used. Default: https")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"DIRECTORAPIORGANIZATION"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Linked organizations of the device. Default: .*")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"DIRECTORAPIHOSTNAME"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Hostname of the Versa Director.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"DIRECTORAPIUSERNAME"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Username to access to the API.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"DIRECTORAPIPASSWORD"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Password to access to the API.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"DIRECTORAPIDEVICENAME"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Name of the Versa device.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"DIRECTORAPIEXTRAOPTIONS"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Any extra option you may want to add to the command (eg. a --verbose flag)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"PROXYURL"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Proxy URL. (eg. ",(0,n.kt)("a",i({parentName:"td"},{href:"http://myproxy.int:3128"}),"http://myproxy.int:3128"),")")))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},'Utiliez le module de d\xe9couverte pour ajouter \xe0 votre supervision vos \xe9quipements Versa.\nAllez dans le menu "Configuration > Host > Discovery" et utilisez le provider ',(0,n.kt)("em",{parentName:"p"},"Versa Networks devices (Director RestAPI)"))),(0,n.kt)("h2",i({},{id:"faq"}),"FAQ"),(0,n.kt)("h3",i({},{id:"comment-tester-un-contr\xf4le-en-ligne-de-commande-et-que-signifient-les-options-principales-"}),"Comment tester un contr\xf4le en ligne de commande et que signifient les options principales ?"),(0,n.kt)("p",null,"Une fois le Plugin install\xe9, vous pouvez tester directement celui-ci en ligne de commande depuis votre collecteur Centreon avec l'utilisateur ",(0,n.kt)("em",{parentName:"p"},"centreon-engine"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins//centreon_versa_director_restapi.pl \\\n  --plugin=network::versa::director::restapi::plugin \\\n  --mode=devices \\\n  --hostname=10.0.0.1 \\\n  --port='9182' \\\n  --proto='https' \\\n  --api-username='jdoe' \\\n  --api-password='6fbadZEJbsLG' \\\n  --organization='.*' \\\n  --filter-device-name='^CENFRGW101$' \\\n  --warning-status='' \\\n  --critical-status='%{ping_status} ne \"reachable\" or %{services_status} ne \"good\"' \\\n  --verbose\n")),(0,n.kt)("p",null,"La commande retourne le message de sortie ci-dessous:"),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"OK: Device 'CENFRGW101' status services: good [ping: reachable] [sync: in_sync] [path: unavailable] [controller: unavailable] -\nmemory total: 31.42 GB used: 11.49 GB (36.57%) free: 19.93 GB (63.43%) - disk total: 250.00 B used: 18.00 B (7.20%) free: 232.00 B (92.80%) -\nalarms critical: 0, major: 0, minor: 0, warning: 0, indeterminate: 0 -\npolicy violation packets-dropped-novalidlink : 0, packets-dropped-slaaction : 0 -\nall health monitors are ok | 'devices.total.count'=1;;;0; 'CENFRGW101#memory.usage.bytes'=12337293557B;;;0;33736968110.08\n'CENFRGW101#memory.free.bytes'=21399674552B;;;0;33736968110.08 'CENFRGW101#memory.usage.percentage'=36.57;;;0;100\n'CENFRGW101#disk.usage.bytes'=18B;;;0;250 'CENFRGW101#disk.free.bytes'=232B;;;0;250\n'CENFRGW101#disk.usage.percentage'=7.20;;;0;100 'CENFRGW101#alarms.critical.count'=0;;;0;\n'CENFRGW101#alarms.major.count'=0;;;0; 'CENFRGW101#alarms.minor.count'=0;;;0; 'CENFRGW101#alarms.warning.count'=0;;;0;\n'CENFRGW101#alarms.indeterminate.count'=0;;;0; 'CENFRGW101~bgp adjacencies#health.up.count'=3;;;0;3\n'CENFRGW101~bgp adjacencies#health.down.count'=0;;;0;3 'CENFRGW101~bgp adjacencies#health.disabled.count'=0;;;0;3\n'CENFRGW101~config sync status#health.up.count'=1;;;0;1 'CENFRGW101~config sync status#health.down.count'=0;;;0;1\n'CENFRGW101~config sync status#health.disabled.count'=0;;;0;1 'CENFRGW101~ike status#health.up.count'=2;;;0;2\n'CENFRGW101~ike status#health.down.count'=0;;;0;2 'CENFRGW101~ike status#health.disabled.count'=0;;;0;2\n'CENFRGW101~interfaces#health.up.count'=3;;;0;3 'CENFRGW101~interfaces#health.down.count'=0;;;0;3\n'CENFRGW101~interfaces#health.disabled.count'=0;;;0;3 'CENFRGW101~paths#health.up.count'=24;;;0;24\n'CENFRGW101~paths#health.down.count'=0;;;0;24 'CENFRGW101~paths#health.disabled.count'=0;;;0;24\n'CENFRGW101~physical ports#health.up.count'=0;;;0;0 'CENFRGW101~physical ports#health.down.count'=0;;;0;0\n'CENFRGW101~physical ports#health.disabled.count'=0;;;0;0 'CENFRGW101~reachability status#health.up.count'=1;;;0;1\n'CENFRGW101~reachability status#health.down.count'=0;;;0;1 'CENFRGW101~reachability status#health.disabled.count'=0;;;0;1\n'CENFRGW101~service status#health.up.count'=1;;;0;1 'CENFRGW101~service status#health.down.count'=0;;;0;1\n'CENFRGW101~service status#health.disabled.count'=0;;;0;1\nchecking device 'CENFRGW101' [type: hub]\n    status services: good [ping: reachable] [sync: in_sync] [path: unavailable] [controller: unavailable]\n    memory total: 31.42 GB used: 11.49 GB (36.57%) free: 19.93 GB (63.43%)\n    disk total: 250.00 B used: 18.00 B (7.20%) free: 232.00 B (92.80%)\n    alarms critical: 0, major: 0, minor: 0, warning: 0, indeterminate: 0\n    policy violation packets-dropped-novalidlink : 0, packets-dropped-slaaction : 0\n    health monitor 'bgp adjacencies' up: 3, down: 0, disabled: 0\n    health monitor 'config sync status' up: 1, down: 0, disabled: 0\n    health monitor 'ike status' up: 2, down: 0, disabled: 0\n    health monitor 'interfaces' up: 3, down: 0, disabled: 0\n    health monitor 'paths' up: 24, down: 0, disabled: 0\n    health monitor 'physical ports' up: 0, down: 0, disabled: 0\n    health monitor 'reachability status' up: 1, down: 0, disabled: 0\n    health monitor 'service status' up: 1, down: 0, disabled: 0\n")),(0,n.kt)("p",null,"Cette commande supervise un \xe9quipement Versa Networks ",(0,n.kt)("strong",{parentName:"p"},"CENFRGW101")," (",(0,n.kt)("inlineCode",{parentName:"p"},"--filter-device-name='^CENFRGW101$'"),")\n\xe0 l'aide l'API Versa Director (",(0,n.kt)("inlineCode",{parentName:"p"},"--plugin=network::versa::director::restapi::plugin --mode=devices"),").\nLe plugin requ\xeate l'API du Versa Director ",(0,n.kt)("strong",{parentName:"p"},"10.0.0.1")," (",(0,n.kt)("inlineCode",{parentName:"p"},"--hostname=10.0.0.1"),") avec l'utilisateur\n",(0,n.kt)("strong",{parentName:"p"},"jdoe")," et son mot de passe (",(0,n.kt)("inlineCode",{parentName:"p"},"--api-username='jdoe' --api-password='6fbadZEJbsLG'"),").\nUn \xe9quipement Versa peut \xeatre li\xe9 \xe0 plusieurs organisations, nous utilisons une ",(0,n.kt)("em",{parentName:"p"},"wildcard")," (",(0,n.kt)("inlineCode",{parentName:"p"},"--organization='.*'"),")."),(0,n.kt)("p",null,"Cette commande retournera une alerte CRITICAL (",(0,n.kt)("inlineCode",{parentName:"p"},'--critical-status=\'%{ping_status} ne "reachable" or %{services_status} ne "good"\''),") si :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Le 'ping status' de l'\xe9quipement est diff\xe9rent de ",(0,n.kt)("strong",{parentName:"li"},"reachable")),(0,n.kt)("li",{parentName:"ul"},"Le 'service_status' de l'\xe9quipement est diff\xe9rent de ",(0,n.kt)("strong",{parentName:"li"},"good"))),(0,n.kt)("p",null,"Des seuils peuvent \xeatre positionn\xe9s \xe0 l'aide des options ",(0,n.kt)("inlineCode",{parentName:"p"},"--warning-*")," et ",(0,n.kt)("inlineCode",{parentName:"p"},"--critical-*")," sur les m\xe9triques."),(0,n.kt)("p",null,"Pour chaque mode, les options disponibles peuvent \xeatre consult\xe9es en ajoutant l'option ",(0,n.kt)("inlineCode",{parentName:"p"},"--help")," \xe0 la commande:"),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins/centreon_versa_snmp.pl \\\n  --plugin=network::versa::director::restapi::plugin \\\n  --mode=devices \\\n  --help\n")),(0,n.kt)("h3",i({},{id:"jobtiens-le-message-derreur-suivant"}),"J'obtiens le message d'erreur suivant:"),(0,n.kt)("h4",i({},{id:"unknown-500-cant-connect-to-myversadirector9182-"}),(0,n.kt)("inlineCode",{parentName:"h4"},"UNKNOWN: 500 Can't connect to myversadirector:9182 |")),(0,n.kt)("p",null,"Lors du d\xe9ploiement de mes contr\xf4les, j'obtiens le message suivant ",(0,n.kt)("inlineCode",{parentName:"p"},"UNKNOWN: 500 Can't connect to myversadirector:9182 |"),".\nCela signifie que Centreon n'a pas r\xe9ussi \xe0 se connecter \xe0 l'API du Versa Director.\nLa plupart du temps, il faut pr\xe9ciser le proxy \xe0 utiliser pour requ\xeater l'API du Versa Director en utilisant l'option ",(0,n.kt)("inlineCode",{parentName:"p"},"--proxyurl='http://proxy.mycompany:8080'"),"."),(0,n.kt)("h4",i({},{id:"unknown-501-protocol-scheme-connect-is-not-supported-"}),(0,n.kt)("inlineCode",{parentName:"h4"},"UNKNOWN: 501 Protocol scheme 'connect' is not supported |")),(0,n.kt)("p",null,"Suite \xe0 la mise en place du proxy, j'obtiens le message suivant ",(0,n.kt)("inlineCode",{parentName:"p"},"UNKNOWN: 501 Protocol scheme 'connect' is not supported |"),"\nCela signifie que le protocole de connexion au proxy n'est pas support\xe9 par la libraire ",(0,n.kt)("em",{parentName:"p"},"LWP")," utlis\xe9e par d\xe9faut par le Plugin Centreon.\nCette erreur peut \xeatre r\xe9solue en utilisant le backend HTTP ",(0,n.kt)("em",{parentName:"p"},"curl"),". Pour ce faire, ajoutez l'option ",(0,n.kt)("inlineCode",{parentName:"p"},"--http-backend='curl'")," \xe0 la commande."),(0,n.kt)("h4",i({},{id:"unknown-cannot-load-module-netcurleasy"}),(0,n.kt)("inlineCode",{parentName:"h4"},"UNKNOWN: Cannot load module 'Net::Curl::Easy'")),(0,n.kt)("p",null,"Ce message d'erreur indique qu'une librairie Perl est maquante pour utiliser le backend curl.\nPour corriger ce probl\xe8me, installer la librairie Perl Net::Curl::Easy \xe0 l'aide de la commande suivante :"),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"yum install perl-Net-Curl\n")))}k.isMDXComponent=!0},7626:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(67294),r=a(86010);const l="tabItem_Ymn6";function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i.apply(this,arguments)}function o({children:e,hidden:t,className:a}){return n.createElement("div",i({role:"tabpanel",className:(0,r.Z)(l,a)},{hidden:t}),e)}},67709:(e,t,a)=>{a.d(t,{Z:()=>m});var n=a(67294),r=a(86010),l=a(90980),i=a(35715),o=a(8854),s=a(8241);const p="tabList__CuJ",u="tabItem_LNqP";function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c.apply(this,arguments)}function d(e){var t;const{lazy:a,block:l,defaultValue:d,values:m,groupId:k,className:N}=e,g=n.Children.map(e.children,(e=>{if((0,n.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),f=null!=m?m:g.map((({props:{value:e,label:t,attributes:a}})=>({value:e,label:t,attributes:a}))),v=(0,i.l)(f,((e,t)=>e.value===t.value));if(v.length>0)throw new Error(`Docusaurus error: Duplicate values "${v.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);var h;const b=null===d?d:null!==(h=null!=d?d:null===(t=g.find((e=>e.props.default)))||void 0===t?void 0:t.props.value)&&void 0!==h?h:g[0].props.value;if(null!==b&&!f.some((e=>e.value===b)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${b}" but none of its children has the corresponding value. Available values are: ${f.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:y,setTabGroupChoices:C}=(0,o.U)(),[w,P]=(0,n.useState)(b),E=[],{blockElementScrollPositionUntilNextRender:R}=(0,s.o5)();if(null!=k){const e=y[k];null!=e&&e!==w&&f.some((t=>t.value===e))&&P(e)}const O=e=>{const t=e.currentTarget,a=E.indexOf(t),n=f[a].value;n!==w&&(R(t),P(n),null!=k&&C(k,String(n)))},D=e=>{let t=null;switch(e.key){case"ArrowRight":{const n=E.indexOf(e.currentTarget)+1;var a;t=null!==(a=E[n])&&void 0!==a?a:E[0];break}case"ArrowLeft":{const a=E.indexOf(e.currentTarget)-1;var n;t=null!==(n=E[a])&&void 0!==n?n:E[E.length-1];break}}null==t||t.focus()};return n.createElement("div",{className:(0,r.Z)("tabs-container",p)},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":l},N)},f.map((({value:e,label:t,attributes:a})=>n.createElement("li",c({role:"tab",tabIndex:w===e?0:-1,"aria-selected":w===e,key:e,ref:e=>E.push(e),onKeyDown:D,onFocus:O,onClick:O},a,{className:(0,r.Z)("tabs__item",u,null==a?void 0:a.className,{"tabs__item--active":w===e})}),null!=t?t:e)))),a?(0,n.cloneElement)(g.filter((e=>e.props.value===w))[0],{className:"margin-top--md"}):n.createElement("div",{className:"margin-top--md"},g.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==w})))))}function m(e){const t=(0,l.Z)();return n.createElement(d,c({key:String(t)},e))}}}]);