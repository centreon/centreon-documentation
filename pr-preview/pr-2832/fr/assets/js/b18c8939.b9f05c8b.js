"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[68176],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>d});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),c=p(a),d=r,k=c["".concat(s,".").concat(d)]||c[d]||m[d]||l;return a?n.createElement(k,i(i({ref:t},u),{},{components:a})):n.createElement(k,i({ref:t},u))}));function d(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var p=2;p<l;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},88010:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>m,contentTitle:()=>p,default:()=>k,frontMatter:()=>s,metadata:()=>u,toc:()=>c});a(67294);var n=a(3905),r=a(67709),l=a(7626);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i.apply(this,arguments)}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const s={id:"cloud-azure-network-appgateway",title:"Azure Application Gateway"},p=void 0,u={unversionedId:"integrations/plugin-packs/procedures/cloud-azure-network-appgateway",id:"integrations/plugin-packs/procedures/cloud-azure-network-appgateway",title:"Azure Application Gateway",description:"Vue d'ensemble",source:"@site/i18n/fr/docusaurus-plugin-content-docs-pp/current/integrations/plugin-packs/procedures/cloud-azure-network-appgateway.md",sourceDirName:"integrations/plugin-packs/procedures",slug:"/integrations/plugin-packs/procedures/cloud-azure-network-appgateway",permalink:"/centreon-documentation/pr-preview/pr-2832/fr/pp/integrations/plugin-packs/procedures/cloud-azure-network-appgateway",draft:!1,tags:[],version:"current",frontMatter:{id:"cloud-azure-network-appgateway",title:"Azure Application Gateway"},sidebar:"pp",previous:{title:"Azure API Management",permalink:"/centreon-documentation/pr-preview/pr-2832/fr/pp/integrations/plugin-packs/procedures/cloud-azure-management-apimanagement"},next:{title:"Azure Application Insights",permalink:"/centreon-documentation/pr-preview/pr-2832/fr/pp/integrations/plugin-packs/procedures/cloud-azure-management-applicationinsights"}},m={},c=[{value:"Vue d&#39;ensemble",id:"vue-densemble",level:2},{value:"Contenu du Pack",id:"contenu-du-pack",level:2},{value:"Objets supervis\xe9s",id:"objets-supervis\xe9s",level:3},{value:"R\xe8gles de d\xe9couverte",id:"r\xe8gles-de-d\xe9couverte",level:3},{value:"M\xe9triques &amp; statuts collect\xe9s",id:"m\xe9triques--statuts-collect\xe9s",level:3},{value:"Sp\xe9cifiques v1",id:"sp\xe9cifiques-v1",level:4},{value:"Sp\xe9cifiques v2",id:"sp\xe9cifiques-v2",level:4},{value:"Communs aux 2 versions",id:"communs-aux-2-versions",level:4},{value:"Pr\xe9requis",id:"pr\xe9requis",level:2},{value:"Installation",id:"installation",level:2},{value:"Configuration",id:"configuration",level:2},{value:"H\xf4te",id:"h\xf4te",level:3},{value:"Comment puis-je tester le Plugin et que signifient les options des commandes ?",id:"comment-puis-je-tester-le-plugin-et-que-signifient-les-options-des-commandes-",level:2},{value:"Diagnostic des erreurs communes",id:"diagnostic-des-erreurs-communes",level:3},{value:"Les identifiants ont chang\xe9 et mon Plugin ne fonctionne plus",id:"les-identifiants-ont-chang\xe9-et-mon-plugin-ne-fonctionne-plus",level:4},{value:"<code>UNKNOWN: Login endpoint API returns error code &#39;ERROR_NAME&#39; (add --debug option for detailed message)</code>",id:"unknown-login-endpoint-api-returns-error-code-error_name-add---debug-option-for-detailed-message",level:4},{value:"<code>UNKNOWN: 500 Can&#39;t connect to login.microsoftonline.com:443</code>",id:"unknown-500-cant-connect-to-loginmicrosoftonlinecom443",level:4},{value:"<code>UNKNOWN: No metrics. Check your options or use --zeroed option to set 0 on undefined values</code>",id:"unknown-no-metrics-check-your-options-or-use---zeroed-option-to-set-0-on-undefined-values",level:4}],d={toc:c};function k(e){var{components:t}=e,s=o(e,["components"]);return(0,n.kt)("wrapper",i({},d,s,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",i({},{id:"vue-densemble"}),"Vue d'ensemble"),(0,n.kt)("p",null,"Azure Application Gateway est un \xe9quilibreur de charge du trafic web qui vous permet de g\xe9rer le trafic vers vos applications web.\nLes \xe9quilibreurs de charge traditionnels fonctionnent au niveau de la couche de transport (couche OSI 4 - TCP et UDP) et\nacheminent le trafic en fonction de l\u2019adresse IP et du port sources, vers une adresse IP et un port de destination."),(0,n.kt)("p",null,"Le Plugin Pack Centreon ",(0,n.kt)("em",{parentName:"p"},"Azure Application Gateway")," s'appuie sur les API Azure Monitor afin de r\xe9cuperer les m\xe9triques relatives au service\nApplication Gateway. Il est possible d'utiliser les 2 modes propos\xe9s par Microsoft: RestAPI ou Azure CLI."),(0,n.kt)("p",null,"Les versions 1 & 2 des ressources Application Gateway sont support\xe9es."),(0,n.kt)("h2",i({},{id:"contenu-du-pack"}),"Contenu du Pack"),(0,n.kt)("h3",i({},{id:"objets-supervis\xe9s"}),"Objets supervis\xe9s"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Instances Azure ",(0,n.kt)("em",{parentName:"p"},"Application Gateway")," v1"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Backend-Health"),(0,n.kt)("li",{parentName:"ul"},"Connections"),(0,n.kt)("li",{parentName:"ul"},"Health"),(0,n.kt)("li",{parentName:"ul"},"Requests"),(0,n.kt)("li",{parentName:"ul"},"Throughput"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Instances Azure ",(0,n.kt)("em",{parentName:"p"},"Application Gateway")," v2"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Backend-Status"),(0,n.kt)("li",{parentName:"ul"},"Backend-Time"),(0,n.kt)("li",{parentName:"ul"},"Clients-Traffic"),(0,n.kt)("li",{parentName:"ul"},"Connections"),(0,n.kt)("li",{parentName:"ul"},"Gateway-Time"),(0,n.kt)("li",{parentName:"ul"},"Health"),(0,n.kt)("li",{parentName:"ul"},"Requests"),(0,n.kt)("li",{parentName:"ul"},"Throughput"),(0,n.kt)("li",{parentName:"ul"},"Units")))),(0,n.kt)("h3",i({},{id:"r\xe8gles-de-d\xe9couverte"}),"R\xe8gles de d\xe9couverte"),(0,n.kt)("p",null,"Le Plugin Pack Centreon ",(0,n.kt)("em",{parentName:"p"},"Azure Application Gateway")," inclut un ",(0,n.kt)("em",{parentName:"p"},"provider")," de d\xe9couverte d'H\xf4tes nomm\xe9 ",(0,n.kt)("strong",{parentName:"p"},"Microsoft Azure Application Gateway"),".\nCelui-ci permet de d\xe9couvrir l'ensemble des instances ",(0,n.kt)("em",{parentName:"p"},"Application Gateway")," rattach\xe9s \xe0 une ",(0,n.kt)("em",{parentName:"p"},"souscription")," Microsoft Azure donn\xe9e:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"image",src:a(55146).Z,width:"608",height:"188"})),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"La d\xe9couverte ",(0,n.kt)("em",{parentName:"p"},"Azure Application Gateway")," n'est compatible qu'avec le mode 'api'. Le mode 'azcli' n'est pas support\xe9 dans le cadre\nde cette utilisation. ")),(0,n.kt)("p",null,"Vous trouverez plus d'informations sur la d\xe9couverte d'H\xf4tes et son fonctionnement sur la documentation du module:\n",(0,n.kt)("a",i({parentName:"p"},{href:"/docs/monitoring/discovery/hosts-discovery"}),"D\xe9couverte des h\xf4tes")),(0,n.kt)("h3",i({},{id:"m\xe9triques--statuts-collect\xe9s"}),"M\xe9triques & statuts collect\xe9s"),(0,n.kt)("p",null,"Les m\xe9triques et statuts disponibles peuvent diff\xe9rer selon la version de l'instance ",(0,n.kt)("em",{parentName:"p"},"Application Gateway"),"."),(0,n.kt)("h4",i({},{id:"sp\xe9cifiques-v1"}),"Sp\xe9cifiques v1"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Backend-Health",label:"Backend-Health",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric Name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"appgateway.backend.healthy.host.count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Healthy Host Count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"appgateway.backend.unhealthy.host.count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Unhealthy Host Count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Count")))))),(0,n.kt)("h4",i({},{id:"sp\xe9cifiques-v2"}),"Sp\xe9cifiques v2"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Backend-Status",label:"Backend-Status",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric Name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"appgateway.backend.response.status.count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Backend Response Status"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Count"))))),(0,n.kt)(l.Z,{value:"Backend-Time",label:"Backend-Time",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric Name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"appgateway.backend.connect.time.milliseconds"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Backend Connect Time"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"ms")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"appgateway.backend.firstbyte.responsetime.milliseconds"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Backend First Byte Response Time"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"ms")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"appgateway.backend.lastbyte.responsetime.milliseconds"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Backend Last Byte Response Time"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"ms"))))),(0,n.kt)(l.Z,{value:"Clients-Traffic",label:"Clients-Traffic",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric Name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"appgateway.traffic.clients.received.bytes"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Clients Bytes Received"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"B")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"appgateway.traffic.clients.sent.bytes"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Clients Bytes Sent"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"B"))))),(0,n.kt)(l.Z,{value:"Gateway-Time",label:"Gateway-Time",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric Name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"appgateway.time.total.milliseconds"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Application Gateway Total Time"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"ms"))))),(0,n.kt)(l.Z,{value:"Units",label:"Units",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric Name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"appgateway.billable.units.fixed.count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Fixed Billable Capacity Units"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"appgateway.billed.units.estimated.count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Estimated Billed Capacity Units"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"appgateway.capacity.units.count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Capacity Units consumed"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"appgateway.compute.units.count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Compute Units consumed"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Count")))),(0,n.kt)("h4",i({},{id:"communs-aux-2-versions"}),"Communs aux 2 versions")),(0,n.kt)(l.Z,{value:"Connections",label:"Connections",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric Name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"appgateway.backend.connections.current.count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Current Connections"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Count"))))),(0,n.kt)(l.Z,{value:"Health",label:"Health",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Status Name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"status"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Current operational status")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"summary"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Last related status message"))))),(0,n.kt)(l.Z,{value:"Requests",label:"Requests",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric Name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"appgateway.requests.failed.count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Failed Requests"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"appgateway.requests.total.count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Total Requests"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Count"))))),(0,n.kt)(l.Z,{value:"Throughput",label:"Throughput",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric Name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"appgateway.throughput.bytespersecond"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Throughput"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"B/s")))))),(0,n.kt)("h2",i({},{id:"pr\xe9requis"}),"Pr\xe9requis"),(0,n.kt)("p",null,"Deux moyens sont disponibles pour interroger les API Microsoft Azure. "),(0,n.kt)("p",null,"Centreon pr\xe9conise l'utilisation de la m\xe9thode ",(0,n.kt)("em",{parentName:"p"},"API")," plut\xf4t que la ",(0,n.kt)("em",{parentName:"p"},"CLI"),", cette derni\xe8re \xe9tant significativement\nmoins performante. L'API permet \xe9galement une authentification ",(0,n.kt)("em",{parentName:"p"},"Application")," et ne n\xe9cessite pas de compte de service d\xe9di\xe9."),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Azure Monitor API",label:"Azure Monitor API",mdxType:"TabItem"},(0,n.kt)("p",null,"Pour le custom-mode 'api', r\xe9cup\xe9rez les informations en suivant la proc\xe9dure ci-dessous (en anglais)\net notez celles-ci en lieu s\xfbr. Elles seront en effet indispensables lors de la configuration des ressources\ndans Centreon."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Create an ",(0,n.kt)("em",{parentName:"p"},"application")," in Azure Active Directory:"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Log in to your Azure account."),(0,n.kt)("li",{parentName:"ul"},"Select ",(0,n.kt)("em",{parentName:"li"},"Azure Active directory")," in the left sidebar."),(0,n.kt)("li",{parentName:"ul"},"Click on ",(0,n.kt)("em",{parentName:"li"},"App registrations"),"."),(0,n.kt)("li",{parentName:"ul"},"Click on ",(0,n.kt)("em",{parentName:"li"},"+ Add"),"."),(0,n.kt)("li",{parentName:"ul"},"Enter Centreon as the application name (or any name of your choice), select application type(api) and sign-on-url."),(0,n.kt)("li",{parentName:"ul"},"Click on the ",(0,n.kt)("em",{parentName:"li"},"Create")," button."))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Get ",(0,n.kt)("em",{parentName:"p"},"Subscription ID")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Log in to your Azure account."),(0,n.kt)("li",{parentName:"ul"},"Select ",(0,n.kt)("em",{parentName:"li"},"Subscriptions")," in the left sidebar."),(0,n.kt)("li",{parentName:"ul"},"Select whichever subscription is needed."),(0,n.kt)("li",{parentName:"ul"},"Click on ",(0,n.kt)("em",{parentName:"li"},"Overview"),"."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Copy the Subscription ID.")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Get ",(0,n.kt)("em",{parentName:"p"},"Tenant ID")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Log in to your Azure account."),(0,n.kt)("li",{parentName:"ul"},"Select ",(0,n.kt)("em",{parentName:"li"},"Azure Active directory")," in the left sidebar."),(0,n.kt)("li",{parentName:"ul"},"Click on ",(0,n.kt)("em",{parentName:"li"},"Properties"),"."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Copy the directory ID.")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Get ",(0,n.kt)("em",{parentName:"p"},"Client ID")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Log in to your Azure account."),(0,n.kt)("li",{parentName:"ul"},"Select ",(0,n.kt)("em",{parentName:"li"},"Azure Active directory")," in the left sidebar."),(0,n.kt)("li",{parentName:"ul"},"Click on ",(0,n.kt)("em",{parentName:"li"},"Enterprise applications"),"."),(0,n.kt)("li",{parentName:"ul"},"Click on ",(0,n.kt)("em",{parentName:"li"},"All applications"),"."),(0,n.kt)("li",{parentName:"ul"},"Select the application previously created."),(0,n.kt)("li",{parentName:"ul"},"Click on ",(0,n.kt)("em",{parentName:"li"},"Properties"),"."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Copy the Application ID.")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Get ",(0,n.kt)("em",{parentName:"p"},"Client secret")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Log in to your Azure account."),(0,n.kt)("li",{parentName:"ul"},"Select ",(0,n.kt)("em",{parentName:"li"},"Azure Active directory")," in the left sidebar."),(0,n.kt)("li",{parentName:"ul"},"Click on ",(0,n.kt)("em",{parentName:"li"},"App registrations"),"."),(0,n.kt)("li",{parentName:"ul"},"Select the application previously created."),(0,n.kt)("li",{parentName:"ul"},"Click on ",(0,n.kt)("em",{parentName:"li"},"All settings"),"."),(0,n.kt)("li",{parentName:"ul"},"Click on ",(0,n.kt)("em",{parentName:"li"},"Keys"),"."),(0,n.kt)("li",{parentName:"ul"},"Enter the key description and select the duration."),(0,n.kt)("li",{parentName:"ul"},"Click on ",(0,n.kt)("em",{parentName:"li"},"Save"),"."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Copy and store the key value. You won't be able to retrieve it after you leave this page.")))))),(0,n.kt)(l.Z,{value:"Azure AZ CLI",label:"Azure AZ CLI",mdxType:"TabItem"},(0,n.kt)("p",null,"Afin d'utiliser le custom-mode 'azcli', installez le binaire associ\xe9 sur tous les Collecteurs Centreon\ndevant superviser des resources Azure:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"La CLI requiert une version de Python >= 2.7 (",(0,n.kt)("a",i({parentName:"li"},{href:"https://github.com/Azure/azure-cli/blob/dev/doc/install_linux_prerequisites.md"}),"https://github.com/Azure/azure-cli/blob/dev/doc/install_linux_prerequisites.md"),")")),(0,n.kt)("p",null,"Sur un syst\xe8me utilisant le packaging RPM, utilisez les commandes ci-dessous avec\nl'utilisateur ",(0,n.kt)("em",{parentName:"p"},"root")," ou un utilisateur avec les droits 'sudo' ad\xe9quats:"),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-shell"}),'sudo rpm --import https://packages.microsoft.com/keys/microsoft.asc\nsudo echo -e "[azure-cli]\\nname=Azure CLI\\nbaseurl=https://packages.microsoft.com/yumrepos/azure-cli\\nenabled=1\\ngpgcheck=1\\ngpgkey=https://packages.microsoft.com/keys/microsoft.asc" > /etc/yum.repos.d/azure-cli.repo\nsudo yum install azure-cli\n')),(0,n.kt)("p",null,"Ensuite, r\xe9alisez les op\xe9rations suivantes avec l'utilisateur ",(0,n.kt)("em",{parentName:"p"},"centreon-engine"),"\nafin de r\xe9cup\xe9rer le token d'authentification Azure:"),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-shell"}),"su - centreon-engine\naz login\n")),(0,n.kt)("p",null,"La commande retourne le message ci-dessous contenant un code:"),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{}),"*To sign in, use a web browser to open the page https://microsoft.com/devicelogin*\n*and enter the code CWT4WQZAD to authenticate.*\n")),(0,n.kt)("p",null,"Rendez-vous sur ",(0,n.kt)("a",i({parentName:"p"},{href:"https://microsoft.com/devicelogin"}),"https://microsoft.com/devicelogin")," afin de saisir le code obtenu, puis connectez vous avec le compte de service d\xe9di\xe9 \xe0 la supervision."),(0,n.kt)("p",null,"Une fois ces actions effectu\xe9es, des informations d'auhtentification de la forme suivante devraient s'afficher dans le terminal\ndu collecteur Centreon: "),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-shell"}),'    [\n      {\n        "cloudName": "AzureCloud",\n        "id": "0ef83f3a-d83e-2039-d930-309df93acd93d",\n        "isDefault": true,\n        "name": "N/A(tenant level account)",\n        "state": "Enabled",\n        "tenantId": "0ef83f3a-03cd-2039-d930-90fd39ecd048",\n        "user": {\n          "name": "email@mycompany.onmicrosoft.com",\n          "type": "user"\n        }\n      }\n    ]\n')),(0,n.kt)("p",null,"Vous avez d\xe9sormais les informations stock\xe9es localement dans un fichier\naccessTokens.json qui sera utilis\xe9 automatiquement par le Plugin. "))),(0,n.kt)("h2",i({},{id:"installation"}),"Installation"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Online License",label:"Online License",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Installer le Plugin sur tous les collecteurs Centreon devant superviser des resources Azure Application Gateway:")),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"yum install centreon-plugin-Cloud-Azure-Network-AppGateway-Api\n")),(0,n.kt)("ol",i({},{start:2}),(0,n.kt)("li",{parentName:"ol"},"Sur l'interface Integration de Centreon, installer le Plugin-Pack ",(0,n.kt)("em",{parentName:"li"},"Azure Application Gateway"),' depuis la page "Configuration > Plugin packs > Manager"'))),(0,n.kt)(l.Z,{value:"Offline License",label:"Offline License",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Installer le Plugin sur tous les collecteurs Centreon devant superviser des resources Azure Application Gateway:")),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"yum install centreon-plugin-Cloud-Azure-Network-AppGateway-Api\n")),(0,n.kt)("ol",i({},{start:2}),(0,n.kt)("li",{parentName:"ol"},"Sur le serveur Central Centreon, installer le RPM du Pack ",(0,n.kt)("em",{parentName:"li"},"Azure Application Gateway"),":")),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"yum install centreon-pack-cloud-azure-network-appgateway.noarch\n")),(0,n.kt)("ol",i({},{start:3}),(0,n.kt)("li",{parentName:"ol"},"Sur l'interface Integration de Centreon, installer le Plugin-Pack ",(0,n.kt)("em",{parentName:"li"},"Azure Application Gateway"),' depuis la page "Configuration > Plugin Packs > Gestionnaire"')))),(0,n.kt)("h2",i({},{id:"configuration"}),"Configuration"),(0,n.kt)("h3",i({},{id:"h\xf4te"}),"H\xf4te"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Ajoutez un H\xf4te \xe0 Centreon, remplissez le champ ",(0,n.kt)("em",{parentName:"li"},"Adresse IP/DNS")," avec l'adresse 127.0.0.1\net appliquez-lui le Mod\xe8le d'H\xf4te ",(0,n.kt)("em",{parentName:"li"},"Cloud-Azure-Network-AppGateway-custom"),"."),(0,n.kt)("li",{parentName:"ul"},"Une fois le mod\xe8le appliqu\xe9, les Macros ci-dessous indiqu\xe9es comme requises (",(0,n.kt)("em",{parentName:"li"},"Mandatory"),")\ndoivent \xeatre renseign\xe9es selon le ",(0,n.kt)("em",{parentName:"li"},"custom mode")," utilis\xe9.")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Deux m\xe9thodes peuvent \xeatre utilis\xe9es lors de l'assignation des Macros:"),(0,n.kt)("ul",{parentName:"blockquote"},(0,n.kt)("li",{parentName:"ul"},"Utilisation de l'ID complet de la ressource (de type ",(0,n.kt)("inlineCode",{parentName:"li"},"/subscriptions/<subscription_id>/resourceGroups/<resourcegroup_id>/providers/Microsoft.Network/<resource_type>/<resource_name>"),")\ndans la Macro ",(0,n.kt)("em",{parentName:"li"},"AZURERESOURCE")),(0,n.kt)("li",{parentName:"ul"},"Utilisation du nom de la ressource dans la Macro ",(0,n.kt)("em",{parentName:"li"},"AZURERESOURCE")," associ\xe9e aux Macros ",(0,n.kt)("em",{parentName:"li"},"AZURERESOURCEGROUP")," et ",(0,n.kt)("em",{parentName:"li"},"AZURERESOURCETYPE")))),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Azure Monitor API",label:"Azure Monitor API",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Mandatory"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Nom"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"AZURECUSTOMMODE"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Custom mode 'api'")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"AZURESUBSCRIPTION"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Subscription ID")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"AZURETENANT"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Tenant ID")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"AZURECLIENTID"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Client ID")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"AZURECLIENTSECRET"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Client secret")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"AZURERESOURCE"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"ID or name of the Application Gateway resource")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"AZURERESOURCEGROUP"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Associated Resource Group if resource name is used")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"AZURERESOURCETYPE"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Associated Resource Type if resource name is used"))))),(0,n.kt)(l.Z,{value:"Azure AZ CLI",label:"Azure AZ CLI",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Mandatory"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Nom"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"AZURECUSTOMMODE"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Custom mode 'azcli'")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"AZURESUBSCRIPTION"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Subscription ID")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"AZURERESOURCE"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"ID or name of the Application Gateway resource")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"AZURERESOURCEGROUP"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Associated Resource Group if resource name is used")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"AZURERESOURCETYPE"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Associated Resource Type if resource name is used")))))),(0,n.kt)("h2",i({},{id:"comment-puis-je-tester-le-plugin-et-que-signifient-les-options-des-commandes-"}),"Comment puis-je tester le Plugin et que signifient les options des commandes ?"),(0,n.kt)("p",null,"Une fois le Plugin install\xe9, vous pouvez tester celui-ci directement en ligne de\ncommande depuis votre collecteur Centreon en vous connectant avec l'utilisateur\n",(0,n.kt)("em",{parentName:"p"},"centreon-engine"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins/centreon_azure_network_appgateway_api.pl \\\n    --plugin=cloud::azure::network::appgateway::plugin \\\n    --mode=requests \\\n    --custommode=api \\\n    --subscription='xxxxxxxxx' \\\n    --tenant='xxxxxxxxx' \\\n    --client-id='xxxxxxxxx' \\\n    --client-secret='xxxxxxxxx' \\\n    --resource='APP001ABCD' \\\n    --resource-group='RSG1234' \\\n    --timeframe='900' \\\n    --interval='PT5M' \\\n    --aggregation='Total' \\\n    --warning-failed-requests='80' \\\n    --critical-failed-requests='90'\n")),(0,n.kt)("p",null,"La commande devrait retourner un message de sortie similaire \xe0:"),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"OK: Instance 'APP001ABCD' Statistic 'total' Metrics Failed Requests: 0.00, Total Requests: 523.00 |\n'APP001ABCD~total#appgateway.requests.failed.count'=0.00;0:80;0:90;0; 'APP001ABCD~total#appgateway.requests.total.count'=523.00;;;0;\n")),(0,n.kt)("p",null,"La commande ci-dessus v\xe9rifie les statistiques de ",(0,n.kt)("em",{parentName:"p"},"requ\xeates")," de l'instance ",(0,n.kt)("em",{parentName:"p"},"Application Gateway")," nomm\xe9e ",(0,n.kt)("em",{parentName:"p"},"APP001ABCD"),"\n(",(0,n.kt)("inlineCode",{parentName:"p"},"--plugin=cloud::azure::network::appgateway::plugin --mode=requests --resource='APP001ABCD'"),") et li\xe9e au ",(0,n.kt)("em",{parentName:"p"},"Resource Group")," ",(0,n.kt)("em",{parentName:"p"},"RSG1234"),"\n(",(0,n.kt)("inlineCode",{parentName:"p"},"--resource-group='RSG1234'"),")."),(0,n.kt)("p",null,"Le mode de connexion utilis\xe9 est 'api' (",(0,n.kt)("inlineCode",{parentName:"p"},"--custommode=api"),"), les param\xe8tres d'authentification n\xe9cessaires \xe0 l'utilisation de ce mode\nsont donc renseign\xe9s en fonction (",(0,n.kt)("inlineCode",{parentName:"p"},"--subscription='xxxxxxxxx' --tenant='xxxxxxx' --client-id='xxxxxxxx' --client-secret='xxxxxxxxxx'"),")."),(0,n.kt)("p",null,"Les statuts cacul\xe9s se baseront sur les valeurs totales d'un \xe9chantillon dans un intervalle de 15 minutes / 900 secondes  (",(0,n.kt)("inlineCode",{parentName:"p"},"--timeframe='900'"),")\navec un \xe9tat retourn\xe9 par tranche de 5 minutes (",(0,n.kt)("inlineCode",{parentName:"p"},"--interval='PT5M'"),")."),(0,n.kt)("p",null,"Dans cet exemple, une alarme de type WARNING sera d\xe9clench\xe9e si le nombre de requ\xeates 'failed' pendant l'intervalle donn\xe9\nest sup\xe9rieur \xe0 80 (",(0,n.kt)("inlineCode",{parentName:"p"},"--warning-failed-requests='80'"),"); l'alarme sera de type CRITICAL au-del\xe0 de 90 requ\xeates en erreur.\n(",(0,n.kt)("inlineCode",{parentName:"p"},"--critical-failed-requests='90'"),")."),(0,n.kt)("p",null,"La liste de toutes les options compl\xe9mentaires et leur signification\npeut \xeatre affich\xe9e en ajoutant le param\xe8tre ",(0,n.kt)("inlineCode",{parentName:"p"},"--help")," \xe0 la commande:"),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins/centreon_azure_network_appgateway_api.pl \\\n    --plugin=cloud::azure::network::appgateway::plugin \\\n    --mode=requests \\\n    --help\n")),(0,n.kt)("h3",i({},{id:"diagnostic-des-erreurs-communes"}),"Diagnostic des erreurs communes"),(0,n.kt)("h4",i({},{id:"les-identifiants-ont-chang\xe9-et-mon-plugin-ne-fonctionne-plus"}),"Les identifiants ont chang\xe9 et mon Plugin ne fonctionne plus"),(0,n.kt)("p",null,"Le Plugin utilise un fichier de cache pour conserver les informations de connexion afin de ne pas\nse r\xe9-authentifier \xe0 chaque appel. Si des informations sur le Tenant, la Souscription ou les\nClient ID / Secret changent, il est n\xe9cessaire de supprimer le fichier de cache du Plugin. "),(0,n.kt)("p",null,"Celui ci se trouve dans le r\xe9pertoire ",(0,n.kt)("inlineCode",{parentName:"p"},"/var/lib/centreon/centplugins/")," avec le nom azure",(0,n.kt)("em",{parentName:"p"},"api"),(0,n.kt)("inlineCode",{parentName:"p"},"<md5>_<md5>_<md5>_<md5>"),"."),(0,n.kt)("h4",i({},{id:"unknown-login-endpoint-api-returns-error-code-error_name-add---debug-option-for-detailed-message"}),(0,n.kt)("inlineCode",{parentName:"h4"},"UNKNOWN: Login endpoint API returns error code 'ERROR_NAME' (add --debug option for detailed message)")),(0,n.kt)("p",null,"Lors du d\xe9ploiement de mes contr\xf4les, j'obtiens le message suivant :\n",(0,n.kt)("inlineCode",{parentName:"p"},"UNKNOWN: Login endpoint API returns error code 'ERROR_NAME' (add --debug option for detailed message)"),"."),(0,n.kt)("p",null,"Cela signifie que l'un des param\xe8tres utilis\xe9s pour authentifier la requ\xeate est incorrect. Le param\xe8tre\nen question est sp\xe9cifi\xe9 dans le message d'erreur en lieu et place de 'ERROR_DESC'. "),(0,n.kt)("p",null,"Par exemple, 'invalid_client' signifie que le client-id et/ou le client-secret\nn'est (ne sont) pas valide(s)."),(0,n.kt)("h4",i({},{id:"unknown-500-cant-connect-to-loginmicrosoftonlinecom443"}),(0,n.kt)("inlineCode",{parentName:"h4"},"UNKNOWN: 500 Can't connect to login.microsoftonline.com:443")),(0,n.kt)("p",null,"Si l'utilisation d'un proxy est requise pour les connexions HTTP depuis le\ncollecteur Centreon, il est n\xe9cessaire de le pr\xe9ciser dans la commande en\nutilisant l'option ",(0,n.kt)("inlineCode",{parentName:"p"},"--proxyurl='http://proxy.mycompany.com:8080'"),"."),(0,n.kt)("p",null,"Il est \xe9galement possible qu'un \xe9quipement tiers de type Pare-feu bloque la requ\xeate\neffectu\xe9e par le Plugin."),(0,n.kt)("h4",i({},{id:"unknown-no-metrics-check-your-options-or-use---zeroed-option-to-set-0-on-undefined-values"}),(0,n.kt)("inlineCode",{parentName:"h4"},"UNKNOWN: No metrics. Check your options or use --zeroed option to set 0 on undefined values")),(0,n.kt)("p",null,"Lors du d\xe9ploiement de mes contr\xf4les, j'obtiens le message suivant 'UNKNOWN: No metrics. Check your options or use --zeroed option to set 0 on undefined values'. "),(0,n.kt)("p",null,"Cela signifie qu'Azure n'a pas consolid\xe9 de donn\xe9es sur la p\xe9riode."),(0,n.kt)("p",null,"Vous pouvez ajouter ",(0,n.kt)("inlineCode",{parentName:"p"},"--zeroed")," \xe0 la macro EXTRAOPTIONS du ",(0,n.kt)("strong",{parentName:"p"},"service")," en question afin de forcer le stockage d'un 0 et ainsi \xe9viter un statut UNKNOWN."))}k.isMDXComponent=!0},7626:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(67294),r=a(86010);const l="tabItem_Ymn6";function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i.apply(this,arguments)}function o({children:e,hidden:t,className:a}){return n.createElement("div",i({role:"tabpanel",className:(0,r.Z)(l,a)},{hidden:t}),e)}},67709:(e,t,a)=>{a.d(t,{Z:()=>d});var n=a(67294),r=a(86010),l=a(90980),i=a(35715),o=a(8854),s=a(8241);const p="tabList__CuJ",u="tabItem_LNqP";function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m.apply(this,arguments)}function c(e){var t;const{lazy:a,block:l,defaultValue:c,values:d,groupId:k,className:N}=e,g=n.Children.map(e.children,(e=>{if((0,n.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),f=null!=d?d:g.map((({props:{value:e,label:t,attributes:a}})=>({value:e,label:t,attributes:a}))),b=(0,i.l)(f,((e,t)=>e.value===t.value));if(b.length>0)throw new Error(`Docusaurus error: Duplicate values "${b.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);var y;const h=null===c?c:null!==(y=null!=c?c:null===(t=g.find((e=>e.props.default)))||void 0===t?void 0:t.props.value)&&void 0!==y?y:g[0].props.value;if(null!==h&&!f.some((e=>e.value===h)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${h}" but none of its children has the corresponding value. Available values are: ${f.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:v,setTabGroupChoices:C}=(0,o.U)(),[A,w]=(0,n.useState)(h),x=[],{blockElementScrollPositionUntilNextRender:T}=(0,s.o5)();if(null!=k){const e=v[k];null!=e&&e!==A&&f.some((t=>t.value===e))&&w(e)}const z=e=>{const t=e.currentTarget,a=x.indexOf(t),n=f[a].value;n!==A&&(T(t),w(n),null!=k&&C(k,String(n)))},P=e=>{let t=null;switch(e.key){case"ArrowRight":{const n=x.indexOf(e.currentTarget)+1;var a;t=null!==(a=x[n])&&void 0!==a?a:x[0];break}case"ArrowLeft":{const a=x.indexOf(e.currentTarget)-1;var n;t=null!==(n=x[a])&&void 0!==n?n:x[x.length-1];break}}null==t||t.focus()};return n.createElement("div",{className:(0,r.Z)("tabs-container",p)},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":l},N)},f.map((({value:e,label:t,attributes:a})=>n.createElement("li",m({role:"tab",tabIndex:A===e?0:-1,"aria-selected":A===e,key:e,ref:e=>x.push(e),onKeyDown:P,onFocus:z,onClick:z},a,{className:(0,r.Z)("tabs__item",u,null==a?void 0:a.className,{"tabs__item--active":A===e})}),null!=t?t:e)))),a?(0,n.cloneElement)(g.filter((e=>e.props.value===A))[0],{className:"margin-top--md"}):n.createElement("div",{className:"margin-top--md"},g.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==A})))))}function d(e){const t=(0,l.Z)();return n.createElement(c,m({key:String(t)},e))}},55146:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/cloud-azure-network-appgateway-provider-1f9e9ad45f1288588636092de19eb9f6.png"}}]);