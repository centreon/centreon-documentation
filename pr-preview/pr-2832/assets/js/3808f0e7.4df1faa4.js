"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[81993],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>m});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),u=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},p=function(e){var t=u(e.components);return n.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=u(r),m=a,g=d["".concat(s,".").concat(m)]||d[m]||c[m]||o;return r?n.createElement(g,l(l({ref:t},p),{},{components:r})):n.createElement(g,l({ref:t},p))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,l=new Array(o);l[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var u=2;u<o;u++)l[u]=r[u];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},59338:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>u,default:()=>g,frontMatter:()=>s,metadata:()=>p,toc:()=>d});r(67294);var n=r(3905),a=r(67709),o=r(7626);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(this,arguments)}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const s={id:"hardware-storage-purestorage-snmp",title:"Pure Storage SNMP"},u=void 0,p={unversionedId:"integrations/plugin-packs/procedures/hardware-storage-purestorage-snmp",id:"integrations/plugin-packs/procedures/hardware-storage-purestorage-snmp",title:"Pure Storage SNMP",description:"Overview",source:"@site/pp/integrations/plugin-packs/procedures/hardware-storage-purestorage-snmp.md",sourceDirName:"integrations/plugin-packs/procedures",slug:"/integrations/plugin-packs/procedures/hardware-storage-purestorage-snmp",permalink:"/centreon-documentation/pr-preview/pr-2832/pp/integrations/plugin-packs/procedures/hardware-storage-purestorage-snmp",draft:!1,tags:[],version:"current",frontMatter:{id:"hardware-storage-purestorage-snmp",title:"Pure Storage SNMP"}},c={},d=[{value:"Overview",id:"overview",level:2},{value:"Plugin-Pack assets",id:"plugin-pack-assets",level:2},{value:"Monitored objects",id:"monitored-objects",level:3},{value:"Monitored metrics",id:"monitored-metrics",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Configuration Pure Storage Equipment",id:"configuration-pure-storage-equipment",level:3},{value:"Network flow",id:"network-flow",level:3},{value:"Installation",id:"installation",level:2},{value:"Host Configuration",id:"host-configuration",level:2},{value:"FAQ",id:"faq",level:2},{value:"How do I test in the command line and what do the main options mean?",id:"how-do-i-test-in-the-command-line-and-what-do-the-main-options-mean",level:4},{value:"UNKNOWN: SNMP GET Request : Timeout",id:"unknown-snmp-get-request--timeout",level:3},{value:"UNKNOWN: SNMP GET Request : Cant get a single value.",id:"unknown-snmp-get-request--cant-get-a-single-value",level:3}],m={toc:d};function g(e){var{components:t}=e,r=i(e,["components"]);return(0,n.kt)("wrapper",l({},m,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",l({},{id:"overview"}),"Overview"),(0,n.kt)("p",null,"Pure Storage develops flash-based storage for data centers using consumer-grade solid state drives. It provides\nproprietary de-duplication and compression software to improve the amount of data that can be stored on each drive."),(0,n.kt)("h2",l({},{id:"plugin-pack-assets"}),"Plugin-Pack assets"),(0,n.kt)("h3",l({},{id:"monitored-objects"}),"Monitored objects"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Storage array")),(0,n.kt)("h2",l({},{id:"monitored-metrics"}),"Monitored metrics"),(0,n.kt)(a.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(o.Z,{value:"Stats",label:"Stats",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Metric Name"),(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"pureArrayReadBandwidth"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Read Bandwidth Volume on the storage array. Unit: Bits/second")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"pureArrayWriteBandwidth"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Write Bandwidth Volume on the storage array. Unit: Bits/second")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"pureArrayReadIOPS"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Read Operations on the storage array. Unit: iops")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"pureArrayWriteIOPS"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Write Operations on the storage array. Unit: iops")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"pureArrayReadLatency"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Storage array Read Latency (us/op). Unit: us/operations")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"pureArrayWriteLatency"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Storage array Write Latency (us/op). Unit: us/operations")))))),(0,n.kt)("h2",l({},{id:"prerequisites"}),"Prerequisites"),(0,n.kt)("h3",l({},{id:"configuration-pure-storage-equipment"}),"Configuration Pure Storage Equipment"),(0,n.kt)("p",null,"The SNMP agent must be configured on the Pure Storage devices."),(0,n.kt)("h3",l({},{id:"network-flow"}),"Network flow"),(0,n.kt)("p",null,"Your Centreon poller must be able to reach the PureStorage storage array on the UDP/161 SNMP port."),(0,n.kt)("h2",l({},{id:"installation"}),"Installation"),(0,n.kt)(a.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(o.Z,{value:"Online License",label:"Online License",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Install the Plugin on every poller expected to monitor Pure Storage SNMP resources:")),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"yum install centreon-plugin-Hardware-Storage-Purestorage-Snmp\n")),(0,n.kt)("ol",l({},{start:2}),(0,n.kt)("li",{parentName:"ol"},'Install the "Pure Storage SNMP" Centreon Plugin-Pack from the "Configuration > Plugin packs > Manager" page'))),(0,n.kt)(o.Z,{value:"Offline License",label:"Offline License",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Install the Plugin on every poller expected to monitor Pure Storage resources:")),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"yum install centreon-plugin-Hardware-Storage-Purestorage-Snmp\n")),(0,n.kt)("ol",l({},{start:2}),(0,n.kt)("li",{parentName:"ol"},"Install the Centreon Plugin-Pack RPM on your central server:")),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"yum install centreon-pack-hardware-storage-purestorage-snmp\n")),(0,n.kt)("ol",l({},{start:3}),(0,n.kt)("li",{parentName:"ol"},'Install the "Pure Storage SNMP" Centreon Plugin-Pack from the "Configuration > Plugin packs > Manager" page')))),(0,n.kt)("h2",l({},{id:"host-configuration"}),"Host Configuration"),(0,n.kt)("p",null,'Apply the "HW-Storage-Purestorage-SNMP-custom" template to your newly created host.\nIn the host creation form on the Centreon Web interface, it is necessary to set the proper values in the "SNMP Community" and "SNMP Version" fields.'),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"If you are using SNMP version 3, select the relevant SNMP version and configure the SNMP v3 parameters in the SNMPEXTRAOPTIONS Macro field.")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Mandatory"),(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Name"),(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"})),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"SNMPEXTRAOPTIONS"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Extra options SNMP")))),(0,n.kt)("h2",l({},{id:"faq"}),"FAQ"),(0,n.kt)("h4",l({},{id:"how-do-i-test-in-the-command-line-and-what-do-the-main-options-mean"}),"How do I test in the command line and what do the main options mean?"),(0,n.kt)("p",null,"Once the Plugin installed, you can test it directly from your Centreon poller CLI using the ",(0,n.kt)("em",{parentName:"p"},"centreon-engine")," user:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins//centreon_purestorage_snmp.pl \\\n    --plugin=storage::purestorage::snmp::plugin \\\n    --hostname=10.0.0.1 \\\n    --snmp-version='2c' \\\n    --snmp-community='public' \\\n    --mode=stats \\\n    --filter-counters='.*' \\\n    --warning-read-bandwidth='400000000' \\\n    --critical-read-bandwidth='500000000' \\\n    --verbose\n")),(0,n.kt)("p",null,"If everything's fine, it should output something similar to:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"OK: Read Bandwith : 376.84 Mb/s - Write Bandwith : 0.00 b/s - Read IOPs : 3871 - Write IOPs : 0 - Read Latency : 197 us/op - Write Latency : 0 us/op | 'read_bandwidth'=376843408.00b/s;;;0; 'write_bandwidth'=0.00b/s;;;0; 'read_iops'=3871iops;;;0; 'write_iops'=0iops;;;0; 'read_latency'=197us/op;;;0; 'write_latency'=0us/op;;;0;\n")),(0,n.kt)("p",null,"The above command requests a PureStorage array using the SNMP protocol (",(0,n.kt)("inlineCode",{parentName:"p"},"--plugin=storage::purestorage::snmp::plugin"),") using the ",(0,n.kt)("em",{parentName:"p"},"public")," SNMP community (",(0,n.kt)("inlineCode",{parentName:"p"},"--snmp-community='public"),").\nThis command checks the current statistics of the storage array (",(0,n.kt)("inlineCode",{parentName:"p"},"--mode=stats"),")."),(0,n.kt)("p",null,"This command will trigger a WARNING alarm if the ",(0,n.kt)("em",{parentName:"p"},"read")," bandwidth increases to more than 400000000b/s (",(0,n.kt)("inlineCode",{parentName:"p"},"--warning-read-bandwidth='400000000'"),") and a CRITICAL alarm if more than 500000000b/s (",(0,n.kt)("inlineCode",{parentName:"p"},"--critical-read-bandwidth='500000000'"),"). "),(0,n.kt)("p",null,"Thresholds can be set on all of the device metrics using the syntax ",(0,n.kt)("inlineCode",{parentName:"p"},"--warning-*metric* --critical-*metric*")),(0,n.kt)("p",null,"The syntax of the different options of the thresholds as well as the list of options and their usage are detailed in the help of the mode by adding the parameter ",(0,n.kt)("inlineCode",{parentName:"p"},"--help")," to the command:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins/centreon_purestorage_snmp.pl \\\n    --plugin=storage::purestorage::snmp::plugin \\\n    --mode=stats \\\n    --help\n")),(0,n.kt)("h3",l({},{id:"unknown-snmp-get-request--timeout"}),"UNKNOWN: SNMP GET Request : Timeout"),(0,n.kt)("p",null,"If you get this message, it means that you are unable to reach the Pure Storage device on the UDP/161 SNMP port, or that the configured SNMP community is not correct. It is also possible that a firewall is blocking the flow."),(0,n.kt)("h3",l({},{id:"unknown-snmp-get-request--cant-get-a-single-value"}),"UNKNOWN: SNMP GET Request : Cant get a single value."),(0,n.kt)("p",null,"This error message often refers to the following problems: "),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Pure Storage equipment does not support the MIB used by the plugin."),(0,n.kt)("li",{parentName:"ul"},"The targeted SNMP OID cannot be recovered due to insufficient equipment privileges.")))}g.isMDXComponent=!0},7626:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(67294),a=r(86010);const o="tabItem_Ymn6";function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(this,arguments)}function i({children:e,hidden:t,className:r}){return n.createElement("div",l({role:"tabpanel",className:(0,a.Z)(o,r)},{hidden:t}),e)}},67709:(e,t,r)=>{r.d(t,{Z:()=>m});var n=r(67294),a=r(86010),o=r(90980),l=r(35715),i=r(8854),s=r(8241);const u="tabList__CuJ",p="tabItem_LNqP";function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function d(e){var t;const{lazy:r,block:o,defaultValue:d,values:m,groupId:g,className:h}=e,f=n.Children.map(e.children,(e=>{if((0,n.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),k=null!=m?m:f.map((({props:{value:e,label:t,attributes:r}})=>({value:e,label:t,attributes:r}))),b=(0,l.l)(k,((e,t)=>e.value===t.value));if(b.length>0)throw new Error(`Docusaurus error: Duplicate values "${b.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);var v;const y=null===d?d:null!==(v=null!=d?d:null===(t=f.find((e=>e.props.default)))||void 0===t?void 0:t.props.value)&&void 0!==v?v:f[0].props.value;if(null!==y&&!k.some((e=>e.value===y)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${y}" but none of its children has the corresponding value. Available values are: ${k.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:N,setTabGroupChoices:w}=(0,i.U)(),[P,O]=(0,n.useState)(y),S=[],{blockElementScrollPositionUntilNextRender:T}=(0,s.o5)();if(null!=g){const e=N[g];null!=e&&e!==P&&k.some((t=>t.value===e))&&O(e)}const M=e=>{const t=e.currentTarget,r=S.indexOf(t),n=k[r].value;n!==P&&(T(t),O(n),null!=g&&w(g,String(n)))},I=e=>{let t=null;switch(e.key){case"ArrowRight":{const n=S.indexOf(e.currentTarget)+1;var r;t=null!==(r=S[n])&&void 0!==r?r:S[0];break}case"ArrowLeft":{const r=S.indexOf(e.currentTarget)-1;var n;t=null!==(n=S[r])&&void 0!==n?n:S[S.length-1];break}}null==t||t.focus()};return n.createElement("div",{className:(0,a.Z)("tabs-container",u)},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":o},h)},k.map((({value:e,label:t,attributes:r})=>n.createElement("li",c({role:"tab",tabIndex:P===e?0:-1,"aria-selected":P===e,key:e,ref:e=>S.push(e),onKeyDown:I,onFocus:M,onClick:M},r,{className:(0,a.Z)("tabs__item",p,null==r?void 0:r.className,{"tabs__item--active":P===e})}),null!=t?t:e)))),r?(0,n.cloneElement)(f.filter((e=>e.props.value===P))[0],{className:"margin-top--md"}):n.createElement("div",{className:"margin-top--md"},f.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==P})))))}function m(e){const t=(0,o.Z)();return n.createElement(d,c({key:String(t)},e))}}}]);