"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[77533],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=a.createContext({}),s=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=s(e.components);return a.createElement(i.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,i=e.parentName,c=p(e,["components","mdxType","originalType","parentName"]),d=s(n),m=r,h=d["".concat(i,".").concat(m)]||d[m]||u[m]||l;return n?a.createElement(h,o(o({ref:t},c),{},{components:n})):a.createElement(h,o({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=d;var p={};for(var i in t)hasOwnProperty.call(t,i)&&(p[i]=t[i]);p.originalType=e,p.mdxType="string"==typeof e?e:r,o[1]=p;for(var s=2;s<l;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7626:(e,t,n)=>{n.d(t,{Z:()=>p});var a=n(67294),r=n(86010);const l="tabItem_Ymn6";function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o.apply(this,arguments)}function p({children:e,hidden:t,className:n}){return a.createElement("div",o({role:"tabpanel",className:(0,r.Z)(l,n)},{hidden:t}),e)}},67709:(e,t,n)=>{n.d(t,{Z:()=>m});var a=n(67294),r=n(86010),l=n(90980),o=n(35715),p=n(8854),i=n(8241);const s="tabList__CuJ",c="tabItem_LNqP";function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u.apply(this,arguments)}function d(e){var t;const{lazy:n,block:l,defaultValue:d,values:m,groupId:h,className:k}=e,g=a.Children.map(e.children,(e=>{if((0,a.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),f=null!=m?m:g.map((({props:{value:e,label:t,attributes:n}})=>({value:e,label:t,attributes:n}))),b=(0,o.l)(f,((e,t)=>e.value===t.value));if(b.length>0)throw new Error(`Docusaurus error: Duplicate values "${b.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);var v;const N=null===d?d:null!==(v=null!=d?d:null===(t=g.find((e=>e.props.default)))||void 0===t?void 0:t.props.value)&&void 0!==v?v:g[0].props.value;if(null!==N&&!f.some((e=>e.value===N)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${N}" but none of its children has the corresponding value. Available values are: ${f.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:y,setTabGroupChoices:w}=(0,p.U)(),[x,T]=(0,a.useState)(N),O=[],{blockElementScrollPositionUntilNextRender:C}=(0,i.o5)();if(null!=h){const e=y[h];null!=e&&e!==x&&f.some((t=>t.value===e))&&T(e)}const E=e=>{const t=e.currentTarget,n=O.indexOf(t),a=f[n].value;a!==x&&(C(t),T(a),null!=h&&w(h,String(a)))},P=e=>{let t=null;switch(e.key){case"ArrowRight":{const a=O.indexOf(e.currentTarget)+1;var n;t=null!==(n=O[a])&&void 0!==n?n:O[0];break}case"ArrowLeft":{const n=O.indexOf(e.currentTarget)-1;var a;t=null!==(a=O[n])&&void 0!==a?a:O[O.length-1];break}}null==t||t.focus()};return a.createElement("div",{className:(0,r.Z)("tabs-container",s)},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":l},k)},f.map((({value:e,label:t,attributes:n})=>a.createElement("li",u({role:"tab",tabIndex:x===e?0:-1,"aria-selected":x===e,key:e,ref:e=>O.push(e),onKeyDown:P,onFocus:E,onClick:E},n,{className:(0,r.Z)("tabs__item",c,null==n?void 0:n.className,{"tabs__item--active":x===e})}),null!=t?t:e)))),n?(0,a.cloneElement)(g.filter((e=>e.props.value===x))[0],{className:"margin-top--md"}):a.createElement("div",{className:"margin-top--md"},g.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==x})))))}function m(e){const t=(0,l.Z)();return a.createElement(d,u({key:String(t)},e))}},50420:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>d});n(67294);var a=n(3905),r=n(67709),l=n(7626);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o.apply(this,arguments)}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const i={id:"update-centreon-platform",title:"Update a Centreon 23.04 platform"},s=void 0,c={unversionedId:"update/update-centreon-platform",id:"version-23.10/update/update-centreon-platform",title:"Update a Centreon 23.04 platform",description:"This chapter describes how to update your Centreon 23.04 platform (i.e. switch from version 23.04.x to version 23.04.y).",source:"@site/versioned_docs/version-23.10/update/update-centreon-platform.md",sourceDirName:"update",slug:"/update/update-centreon-platform",permalink:"/centreon-documentation/pr-preview/pr-2832/docs/update/update-centreon-platform",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/next/versioned_docs/version-23.10/update/update-centreon-platform.md",tags:[],version:"23.10",lastUpdatedAt:1700565273,formattedLastUpdatedAt:"Nov 21, 2023",frontMatter:{id:"update-centreon-platform",title:"Update a Centreon 23.04 platform"},sidebar:"version-23.10/docs",previous:{title:"Configuring your Centreon to send emails",permalink:"/centreon-documentation/pr-preview/pr-2832/docs/administration/postfix"},next:{title:"Introduction to upgrade",permalink:"/centreon-documentation/pr-preview/pr-2832/docs/upgrade/introduction"}},u={},d=[{value:"Perform a backup",id:"perform-a-backup",level:2},{value:"Update the Centreon central server",id:"update-the-centreon-central-server",level:2},{value:"Update the Centreon solution",id:"update-the-centreon-solution",level:3},{value:"Update extensions",id:"update-extensions",level:3},{value:"Update the Remote Servers",id:"update-the-remote-servers",level:2},{value:"Update the Pollers",id:"update-the-pollers",level:2}],m={toc:d};function h(e){var{components:t}=e,i=p(e,["components"]);return(0,a.kt)("wrapper",o({},m,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"This chapter describes how to update your Centreon 23.04 platform (i.e. switch from version 23.04.x to version 23.04.y)."),(0,a.kt)("h2",o({},{id:"perform-a-backup"}),"Perform a backup"),(0,a.kt)("p",null,"Make sure that you have fully backed up your environment for the following\nservers:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"central server,"),(0,a.kt)("li",{parentName:"ul"},"database server.")),(0,a.kt)("h2",o({},{id:"update-the-centreon-central-server"}),"Update the Centreon central server"),(0,a.kt)("h3",o({},{id:"update-the-centreon-solution"}),"Update the Centreon solution"),(0,a.kt)("p",null,"Make sure all users are logged out from the Centreon web interface before starting the update procedure."),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("p",null,"Clean the cache:"),(0,a.kt)("pre",null,(0,a.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf clean all --enablerepo=*\n")),(0,a.kt)("p",null,"Then upgrade all the components with the following command:"),(0,a.kt)("pre",null,(0,a.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf update centreon\\*\n"))),(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("p",null,"Clean the cache:"),(0,a.kt)("pre",null,(0,a.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf clean all --enablerepo=*\n")),(0,a.kt)("p",null,"Then upgrade all the components with the following command:"),(0,a.kt)("pre",null,(0,a.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf update centreon\\*\n"))),(0,a.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)("p",null,"Clean the cache:"),(0,a.kt)("pre",null,(0,a.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"apt clean all\napt update\n")),(0,a.kt)("p",null,"Then upgrade all the components with the following command:"),(0,a.kt)("pre",null,(0,a.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"apt upgrade centreon\n")))),(0,a.kt)("p",null,"Now you need to finalize the update:"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Using the wizard",label:"Using the wizard",mdxType:"TabItem"},(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Log on to the Centreon web interface to continue the update process. Click on ",(0,a.kt)("strong",{parentName:"p"},"Next"),":"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("img",{alt:"image",src:n(81137).Z,width:"650",height:"300"}))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Click on ",(0,a.kt)("strong",{parentName:"p"},"Next"),":"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("img",{alt:"image",src:n(79778).Z,width:"650",height:"300"}))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"The release notes describe the main changes. Click on ",(0,a.kt)("strong",{parentName:"p"},"Next"),":"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("img",{alt:"image",src:n(91003).Z,width:"650",height:"300"}))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"This process performs the various upgrades. Click on ",(0,a.kt)("strong",{parentName:"p"},"Next"),":"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("img",{alt:"image",src:n(36221).Z,width:"650",height:"300"}))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Your Centreon server is now up to date. Click on ",(0,a.kt)("strong",{parentName:"p"},"Finish")," to access the login\npage:"),(0,a.kt)("p",{parentName:"li"},"  ",(0,a.kt)("img",{alt:"image",src:n(41978).Z,width:"650",height:"300"})),(0,a.kt)("blockquote",{parentName:"li"},(0,a.kt)("p",{parentName:"blockquote"},"If the Centreon BAM module is installed, refer to the ",(0,a.kt)("a",o({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/service-mapping/update"}),"update procedure"),"."))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Deploy the central's configuration from the Centreon web UI by following ",(0,a.kt)("a",o({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/monitoring/monitoring-servers/deploying-a-configuration"}),"this\nprocedure"),".\n")))),(0,a.kt)(l.Z,{value:"Using a dedicated API endpoint",label:"Using a dedicated API endpoint",mdxType:"TabItem"},(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Log on to the central server through your terminal to continue the update process."),(0,a.kt)("blockquote",{parentName:"li"},(0,a.kt)("p",{parentName:"blockquote"},"You need an authentication token to reach the API endpoint. Perform the following procedure to get a token.")),(0,a.kt)("p",{parentName:"li"},"In our case, we have the configuration described below (you need to adapt the procedure to your configuration)."),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"address: 10.25.XX.XX"),(0,a.kt)("li",{parentName:"ul"},"port: 80"),(0,a.kt)("li",{parentName:"ul"},"version: 23.04"),(0,a.kt)("li",{parentName:"ul"},"login: Admin"),(0,a.kt)("li",{parentName:"ul"},"password: xxxxx"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Enter the following request:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",o({parentName:"pre"},{className:"language-shell"}),'curl --location --request POST \'10.25.XX.XX:80/centreon/api/v23.04/login\' \\\n--header \'Content-Type: application/json\' \\\n--header \'Accept: application/json\' \\\n--data \'{\n  "security": {\n    "credentials": {\n      "login": "Admin",\n      "password": "xxxxx"\n    }\n  }\n}\'\n')),(0,a.kt)("p",{parentName:"li"},"This is how the result should look like:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",o({parentName:"pre"},{className:"language-shell"}),'{"contact":{"id":1,"name":"Admin Centreon","alias":"admin","email":"admin@localhost","is_admin":true},"security":{"token":"hwwE7w/ukiiMce2lwhNi2mcFxLNYPhB9bYSKVP3xeTRUeN8FuGQms3RhpLreDX/S"}}\n'))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Retrieve the token number to use it in the next request.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Then enter this request:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"curl --location --request PATCH 'http://10.25.XX.XX:80/centreon/api/latest/platform/updates' \\\n--header 'X-AUTH-TOKEN: hwwE7w/ukiiMce2lwhNi2mcFxLNYPhB9bYSKVP3xeTRUeN8FuGQms3RhpLreDX/S' \\\n--header 'Content-Type: application/json' \\\n--data '{\n    \"components\": [\n        {\n            \"name\": \"centreon-web\"\n        }\n    ]\n}'\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"This request does not return any result. To check if the update has been successfully applied, read the version number displayed on the Centreon web interface login page."))))),(0,a.kt)("p",null,"Finally, restart Broker, Engine and Gorgone on the central server by running this command:"),(0,a.kt)("pre",null,(0,a.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"systemctl restart cbd centengine gorgoned\n")),(0,a.kt)("h3",o({},{id:"update-extensions"}),"Update extensions"),(0,a.kt)("p",null,"From ",(0,a.kt)("strong",{parentName:"p"},"Administration > Extensions > Manager"),", update all extensions, starting\nwith the following:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"License Manager,"),(0,a.kt)("li",{parentName:"ul"},"Monitoring Connectors Manager,"),(0,a.kt)("li",{parentName:"ul"},"Auto Discovery.")),(0,a.kt)("p",null,"Then you can update all other commercial extensions."),(0,a.kt)("h2",o({},{id:"update-the-remote-servers"}),"Update the Remote Servers"),(0,a.kt)("p",null,"This procedure is the same as to update a Centreon central server."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"At the end of the update, the configuration should be deployed from the central\nserver.")),(0,a.kt)("h2",o({},{id:"update-the-pollers"}),"Update the Pollers"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Clean the cache:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf clean all --enablerepo=*\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Then upgrade all the components with the following command:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf update centreon\\* --exclude=centreon-plugin*\n"))))),(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Clean the cache:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf clean all --enablerepo=*\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Then upgrade all the components with the following command:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf update centreon\\* --exclude=centreon-plugin*\n"))))),(0,a.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Clean the cache:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"apt clean all\napt update\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Then upgrade all the components with the following command:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"apt upgrade centreon\\* --exclude=centreon-plugin*\n")))))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Accept the new GPG keys from the repositories as needed.")),(0,a.kt)("ol",o({},{start:3}),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Deploy the Poller's configuration from the Centreon web UI by following ",(0,a.kt)("a",o({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/monitoring/monitoring-servers/deploying-a-configuration"}),"this\nprocedure"),",\nand choose the ",(0,a.kt)("strong",{parentName:"p"},"Restart")," method for the Engine process.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Finally, restart the Gorgone service if it is used on the Poller:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"systemctl restart centengine gorgoned\n")))))}h.isMDXComponent=!0},81137:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/web_update_1-229784d5ed7986045c49b65b99ce38cd.png"},79778:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/web_update_2-f12be23b17ba9e83853cbdbaaea65402.png"},91003:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/web_update_3-d505e49a3b4f60dfd887ff45ddbf006b.png"},36221:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/web_update_4-97901eb976096c68fb2bd9d37c4de9bc.png"},41978:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/web_update_5-01f8c54614c006d7c1bf9e03799c1b81.png"}}]);