"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[28508],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>d});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),p=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(r),d=a,g=u["".concat(s,".").concat(d)]||u[d]||m[d]||o;return r?n.createElement(g,l(l({ref:t},c),{},{components:r})):n.createElement(g,l({ref:t},c))}));function d(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,l=new Array(o);l[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var p=2;p<o;p++)l[p]=r[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}u.displayName="MDXCreateElement"},7626:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(67294),a=r(86010);const o="tabItem_Ymn6";function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(this,arguments)}function i({children:e,hidden:t,className:r}){return n.createElement("div",l({role:"tabpanel",className:(0,a.Z)(o,r)},{hidden:t}),e)}},67709:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(67294),a=r(86010),o=r(90980),l=r(35715),i=r(8854),s=r(8241);const p="tabList__CuJ",c="tabItem_LNqP";function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(this,arguments)}function u(e){var t;const{lazy:r,block:o,defaultValue:u,values:d,groupId:g,className:h}=e,k=n.Children.map(e.children,(e=>{if((0,n.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),f=null!=d?d:k.map((({props:{value:e,label:t,attributes:r}})=>({value:e,label:t,attributes:r}))),v=(0,l.l)(f,((e,t)=>e.value===t.value));if(v.length>0)throw new Error(`Docusaurus error: Duplicate values "${v.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);var N;const y=null===u?u:null!==(N=null!=u?u:null===(t=k.find((e=>e.props.default)))||void 0===t?void 0:t.props.value)&&void 0!==N?N:k[0].props.value;if(null!==y&&!f.some((e=>e.value===y)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${y}" but none of its children has the corresponding value. Available values are: ${f.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:b,setTabGroupChoices:w}=(0,i.U)(),[E,O]=(0,n.useState)(y),C=[],{blockElementScrollPositionUntilNextRender:T}=(0,s.o5)();if(null!=g){const e=b[g];null!=e&&e!==E&&f.some((t=>t.value===e))&&O(e)}const _=e=>{const t=e.currentTarget,r=C.indexOf(t),n=f[r].value;n!==E&&(T(t),O(n),null!=g&&w(g,String(n)))},I=e=>{let t=null;switch(e.key){case"ArrowRight":{const n=C.indexOf(e.currentTarget)+1;var r;t=null!==(r=C[n])&&void 0!==r?r:C[0];break}case"ArrowLeft":{const r=C.indexOf(e.currentTarget)-1;var n;t=null!==(n=C[r])&&void 0!==n?n:C[C.length-1];break}}null==t||t.focus()};return n.createElement("div",{className:(0,a.Z)("tabs-container",p)},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":o},h)},f.map((({value:e,label:t,attributes:r})=>n.createElement("li",m({role:"tab",tabIndex:E===e?0:-1,"aria-selected":E===e,key:e,ref:e=>C.push(e),onKeyDown:I,onFocus:_,onClick:_},r,{className:(0,a.Z)("tabs__item",c,null==r?void 0:r.className,{"tabs__item--active":E===e})}),null!=t?t:e)))),r?(0,n.cloneElement)(k.filter((e=>e.props.value===E))[0],{className:"margin-top--md"}):n.createElement("div",{className:"margin-top--md"},k.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==E})))))}function d(e){const t=(0,o.Z)();return n.createElement(u,m({key:String(t)},e))}},73704:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>m,contentTitle:()=>p,default:()=>g,frontMatter:()=>s,metadata:()=>c,toc:()=>u});r(67294);var n=r(3905),a=r(67709),o=r(7626);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(this,arguments)}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const s={id:"migrate-from-el-to-el",title:"Migrate from an EL-type OS to another EL-type OS (from a Centreon 18.10 or newer)"},p=void 0,c={unversionedId:"migrate/migrate-from-el-to-el",id:"version-23.10/migrate/migrate-from-el-to-el",title:"Migrate from an EL-type OS to another EL-type OS (from a Centreon 18.10 or newer)",description:"Prerequisites",source:"@site/versioned_docs/version-23.10/migrate/migrate-from-el-to-el.md",sourceDirName:"migrate",slug:"/migrate/migrate-from-el-to-el",permalink:"/centreon-documentation/pr-preview/pr-2832/docs/migrate/migrate-from-el-to-el",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/next/versioned_docs/version-23.10/migrate/migrate-from-el-to-el.md",tags:[],version:"23.10",lastUpdatedAt:1700565273,formattedLastUpdatedAt:"Nov 21, 2023",frontMatter:{id:"migrate-from-el-to-el",title:"Migrate from an EL-type OS to another EL-type OS (from a Centreon 18.10 or newer)"},sidebar:"version-23.10/docs",previous:{title:"Introduction to the migration process",permalink:"/centreon-documentation/pr-preview/pr-2832/docs/migrate/introduction"},next:{title:"Migrate from an EL-type OS to Debian 11",permalink:"/centreon-documentation/pr-preview/pr-2832/docs/migrate/migrate-from-el-to-debian"}},m={},u=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Migrating a central server",id:"migrating-a-central-server",level:2},{value:"Step 1: Install the new server",id:"step-1-install-the-new-server",level:3},{value:"Step 2 : Synchronize the data",id:"step-2--synchronize-the-data",level:3},{value:"Step 3: Retrieve the databases",id:"step-3-retrieve-the-databases",level:3},{value:"Step 4: Synchronize the plugins",id:"step-4-synchronize-the-plugins",level:3},{value:"Step 5: Upgrade Centreon",id:"step-5-upgrade-centreon",level:3},{value:"Step 6 (older versions only): Migrate to Gorgone",id:"step-6-older-versions-only-migrate-to-gorgone",level:3},{value:"Step 7: Upgrade the modules",id:"step-7-upgrade-the-modules",level:3},{value:"Migrating a remote server",id:"migrating-a-remote-server",level:2},{value:"Migrating a poller",id:"migrating-a-poller",level:2}],d={toc:u};function g(e){var{components:t}=e,r=i(e,["components"]);return(0,n.kt)("wrapper",l({},d,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",l({},{id:"prerequisites"}),"Prerequisites"),(0,n.kt)("p",null,"This procedure only applies if the following conditions are met:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"You wish to migrate from a 64-bit EL-type OS to another supported 64-bit EL-type OS. For instance, if you want to migrate from a CentOS 7 to an Alma 8 or 9."),(0,n.kt)("li",{parentName:"ul"},"Your version of Centreon is 18.10 or newer.")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"If your Centreon platform includes a Centreon redundancy system, please\ncontact ",(0,n.kt)("a",l({parentName:"p"},{href:"https://support.centreon.com"}),"Centreon support"),".")),(0,n.kt)("h2",l({},{id:"migrating-a-central-server"}),"Migrating a central server"),(0,n.kt)("h3",l({},{id:"step-1-install-the-new-server"}),"Step 1: Install the new server"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Install your new OS: check the ",(0,n.kt)("a",l({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/installation/compatibility#operating-systems"}),"supported operating systems"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Install a new Centreon central server from ",(0,n.kt)("a",l({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/installation/installation-of-a-central-server/using-packages"}),"packages"),", until you\ncomplete the installation process by connecting to the Centreon web interface."),(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("p",{parentName:"blockquote"},"Use the same password for the ",(0,n.kt)("strong",{parentName:"p"},"centreon")," user as for the old platform during the web\ninstallation process."))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Perform software and system updates:"))),(0,n.kt)(a.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(o.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"dnf update\n"))),(0,n.kt)(o.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"dnf update\n"))),(0,n.kt)(o.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"apt update\n")))),(0,n.kt)("h3",l({},{id:"step-2--synchronize-the-data"}),"Step 2 : Synchronize the data"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Connect to your old Centreon server.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Generate a pair of ssh keys for ",(0,n.kt)("strong",{parentName:"p"},"root"),":"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"ssh-keygen -t rsa\n")),(0,n.kt)("p",{parentName:"li"},"By defaut, the generated key pair will be saved to ",(0,n.kt)("strong",{parentName:"p"},"/root/.ssh/id_rsa.pub")," and ",(0,n.kt)("strong",{parentName:"p"},"/root/.ssh/id_rsa"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Copy ",(0,n.kt)("strong",{parentName:"p"},"root"),"'s public key (",(0,n.kt)("strong",{parentName:"p"},"/root/.ssh/id_rsa.pub"),") into the ",(0,n.kt)("strong",{parentName:"p"},"/root/.ssh/authorized_keys")," file of the new server. If you are not using ",(0,n.kt)("strong",{parentName:"p"},"root")," for the synchronization, make sure that the user you use has writing rights on the target directory.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"From the old server, synchronize the following directories to the new server:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"rsync -avz /etc/centreon root@<IP_NEW_CENTREON>:/etc\nrsync -avz /etc/centreon-broker root@<IP_NEW_CENTREON>:/etc\nrsync -avz /var/log/centreon-engine/archives/ root@<IP_NEW_CENTREON>:/var/log/centreon-engine\nrsync -avz --exclude centcore/ --exclude log/ /var/lib/centreon root@<IP_NEW_CENTREON>:/var/lib\nrsync -avz /usr/share/centreon/www/img/media root@<IP_NEW_CENTREON>:/usr/share/centreon/www/img\n")),(0,n.kt)("p",{parentName:"li"},"If you have given a custom name to your private key file, use the following format (just replace ",(0,n.kt)("strong",{parentName:"p"},"id_rsa_custom")," by your file name, and ",(0,n.kt)("inlineCode",{parentName:"p"},"<command>")," by the commands above):"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",l({parentName:"pre"},{className:"language-shell"}),'rsync -avz -e "ssh -i /root/.ssh/id_rsa_custom" <command>\n')),(0,n.kt)("blockquote",{parentName:"li"},(0,n.kt)("p",{parentName:"blockquote"},"Replace ",(0,n.kt)("strong",{parentName:"p"},"<IP_NEW_CENTREON>")," by the IP address of the new Centreon server.")))),(0,n.kt)("h3",l({},{id:"step-3-retrieve-the-databases"}),"Step 3: Retrieve the databases"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"On the old server, create a dump of the databases:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"mysqldump -u root -p centreon > /tmp/centreon.sql\nmysqldump -u root -p centreon_storage > /tmp/centreon_storage.sql\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"On the old server, stop MariaDB:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"systemctl stop mariadb\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"On the old server, export the dumps to the new Centreon database server (make sure you\nhave enough space for large database dumps):"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"rsync -avz /tmp/centreon.sql root@<IP_NEW_CENTREON>:/tmp/\nrsync -avz /tmp/centreon_storage.sql root@<IP_NEW_CENTREON>:/tmp/\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"On the new database server, drop the original databases and\ncreate them again:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"mysql -u root -p\n")),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",l({parentName:"pre"},{className:"language-SQL"}),"DROP DATABASE centreon;\nDROP DATABASE centreon_storage;\nCREATE DATABASE centreon;\nCREATE DATABASE centreon_storage;\nexit\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"On the new database server, import the previously transfered dumps into the database:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"mysql -u root centreon -p </tmp/centreon.sql\nmysql -u root centreon_storage -p </tmp/centreon_storage.sql\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Upgrade the tables:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"mysql_upgrade\n")),(0,n.kt)("p",{parentName:"li"},"If your database is password-protected, enter:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"mysql_upgrade -u <database_admin_user> -p\n")),(0,n.kt)("p",{parentName:"li"},"Example: if your database_admin_user is ",(0,n.kt)("inlineCode",{parentName:"p"},"root"),", enter:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"mysql_upgrade -u root -p\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Start the mariadb process on the new server:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"systemctl start mariadb\n")))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Replace ",(0,n.kt)("strong",{parentName:"p"},"<IP_NEW_CENTREON>")," by the IP address of the new Centreon server.")),(0,n.kt)("h3",l({},{id:"step-4-synchronize-the-plugins"}),"Step 4: Synchronize the plugins"),(0,n.kt)("p",null,"If you only use Centreon plugins, reinstall them on the new server:"),(0,n.kt)(a.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(o.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"dnf install centreon-plugin-\\*\n"))),(0,n.kt)(o.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"dnf install centreon-plugin-\\*\n"))),(0,n.kt)(o.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"apt install centreon-plugin-\\*\n")))),(0,n.kt)("p",null,"If you are using custom plugins, synchronize the directories that contain your custom plugins, including any necessary dependencies."),(0,n.kt)("h3",l({},{id:"step-5-upgrade-centreon"}),"Step 5: Upgrade Centreon"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"On the new server, force the update by moving the contents of the\n",(0,n.kt)("strong",{parentName:"p"},"/var/lib/centreon/installs/install-22.10.x-YYYYMMDD","_","HHMMSS")," directory to\nthe ",(0,n.kt)("strong",{parentName:"p"},"/usr/share/centreon/www/install")," directory (",(0,n.kt)("strong",{parentName:"p"},"x")," is the target version number for your migrated machine):"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"cd /var/lib/centreon/installs/\nmv install-22.10.x-YYYYMMDD_HHMMSS/ /usr/share/centreon/www/install/\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"If you use the same IP address or same DNS name between the old Centreon webserver and the new one, do a full cache cleanup of your browser to avoid JS issues.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Go to ",(0,n.kt)("inlineCode",{parentName:"p"},"http://<IP_NEW_CENTREON>/centreon")," and perform the upgrade.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"If the password for user ",(0,n.kt)("strong",{parentName:"p"},"centreon")," that you specified when installing the new server is different from the password on the old server, you must follow these steps:"),(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"Edit the ",(0,n.kt)("strong",{parentName:"li"},"/etc/centreon/centreon.conf.php")," file,"),(0,n.kt)("li",{parentName:"ol"},"Edit the ",(0,n.kt)("strong",{parentName:"li"},"/etc/centreon/conf.pm")," file,"),(0,n.kt)("li",{parentName:"ol"},"Edit the Centreon Broker central configuration using the Centreon web interface and change the password for the ",(0,n.kt)("strong",{parentName:"li"},"unfied-sql")," output,"),(0,n.kt)("li",{parentName:"ol"},"Edit the ",(0,n.kt)("strong",{parentName:"li"},"/etc/centreon/config.d/10-database.yaml")," file."))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"If the IP address of your Centreon server has changed:"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Edit the configuration for all the Centreon Broker modules of your Pollers and change the IP to connect to\nthe Centreon Central server (output IPv4). See the ",(0,n.kt)("a",l({parentName:"li"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/monitoring/monitoring-servers/advanced-configuration#tcp-outputs"}),"Advanced\nconfiguration"),"\nchapter for more information."),(0,n.kt)("li",{parentName:"ul"},"The fingerprint of your platform has changed too: ",(0,n.kt)("a",l({parentName:"li"},{href:"mailto:support@centreon.com"}),"contact Centreon")," to obtain a new license."))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},(0,n.kt)("a",l({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/monitoring/monitoring-servers/deploying-a-configuration"}),"Deploy the configuration")," for all your monitoring servers (including the central).")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Restart the following processes:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"systemctl restart cbd centengine\nsystemctl restart gorgoned\nsystemctl start snmptrapd centreontrapd\nsystemctl start snmpd\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"If your old Centreon server was monitoring itself, and you have changed the username/password for the database during the migration, update the configuration of all related resources (host, services attached to that host).")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Go to ",(0,n.kt)("strong",{parentName:"p"},"Configuration > Monitoring Connectors Manager"),", then ",(0,n.kt)("a",l({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/monitoring/pluginpacks#updating-one-packall-packs"}),"update all the Monitoring Connectors"),"."))),(0,n.kt)("h3",l({},{id:"step-6-older-versions-only-migrate-to-gorgone"}),"Step 6 (older versions only): Migrate to Gorgone"),(0,n.kt)("p",null,"If you are migrating from a Centreon version 18.10, 19.04 or 19.10, ",(0,n.kt)("a",l({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/developer/developer-gorgone-migrate-from-centcore"}),"migrate from Centcore to Gorgone"),"."),(0,n.kt)("h3",l({},{id:"step-7-upgrade-the-modules"}),"Step 7: Upgrade the modules"),(0,n.kt)("p",null,"To upgrade the modules, go to ",(0,n.kt)("strong",{parentName:"p"},"Administration > Extensions > Manager")," and click ",(0,n.kt)("strong",{parentName:"p"},"Update all"),".\nIf you have a MAP server or an MBI server, follow the corresponding migration procedures:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Migration procedure for ",(0,n.kt)("a",l({parentName:"li"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/graph-views/migrate"}),"MAP"),","),(0,n.kt)("li",{parentName:"ul"},"Migration procedure for ",(0,n.kt)("a",l({parentName:"li"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/reporting/migrate"}),"MBI"),".")),(0,n.kt)("h2",l({},{id:"migrating-a-remote-server"}),"Migrating a remote server"),(0,n.kt)("p",null,"To migrate a remote server:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Follow the same procedure as for a central server."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",l({parentName:"li"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/monitoring/monitoring-servers/add-a-remote-server-to-configuration"}),"Attach the new remote server")," to your central server.")),(0,n.kt)("h2",l({},{id:"migrating-a-poller"}),"Migrating a poller"),(0,n.kt)("p",null,"To migrate a poller:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Follow steps 1 and 4 of the procedure to migrate a central server (i.e. ",(0,n.kt)("a",l({parentName:"li"},{href:"#step-1-install-the-new-server"}),"install the new server")," and ",(0,n.kt)("a",l({parentName:"li"},{href:"#step-4-synchronize-the-plugins"}),"synchronize the plugins"),")."),(0,n.kt)("li",{parentName:"ol"},"On the central server, go to ",(0,n.kt)("strong",{parentName:"li"},"Configuration > Pollers"),". Select the poller that was migrated and update its IP address (if it has changed)."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("a",l({parentName:"li"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/monitoring/monitoring-servers/deploying-a-configuration"}),"Deploy the configuration"),"."),(0,n.kt)("li",{parentName:"ol"},"If your poller doesn't work after migrating it (e.g. you cannot deploy the configuration, or execute monitoring actions), update the poller's fingerprint, as described in this ",(0,n.kt)("a",l({parentName:"li"},{href:"https://thewatch.centreon.com/troubleshooting-41/poller-does-not-work-after-migration-or-reinstallation-fingerprint-changed-for-target-1177"}),"knowledge base article"),".")))}g.isMDXComponent=!0}}]);