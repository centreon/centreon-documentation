"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[15142],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>m});var n=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var l=n.createContext({}),p=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(r),m=o,v=d["".concat(l,".").concat(m)]||d[m]||u[m]||a;return r?n.createElement(v,i(i({ref:t},c),{},{components:r})):n.createElement(v,i({ref:t},c))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var p=2;p<a;p++)i[p]=r[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},44443:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/files/repair_mysql_upgrade-6a98ee17c4823471a8a24a06bf18f9ec.sql"},6430:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>c});r(67294);var n=r(3905);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const i={id:"migrate",title:"Migrate the extension"},s=void 0,l={unversionedId:"reporting/migrate",id:"version-23.10/reporting/migrate",title:"Migrate the extension",description:"This chapter explains how to move your reporting server to another",source:"@site/versioned_docs/version-23.10/reporting/migrate.md",sourceDirName:"reporting",slug:"/reporting/migrate",permalink:"/centreon-documentation/pr-preview/pr-2832/docs/reporting/migrate",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/next/versioned_docs/version-23.10/reporting/migrate.md",tags:[],version:"23.10",lastUpdatedAt:1700565273,formattedLastUpdatedAt:"Nov 21, 2023",frontMatter:{id:"migrate",title:"Migrate the extension"},sidebar:"version-23.10/docs",previous:{title:"Upgrade the extension",permalink:"/centreon-documentation/pr-preview/pr-2832/docs/reporting/upgrade"},next:{title:"Backup & restore",permalink:"/centreon-documentation/pr-preview/pr-2832/docs/reporting/backup-restore"}},p={},c=[{value:"Install the new reporting server",id:"install-the-new-reporting-server",level:2},{value:"Synchronizing files &amp; data",id:"synchronizing-files--data",level:2},{value:"Move generated reports",id:"move-generated-reports",level:2}],u={toc:c};function d(e){var{components:t}=e,i=a(e,["components"]);return(0,n.kt)("wrapper",o({},u,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"This chapter explains how to move your reporting server to another\none (e.g. if you want to switch to another supported OS)."),(0,n.kt)("p",null,"The migration of the interface extension is done at the same time as the migration of the central server."),(0,n.kt)("h2",o({},{id:"install-the-new-reporting-server"}),"Install the new reporting server"),(0,n.kt)("p",null,"Install your new reporting server based on the Centreon Business\nrepository using the ",(0,n.kt)("a",o({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/reporting/installation"}),"standard documentation"),"."),(0,n.kt)("h2",o({},{id:"synchronizing-files--data"}),"Synchronizing files & data"),(0,n.kt)("p",null,"Stop mysqld on ",(0,n.kt)("strong",{parentName:"p"},"both")," Reporting servers"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{}),"service mysql stop\n")),(0,n.kt)("p",null,"Copy data from the old reporting server to the new one:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{}),"rsync -avz /var/lib/mysql/* root@IP_New_Reporting_Server:/var/lib/mysql/\n")),(0,n.kt)("p",null,"Execute the following command to ensure compatibility of the database files:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{}),"mysql_upgrade\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},'If no error is visible, restart MariaDB and continue to the section\n"Move generated reports"')),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"If you see errors, especially on the following tables mysql\ninnodb_index_stats, innodb_table_stats, gtid_slave_pos, it\nmight be caused by an incompatibility between MySQL/MariaDB 5.5 and\nMariaDB 10.5. In that case, follow the procedure below:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",o({parentName:"pre"},{}),"service mysql stop\ncp -a /var/lib/mysql/ /var/lib/mysql.bak\ncd /var/lib/mysql/mysql/\nrm innodb_index_stats.frm innodb_index_stats.ibd innodb_table_stats.frm innodb_table_stats.ibd gtid_slave_pos.frm gtid_slave_pos.ibd\nservice mysql start\n")),(0,n.kt)("p",{parentName:"li"},"Then manually recreate the tables:"),(0,n.kt)("p",{parentName:"li"},"mysql mysql < repair_mysql_upgrade.sql"),(0,n.kt)("p",{parentName:"li"},"Download the following file: ",(0,n.kt)("a",{target:"_blank",href:r(44443).Z},"repair_mysql_upgrade.sql")))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Be sure to copy the the custom report & resources you designed to your\nnew reporting server in the same folders.")),(0,n.kt)("h2",o({},{id:"move-generated-reports"}),"Move generated reports"),(0,n.kt)("p",null,"In case you also move your Centreon central server, you need to\nsynchronize the folders containing generated reports on your new\nCentreon server to be able to have them on the interface:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{}),"rsync -avz /var/lib/centreon/centreon-bi-server/archives/ root@IP_New_Centreon_Server:/var/lib/centreon/centreon-bi-server/archives/\n")))}d.isMDXComponent=!0}}]);