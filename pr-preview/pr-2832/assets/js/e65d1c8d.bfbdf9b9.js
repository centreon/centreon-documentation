"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[17621],{3905:(t,e,a)=>{a.d(e,{Zo:()=>c,kt:()=>u});var n=a(67294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function s(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var o=n.createContext({}),p=function(t){var e=n.useContext(o),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},c=function(t){var e=p(t.components);return n.createElement(o.Provider,{value:e},t.children)},d={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},m=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,o=t.parentName,c=s(t,["components","mdxType","originalType","parentName"]),m=p(a),u=r,k=m["".concat(o,".").concat(u)]||m[u]||d[u]||l;return a?n.createElement(k,i(i({ref:e},c),{},{components:a})):n.createElement(k,i({ref:e},c))}));function u(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,i=new Array(l);i[0]=m;var s={};for(var o in e)hasOwnProperty.call(e,o)&&(s[o]=e[o]);s.originalType=t,s.mdxType="string"==typeof t?t:r,i[1]=s;for(var p=2;p<l;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},59959:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>d,contentTitle:()=>p,default:()=>k,frontMatter:()=>o,metadata:()=>c,toc:()=>m});a(67294);var n=a(3905),r=a(67709),l=a(7626);function i(){return i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},i.apply(this,arguments)}function s(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}const o={id:"applications-databases-elasticsearch",title:"Elasticsearch"},p=void 0,c={unversionedId:"integrations/plugin-packs/procedures/applications-databases-elasticsearch",id:"integrations/plugin-packs/procedures/applications-databases-elasticsearch",title:"Elasticsearch",description:"Overview",source:"@site/pp/integrations/plugin-packs/procedures/applications-databases-elasticsearch.md",sourceDirName:"integrations/plugin-packs/procedures",slug:"/integrations/plugin-packs/procedures/applications-databases-elasticsearch",permalink:"/centreon-documentation/pr-preview/pr-2832/pp/integrations/plugin-packs/procedures/applications-databases-elasticsearch",draft:!1,tags:[],version:"current",frontMatter:{id:"applications-databases-elasticsearch",title:"Elasticsearch"},sidebar:"pp",previous:{title:"DB2 Database",permalink:"/centreon-documentation/pr-preview/pr-2832/pp/integrations/plugin-packs/procedures/applications-databases-db2"},next:{title:"Elasticsearch (Deprecated)",permalink:"/centreon-documentation/pr-preview/pr-2832/pp/integrations/plugin-packs/procedures/applications-elasticsearch"}},d={},m=[{value:"Overview",id:"overview",level:2},{value:"Plugin-Pack assests",id:"plugin-pack-assests",level:2},{value:"Monitored objects",id:"monitored-objects",level:3},{value:"Discovery rules",id:"discovery-rules",level:3},{value:"Collected metrics",id:"collected-metrics",level:3},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Installation",id:"installation",level:2},{value:"Host Configuration",id:"host-configuration",level:2},{value:"FAQ",id:"faq",level:2},{value:"How to check in the CLI that the configuration is OK and what are the main options for ?",id:"how-to-check-in-the-cli-that-the-configuration-is-ok-and-what-are-the-main-options-for-",level:3},{value:"Why do I get the following error:",id:"why-do-i-get-the-following-error",level:3},{value:"UNKNOWN: 500 Can&#39;t connect",id:"unknown-500-cant-connect",level:4},{value:"UNKNOWN: 501 Protocol scheme &#39;connect&#39; is not supported",id:"unknown-501-protocol-scheme-connect-is-not-supported",level:4}],u={toc:m};function k(t){var{components:e}=t,a=s(t,["components"]);return(0,n.kt)("wrapper",i({},u,a,{components:e,mdxType:"MDXLayout"}),(0,n.kt)("h2",i({},{id:"overview"}),"Overview"),(0,n.kt)("p",null,"Elasticsearch is a distributed, open source search and analytics engine for all types of data, including textual, numerical, geospatial, structured, and unstructured. Elasticsearch is built on Apache Lucene and was first released in 2010 by Elasticsearch N.V. (now known as Elastic)."),(0,n.kt)("h2",i({},{id:"plugin-pack-assests"}),"Plugin-Pack assests"),(0,n.kt)("h3",i({},{id:"monitored-objects"}),"Monitored objects"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Databases"),(0,n.kt)("li",{parentName:"ul"},"Nodes"),(0,n.kt)("li",{parentName:"ul"},"Shards"),(0,n.kt)("li",{parentName:"ul"},"Clusters"),(0,n.kt)("li",{parentName:"ul"},"Indices"),(0,n.kt)("li",{parentName:"ul"},"Documents"),(0,n.kt)("li",{parentName:"ul"},"Licences")),(0,n.kt)("h3",i({},{id:"discovery-rules"}),"Discovery rules"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Services",label:"Services",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Rule name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"App-DB-Elasticsearch-Indice-Statistics"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Discover the indices on your Elasticsearch DB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"App-DB-Elasticsearch-Node-Statistics"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Discover the nodes on your Elasticsearch DB")))))),(0,n.kt)("p",null,"Use the discovery module to add the monitoring of your Elasticsearch databases, Go to ",(0,n.kt)("em",{parentName:"p"},"Configuration > Services > Scan")," to perform a scan."),(0,n.kt)("h3",i({},{id:"collected-metrics"}),"Collected metrics"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Cluster-statistics",label:"Cluster-statistics",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"display"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Name of the Elasticsearch cluster"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"status"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Status of the Elasticsearch cluster"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"nodes_total"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of nodes"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"nodes_data"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of data"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"nodes_coordinating"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of nodes coordinating"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"nodes_master"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of master nodes"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"nodes_ingest"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of ingest data"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"indices_count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of indices"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"shards_total"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Total number of shards"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"shards_active"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of active shards"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"shards_unassigned"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of unassigned shards"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"shards_relocating"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of relocating shards"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"active_shards_percent"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Percentage of active shards"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"%")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"tasks_pending"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of pending tasks"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"docs_count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of documents"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"size_in_bytes"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Size of all shards assigned"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"B"))))),(0,n.kt)(l.Z,{value:"Indice-statistics",label:"Indice-statistics",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"display"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Name of the Elasticsearch Indice"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"status"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Status of the Elasticsearch Indice"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"shards_active"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of active shards"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"shards_unassigned"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of unassigned shards"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"docs_count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of documents"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"size_in_bytes_primaries"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Size of all primary shards"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"B")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"size_in_bytes_total"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Total size of all shards assigned"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"B"))))),(0,n.kt)(l.Z,{value:"License",label:"License",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"type"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Licence type"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"status"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Licence status"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"issued_to"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Licence owner"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"issue_date"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Licence issue date"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"})))))),(0,n.kt)(l.Z,{value:"Node-statistics",label:"Node-statistics",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"display"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Name of the Elasticsearch node"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"indices_count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of indices in the node"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"heap_used_percent"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Percentage of memory currently in use by the heap"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"%")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"heap_used_in_bytes"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Amount of memory available for use by the heap"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"B")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"heap_max_in_bytes"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Maximum amount of memory available for use by the heap"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"B")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"available_in_bytes"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Total number of bytes available"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"B")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"total_in_bytes"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Total size of all file stores"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"B")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"docs_count"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Number of documents inside the indice"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"size_in_bytes"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"Total size of all shards assigned to the node"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"B")))))),(0,n.kt)("h2",i({},{id:"prerequisites"}),"Prerequisites"),(0,n.kt)("p",null,"In order to monitor an Elasticsearch cluster, it must be prepared acccording to Elasticsearch's official documentation: ",(0,n.kt)("a",i({parentName:"p"},{href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.8/monitor-elasticsearch-cluster"}),"https://www.elastic.co/guide/en/elasticsearch/reference/7.8/monitor-elasticsearch-cluster")),(0,n.kt)("p",null,"In order to be able to communicate with the Elasticsearch node's API, the Centreon Poller should access to the port 9200 with the http protocol on the Elasticsearch node."),(0,n.kt)("h2",i({},{id:"installation"}),"Installation"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Online Licence Business & IT Editions",label:"Online Licence Business & IT Editions",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Install the Plugin on all Centreon pollers monitoring Elasticsearch ressources:")),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"yum install centreon-plugin-Applications-Databases-Elasticsearch\n")),(0,n.kt)("ol",i({},{start:2}),(0,n.kt)("li",{parentName:"ol"},"Install the Plugin-Pack 'Elasticsearch' in the \" Configuration  >  Plugin Packs\"  page of the Web Centreon interface"))),(0,n.kt)(l.Z,{value:"Offline Licenses",label:"Offline Licenses",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Install the Plugin on all Centreon pollers monitoring Elasticsearch ressources:")),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"yum install centreon-plugin-Applications-Databases-Elasticsearch\n")),(0,n.kt)("ol",i({},{start:2}),(0,n.kt)("li",{parentName:"ol"},"Install the Plugin-Pack RPM on the Centreon server ",(0,n.kt)("strong",{parentName:"li"},"Central"),":")),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"yum install centreon-pack-applications-databases-elasticsearch\n")),(0,n.kt)("ol",i({},{start:3}),(0,n.kt)("li",{parentName:"ol"},"In the ",(0,n.kt)("em",{parentName:"li"},"Configuration  ",">","  Plugin Packs"),"  page of the Web Centreon interface, install the Plugin-Pack 'Elasticsearch'")))),(0,n.kt)("h2",i({},{id:"host-configuration"}),"Host Configuration"),(0,n.kt)("p",null,'Apply the "App-DB-Elasticsearch-custom" template to your newly created host. Then fill the macros value fileds marked as mandatory below:'),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Mandatory"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Macro"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Default value"),(0,n.kt)("th",i({parentName:"tr"},{align:"left"}),"Example"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"ELASTICSEARCHPORT"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"The Elasticsearch instance port"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"9200"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"1234")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"ELASTICSEARCHPROTO"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"The Elasticsearch instance protocol"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"http"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"https")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"ELASTICSEARCHUSERNAME"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"The Elasticsearch instance username"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"centreon")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"ELASTICSEARCHPASSWORD"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"The Elasticsearch instance password"),(0,n.kt)("td",i({parentName:"tr"},{align:"left"})),(0,n.kt)("td",i({parentName:"tr"},{align:"left"}),"centreon")))),(0,n.kt)("h2",i({},{id:"faq"}),"FAQ"),(0,n.kt)("h3",i({},{id:"how-to-check-in-the-cli-that-the-configuration-is-ok-and-what-are-the-main-options-for-"}),"How to check in the CLI that the configuration is OK and what are the main options for ?"),(0,n.kt)("p",null,"One the Plugin is installed, you can test it directly in the command line from your Centreon poller\nwith the user ",(0,n.kt)("em",{parentName:"p"},"centreon-engine"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins/centreon_elasticsearch.pl \\ \n    --hostname=168.253.16.125 \\\n    --port=9200 \\\n    --proto=http \\\n    --plugin=database::elasticsearch::restapi::plugin \\\n    --mode=node-statistics \\\n    --filter-name='Node 1'  \\\n    --username='Elasticsearch_username' \\\n    --warning-disk-free='20%' \\\n    --critical-disk-free='5%'\n")),(0,n.kt)("p",null,"Output: "),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"OK: Node 'i-Vertix Node 1' JVM Heap: 26%, Free Disk Space: 1.56TB, Documents: 4362761044, Data: 1.26TB | 'i-Vertix Node 1#node.jvm.heap.usage.percentage'=26%;;;0;100 'i-Vertix Node 1#node.jvm.heap.usage.bytes'=36380302240B;;;0;137151119360 'i-Vertix Node 1#node.disk.free.bytes'=1710072680448B;;;0;3113589145600 'i-Vertix Node 1#node.documents.total.count'=4362761044;;;0; 'i-Vertix Node 1#node.data.size.bytes'=1386278479651B;;;0;\n")),(0,n.kt)("p",null,"The command request statistic to the Elasticsearch node named 'Node 1' (",(0,n.kt)("inlineCode",{parentName:"p"},"--mode=node-statistics --filter-name='Node 1"),") with the IP/FQDN address ",(0,n.kt)("em",{parentName:"p"},"168.253.16.125")," (",(0,n.kt)("inlineCode",{parentName:"p"},"--hostname=168.253.16.125"),").\nWe will use the port 9200 (",(0,n.kt)("inlineCode",{parentName:"p"},"--port=9200"),") and the http protocol (",(0,n.kt)("inlineCode",{parentName:"p"},"proto=http''"),").\nThe username of the datebase is ",(0,n.kt)("em",{parentName:"p"},"Elasticsearch_username")," (",(0,n.kt)("inlineCode",{parentName:"p"},"--username='Elasticsearch_username'"),") and its pasword is ",(0,n.kt)("em",{parentName:"p"},"Elasticsearch_password"),"(",(0,n.kt)("inlineCode",{parentName:"p"},"--password='Elasticsearch_password'"),").\nThis command will trigger a WARNING alert if there is less than 20% of free space on the disk (",(0,n.kt)("inlineCode",{parentName:"p"},"--warning-disk-free='20%''"),") and a CRITICAL alert if less than 5% (",(0,n.kt)("inlineCode",{parentName:"p"},"--critical-disk-free='5%'"),').\nSome thresholds can also be set on metrics with options "--warning-',(0,n.kt)("em",{parentName:"p"},'" and "--critical-'),'".'),(0,n.kt)("p",null,"All the available modes can be listed with the command line:"),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins/centreon_elasticsearch.pl \\\n    --list-mode\n")),(0,n.kt)("p",null,"And the different mode's options can be displayed with the ",(0,n.kt)("inlineCode",{parentName:"p"},"--help")," parameter:  "),(0,n.kt)("pre",null,(0,n.kt)("code",i({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins/centreon_elasticsearch.pl \\\n    --mode=node-statistics \\\n    --help\n")),(0,n.kt)("h3",i({},{id:"why-do-i-get-the-following-error"}),"Why do I get the following error:"),(0,n.kt)("h4",i({},{id:"unknown-500-cant-connect"}),"UNKNOWN: 500 Can't connect"),(0,n.kt)("p",null,"This error message means that the Centreon Plugin couldn't successfully connect to the host API. Check that no third party device (such as a firewall) is blocking the request. A proxy connection may also be necessary to connect to the API. This can be done by using the --proxyurl option in the command."),(0,n.kt)("h4",i({},{id:"unknown-501-protocol-scheme-connect-is-not-supported"}),"UNKNOWN: 501 Protocol scheme 'connect' is not supported"),(0,n.kt)("p",null,"When using a proxy to connect to the host, this error message means that the Centreon Plugin library does not support the proxy connection protocol."),(0,n.kt)("p",null,"In order to prevent this issue, use the curl HTTP backend by adding the following option to the command: ",(0,n.kt)("em",{parentName:"p"},"--http-backend='curl'"),"."))}k.isMDXComponent=!0},7626:(t,e,a)=>{a.d(e,{Z:()=>s});var n=a(67294),r=a(86010);const l="tabItem_Ymn6";function i(){return i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},i.apply(this,arguments)}function s({children:t,hidden:e,className:a}){return n.createElement("div",i({role:"tabpanel",className:(0,r.Z)(l,a)},{hidden:e}),t)}},67709:(t,e,a)=>{a.d(e,{Z:()=>u});var n=a(67294),r=a(86010),l=a(90980),i=a(35715),s=a(8854),o=a(8241);const p="tabList__CuJ",c="tabItem_LNqP";function d(){return d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},d.apply(this,arguments)}function m(t){var e;const{lazy:a,block:l,defaultValue:m,values:u,groupId:k,className:f}=t,h=n.Children.map(t.children,(t=>{if((0,n.isValidElement)(t)&&"value"in t.props)return t;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof t.type?t.type:t.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),N=null!=u?u:h.map((({props:{value:t,label:e,attributes:a}})=>({value:t,label:e,attributes:a}))),g=(0,i.l)(N,((t,e)=>t.value===e.value));if(g.length>0)throw new Error(`Docusaurus error: Duplicate values "${g.map((t=>t.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);var b;const y=null===m?m:null!==(b=null!=m?m:null===(e=h.find((t=>t.props.default)))||void 0===e?void 0:e.props.value)&&void 0!==b?b:h[0].props.value;if(null!==y&&!N.some((t=>t.value===y)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${y}" but none of its children has the corresponding value. Available values are: ${N.map((t=>t.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:v,setTabGroupChoices:w}=(0,s.U)(),[E,T]=(0,n.useState)(y),O=[],{blockElementScrollPositionUntilNextRender:_}=(0,o.o5)();if(null!=k){const t=v[k];null!=t&&t!==E&&N.some((e=>e.value===t))&&T(t)}const C=t=>{const e=t.currentTarget,a=O.indexOf(e),n=N[a].value;n!==E&&(_(e),T(n),null!=k&&w(k,String(n)))},P=t=>{let e=null;switch(t.key){case"ArrowRight":{const n=O.indexOf(t.currentTarget)+1;var a;e=null!==(a=O[n])&&void 0!==a?a:O[0];break}case"ArrowLeft":{const a=O.indexOf(t.currentTarget)-1;var n;e=null!==(n=O[a])&&void 0!==n?n:O[O.length-1];break}}null==e||e.focus()};return n.createElement("div",{className:(0,r.Z)("tabs-container",p)},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":l},f)},N.map((({value:t,label:e,attributes:a})=>n.createElement("li",d({role:"tab",tabIndex:E===t?0:-1,"aria-selected":E===t,key:t,ref:t=>O.push(t),onKeyDown:P,onFocus:C,onClick:C},a,{className:(0,r.Z)("tabs__item",c,null==a?void 0:a.className,{"tabs__item--active":E===t})}),null!=e?e:t)))),a?(0,n.cloneElement)(h.filter((t=>t.props.value===E))[0],{className:"margin-top--md"}):n.createElement("div",{className:"margin-top--md"},h.map(((t,e)=>(0,n.cloneElement)(t,{key:e,hidden:t.props.value!==E})))))}function u(t){const e=(0,l.Z)();return n.createElement(m,d({key:String(e)},t))}}}]);