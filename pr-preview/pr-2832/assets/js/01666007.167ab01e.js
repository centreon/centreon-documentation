"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[33504],{3905:(t,e,a)=>{a.d(e,{Zo:()=>m,kt:()=>c});var n=a(67294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function i(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var s=n.createContext({}),p=function(t){var e=n.useContext(s),a=e;return t&&(a="function"==typeof t?t(e):o(o({},e),t)),a},m=function(t){var e=p(t.components);return n.createElement(s.Provider,{value:e},t.children)},u={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},d=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,l=t.originalType,s=t.parentName,m=i(t,["components","mdxType","originalType","parentName"]),d=p(a),c=r,k=d["".concat(s,".").concat(c)]||d[c]||u[c]||l;return a?n.createElement(k,o(o({ref:e},m),{},{components:a})):n.createElement(k,o({ref:e},m))}));function c(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=a.length,o=new Array(l);o[0]=d;var i={};for(var s in e)hasOwnProperty.call(e,s)&&(i[s]=e[s]);i.originalType=t,i.mdxType="string"==typeof t?t:r,o[1]=i;for(var p=2;p<l;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},69109:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>u,contentTitle:()=>p,default:()=>k,frontMatter:()=>s,metadata:()=>m,toc:()=>d});a(67294);var n=a(3905),r=a(67709),l=a(7626);function o(){return o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},o.apply(this,arguments)}function i(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},l=Object.keys(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)a=l[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}const s={id:"virtualization-vmware2-esx",title:"VMware ESX"},p=void 0,m={unversionedId:"integrations/plugin-packs/procedures/virtualization-vmware2-esx",id:"integrations/plugin-packs/procedures/virtualization-vmware2-esx",title:"VMware ESX",description:"Overview",source:"@site/pp/integrations/plugin-packs/procedures/virtualization-vmware2-esx.md",sourceDirName:"integrations/plugin-packs/procedures",slug:"/integrations/plugin-packs/procedures/virtualization-vmware2-esx",permalink:"/centreon-documentation/pr-preview/pr-2832/pp/integrations/plugin-packs/procedures/virtualization-vmware2-esx",draft:!1,tags:[],version:"current",frontMatter:{id:"virtualization-vmware2-esx",title:"VMware ESX"},sidebar:"pp",previous:{title:"Proxmox VE",permalink:"/centreon-documentation/pr-preview/pr-2832/pp/integrations/plugin-packs/procedures/virtualization-proxmox-ve-restapi"},next:{title:"VMware ESX WS-MAN",permalink:"/centreon-documentation/pr-preview/pr-2832/pp/integrations/plugin-packs/procedures/virtualization-vmware2-esx-wsman"}},u={},d=[{value:"Overview",id:"overview",level:2},{value:"Plugin-Pack Assets",id:"plugin-pack-assets",level:2},{value:"Monitored Objects",id:"monitored-objects",level:3},{value:"Discovery rules",id:"discovery-rules",level:3},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Centreon VMWare Connector",id:"centreon-vmware-connector",level:3},{value:"Network flows",id:"network-flows",level:3},{value:"Installation",id:"installation",level:2},{value:"FAQ",id:"faq",level:2},{value:"How do I run my plugin through the CLI and what do the main parameters stand for ?",id:"how-do-i-run-my-plugin-through-the-cli-and-what-do-the-main-parameters-stand-for-",level:3},{value:"Why do I get the following error:",id:"why-do-i-get-the-following-error",level:3},{value:"UNKNOWN: Unknown container name &#39;default&#39; |",id:"unknown-unknown-container-name-default-",level:4},{value:"UNKNOWN: Container connection problem |",id:"unknown-container-connection-problem-",level:4},{value:"UNKNOWN: Cannot get value for counters (Maybe, object(s) cannot be reached: disconnected, not running, time not synced (see time-host mode),...) |",id:"unknown-cannot-get-value-for-counters-maybe-objects-cannot-be-reached-disconnected-not-running-time-not-synced-see-time-host-mode-",level:4},{value:"UNKNOWN: Cannot get counter &#39;net.received.average&#39; for the sampling period &#39;300&#39; (counter level: 2, sampling level: 1)",id:"unknown-cannot-get-counter-netreceivedaverage-for-the-sampling-period-300-counter-level-2-sampling-level-1",level:4}],c={toc:d};function k(t){var{components:e}=t,a=i(t,["components"]);return(0,n.kt)("wrapper",o({},c,a,{components:e,mdxType:"MDXLayout"}),(0,n.kt)("h2",o({},{id:"overview"}),"Overview"),(0,n.kt)("p",null,"VMWare is an software compagny based in USA. VMWare provides cloud computing and virtualization software and services."),(0,n.kt)("p",null,"The Centreon Plugin and Plugin-Packs rely on the Centreon VMWare Connector to request the vCenter API."),(0,n.kt)("h2",o({},{id:"plugin-pack-assets"}),"Plugin-Pack Assets"),(0,n.kt)("h3",o({},{id:"monitored-objects"}),"Monitored Objects"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"ESX or ESXi")),(0,n.kt)("h3",o({},{id:"discovery-rules"}),"Discovery rules"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Host",label:"Host",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Rule name"),(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Virt-VMWare2-Esx-HostDiscovery"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Discover VMWare ESX linked to a vcenter or ESXi"))))),(0,n.kt)(l.Z,{value:"Services",label:"Services",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Rule name"),(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Virt-VMWare2-Esx-Datastores-Latency-Name"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Discover the Datastores and monitor latency")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Virt-VMWare2-Esx-Nics-Traffic-Name"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Discover the traffic NIC and monitor")))))),"## Monitored Metrics",(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Esx-Cpu",label:"Esx-Cpu",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"host.cpu.utilization.percentage"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Total CPU usage in percentage"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"%")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"host.cpu.utilization.mhz"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Total CPU usage in MHz"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"MHz")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"core#host.core.cpu.utilization.percentage"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"CPU usage per core in percentage"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"%"))))),(0,n.kt)(l.Z,{value:"Esx-Health",label:"Esx-Health",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"host.health.problems.current.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Total number of problem on the ESXs"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"host.health.problems.current.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of health checks in green"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"host.health.yellow.current.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of health checks in yellow"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"host.health.red.current.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of health checks in red"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Count"))))),(0,n.kt)(l.Z,{value:"Esx-Memory",label:"Esx-Memory",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"host.memory.usage.bytes"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Memory used"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Bytes")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"host.memory.overhead.bytes"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Memory overhead needed by the VMs on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Bytes")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"host.memory.state.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Memory state"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"})))))),(0,n.kt)(l.Z,{value:"Esx-Status",label:"Esx-Status",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Status"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Overall status on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"})))))),(0,n.kt)(l.Z,{value:"Esx-Storage",label:"Esx-Storage",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"status"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Status of the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"adapters status"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Adapter statuses of the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"esx_name"),"#host.adapters.total.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of adapters on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"esx_name"),"#host.adapters.online.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of adapters with status online on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"esx_name"),"#host.adapters.offline.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of adapters with status offline on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"esx_name"),"#host.adapters.fault.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of adapters with status fault on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"esx_name"),"#host.adapters.unknown.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of adapters with status unknown on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"luns status"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"LUN statuses of the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"esx_name"),"#host.luns.total.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of LUNs on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"esx_name"),"#host.luns.ok.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of LUNs with status ok on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"esx_name"),"#host.luns.error.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of LUNs with status error on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"esx_name"),"#host.luns.off.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of LUNs with status off on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"esx_name"),"#host.luns.unknown.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of LUNs with status unknown on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"esx_name"),"#host.luns.quiesced.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of LUNs with status quiesced on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"esx_name"),"#host.luns.degraded.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of LUNs with status degraded on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"paths status"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Paths statuses of the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"esx_name"),"#host.paths.total.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of paths on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"esx_name"),"#host.paths.active.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of paths with status active on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"esx_name"),"#host.paths.disabled.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of paths with status disabed on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"esx_name"),"#host.paths.standby.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of paths with status standby on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"esx_name"),"#host.paths.dead.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of paths with status dead on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),(0,n.kt)("em",{parentName:"td"},"esx_name"),"#host.paths.unknown.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of paths with status unknown on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"})))))),(0,n.kt)(l.Z,{value:"Esx-Swap",label:"Esx-Swap",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"host.swap.in.usage.bytespersecond"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Swap in rate Usage"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"B/s")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"host.swap.out.usage.bytespersecond"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Swap out rate Usage"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"B/s"))))),(0,n.kt)(l.Z,{value:"Esx-Vm-Count",label:"Esx-Vm-Count",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"host.vm.poweredon.current.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of powered on VMs on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"host.vm.poweredoff.current.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of powered off VMs on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"host.vm.suspended.current.count"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Number of suspended VMs on the ESX"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Count")))))),(0,n.kt)("h2",o({},{id:"prerequisites"}),"Prerequisites"),(0,n.kt)("h3",o({},{id:"centreon-vmware-connector"}),"Centreon VMWare Connector"),(0,n.kt)("p",null,"For the VMWare monitoring, Centreon use daemon to connect and request the vCenter."),(0,n.kt)("p",null,"Install this daemon on each needed poller:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{}),"yum install centreon-plugin-Virtualization-VMWare-daemon\n")),(0,n.kt)("p",null,'To configure the access to your infrastructure, edit the\n"/etc/centreon/centreon',"_",'vmware.pm" configuration file:'),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-perl"}),"%centreon_vmware_config = (\n    vsphere_server => {\n        default => {\n            url => 'https://<ip_hostname>/sdk',\n            username => '<username>',\n            password => '<password>'\n        }\n    }\n);\n\n1;\n")),(0,n.kt)("p",null,"Make sure to replace variables with needed information:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"ip","_","hostname"),": IP address or hostname of the vCenter or ESX (if standalone),"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"username"),': username with at least "read only" access to the vCenter or ESX (you can use domain user),'),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("em",{parentName:"li"},"password"),": password of the username.")),(0,n.kt)("p",null,"You can configure multiple vCenter or ESXi connections using this\nstructure:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-perl"}),"%centreon_vmware_config = (\n    vsphere_server => {\n        'my_first_vcenter' => {\n            url => 'https://<ip_hostname>/sdk',\n            username => '<username>',\n            password => '<password>'\n        },\n        'my_other_vcenter' => {\n            url => 'https://<ip_hostname>/sdk',\n            username => '<DOMAIN>\\<username>',\n            password => '<password>'\n        },\n    },\n    port => 5700\n);\n\n1;\n")),(0,n.kt)("p",null,"Each entry is called a ",(0,n.kt)("strong",{parentName:"p"},"container"),"."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},'You can also define the "port" attribute to change listening port.')),(0,n.kt)("p",null,"Then start the daemon and make sure it is configured to start at server boot:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-bash"}),"systemctl start centreon_vmware\nsystemctl enable centreon_vmware\n")),(0,n.kt)("p",null,'Make sure that the daemon configuration works fine by looking for errors in\n"/var/log/centreon/centreon',"_",'vmware.log".'),(0,n.kt)("h3",o({},{id:"network-flows"}),"Network flows"),(0,n.kt)("p",null,"The Poller with the Centreon VMware Connector installed need to access in TCP/443 HTTPS to the vCenter."),(0,n.kt)("p",null,"The Pollers that request the Centreon VMWare Connector host need to access in TCP/5700 to the Centreon VMWare Connector host."),(0,n.kt)("h2",o({},{id:"installation"}),"Installation"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Online License",label:"Online License",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Install the Vmware2 Connector Centreon Plugin on every Poller expected to monitor the devices: ")),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-bash"}),"yum install centreon-plugin-Virtualization-Vmware2-Connector-Plugin\n")),(0,n.kt)("ol",o({},{start:2}),(0,n.kt)("li",{parentName:"ol"},"Install the 'Vmware ESX' Centreon Plugin-Pack on the \"Configuration > Plugin packs > Manager\" page "))),(0,n.kt)(l.Z,{value:"Offline License",label:"Offline License",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Install the Vmware ESX Centreon Plugin on every poller expected to monitor the devices:")),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-bash"}),"yum install centreon-plugin-Virtualization-Vmware2-Connector-Plugin\n")),(0,n.kt)("ol",o({},{start:2}),(0,n.kt)("li",{parentName:"ol"},"Install the Centreon Plugin-Pack RPM: ")),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-bash"}),"yum install centreon-pack-virtualization-vmware2-esx\n")),(0,n.kt)("ol",o({},{start:3}),(0,n.kt)("li",{parentName:"ol"},"Install the 'Vmware ESX' Centreon Plugin-Pack on the \"Configuration > Plugin packs > Manager\" page ")))),"## Configuration",(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'Log into Centreon and add a new Host through "Configuration > Hosts".'),(0,n.kt)("li",{parentName:"ul"},'Apply the relevant Host Template "Virt-VMWare2-ESX-custom", and configure the mandatory Macros:')),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Mandatory"),(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Name"),(0,n.kt)("th",o({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"CENTREONVMWARECONTAINER"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Name of your container in the file centreon_vmware.pm")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"CENTREONVMWAREHOST"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"The Centreon server that launches the connection")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"CENTREONVMWAREPORT"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"By default: 5700")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"ESXNAME"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Name of the ESX (defined in your VMWare infrastructure)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:"left"})),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"CENTREONVMWAREEXTRAOPTIONS"),(0,n.kt)("td",o({parentName:"tr"},{align:"left"}),"Customize it with your own if needed")))),(0,n.kt)("h2",o({},{id:"faq"}),"FAQ"),(0,n.kt)("h3",o({},{id:"how-do-i-run-my-plugin-through-the-cli-and-what-do-the-main-parameters-stand-for-"}),"How do I run my plugin through the CLI and what do the main parameters stand for ?"),(0,n.kt)("p",null,"Once you've installed the plugin, you can test it logging with centreon-engine user:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins//centreon_vmware_connector_client.pl \\\n    --plugin=apps::vmware::connector::plugin \\\n    --mode=cpu-host \\\n    --custommode=connector \\\n    --connector-hostname='localhost' \\\n    --connector-port='5700' \\\n    --container='vcenter01' \\\n    --esx-hostname='SRV-ESX-TLS' \\\n    --unknown-status='%{status} !~ /^connected$/i' \\\n    --warning-status='' \\\n    --critical-status='' \\\n    --warning-total-cpu='80' \\\n    --critical-total-cpu='90' \\\n    --warning-total-cpu-mhz='' \\\n    --critical-total-cpu-mhz='' \\\n    --warning-cpu='' \\\n    --critical-cpu=''\n")),(0,n.kt)("p",null,"Expected command output is shown below:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-bash"}),"OK: Host 'SRV-ESX-TLS' : status connected - cpu total average : 48.63 %, 14592.00 MHz - All CPUs are ok |\n'cpu_total'=48.63%;;;0;100 'cpu_total_MHz'=14592.00MHz;;;0;30000 'cpu_0'=13.95%;;;0;100 'cpu_1'=12.01%;;;0;100\n'cpu_2'=24.58%;;;0;100 'cpu_3'=24.55%;;;0;100 'cpu_4'=26.72%;;;0;100 'cpu_5'=24.38%;;;0;100 'cpu_6'=24.23%;;;0;100\n'cpu_7'=26.37%;;;0;100 'cpu_8'=27.71%;;;0;100 'cpu_9'=26.16%;;;0;100\n")),(0,n.kt)("p",null,"This command above checks the CPU Usage (",(0,n.kt)("inlineCode",{parentName:"p"},"--plugin=apps::vmware::connector::plugin --mode=cpu-host"),") of the ESX ",(0,n.kt)("strong",{parentName:"p"},"SRV-ESX-TLS")," (",(0,n.kt)("inlineCode",{parentName:"p"},"--esx-hostname='SRV-ESX-TLS'"),").\nIt connects to the VMWare daemon on ",(0,n.kt)("strong",{parentName:"p"},"localhost")," (",(0,n.kt)("inlineCode",{parentName:"p"},"--connector-hostname='localhost'"),") on the port ",(0,n.kt)("strong",{parentName:"p"},"5700")," (",(0,n.kt)("inlineCode",{parentName:"p"},"--connector-port='5700'"),").\nThen the command requests the container ",(0,n.kt)("strong",{parentName:"p"},"vcenter01")," (",(0,n.kt)("inlineCode",{parentName:"p"},"--container='vcenter01'"),") because the ESX ",(0,n.kt)("strong",{parentName:"p"},"SRV-ESX-TLS")," is managed by ",(0,n.kt)("strong",{parentName:"p"},"vcenter01"),"."),(0,n.kt)("p",null,"It will trigger a WARNING alarm if the CPU Usage is above 80% (",(0,n.kt)("inlineCode",{parentName:"p"},"--warning-total-cpu='80'"),")\nand a CRITICAL alarm if the CPU Usage is above 90% (",(0,n.kt)("inlineCode",{parentName:"p"},"--critical-total-cpu='90'"),")."),(0,n.kt)("p",null,"All available modes with the plugin can be displayed with: "),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins/./centreon_vmware_connector_client.pl \\\n    --plugin=apps::vmware::connector::plugin \\\n    --list-mode\n")),(0,n.kt)("p",null,"The available options for a mode can be displayed using the ",(0,n.kt)("inlineCode",{parentName:"p"},"--help")," parameter: "),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins/./centreon_vmware_connector_client.pl \\\n    --plugin=apps::vmware::connector::plugin \\\n    --mode=cpu-host \\\n    --help\n")),(0,n.kt)("h3",o({},{id:"why-do-i-get-the-following-error"}),"Why do I get the following error:"),(0,n.kt)("h4",o({},{id:"unknown-unknown-container-name-default-"}),"UNKNOWN: Unknown container name 'default' |"),(0,n.kt)("p",null,"This error message means that the container invoked in the command doesn't exist in your VMWare connector configuration.\nCheck your macro ",(0,n.kt)("strong",{parentName:"p"},"CENTREONVMWARECONTAINER")," on your host or check the file ",(0,n.kt)("em",{parentName:"p"},"/etc/centreon/centreon_vmware.pm")),(0,n.kt)("h4",o({},{id:"unknown-container-connection-problem-"}),"UNKNOWN: Container connection problem |"),(0,n.kt)("p",null,"This error message means that you have a issue with the credentials provided for your Container.\nCheck your credentials in ",(0,n.kt)("em",{parentName:"p"},"/etc/centreon/centreon_vmware.pm"),".\nYou can also take a look into the log for more information: ",(0,n.kt)("em",{parentName:"p"},"/var/log/centreon/centreon_vmware.log")),(0,n.kt)("h4",o({},{id:"unknown-cannot-get-value-for-counters-maybe-objects-cannot-be-reached-disconnected-not-running-time-not-synced-see-time-host-mode-"}),"UNKNOWN: Cannot get value for counters (Maybe, object(s) cannot be reached: disconnected, not running, time not synced (see time-host mode),...) |"),(0,n.kt)("p",null,"This error message means that you the plugin cannot get value for some counters.\nMost of the time it caused by a time shift between the Centreon Servers and the VMWare Infrastructure.\nCheck the synchronization with the mode ",(0,n.kt)("inlineCode",{parentName:"p"},"time-host"),"."),(0,n.kt)("h4",o({},{id:"unknown-cannot-get-counter-netreceivedaverage-for-the-sampling-period-300-counter-level-2-sampling-level-1"}),"UNKNOWN: Cannot get counter 'net.received.average' for the sampling period '300' (counter level: 2, sampling level: 1)"),(0,n.kt)("p",null,"Some counters like 'mem.state.latest' and 'net.received.average' are only available with a sampling level at 2.\nYou can configure the level sampling in the vCenter console for these counters.\nYou can also configure the macro ",(0,n.kt)("em",{parentName:"p"},"SERVICEEXTRAOPTIONS")," on the services where you catched this error with the option ",(0,n.kt)("inlineCode",{parentName:"p"},"--sampling-period='20'"),"."))}k.isMDXComponent=!0},7626:(t,e,a)=>{a.d(e,{Z:()=>i});var n=a(67294),r=a(86010);const l="tabItem_Ymn6";function o(){return o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},o.apply(this,arguments)}function i({children:t,hidden:e,className:a}){return n.createElement("div",o({role:"tabpanel",className:(0,r.Z)(l,a)},{hidden:e}),t)}},67709:(t,e,a)=>{a.d(e,{Z:()=>c});var n=a(67294),r=a(86010),l=a(90980),o=a(35715),i=a(8854),s=a(8241);const p="tabList__CuJ",m="tabItem_LNqP";function u(){return u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},u.apply(this,arguments)}function d(t){var e;const{lazy:a,block:l,defaultValue:d,values:c,groupId:k,className:h}=t,N=n.Children.map(t.children,(t=>{if((0,n.isValidElement)(t)&&"value"in t.props)return t;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof t.type?t.type:t.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),g=null!=c?c:N.map((({props:{value:t,label:e,attributes:a}})=>({value:t,label:e,attributes:a}))),f=(0,o.l)(g,((t,e)=>t.value===e.value));if(f.length>0)throw new Error(`Docusaurus error: Duplicate values "${f.map((t=>t.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);var b;const v=null===d?d:null!==(b=null!=d?d:null===(e=N.find((t=>t.props.default)))||void 0===e?void 0:e.props.value)&&void 0!==b?b:N[0].props.value;if(null!==v&&!g.some((t=>t.value===v)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${v}" but none of its children has the corresponding value. Available values are: ${g.map((t=>t.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:y,setTabGroupChoices:w}=(0,i.U)(),[E,C]=(0,n.useState)(v),S=[],{blockElementScrollPositionUntilNextRender:T}=(0,s.o5)();if(null!=k){const t=y[k];null!=t&&t!==E&&g.some((e=>e.value===t))&&C(t)}const x=t=>{const e=t.currentTarget,a=S.indexOf(e),n=g[a].value;n!==E&&(T(e),C(n),null!=k&&w(k,String(n)))},O=t=>{let e=null;switch(t.key){case"ArrowRight":{const n=S.indexOf(t.currentTarget)+1;var a;e=null!==(a=S[n])&&void 0!==a?a:S[0];break}case"ArrowLeft":{const a=S.indexOf(t.currentTarget)-1;var n;e=null!==(n=S[a])&&void 0!==n?n:S[S.length-1];break}}null==e||e.focus()};return n.createElement("div",{className:(0,r.Z)("tabs-container",p)},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":l},h)},g.map((({value:t,label:e,attributes:a})=>n.createElement("li",u({role:"tab",tabIndex:E===t?0:-1,"aria-selected":E===t,key:t,ref:t=>S.push(t),onKeyDown:O,onFocus:x,onClick:x},a,{className:(0,r.Z)("tabs__item",m,null==a?void 0:a.className,{"tabs__item--active":E===t})}),null!=e?e:t)))),a?(0,n.cloneElement)(N.filter((t=>t.props.value===E))[0],{className:"margin-top--md"}):n.createElement("div",{className:"margin-top--md"},N.map(((t,e)=>(0,n.cloneElement)(t,{key:e,hidden:t.props.value!==E})))))}function c(t){const e=(0,l.Z)();return n.createElement(d,u({key:String(e)},t))}}}]);