"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[3761],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>d});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var i=n.createContext({}),u=function(e){var t=n.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},c=function(e){var t=u(e.components);return n.createElement(i.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=u(a),d=r,g=m["".concat(i,".").concat(d)]||m[d]||p[d]||o;return a?n.createElement(g,l(l({ref:t},c),{},{components:a})):n.createElement(g,l({ref:t},c))}));function d(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=m;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:r,l[1]=s;for(var u=2;u<o;u++)l[u]=a[u];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},39585:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>u,default:()=>g,frontMatter:()=>i,metadata:()=>c,toc:()=>m});a(67294);var n=a(3905),r=a(67709),o=a(7626);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l.apply(this,arguments)}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const i={id:"cloud-aws-sqs",title:"Amazon SQS"},u=void 0,c={unversionedId:"integrations/plugin-packs/procedures/cloud-aws-sqs",id:"integrations/plugin-packs/procedures/cloud-aws-sqs",title:"Amazon SQS",description:"Overview",source:"@site/pp/integrations/plugin-packs/procedures/cloud-aws-sqs.md",sourceDirName:"integrations/plugin-packs/procedures",slug:"/integrations/plugin-packs/procedures/cloud-aws-sqs",permalink:"/centreon-documentation/pr-preview/pr-2832/pp/integrations/plugin-packs/procedures/cloud-aws-sqs",draft:!1,tags:[],version:"current",frontMatter:{id:"cloud-aws-sqs",title:"Amazon SQS"},sidebar:"pp",previous:{title:"Amazon SNS",permalink:"/centreon-documentation/pr-preview/pr-2832/pp/integrations/plugin-packs/procedures/cloud-aws-sns"},next:{title:"AWS Billing",permalink:"/centreon-documentation/pr-preview/pr-2832/pp/integrations/plugin-packs/procedures/cloud-aws-billing"}},p={},m=[{value:"Overview",id:"overview",level:2},{value:"Plugin-Pack assets",id:"plugin-pack-assets",level:2},{value:"Monitored objects",id:"monitored-objects",level:3},{value:"Discovery Rules",id:"discovery-rules",level:3},{value:"Collected metrics",id:"collected-metrics",level:3},{value:"Prerequisites",id:"prerequisites",level:2},{value:"AWS Configuration",id:"aws-configuration",level:3},{value:"Plugin dependencies",id:"plugin-dependencies",level:3},{value:"Setup",id:"setup",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Host",id:"host",level:3},{value:"Services",id:"services",level:3},{value:"FAQ",id:"faq",level:2},{value:"How to check in the CLI that the configuration is OK and what are the main options for ?",id:"how-to-check-in-the-cli-that-the-configuration-is-ok-and-what-are-the-main-options-for-",level:3},{value:"Why do I get the following result:",id:"why-do-i-get-the-following-result",level:3},{value:"<code>UNKNOWN: No metrics. Check your options or use --zeroed option to set 0 on undefined values</code> ?",id:"unknown-no-metrics-check-your-options-or-use---zeroed-option-to-set-0-on-undefined-values-",level:4},{value:"<code>UNKNOWN: Command error:  - An error occurred (AuthFailure) [...]</code> ?",id:"unknown-command-error----an-error-occurred-authfailure--",level:4},{value:"<code>UNKNOWN: 500 Can&#39;t connect to monitoring.eu-west-1.amazonaws.com:443 |</code>",id:"unknown-500-cant-connect-to-monitoringeu-west-1amazonawscom443-",level:4}],d={toc:m};function g(e){var{components:t}=e,a=s(e,["components"]);return(0,n.kt)("wrapper",l({},d,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",l({},{id:"overview"}),"Overview"),(0,n.kt)("p",null,"Amazon Simple Queue Service (SQS) is a fully managed message queuing service that enables you to decouple and scale microservices,\ndistributed systems, and serverless applications. SQS eliminates the complexity and overhead associated with managing\nand operating message oriented middleware, and empowers developers to focus on differentiating work."),(0,n.kt)("p",null,"There is no charge for the Amazon SQS metrics reported in CloudWatch. They're provided as part of the Amazon SQS service."),(0,n.kt)("p",null,"The Amazon SQS Centreon Plugin uses the Amazon Cloudwatch APIs to collect the related metrics and status."),(0,n.kt)("h2",l({},{id:"plugin-pack-assets"}),"Plugin-Pack assets"),(0,n.kt)("h3",l({},{id:"monitored-objects"}),"Monitored objects"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"SQS Message queues (both standard and FiFo queues are supported)")),(0,n.kt)("h3",l({},{id:"discovery-rules"}),"Discovery Rules"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(o.Z,{value:"Services",label:"Services",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Rule name"),(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Cloud-Aws-Sqs-Queues"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Discover Amazon SQS queues and monitor their status and related metrics")))))),(0,n.kt)("h3",l({},{id:"collected-metrics"}),"Collected metrics"),(0,n.kt)("p",null,"More information about collected metrics is available in the official Amazon documentation:\n",(0,n.kt)("a",l({parentName:"p"},{href:"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-monitoring-using-cloudwatch"}),"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-monitoring-using-cloudwatch")),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(o.Z,{value:"Sqs-Queues",label:"Sqs-Queues",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Metric name"),(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Description"),(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"sqs.queue.messages.oldest.seconds"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"The approximate age of the oldest non-deleted message in the queue."),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"s")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"sqs.queue.messages.delayed.count"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"The number of messages in the queue that are delayed and not available for reading immediately."),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"sqs.queue.messages.notvisible.count"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"The number of messages that are in flight."),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"sqs.queue.messages.visible.count"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"The number of messages available for retrieval from the queue."),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"sqs.queue.messages.empty.count"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"The number of ReceiveMessage API calls that did not return a message."),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"sqs.queue.messages.deleted.count"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"The number of messages deleted from the queue."),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"sqs.queue.messages.received.count"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"The number of messages returned by calls to the ReceiveMessage action."),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"sqs.queue.messages.sent.count"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"The number of messages added to a queue."),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}))))))),(0,n.kt)("h2",l({},{id:"prerequisites"}),"Prerequisites"),(0,n.kt)("h3",l({},{id:"aws-configuration"}),"AWS Configuration"),(0,n.kt)("p",null,"Configure a service account (",(0,n.kt)("em",{parentName:"p"},"access/secret keys")," combo) for which the following privileges have to be granted:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"AWS Privilege"),(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"sqs:ListQueues"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Returns a list of your queues in the current region.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"cloudwatch:listMetrics"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"List all metrics from Cloudwatch AWS/VPN namespace")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"cloudwatch:getMetricStatistics"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Get metrics values from Cloudwatch AWS/VPN namespace")))),(0,n.kt)("h3",l({},{id:"plugin-dependencies"}),"Plugin dependencies"),(0,n.kt)("p",null,"To interact with Amazon APIs, you can use either use the ",(0,n.kt)("em",{parentName:"p"},"awscli")," binary provided by Amazon or ",(0,n.kt)("em",{parentName:"p"},"paws"),", a Perl AWS SDK (recommended).\nYou must install it on every Centreon poller expected to monitor AWS resources: "),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(o.Z,{value:"perl-Paws-installation",label:"perl-Paws-installation",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"yum install perl-Paws\n"))),(0,n.kt)(o.Z,{value:"aws-cli-installation",label:"aws-cli-installation",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"yum install awscli\n")))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"For now, it is not possible to use ",(0,n.kt)("em",{parentName:"p"},"paws")," in the following situations:"),(0,n.kt)("ul",{parentName:"blockquote"},(0,n.kt)("li",{parentName:"ul"},"if you are using a proxy to reach AWS Cloudwatch APIs. "),(0,n.kt)("li",{parentName:"ul"},"to automatically add Hosts in Centreon using the ",(0,n.kt)("em",{parentName:"li"},"Host Discovery")," feature"))),(0,n.kt)("h2",l({},{id:"setup"}),"Setup"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(o.Z,{value:"Online License",label:"Online License",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Install the Centreon Plugin package on every Centreon poller expected to monitor Amazon SQS resources:")),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"yum install centreon-plugin-Cloud-Aws-Sqs-Api\n")),(0,n.kt)("ol",l({},{start:2}),(0,n.kt)("li",{parentName:"ol"},"On the Centreon Web interface, install the ",(0,n.kt)("em",{parentName:"li"},"Amazon SQS"),' Centreon Plugin-Pack on the "Configuration > Plugin Packs > Manager" page'))),(0,n.kt)(o.Z,{value:"Offline License",label:"Offline License",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Install the Centreon Plugin package on every Centreon poller expected to monitor Amazon SQS resources:")),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"yum install centreon-plugin-Cloud-Aws-Sqs-Api\n")),(0,n.kt)("ol",l({},{start:2}),(0,n.kt)("li",{parentName:"ol"},"Install the Centreon Plugin-Pack RPM on the Centreon Central server:")),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"yum install centreon-pack-cloud-aws-sqs.noarch\n")),(0,n.kt)("ol",l({},{start:3}),(0,n.kt)("li",{parentName:"ol"},"On the Centreon Web interface, install the ",(0,n.kt)("em",{parentName:"li"},"Amazon SQS"),' Centreon Plugin-Pack on the "Configuration > Plugin Packs > Manager" page')))),(0,n.kt)("h2",l({},{id:"configuration"}),"Configuration"),(0,n.kt)("h3",l({},{id:"host"}),"Host"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'Log into Centreon and add a new Host through "Configuration > Hosts". '),(0,n.kt)("li",{parentName:"ul"},"Select the ",(0,n.kt)("em",{parentName:"li"},"Cloud-Aws-Sqs-custom")," template to apply to the Host."),(0,n.kt)("li",{parentName:"ul"},"Once the template applied, some Macros marked as 'Mandatory' hereafter have to be configured:")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Mandatory"),(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Nom"),(0,n.kt)("th",l({parentName:"tr"},{align:"left"}),"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"AWSSECRETKEY"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"AWS Secret key of your IAM role. Password checkbox must be checked")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"AWSACESSKEY"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"AWS Access key of your IAM role. Password checkbox must be checked")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"AWSREGION"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Region where the instance is running")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"X"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"AWSCUSTOMMODE"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Custom mode to get metrics, 'awscli' is the default, you can also use 'paws' perl library")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"})),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"PROXYURL"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Configure proxy URL")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"})),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"EXTRAOPTIONS"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Any extra option you may want to add to every command","_","line (eg. a --verbose flag)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"})),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"DUMMYSTATUS"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Host state. Default is OK, do not modify it unless you know what you are doing")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",l({parentName:"tr"},{align:"left"})),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"DUMMYOUTPUT"),(0,n.kt)("td",l({parentName:"tr"},{align:"left"}),"Host check output. Default is 'This is a dummy check'. Customize it with your own if needed")))),(0,n.kt)("h3",l({},{id:"services"}),"Services"),(0,n.kt)("p",null,"Once the Host template applied, a ",(0,n.kt)("em",{parentName:"p"},"Sqs-Queues"),' service will be created. This service is generic, meaning that it won\'t work "as is".\nThe ',(0,n.kt)("em",{parentName:"p"},"QUEUENAME")," Service Macro is mandatory for the resources to be monitored properly and has to be set. You can then duplicate the service\nas much as the different queues to be monitored (the Services names can also be adjusted accordingly with the queues names)."),(0,n.kt)("h2",l({},{id:"faq"}),"FAQ"),(0,n.kt)("h3",l({},{id:"how-to-check-in-the-cli-that-the-configuration-is-ok-and-what-are-the-main-options-for-"}),"How to check in the CLI that the configuration is OK and what are the main options for ?"),(0,n.kt)("p",null,"Once the plugin installed, log into your Centreon Poller CLI using the ",(0,n.kt)("em",{parentName:"p"},"centreon-engine")," user account and test the Plugin\nby running the following command (Some of the parameters such as ",(0,n.kt)("inlineCode",{parentName:"p"},"--proxyurl")," have to be adjusted):"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins/centreon_aws_sqs_api.pl \\\n    --plugin=cloud::aws::sqs::plugin \\\n    --mode=queues \\\n    --custommode=awscli \\\n    --aws-secret-key='*******************' \\\n    --aws-access-key='**********' \\\n    --region='eu-west-1' \\\n    --proxyurl='http://myproxy.mycompany.org:8080'\n    --statistic=average \\\n    --timeframe='600' \\\n    --period='60' \\\n    --queue-name='my_sqs_queue_1' \\\n    --filter-metric='NumberOfMessagesSent|NumberOfMessagesReceived' \\\n    --critical-messages-sent=1: \\\n    --critical-messages-received=1: \\\n    --verbose\n")),(0,n.kt)("p",null,"Expected command output is shown below: "),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"OK: 'my_sqs_queue_1' Statistic 'Average' number of messages sent: 45, number of \nmessages received: 32 | 'my_sqs_queue_1~average#sqs.queue.messages.sent.count'=45;;1:;; 'my_sqs_queue_1~average#sqs.queue.messages.received.count'=32;;1:;;\nSQS Queue'my_sqs_queue_1'\n    Statistic 'Average' number of messages sent: 45, number of messages received: 32  \n")),(0,n.kt)("p",null,"The command above monitors the SQS queue named ",(0,n.kt)("em",{parentName:"p"},"my_sqs_queue_1")," (",(0,n.kt)("inlineCode",{parentName:"p"},"--mode=queues --queue-name='my_sqs_queue_1'"),") of an AWS account\nidentified by the usage of API credentials (",(0,n.kt)("inlineCode",{parentName:"p"},"--aws-secret-key='****' --aws-access-key='****'"),").\nThe calculated metrics are an average of values (",(0,n.kt)("inlineCode",{parentName:"p"},"--statistic='average'"),") on a 600 secondes / 10 min period (",(0,n.kt)("inlineCode",{parentName:"p"},"--timeframe='600'"),") with one sample per 60s / 1 minute (",(0,n.kt)("inlineCode",{parentName:"p"},"--period='60'"),").\nIn the example above, only the ",(0,n.kt)("em",{parentName:"p"},"sent")," and ",(0,n.kt)("em",{parentName:"p"},"received")," messages statistics will be returned (",(0,n.kt)("inlineCode",{parentName:"p"},"--filter-metric='NumberOfMessagesSent|NumberOfMessagesReceived'"),")."),(0,n.kt)("p",null,"This command would trigger a CRITICAL alert if no messages (",(0,n.kt)("em",{parentName:"p"},"less than 1"),") have been sent or received (",(0,n.kt)("inlineCode",{parentName:"p"},"--critical-messages-sent=0: "),")\nduring the sample period."),(0,n.kt)("p",null,"All the metrics that can be filtered on as well as all the available thresholds parameters can be displayed by adding the  ",(0,n.kt)("inlineCode",{parentName:"p"},"--help"),"\nparameter to the command:"),(0,n.kt)("pre",null,(0,n.kt)("code",l({parentName:"pre"},{className:"language-bash"}),"/usr/lib/centreon/plugins/centreon_aws_sqs_api.pl --plugin=cloud::aws::sqs::plugin --mode=queues --help\n")),(0,n.kt)("h3",l({},{id:"why-do-i-get-the-following-result"}),"Why do I get the following result:"),(0,n.kt)("h4",l({},{id:"unknown-no-metrics-check-your-options-or-use---zeroed-option-to-set-0-on-undefined-values-"}),(0,n.kt)("inlineCode",{parentName:"h4"},"UNKNOWN: No metrics. Check your options or use --zeroed option to set 0 on undefined values")," ?"),(0,n.kt)("p",null,"This command result means that Amazon Cloudwatch does not have any value for the requested period."),(0,n.kt)("p",null,"This result can be overriden by adding the ",(0,n.kt)("inlineCode",{parentName:"p"},"--zeroed")," option in the command. This will force a value of 0 when no metric\nhas been collected and will prevent the UNKNOWN error message. "),(0,n.kt)("h4",l({},{id:"unknown-command-error----an-error-occurred-authfailure--"}),(0,n.kt)("inlineCode",{parentName:"h4"},"UNKNOWN: Command error:  - An error occurred (AuthFailure) [...]")," ?"),(0,n.kt)("p",null,"This command result means that the credentials provided don't have enough privileges to perform the underlying AWS Operation."),(0,n.kt)("h4",l({},{id:"unknown-500-cant-connect-to-monitoringeu-west-1amazonawscom443-"}),(0,n.kt)("inlineCode",{parentName:"h4"},"UNKNOWN: 500 Can't connect to monitoring.eu-west-1.amazonaws.com:443 |")),(0,n.kt)("p",null,"This error message means that the Centreon Plugin couldn't successfully connect to the AWS Cloudwatch API.\nCheck that no third party device (such as a firewall) is blocking the request.\nA proxy connection may also be necessary to connect to the API.\nThis can be done by using this option in the command: ",(0,n.kt)("inlineCode",{parentName:"p"},"--proxyurl='http://proxy.mycompany:8080'"),"."))}g.isMDXComponent=!0},7626:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(67294),r=a(86010);const o="tabItem_Ymn6";function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},l.apply(this,arguments)}function s({children:e,hidden:t,className:a}){return n.createElement("div",l({role:"tabpanel",className:(0,r.Z)(o,a)},{hidden:t}),e)}},67709:(e,t,a)=>{a.d(t,{Z:()=>d});var n=a(67294),r=a(86010),o=a(90980),l=a(35715),s=a(8854),i=a(8241);const u="tabList__CuJ",c="tabItem_LNqP";function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},p.apply(this,arguments)}function m(e){var t;const{lazy:a,block:o,defaultValue:m,values:d,groupId:g,className:h}=e,k=n.Children.map(e.children,(e=>{if((0,n.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),f=null!=d?d:k.map((({props:{value:e,label:t,attributes:a}})=>({value:e,label:t,attributes:a}))),v=(0,l.l)(f,((e,t)=>e.value===t.value));if(v.length>0)throw new Error(`Docusaurus error: Duplicate values "${v.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);var b;const N=null===m?m:null!==(b=null!=m?m:null===(t=k.find((e=>e.props.default)))||void 0===t?void 0:t.props.value)&&void 0!==b?b:k[0].props.value;if(null!==N&&!f.some((e=>e.value===N)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${N}" but none of its children has the corresponding value. Available values are: ${f.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:y,setTabGroupChoices:w}=(0,s.U)(),[S,q]=(0,n.useState)(N),C=[],{blockElementScrollPositionUntilNextRender:O}=(0,i.o5)();if(null!=g){const e=y[g];null!=e&&e!==S&&f.some((t=>t.value===e))&&q(e)}const A=e=>{const t=e.currentTarget,a=C.indexOf(t),n=f[a].value;n!==S&&(O(t),q(n),null!=g&&w(g,String(n)))},T=e=>{let t=null;switch(e.key){case"ArrowRight":{const n=C.indexOf(e.currentTarget)+1;var a;t=null!==(a=C[n])&&void 0!==a?a:C[0];break}case"ArrowLeft":{const a=C.indexOf(e.currentTarget)-1;var n;t=null!==(n=C[a])&&void 0!==n?n:C[C.length-1];break}}null==t||t.focus()};return n.createElement("div",{className:(0,r.Z)("tabs-container",u)},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":o},h)},f.map((({value:e,label:t,attributes:a})=>n.createElement("li",p({role:"tab",tabIndex:S===e?0:-1,"aria-selected":S===e,key:e,ref:e=>C.push(e),onKeyDown:T,onFocus:A,onClick:A},a,{className:(0,r.Z)("tabs__item",c,null==a?void 0:a.className,{"tabs__item--active":S===e})}),null!=t?t:e)))),a?(0,n.cloneElement)(k.filter((e=>e.props.value===S))[0],{className:"margin-top--md"}):n.createElement("div",{className:"margin-top--md"},k.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==S})))))}function d(e){const t=(0,o.Z)();return n.createElement(m,p({key:String(t)},e))}}}]);