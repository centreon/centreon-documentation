"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[48754],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>c});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=p(a),c=r,k=u["".concat(s,".").concat(c)]||u[c]||m[c]||l;return a?n.createElement(k,o(o({ref:t},d),{},{components:a})):n.createElement(k,o({ref:t},d))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,o=new Array(l);o[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var p=2;p<l;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},1420:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/centreon-55f8e9461ad0d121a6603b4417c2ea49.cnf"},7626:(e,t,a)=>{a.d(t,{Z:()=>i});var n=a(67294),r=a(86010);const l="tabItem_Ymn6";function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o.apply(this,arguments)}function i({children:e,hidden:t,className:a}){return n.createElement("div",o({role:"tabpanel",className:(0,r.Z)(l,a)},{hidden:t}),e)}},67709:(e,t,a)=>{a.d(t,{Z:()=>c});var n=a(67294),r=a(86010),l=a(90980),o=a(35715),i=a(8854),s=a(8241);const p="tabList__CuJ",d="tabItem_LNqP";function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m.apply(this,arguments)}function u(e){var t;const{lazy:a,block:l,defaultValue:u,values:c,groupId:k,className:g}=e,h=n.Children.map(e.children,(e=>{if((0,n.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),N=null!=c?c:h.map((({props:{value:e,label:t,attributes:a}})=>({value:e,label:t,attributes:a}))),b=(0,o.l)(N,((e,t)=>e.value===t.value));if(b.length>0)throw new Error(`Docusaurus error: Duplicate values "${b.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);var f;const y=null===u?u:null!==(f=null!=u?u:null===(t=h.find((e=>e.props.default)))||void 0===t?void 0:t.props.value)&&void 0!==f?f:h[0].props.value;if(null!==y&&!N.some((e=>e.value===y)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${y}" but none of its children has the corresponding value. Available values are: ${N.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:v,setTabGroupChoices:w}=(0,i.U)(),[T,I]=(0,n.useState)(y),B=[],{blockElementScrollPositionUntilNextRender:C}=(0,s.o5)();if(null!=k){const e=v[k];null!=e&&e!==T&&N.some((t=>t.value===e))&&I(e)}const x=e=>{const t=e.currentTarget,a=B.indexOf(t),n=N[a].value;n!==T&&(C(t),I(n),null!=k&&w(k,String(n)))},E=e=>{let t=null;switch(e.key){case"ArrowRight":{const n=B.indexOf(e.currentTarget)+1;var a;t=null!==(a=B[n])&&void 0!==a?a:B[0];break}case"ArrowLeft":{const a=B.indexOf(e.currentTarget)-1;var n;t=null!==(n=B[a])&&void 0!==n?n:B[B.length-1];break}}null==t||t.focus()};return n.createElement("div",{className:(0,r.Z)("tabs-container",p)},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":l},g)},N.map((({value:e,label:t,attributes:a})=>n.createElement("li",m({role:"tab",tabIndex:T===e?0:-1,"aria-selected":T===e,key:e,ref:e=>B.push(e),onKeyDown:E,onFocus:x,onClick:x},a,{className:(0,r.Z)("tabs__item",d,null==a?void 0:a.className,{"tabs__item--active":T===e})}),null!=t?t:e)))),a?(0,n.cloneElement)(h.filter((e=>e.props.value===T))[0],{className:"margin-top--md"}):n.createElement("div",{className:"margin-top--md"},h.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==T})))))}function c(e){const t=(0,l.Z)();return n.createElement(u,m({key:String(t)},e))}},22481:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>m,contentTitle:()=>p,default:()=>k,frontMatter:()=>s,metadata:()=>d,toc:()=>u});a(67294);var n=a(3905),r=a(67709),l=a(7626);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o.apply(this,arguments)}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const s={id:"installation",title:"Install the Centreon MBI extension"},p=void 0,d={unversionedId:"reporting/installation",id:"version-23.10/reporting/installation",title:"Install the Centreon MBI extension",description:"This chapter presents the software architecture of the Centreon MBI extension",source:"@site/versioned_docs/version-23.10/reporting/installation.md",sourceDirName:"reporting",slug:"/reporting/installation",permalink:"/centreon-documentation/pr-preview/pr-2832/docs/reporting/installation",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/next/versioned_docs/version-23.10/reporting/installation.md",tags:[],version:"23.10",lastUpdatedAt:1700565273,formattedLastUpdatedAt:"Nov 21, 2023",frontMatter:{id:"installation",title:"Install the Centreon MBI extension"},sidebar:"version-23.10/docs",previous:{title:"Report development",permalink:"/centreon-documentation/pr-preview/pr-2832/docs/reporting/report-development"},next:{title:"Update the extension",permalink:"/centreon-documentation/pr-preview/pr-2832/docs/reporting/update"}},m={},u=[{value:"Architecture",id:"architecture",level:2},{value:"A dedicated reporting server",id:"a-dedicated-reporting-server",level:3},{value:"Network Flow Tables",id:"network-flow-tables",level:3},{value:"Information about the packages",id:"information-about-the-packages",level:3},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Central Centreon server",id:"central-centreon-server",level:3},{value:"Software requirements",id:"software-requirements",level:4},{value:"Users and groups",id:"users-and-groups",level:4},{value:"Users and groups",id:"users-and-groups-1",level:4},{value:"Users and groups",id:"users-and-groups-2",level:4},{value:"Description of users, umask and home directory",id:"description-of-users-umask-and-home-directory",level:4},{value:"Dedicated reporting server",id:"dedicated-reporting-server",level:3},{value:"Hardware layer",id:"hardware-layer",level:4},{value:"Firmware and software layer",id:"firmware-and-software-layer",level:4},{value:"Install the extension on Centreon",id:"install-the-extension-on-centreon",level:2},{value:"Enable the extension",id:"enable-the-extension",level:3},{value:"Configure the extension",id:"configure-the-extension",level:3},{value:"Access to the Central database",id:"access-to-the-central-database",level:3},{value:"Debian 11 specific configuration",id:"debian-11-specific-configuration",level:4},{value:"Give rights to the cbis user",id:"give-rights-to-the-cbis-user",level:3},{value:"Install the reporting server",id:"install-the-reporting-server",level:2},{value:"Install the packages",id:"install-the-packages",level:3},{value:"Procedure",id:"procedure",level:4},{value:"Configure the reporting server",id:"configure-the-reporting-server",level:3},{value:"MariaDB Optimizations",id:"mariadb-optimizations",level:4},{value:"Secure the database",id:"secure-the-database",level:3},{value:"Start configuring",id:"start-configuring",level:4},{value:"Problem with the SSH exchange key",id:"problem-with-the-ssh-exchange-key",level:4},{value:"ETL: Configuration",id:"etl-configuration",level:3},{value:"ETL: Data retention",id:"etl-data-retention",level:3},{value:"ETL: Execution",id:"etl-execution",level:3},{value:"Reconstruction of statistics from historical data",id:"reconstruction-of-statistics-from-historical-data",level:4},{value:"Enable daily script execution",id:"enable-daily-script-execution",level:4}],c={toc:u};function k(e){var{components:t}=e,s=i(e,["components"]);return(0,n.kt)("wrapper",o({},c,s,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"This chapter presents the software architecture of the ",(0,n.kt)("strong",{parentName:"p"},"Centreon MBI")," extension\nand provides an overview of the integration of the extension with Centreon monitoring software."),(0,n.kt)("p",null,"This document is intended for administrators who will install or configure Centreon MBI."),(0,n.kt)("p",null,"Four main steps are required to install Centreon MBI:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Check the system requirements."),(0,n.kt)("li",{parentName:"ul"},"Install the Centreon MBI interface in the Centreon application (Centreon MBI Server)."),(0,n.kt)("li",{parentName:"ul"},"Install the reporting server (Centreon MBI Reporting Server)."),(0,n.kt)("li",{parentName:"ul"},"Configure the extraction, transformation and loading (ETL) in the Centreon MBI interface.")),(0,n.kt)("h2",o({},{id:"architecture"}),"Architecture"),(0,n.kt)("h3",o({},{id:"a-dedicated-reporting-server"}),"A dedicated reporting server"),(0,n.kt)("p",null,"The architecture and these requirements apply to:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"test"),(0,n.kt)("li",{parentName:"ul"},"pre-production"),(0,n.kt)("li",{parentName:"ul"},"production environments.")),(0,n.kt)("p",null,"The diagram below highlights the main components of Centreon MBI:"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"image",src:a(43410).Z,width:"580",height:"363"})),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"The monitoring database is not necessarily on the same server as the Centreon server"),"."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"ETL"),": Process that extracts, transforms and loads data into the reporting database."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"CBIS"),": The scheduler that manages the execution and publication of reports."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Reporting Database"),": The MariaDB database that contains the reporting data and some raw data extracted from the monitoring database.")),(0,n.kt)("h3",o({},{id:"network-flow-tables"}),"Network Flow Tables"),(0,n.kt)("p",null,"The table below shows the different types of flows, by default,\nbetween the dedicated BI server, the Centreon server and the databases:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"th"},"Application")),(0,n.kt)("th",o({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"th"},"Source")),(0,n.kt)("th",o({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"th"},"Destination")),(0,n.kt)("th",o({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"th"},"Port")),(0,n.kt)("th",o({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"th"},"Protocol")))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"ETL/CBIS"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Reporting server"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Centreon database server"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"3306"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"TCP")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"SSH"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Reporting server"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Centreon Server"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"22"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"TCP")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"CBIS"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Reporting server"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Centreon Server"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"80"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"HTTP*")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"CBIS"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Centreon"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Reporting server"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"1234"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"TCP")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Widgets"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Centreon central server"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Reporting server"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"3306"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"TCP")))),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"Only required for Host-Graph-v2 and Hostgroup-Graph-v2 reports that use the Centreon API to generate graphs.")),(0,n.kt)("h3",o({},{id:"information-about-the-packages"}),"Information about the packages"),(0,n.kt)("p",null,"The Centreon MBI installation is based on two RPM packages:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Centreon-bi-server:")," Installs the MBI interface integrated with the Centreon interface. The package is installed on the Centreon central server."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Centreon-bi-reporting-server"),": Contains all the components needed to run the reporting server\n(report scheduler, ETL, standard reports). It must be installed on a server dedicated to reporting processes.")),(0,n.kt)("p",null,"The installation of the database must be done at the same time. We strongly recommend installing the MariaDB database on the\nreporting server, for performance and isolation reasons."),(0,n.kt)("h2",o({},{id:"prerequisites"}),"Prerequisites"),(0,n.kt)("h3",o({},{id:"central-centreon-server"}),"Central Centreon server"),(0,n.kt)("h4",o({},{id:"software-requirements"}),"Software requirements"),(0,n.kt)("p",null,"See the ",(0,n.kt)("a",o({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/installation/prerequisites#software"}),"software requirements"),"."),(0,n.kt)("p",null,"You should install the MariaDB database at the same time. We highly recommend\ninstalling the database on the same server, due to performance and isolation\nconsiderations."),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Centreon Web 23.04"),(0,n.kt)("li",{parentName:"ul"},"Check that ",(0,n.kt)("inlineCode",{parentName:"li"},"date.timezone")," is correctly configured in the ",(0,n.kt)("inlineCode",{parentName:"li"},"/etc/php.d/50-centreon.ini"),"\nfile (same as the one returned by the ",(0,n.kt)("inlineCode",{parentName:"li"},"timedatectl status")," command)."),(0,n.kt)("li",{parentName:"ul"},"Avoid using the following variables in the configuration file ",(0,n.kt)("inlineCode",{parentName:"li"},"/etc/my.cnf"),". They interrupt the\nexecution of long queries and can stop ETL or report generation jobs:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"wait_timeout"),(0,n.kt)("li",{parentName:"ul"},"interactive_timeout")))),(0,n.kt)("h4",o({},{id:"users-and-groups"}),"Users and groups"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:null}),"User"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Group"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"centreonBI (new)"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"apache,centreon,centreonBI")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"apache (existing)"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"centreonBI"))))),(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Centreon Web 23.04"),(0,n.kt)("li",{parentName:"ul"},"Check that ",(0,n.kt)("inlineCode",{parentName:"li"},"date.timezone")," is correctly configured in the ",(0,n.kt)("inlineCode",{parentName:"li"},"/etc/php.d/50-centreon.ini"),"\nfile (same as the one returned by the ",(0,n.kt)("inlineCode",{parentName:"li"},"timedatectl status")," command)."),(0,n.kt)("li",{parentName:"ul"},"Avoid using the following variables in the configuration file ",(0,n.kt)("inlineCode",{parentName:"li"},"/etc/my.cnf"),". They interrupt the\nexecution of long queries and can stop ETL or report generation jobs:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"wait_timeout"),(0,n.kt)("li",{parentName:"ul"},"interactive_timeout")))),(0,n.kt)("h4",o({},{id:"users-and-groups-1"}),"Users and groups"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:null}),"User"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Group"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"centreonBI (new)"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"apache,centreon,centreonBI")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"apache (existing)"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"centreonBI"))))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Centreon Web 23.04"),(0,n.kt)("li",{parentName:"ul"},"Check that ",(0,n.kt)("inlineCode",{parentName:"li"},"date.timezone")," is correctly configured in the ",(0,n.kt)("inlineCode",{parentName:"li"},"/etc/php/8.1/mods-available/centreon.ini")," file\n(same as the one returned by the ",(0,n.kt)("inlineCode",{parentName:"li"},"timedatectl status")," command)."),(0,n.kt)("li",{parentName:"ul"},"Avoid using the following variables in the configuration file ",(0,n.kt)("inlineCode",{parentName:"li"},"/etc/mysql/mariadb.cnf"),". They interrupt the\nexecution of long queries and can stop ETL or report generation jobs:",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"wait_timeout"),(0,n.kt)("li",{parentName:"ul"},"interactive_timeout")))),(0,n.kt)("h4",o({},{id:"users-and-groups-2"}),"Users and groups"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:null}),"User"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Group"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"centreonBI (new)"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"www-data,centreon,centreonBI")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"apache (existing)"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"centreonBI")))))),(0,n.kt)("h4",o({},{id:"description-of-users-umask-and-home-directory"}),"Description of users, umask and home directory"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:null}),"User"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"umask"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"home"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"centreonBI"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"0002"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/home/centreonBI")))),(0,n.kt)("h3",o({},{id:"dedicated-reporting-server"}),"Dedicated reporting server"),(0,n.kt)("h4",o({},{id:"hardware-layer"}),"Hardware layer"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Up to 500 hosts",label:"Up to 500 hosts",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Element"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Value"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"CPU"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"4 vCPU")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"RAM"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"16 GB")))),(0,n.kt)("p",null,"This is how your MBI server should be partitioned:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Volume group (LVM)"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"File system"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Description"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Size"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null})),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/boot"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"boot images"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"1 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_root"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"system root"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"20 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_root"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"swap"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"swap"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"4 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_root"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/var/log"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"contains all log files"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"10 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_data"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/var/lib/mysql"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"database"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"233 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_data"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/var/backup"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"backup directory"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"10 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_data"),(0,n.kt)("td",o({parentName:"tr"},{align:null})),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Free space (unallocated)"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"5 GB"))))),(0,n.kt)(l.Z,{value:"Up to 1,000 hosts",label:"Up to 1,000 hosts",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Element"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Value"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"CPU"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"4 vCPU")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"RAM"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"16 GB")))),(0,n.kt)("p",null,"This is how your MBI server should be partitioned:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Volume group (LVM)"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"File system"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Description"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Size"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null})),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/boot"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"boot images"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"1 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_root"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"system root"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"20 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_root"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"swap"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"swap"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"4 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_root"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/var/log"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"contains all log files"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"10 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_data"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/var/lib/mysql"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"database"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"465 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_data"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/var/backup"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"backup directory"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"10 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_data"),(0,n.kt)("td",o({parentName:"tr"},{align:null})),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Free space (unallocated)"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"5 GB"))))),(0,n.kt)(l.Z,{value:"Up to 2,500 hosts",label:"Up to 2,500 hosts",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Element"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Value"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"CPU"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"4 vCPU")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"RAM"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"24 GB")))),(0,n.kt)("p",null,"This is how your MBI server should be partitioned:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Volume group (LVM)"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"File system"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Description"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Size"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null})),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/boot"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"boot images"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"1 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_root"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"system root"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"20 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_root"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"swap"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"swap"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"4 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_root"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/var/log"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"contains all log files"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"10 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_data"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/var/lib/mysql"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"database"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"1163 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_data"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/var/backup"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"backup directory"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"10 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_data"),(0,n.kt)("td",o({parentName:"tr"},{align:null})),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Free space (unallocated)"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"5 GB"))))),(0,n.kt)(l.Z,{value:"Up to 5,000 hosts",label:"Up to 5,000 hosts",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Element"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Value"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"CPU"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"8 vCPU")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"RAM"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"24 GB")))),(0,n.kt)("p",null,"This is how your MBI server should be partitioned:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Volume group (LVM)"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"File system"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Description"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Size"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null})),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/boot"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"boot images"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"1 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_root"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"system root"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"20 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_root"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"swap"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"swap"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"4 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_root"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/var/log"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"contains all log files"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"10 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_data"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/var/lib/mysql"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"database"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"2326 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_data"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/var/backup"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"backup directory"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"10 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_data"),(0,n.kt)("td",o({parentName:"tr"},{align:null})),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Free space (unallocated)"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"5 GB"))))),(0,n.kt)(l.Z,{value:"Up to 10,000 hosts",label:"Up to 10,000 hosts",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Element"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Value"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"CPU"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"12 vCPU")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"RAM"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"32 GB")))),(0,n.kt)("p",null,"This is how your MBI server should be partitioned:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Volume group (LVM)"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"File system"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Description"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Size"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null})),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/boot"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"boot images"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"1 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_root"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"system root"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"20 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_root"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"swap"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"swap"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"4 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_root"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/var/log"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"contains all log files"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"10 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_data"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/var/lib/mysql"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"database"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"4651 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_data"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/var/backup"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"backup directory"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"10 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"vg_data"),(0,n.kt)("td",o({parentName:"tr"},{align:null})),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Free space (unallocated)"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"5 GB"))))),(0,n.kt)(l.Z,{value:"Over 10,000 hosts",label:"Over 10,000 hosts",mdxType:"TabItem"},(0,n.kt)("p",null,"For very large amounts of data, contact your sales representative."))),(0,n.kt)("p",null,"To check the free space, use the following command by replacing ",(0,n.kt)("strong",{parentName:"p"},"vg_data")," with the name of the group volume:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"vgdisplay vg_data | grep -i free*\n")),(0,n.kt)("h4",o({},{id:"firmware-and-software-layer"}),"Firmware and software layer"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"OS: RHEL / Oracle Linux / Alma 8 or 9, Debian 11"),(0,n.kt)("li",{parentName:"ul"},"SGBD: MariaDB 10.5"),(0,n.kt)("li",{parentName:"ul"},"Firewalld: Disabled (",(0,n.kt)("a",o({parentName:"li"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/installation/installation-of-a-central-server/using-packages#configure-or-disable-the-firewall"}),"look here"),")"),(0,n.kt)("li",{parentName:"ul"},"SELinux: Disabled (",(0,n.kt)("a",o({parentName:"li"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/installation/installation-of-a-central-server/using-packages#disable-selinux"}),"look here"),")")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Make sure that the reporting server and the central server have the same time zone; otherwise report publications will fail (link to download missing).\nThe same time zone must be displayed with the ",(0,n.kt)("inlineCode",{parentName:"p"},"timedatectl")," command.\nYou can change the time zone with this command:"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"timedatectl set-timezone Europe/Paris\n"))),(0,n.kt)("p",null,"Be sure to optimize MariaDB on your reporting server.\nYou will need at least 12 GB of RAM in order to use the ",(0,n.kt)("a",{target:"_blank",href:a(1420).Z},"next file"),"."),(0,n.kt)("p",null,"Make sure you have a ",(0,n.kt)("strong",{parentName:"p"},"tmp")," folder in ",(0,n.kt)("strong",{parentName:"p"},"/var/lib/mysql"),"."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Do not set these MariaDB optimizations on your monitoring server.")),(0,n.kt)("p",null,"Users and groups:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:null}),"User"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Group"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"centreonBI"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"centreonBI")))),(0,n.kt)("p",null,"Description of users, umask and user directory:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:null}),"User"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"umask"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"home"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"centreonBI"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"0002"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"/home/centreonBI")))),(0,n.kt)("h2",o({},{id:"install-the-extension-on-centreon"}),"Install the extension on Centreon"),(0,n.kt)("p",null,"The actions listed in this chapter must be performed on the ",(0,n.kt)("strong",{parentName:"p"},"Centreon Central Server"),"."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Install the Business repository. You can find it on the ",(0,n.kt)("a",o({parentName:"p"},{href:"https://support.centreon.com/hc/en-us/categories/10341239833105-Repositories"}),"support portal"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Then run the following commands:"))),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf install centreon-bi-server\n"))),(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf install centreon-bi-server\n"))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"apt update && apt install centreon-bi-server\n")))),(0,n.kt)("h3",o({},{id:"enable-the-extension"}),"Enable the extension"),(0,n.kt)("p",null,"The ",(0,n.kt)("strong",{parentName:"p"},"Administration > Extension > Manager")," menu allows you to install the extensions detected by Centreon. Click the ",(0,n.kt)("strong",{parentName:"p"},"Centreon MBI")," tile to install."),(0,n.kt)("p",null,"Then, download the license sent by the Centreon team to start configuring the general options."),(0,n.kt)("h3",o({},{id:"configure-the-extension"}),"Configure the extension"),(0,n.kt)("p",null,"Enter the following values in the Centreon MBI general options\nmenu, ",(0,n.kt)("em",{parentName:"p"},"Reports > Monitoring Business Intelligence > General Options"),":"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Tabs"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Option"),(0,n.kt)("th",o({parentName:"tr"},{align:null}),"Value"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Scheduler options"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"CBIS Host"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"IP address of the reporting server")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"ETL options"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Reporting engine uses a dedicated MySQL server"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Yes")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Reporting widgets"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Reporting MariaDB database"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"IP address of the reporting base (default = IP address of the reporting server)")))),(0,n.kt)("p",null,"*",(0,n.kt)("em",{parentName:"p"},"The connection test will not work at this point in the installation"),"."),(0,n.kt)("h3",o({},{id:"access-to-the-central-database"}),"Access to the Central database"),(0,n.kt)("p",null,"Download the license sent by the Centreon team to start configuring the general options."),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Monitoring database on the central server",label:"Monitoring database on the central server",mdxType:"TabItem"},(0,n.kt)("p",null,"The MariaDB monitoring database is hosted on the central monitoring server."),(0,n.kt)("p",null,"Run the command below to allow the reporting server to connect to the databases on the monitoring server."),(0,n.kt)("p",null,"Use the following option:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"/usr/share/centreon/www/modules/centreon-bi-server/tools/centreonMysqlRights.pl --root-password=@ROOTPWD@\n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"@ROOTPWD@"),': Root password of the MariaDB database of supervision.\nIf there is no password for the "root" user, do not specify the ',(0,n.kt)("strong",{parentName:"p"},"root-password")," option.")),(0,n.kt)(l.Z,{value:"Monitoring database on a remote server",label:"Monitoring database on a remote server",mdxType:"TabItem"},(0,n.kt)("p",null,"The MariaDB monitoring database is hosted on a dedicated server."),(0,n.kt)("p",null,"Connect via SSH to the database server, and run the following commands:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-SQL"}),"CREATE USER 'centreonbi'@'$BI_ENGINE_IP$' IDENTIFIED BY 'centreonbi';\nGRANT ALL PRIVILEGES ON centreon.* TO 'centreonbi'@'$BI_ENGINE_IP$';\nGRANT ALL PRIVILEGES ON centreon_storage.* TO 'centreonbi'@'$BI_ENGINE_IP$';\n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"$BI_ENGINE_IP$"),": IP address of the reporting server."))),(0,n.kt)("p",null,"If you use MariaDB replication for your ",(0,n.kt)("strong",{parentName:"p"},"monitoring databases"),", some views\nare created during the installation of Centreon MBI.\nYou must exclude them from replication by adding the following line to the ",(0,n.kt)("strong",{parentName:"p"},"my.cnf"),"\nfile of the slave server or mariadb.cnf on Debian 11."),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"replicate-wild-ignore-table=centreon.mod_bi_%v01,centreon.mod_bi_%V01\n")),(0,n.kt)("p",null,"Then, create the views manually on the slave server by running the following\ncommand:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-bash"}),"wget https://docs.centreon.com/fr/assets/files/view_creation-948c02cd93f8867179ec47fd611426bd.sql -O /tmp/view_creation.sql\n")),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-bash"}),"mysql centreon < /tmp/view_creation.sql\n")),(0,n.kt)("h4",o({},{id:"debian-11-specific-configuration"}),"Debian 11 specific configuration"),(0,n.kt)("p",null,"MariaDB must listen on all interfaces instead of listening on localhost/127.0.0.1 (default value). Edit the following file:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"/etc/mysql/mariadb.conf.d/50-server.cnf\n")),(0,n.kt)("p",null,"Set ",(0,n.kt)("strong",{parentName:"p"},"bind-address")," to ",(0,n.kt)("strong",{parentName:"p"},"0.0.0.0")," and restart ",(0,n.kt)("strong",{parentName:"p"},"mariadb"),"."),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"systemctl restart mariadb\n")),(0,n.kt)("h3",o({},{id:"give-rights-to-the-cbis-user"}),"Give rights to the cbis user"),(0,n.kt)("p",null,"When you install Centreon MBI, a ",(0,n.kt)("a",o({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/monitoring/basic-objects/contacts"}),"user")," named ",(0,n.kt)("strong",{parentName:"p"},"cbis")," is automatically created.\nIt allows the report generation engine to extract data from Centreon (using the APIs) in order to insert them in the report.\nThis user must ",(0,n.kt)("a",o({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/administration/access-control-lists"}),"have access to all resources monitored by Centreon")," in order to extract the performance graphs for the following reports:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Host-Graph-v2"),(0,n.kt)("li",{parentName:"ul"},"Hostgroup-Graph-v2.")),(0,n.kt)("p",null,"To test the connection between the MBI reporting server and the Centreon API, use the following command to download a graph. Replace the graph parameters and timestamps, and replace XXXXXXXXX with the user's autologin token ",(0,n.kt)("strong",{parentName:"p"},"cbis"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-bash"}),"curl -XGET 'https://IP_CENTRAL/centreon/include/views/graphs/generateGraphs/generateImage.php?akey=XXXXXXXXX&username=CBIS&hostname=<host_name>&service=<service_description>&start=<start_date>&end=<end_date>' --output /tmp/image.png\n\n")),(0,n.kt)("p",null,"Example:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-bash"}),"curl -XGET 'https://10.1.1.1/centreon/include/views/graphs/generateGraphs/generateImage.php?akey=otmw3n1hu03bvt9e0caphuf50ph8sdthcsk8ofdk&username=CBIS&hostname=my-poller&service=Cpu&start=1623016800&end=1623621600' --output /tmp/image.png\n")),(0,n.kt)("p",null,"The result should look like the code below, and the desired graph image must have been uploaded to the ",(0,n.kt)("inlineCode",{parentName:"p"},"/tmp")," directory:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-text"}),"  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100 18311  100 18311    0     0  30569      0 --:--:-- --:--:-- --:--:-- 30569\n")),(0,n.kt)("h2",o({},{id:"install-the-reporting-server"}),"Install the reporting server"),(0,n.kt)("h3",o({},{id:"install-the-packages"}),"Install the packages"),(0,n.kt)("p",null,"You must have the following information before proceeding with the installation process:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"IP/DNS of the monitoring database")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"IP/DNS of the Centreon web interface")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"IP/DNS of the reporting database (localhost strongly recommended)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Access (user/password) to the reporting database")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Define and retrieve the ssh password of the centreonBI user on the Central server (for the availability of reports generated on the interface)"))),(0,n.kt)("h4",o({},{id:"procedure"}),"Procedure"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Install the Centreon repository:")),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf config-manager --add-repo https://packages.centreon.com/rpm-standard/23.04/el8/centreon-23.04.repo\ndnf clean all --enablerepo=*\ndnf update\n"))),(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf config-manager --add-repo https://packages.centreon.com/rpm-standard/23.04/el9/centreon-23.04.repo\ndnf clean all --enablerepo=*\ndnf update\n"))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("p",null,"To install the Centreon repository, execute the following command:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),'echo "deb https://packages.centreon.com/apt-standard-23.04-stable/ $(lsb_release -sc) main" | tee /etc/apt/sources.list.d/centreon.list\necho "deb https://packages.centreon.com/apt-plugins-stable/ $(lsb_release -sc) main" | tee /etc/apt/sources.list.d/centreon-plugins.list\n')),(0,n.kt)("p",null,"Then import the repository key:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"wget -O- https://apt-key.centreon.com | gpg --dearmor | tee /etc/apt/trusted.gpg.d/centreon.gpg > /dev/null 2>&1\napt update\n")))),(0,n.kt)("ol",o({},{start:2}),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Install the Business repository. You can find it on the ",(0,n.kt)("a",o({parentName:"p"},{href:"https://support.centreon.com/hc/en-us/categories/10341239833105-Repositories"}),"support portal"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Ensure a version of Java 17 (or 18) is installed before you start the procedure."),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"If you need to check the Java version, enter the following command:")),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"java -version\n")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"If you need to upgrade the Java installation to Java 17 (or 18), go to the ",(0,n.kt)("a",o({parentName:"p"},{href:"https://www.oracle.com/java/technologies/downloads/#java17"}),"Oracle official download")," page.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"If several Java versions are installed, you need to activate the right version. Display the installed versions using the following command and select the Java 17 (or 18) version:"))),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"sudo update-alternatives --config java\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Install the MariaDB repository:"))),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),'curl -LsS https://r.mariadb.com/downloads/mariadb_repo_setup | sudo bash -s -- --os-type=rhel --os-version=8 --mariadb-server-version="mariadb-10.5"\n'))),(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),'curl -LsS https://r.mariadb.com/downloads/mariadb_repo_setup | sudo bash -s -- --os-type=rhel --os-version=9 --mariadb-server-version="mariadb-10.5"\n'))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),'curl -LsS https://r.mariadb.com/downloads/mariadb_repo_setup | sudo bash -s -- --os-type=debian --os-version=11 --mariadb-server-version="mariadb-10.5"\n')))),(0,n.kt)("ol",o({},{start:5}),(0,n.kt)("li",{parentName:"ol"},"Then run the following command:")),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"RHEL 8",label:"RHEL 8",mdxType:"TabItem"},(0,n.kt)("p",null,"Install the ",(0,n.kt)("strong",{parentName:"p"},"epel")," repository:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm\n")),(0,n.kt)("p",null,"Enable the ",(0,n.kt)("strong",{parentName:"p"},"codeready-builder")," repository:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"subscription-manager repos --enable codeready-builder-for-rhel-8-x86_64-rpms\n")),(0,n.kt)("p",null,"Then launch the installation:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf install centreon-bi-reporting-server MariaDB-server MariaDB-client\n")),(0,n.kt)("p",null,"For an installation based on a blank distribution, install the GPG key:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"cd /etc/pki/rpm-gpg/\nwget https://yum-gpg.centreon.com/RPM-GPG-KEY-CES\n\n"))),(0,n.kt)(l.Z,{value:"Oracle Linux 8",label:"Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("p",null,"Install the ",(0,n.kt)("strong",{parentName:"p"},"epel")," repository:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm\n")),(0,n.kt)("p",null,"Enable codeready-builder repositories:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf config-manager --set-enabled ol8_codeready_builder\n")),(0,n.kt)("p",null,"Then launch the installation:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf install centreon-bi-reporting-server MariaDB-server MariaDB-client\n")),(0,n.kt)("p",null,"For an installation based on a blank distribution, install the GPG key:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"cd /etc/pki/rpm-gpg/\nwget https://yum-gpg.centreon.com/RPM-GPG-KEY-CES\n\n"))),(0,n.kt)(l.Z,{value:"Alma 8",label:"Alma 8",mdxType:"TabItem"},(0,n.kt)("p",null,"Install the ",(0,n.kt)("strong",{parentName:"p"},"epel")," repository:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm\n")),(0,n.kt)("p",null,"Enable powertools repositories:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf config-manager --set-enabled 'powertools'\n")),(0,n.kt)("p",null,"Then launch the installation:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf install centreon-bi-reporting-server MariaDB-server MariaDB-client\n")),(0,n.kt)("p",null,"For an installation based on a blank distribution, install the GPG key:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"cd /etc/pki/rpm-gpg/\nwget https://yum-gpg.centreon.com/RPM-GPG-KEY-CES\n\n"))),(0,n.kt)(l.Z,{value:"RHEL 9",label:"RHEL 9",mdxType:"TabItem"},(0,n.kt)("p",null,"Install the ",(0,n.kt)("strong",{parentName:"p"},"epel")," repository:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm\n")),(0,n.kt)("p",null,"Enable the ",(0,n.kt)("strong",{parentName:"p"},"codeready-builder")," repository:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"subscription-manager repos --enable codeready-builder-for-rhel-9-x86_64-rpms\n")),(0,n.kt)("p",null,"Then launch the installation:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf install centreon-bi-reporting-server MariaDB-server MariaDB-client\n")),(0,n.kt)("p",null,"For an installation based on a blank distribution, install the GPG key:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"cd /etc/pki/rpm-gpg/\nwget https://yum-gpg.centreon.com/RPM-GPG-KEY-CES\n\n"))),(0,n.kt)(l.Z,{value:"Oracle Linux 9",label:"Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("p",null,"Install the ",(0,n.kt)("strong",{parentName:"p"},"epel")," repository:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm\n")),(0,n.kt)("p",null,"Enable codeready-builder repositories:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf config-manager --set-enabled ol9_codeready_builder\n")),(0,n.kt)("p",null,"Then launch the installation:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf install centreon-bi-reporting-server MariaDB-server MariaDB-client\n")),(0,n.kt)("p",null,"For an installation based on a blank distribution, install the GPG key:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"cd /etc/pki/rpm-gpg/\nwget https://yum-gpg.centreon.com/RPM-GPG-KEY-CES\n\n"))),(0,n.kt)(l.Z,{value:"Alma 9",label:"Alma 9",mdxType:"TabItem"},(0,n.kt)("p",null,"Install the ",(0,n.kt)("strong",{parentName:"p"},"epel")," repository:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm\n")),(0,n.kt)("p",null,"Run the following command:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf config-manager --set-enabled 'crb' \n")),(0,n.kt)("p",null,"Then launch the installation:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"dnf install centreon-bi-reporting-server mariadb-server MariaDB-client\n")),(0,n.kt)("p",null,"For an installation based on a blank distribution, install the GPG key:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"cd /etc/pki/rpm-gpg/\nwget https://yum-gpg.centreon.com/RPM-GPG-KEY-CES\n\n"))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("p",null,"Install the Centreon repository:\n\ufffc\n\ufffc",(0,n.kt)("inlineCode",{parentName:"p"},'shell\n\ufffcecho "deb https://packages.centreon.com/apt-standard-23.04-stable/ $(lsb_release -sc) main" | tee /etc/apt/sources.list.d/centreon.list\n\ufffc')),(0,n.kt)("p",null,"Install the prerequisite packages:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"apt install lsb-release ca-certificates apt-transport-https software-properties-common wget gnupg2\n")),(0,n.kt)("p",null,"Add the following external repository (for Java 8):"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"wget -qO - https://adoptopenjdk.jfrog.io/adoptopenjdk/api/gpg/key/public | apt-key add -\nadd-apt-repository --yes https://adoptopenjdk.jfrog.io/adoptopenjdk/deb/\napt update\n")),(0,n.kt)("p",null,"For an installation based on a blank distribution, install the GPG key:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"wget -O- https://apt-key.centreon.com | gpg --dearmor | tee /etc/apt/trusted.gpg.d/centreon.gpg > /dev/null 2>&1\n")),(0,n.kt)("p",null,"Then launch the installation:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"apt update\napt install centreon-bi-reporting-server mariadb-server mariadb-client\n")))),(0,n.kt)("p",null,"Enable the ",(0,n.kt)("strong",{parentName:"p"},"cbis")," service:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"systemctl enable cbis\n")),(0,n.kt)("p",null,"Start and enable ",(0,n.kt)("strong",{parentName:"p"},"gorgoned"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"systemctl start gorgoned && systemctl enable gorgoned\n")),(0,n.kt)("h3",o({},{id:"configure-the-reporting-server"}),"Configure the reporting server"),(0,n.kt)("h4",o({},{id:"mariadb-optimizations"}),"MariaDB Optimizations"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("p",null,"Make sure that the optimized configuration ",(0,n.kt)("a",{target:"_blank",href:a(1420).Z},"file")," provided\nin the prerequisites is present in ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/my.cnf.d/"),", then restart the MariaDB service:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"systemctl restart mariadb\n")),(0,n.kt)("p",null,"It is necessary to change the ",(0,n.kt)("strong",{parentName:"p"},"LimitNOFILE")," limitation. Changing this\noption in ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/my.cnf")," will NOT work."),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),'mkdir -p  /etc/systemd/system/mariadb.service.d/\necho -ne "[Service]\\nLimitNOFILE=32000\\n" | tee /etc/systemd/system/mariadb.service.d/limits.conf\nsystemctl daemon-reload\nsystemctl restart mariadb\n')),(0,n.kt)("p",null,"If the MariaDB service fails to start, remove the ",(0,n.kt)("em",{parentName:"p"},"ib_logfile")," files\n(MariaDB must absolutely be stopped) and then restart MariaDB again:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"rm -f /var/lib/mysql/ib_logfile*\nsystemctl start mariadb\n")),(0,n.kt)("p",null,"If you are using a specific socket file for MariaDB, modify the file ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/my.cnf")," and\nin the ","[client]"," section, add :"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"socket=$PATH_TO_SOCKET$\n"))),(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("p",null,"Make sure that the optimized configuration ",(0,n.kt)("a",{target:"_blank",href:a(1420).Z},"file")," provided\nin the prerequisites is present in ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/my.cnf.d/"),", then restart the MariaDB service:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"systemctl restart mariadb\n")),(0,n.kt)("p",null,"It is necessary to change the ",(0,n.kt)("strong",{parentName:"p"},"LimitNOFILE")," limitation. Changing this\noption in ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/my.cnf")," will NOT work."),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),'mkdir -p  /etc/systemd/system/mariadb.service.d/\necho -ne "[Service]\\nLimitNOFILE=32000\\n" | tee /etc/systemd/system/mariadb.service.d/limits.conf\nsystemctl daemon-reload\nsystemctl restart mariadb\n')),(0,n.kt)("p",null,"If the MariaDB service fails to start, remove the ",(0,n.kt)("em",{parentName:"p"},"ib_logfile")," files\n(MariaDB must absolutely be stopped) and then restart MariaDB again:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"rm -f /var/lib/mysql/ib_logfile*\nsystemctl start mariadb\n")),(0,n.kt)("p",null,"If you are using a specific socket file for MariaDB, modify the file ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/my.cnf")," and\nin the ","[client]"," section, add :"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"socket=$PATH_TO_SOCKET$\n"))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("p",null,"Make sure that the optimized configuration ",(0,n.kt)("a",{target:"_blank",href:a(1420).Z},"file"),"\nprovided in the requirements is present in ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/mysql/mariadb.conf.d/"),"."),(0,n.kt)("p",null,"Rename the file to ",(0,n.kt)("inlineCode",{parentName:"p"},"80-centreon.cnf"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"mv centreon.cnf 80-centreon.cnf\n")),(0,n.kt)("p",null,"MariaDB should listen to all interfaces instead of localhost/127.0.0.1, which is the default.\nEdit the following file:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"/etc/mysql/mariadb.conf.d/50-server.cnf\n")),(0,n.kt)("p",null,"Set the ",(0,n.kt)("strong",{parentName:"p"},"bind-address")," parameter to ",(0,n.kt)("strong",{parentName:"p"},"0.0.0.0")," and restart MariaDB."),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"systemctl restart mariadb\n")),(0,n.kt)("p",null,"It is necessary to change the ",(0,n.kt)("strong",{parentName:"p"},"LimitNOFILE")," limitation. Changing this option in ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/mysql/mariadb.cnf")," will not work."),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),'mkdir -p  /etc/systemd/system/mariadb.service.d/\necho -ne "[Service]\\nLimitNOFILE=32000\\n" | tee /etc/systemd/system/mariadb.service.d/limits.conf\nsystemctl daemon-reload\nsystemctl restart mariadb\n')),(0,n.kt)("p",null,"If the MariaDB service fails at the time of starting, remove the files ",(0,n.kt)("em",{parentName:"p"},"ib_logfile"),"\n(MariaDB must absolutely be stopped) and then restart MariaDB again:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"rm -f /var/lib/mysql/ib_logfile*\nsystemctl start mariadb\n")),(0,n.kt)("p",null,"If you are using a specific socket file for MariaDB, edit the\nfile ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/mysql/mariadb.cnf")," and in the ","[client]"," section, add :"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"socket=$PATH_TO_SOCKET$\n")))),(0,n.kt)("h3",o({},{id:"secure-the-database"}),"Secure the database"),(0,n.kt)("p",null,"Since MariaDB 10.5, it is mandatory to secure the root access of the database before installing Centreon.\nIf you use a local database, execute the following command on the central server, otherwise on the database server:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"mysql_secure_installation\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Answer ",(0,n.kt)("strong",{parentName:"li"},"yes"),' to all questions except "Disallow root login remotely?"'),(0,n.kt)("li",{parentName:"ul"},"It is mandatory to define a password for the ",(0,n.kt)("strong",{parentName:"li"},"root")," user of the database. You will need this password during the ",(0,n.kt)("a",o({parentName:"li"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/installation/web-and-post-installation"}),"web-installation"),".")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"For more information, please see the ",(0,n.kt)("a",o({parentName:"p"},{href:"https://mariadb.com/kb/en/mysql_secure_installation/"}),"official MariaDB documentation"),".")),(0,n.kt)("h4",o({},{id:"start-configuring"}),"Start configuring"),(0,n.kt)("p",null,"Make sure the MariaDB reporting system is started and then run the commands below and answer the questions:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"/usr/share/centreon-bi/config/install.sh\n")),(0,n.kt)("p",null,"The script manages the exchange of SSH keys between the monitoring server and the reporting server, and configures the default SFTP publishing rule\nin order to publish the reports on the Centreon web interface. Finally, it enables the backup and starts the CBIS service."),(0,n.kt)("p",null,"Once the installation is complete, continue to the next chapter to configure the ETL."),(0,n.kt)("h4",o({},{id:"problem-with-the-ssh-exchange-key"}),"Problem with the SSH exchange key"),(0,n.kt)("p",null,"In some cases, SSH key exchange fails.\nTo solve the problem, do the following manually:"),(0,n.kt)("p",null,"Switch to the ",(0,n.kt)("inlineCode",{parentName:"p"},"centreonBI")," user:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-bash"}),"su - centreonBI\n")),(0,n.kt)("p",null,"Generate the SSH key:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-bash"}),'ssh-keygen -t ed25519 -a 100 -f ~/.ssh/id_ed25519 -P "" -q\n')),(0,n.kt)("p",null,"And print the ",(0,n.kt)("inlineCode",{parentName:"p"},"centreonBI")," public key (in order to authorize it then on Centreon):"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-bash"}),"su - centreonBI\ncat /home/centreonBI/.ssh/id_ed25519.pub\n")),(0,n.kt)("p",null,"Now, ",(0,n.kt)("strong",{parentName:"p"},"on the monitoring server"),":"),(0,n.kt)("p",null,"Create a ",(0,n.kt)("inlineCode",{parentName:"p"},".ssh")," folder that ",(0,n.kt)("inlineCode",{parentName:"p"},"centreonBI")," will own, restrict permissions on this folder and paste into the ",(0,n.kt)("inlineCode",{parentName:"p"},"authorized_keys")," file the contents of its public key on the reporting server (shown earlier):"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-bash"}),'mkdir -p /home/centreonBI/.ssh/ && chown centreonBI: /home/centreonBI/.ssh/ && chmod 700 /home/centreonBI/.ssh/ && echo "@reporting pub key content@" > /home/centreonBI/.ssh/authorized_keys\n')),(0,n.kt)("p",null,"The key exchange must then be validated by a first connection that will accept the SSH server signature.\nAs the ",(0,n.kt)("inlineCode",{parentName:"p"},"centreonBI")," user ",(0,n.kt)("strong",{parentName:"p"},"from the reporting server"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-bash"}),"ssh centreonBI@@MONITORING_SERVER@\n")),(0,n.kt)("p",null,"Then exit the ",(0,n.kt)("inlineCode",{parentName:"p"},"centreonBI")," session with ",(0,n.kt)("inlineCode",{parentName:"p"},"exit")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"Ctrl-D")," on both servers."),(0,n.kt)("p",null,"To continue, run the installation script (",(0,n.kt)("inlineCode",{parentName:"p"},"/usr/share/centreon-bi/config/install.sh"),") as above and answer ",(0,n.kt)("strong",{parentName:"p"},"Yes")," when asked to proceed with the SSH key exchange.\nYou will get an error when creating the USER, because it already exists. This is not a blocking step."),(0,n.kt)("h3",o({},{id:"etl-configuration"}),"ETL: Configuration"),(0,n.kt)("p",null,"Centreon MBI integrates an ETL that allows you to:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Synchronize the raw data from the supervision to the reporting server"),(0,n.kt)("li",{parentName:"ul"},"Feed statistical data to the reporting server databases"),(0,n.kt)("li",{parentName:"ul"},"Control the retention of data on the reporting server")),(0,n.kt)("p",null,"Before proceeding to the next steps, read the\nchapter on ",(0,n.kt)("a",o({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/reporting/concepts#best-practices-for-monitoring"}),"best practices")," to make sure that the configuration of\nthe objects in Centreon (groups, categories, etc.) is in accordance with the expectations of Centreon MBI."),(0,n.kt)("p",null,"In the ",(0,n.kt)("inlineCode",{parentName:"p"},"Reporting > Monitoring Business Intelligence > General Options > ETL Options")," tab, specify the following options:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",o({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"th"},"Options")),(0,n.kt)("th",o({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"th"},"Values")))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},"General options")),(0,n.kt)("td",o({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Reporting engine uses a dedicated dedicated MariaDB server"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Yes. You ",(0,n.kt)("strong",{parentName:"td"},"must")," use a reporting server")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Temporary file storage directory on reporting server"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Folder where dumps will be stored on the reporting server")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Type of statistics to build"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Select \u201cAvailability only\u201d if you only use availability reports. Select \u201cPerformance and capacity only\u201d if you only want to use capacity and performance reports. Select \u201cAll\u201d to calculate the statistics for both types of report.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Use large memory tweaks (store MariaDB temporary tables in memory)"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Activated only if your MariaDB configuration and allocated physical memory on the server permit.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},"Reporting perimeter selection")),(0,n.kt)("td",o({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Hostgroups"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Select only host groups for which you want to aggregate data.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Hostcategories"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Select only host categories for which you want to aggregate data.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Service categories"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Select only service categories for which you want to aggregate data.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},"Availability statistic calculation")),(0,n.kt)("td",o({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Live services for availability statistics calculation"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Select required time periods.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},"Performance and capacity statistic calculation")),(0,n.kt)("td",o({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Granularity required for performance data statistics"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Select the level of granularity required to run the desired performance reports (1).")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Live services for performance data statistics calculation"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Select the required time periods.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},"Capacity statistic aggregated by month")),(0,n.kt)("td",o({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Live services for capacity statistics calculation"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Select the \u201c24x7\u201d time period.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Service categories related to capacity data monitoring"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Select the service categories that have been associated with capacity-type services.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Exclude metrics from service categories that do not return capacity USAGE information"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Concerns the metrics linked to services which return capacity data. Select the metrics that do not return capacity usage information. but a maximum or total value. (e.g., the metric \u201csize\u201d).")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),(0,n.kt)("strong",{parentName:"td"},"Centile parameters")),(0,n.kt)("td",o({parentName:"tr"},{align:null}))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Calculating centile aggregation by"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Select the desired aggregation level. The standard percentile report provided with BI 2.1 uses Month data.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Select service categories to aggregate centile on"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Filter on relevant service categories for centile statistics (e.g., Traffic).")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"First day of the week"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Select the first day of the week for Week aggregation.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Centile / Timeperiod combination"),(0,n.kt)("td",o({parentName:"tr"},{align:null}),"Create a new centile/timeperiod combination on which to perform the calculation.")))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"(1)")," Reports requiring data granularity by the hour are listed below.\nIf you do not wish to use these reports, disable the calculation of hourly statistics:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Hostgroup-Host-details-1")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Host-detail-v2")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Hostgroup-traffic-Average-Usage-By-Interface")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Hostgroup-traffic-by-Interface-And-Bandwith-Ranges"))),(0,n.kt)("h3",o({},{id:"etl-data-retention"}),"ETL: Data retention"),(0,n.kt)("p",null,'The reporting server contains tables of statistics specific to Centreon MBI in the "centreon_storage" database.\nThe storage space used by these tables is increasing every day.\nIt is possible to control the size of these tables by defining data retention rules.'),(0,n.kt)("p",null,"Under ",(0,n.kt)("strong",{parentName:"p"},"Reports > Monitoring Business Intelligence > General Options > Data Retention Options")," menu,\ndata retention can be managed by:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Type of data (availability, performance)."),(0,n.kt)("li",{parentName:"ul"},"Data granularity (raw data, hourly, daily or monthly values)")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Before enabling the data retention options, make sure that the reporting engine\nuses a dedicated MariaDB server, and the corresponding option is set to\n",(0,n.kt)("strong",{parentName:"p"},"Yes")," in the ",(0,n.kt)("strong",{parentName:"p"},"Reporting > Business Intelligence > General Options ETL Options")," menu.")),(0,n.kt)("p",null,"Enable data retention management by selecting ",(0,n.kt)("strong",{parentName:"p"},"Yes"),", then set the configuration options (example below)."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"image",src:a(44180).Z,width:"1392",height:"552"})),(0,n.kt)("p",null,"To enable automatic purging of old data, edit the cron file ",(0,n.kt)("strong",{parentName:"p"},"/etc/cron.d/centreon-bi-purge"),"\non the reporting server, then uncomment the following line:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"#0 20 * * * root @CENTREON_BI_HOME@/*etl*/dataRetentionManager.pl >> @CENTREON_BI_LOG@/dataRetentionManager.log 2>&1\n")),(0,n.kt)("p",null,"Avoid scheduled periods for statistical calculations with Centreon MBI ETL and report generation.\nYou can run this cron daily or weekly, depending on the batch execution time and the load generated on the server."),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8 / RHEL 7 / CentOS 7",label:"Alma / RHEL / Oracle Linux 8 / RHEL 7 / CentOS 7",mdxType:"TabItem"},(0,n.kt)("p",null,"Restart the cron service:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"systemctl restart crond\n"))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("p",null,"Restart the cron service:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"systemctl restart cron\n")))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"BEST PRACTICES"),": Select different retention periods depending on the granularity of the statistical data:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Aggregated values per hour are used to analyze a metric over a short period of time. They take up a lot of disk space. You may not\nneed to keep these statistics for more than two or three months.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Beyond five or six months, you may only need to view the trend for availability or performance statistics.\nYou could then retain daily aggregate data for up to six months, for example, and set up retention of monthly aggregate data for a period of several dozen months."))),(0,n.kt)("p",null,"Please proceed to the next section to continue the installation."),(0,n.kt)("h3",o({},{id:"etl-execution"}),"ETL: Execution"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Before continuing, make sure you have installed the MariaDB configuration file as described above in the prerequisites. Configure\nand enable data retention so that only the required data is imported and calculated.")),(0,n.kt)("h4",o({},{id:"reconstruction-of-statistics-from-historical-data"}),"Reconstruction of statistics from historical data"),(0,n.kt)("p",null,"Run the following command on the reporting server. This will:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Delete all existing data from the reporting server."),(0,n.kt)("li",{parentName:"ul"},"Import raw monitoring data from the monitoring server to the reporting server (depending on retention settings)."),(0,n.kt)("li",{parentName:"ul"},"Fill tables containing availability statistics for hosts and services."),(0,n.kt)("li",{parentName:"ul"},"Fill tables containing performance and capacity statistics for hosts and services.")),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"/usr/share/centreon-bi/bin/centreonBIETL -r\n")),(0,n.kt)("h4",o({},{id:"enable-daily-script-execution"}),"Enable daily script execution"),(0,n.kt)("p",null,"Once the data rebuilding process is complete, you can enable the calculation of statistics.\nOn the reporting server, edit the file ",(0,n.kt)("strong",{parentName:"p"},"/etc/cron.d/centreon-bi-engine")," and uncomment the following line:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"#30 4 * * * root /usr/share/centreon-bi/bin/centreonBIETL -d >> /var/log/centreon-bi/centreonBIETL.log 2>&1\n")),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8 / RHEL 7 / CentOS 7",label:"Alma / RHEL / Oracle Linux 8 / RHEL 7 / CentOS 7",mdxType:"TabItem"},(0,n.kt)("p",null,"Restart the cron service on the reporting server:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"systemctl restart crond\n"))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("p",null,"Restart the cron service on the reporting server:"),(0,n.kt)("pre",null,(0,n.kt)("code",o({parentName:"pre"},{className:"language-shell"}),"systemctl restart cron\n")))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Make sure that the ",(0,n.kt)("strong",{parentName:"p"},"centreonBIETL")," batch only starts after the ",(0,n.kt)("strong",{parentName:"p"},"eventReportBuilder"),"\nbatch has finished on the monitoring server (check the ",(0,n.kt)("strong",{parentName:"p"},"/etc/cron.d/centreon")," cron file on the monitoring server).")),(0,n.kt)("p",null,"The installation of Centreon MBI is now complete. See ",(0,n.kt)("a",o({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/getting-started/analyze-resources-availability"}),"the tutorial"),"."))}k.isMDXComponent=!0},43410:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/architecture-57c0d086ac05ff41f37ef131fb04d7de.png"},44180:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/bi_retention-543fb795088d6933e31f289b1555061f.png"}}]);