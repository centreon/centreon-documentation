"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[47886],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>m});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var i=a.createContext({}),s=function(e){var t=a.useContext(i),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},u=function(e){var t=s(e.components);return a.createElement(i.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,i=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),d=s(r),m=n,g=d["".concat(i,".").concat(m)]||d[m]||c[m]||o;return r?a.createElement(g,l(l({ref:t},u),{},{components:r})):a.createElement(g,l({ref:t},u))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,l=new Array(o);l[0]=d;var p={};for(var i in t)hasOwnProperty.call(t,i)&&(p[i]=t[i]);p.originalType=e,p.mdxType="string"==typeof e?e:n,l[1]=p;for(var s=2;s<o;s++)l[s]=r[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,r)}d.displayName="MDXCreateElement"},7626:(e,t,r)=>{r.d(t,{Z:()=>p});var a=r(67294),n=r(86010);const o="tabItem_Ymn6";function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},l.apply(this,arguments)}function p({children:e,hidden:t,className:r}){return a.createElement("div",l({role:"tabpanel",className:(0,n.Z)(o,r)},{hidden:t}),e)}},67709:(e,t,r)=>{r.d(t,{Z:()=>m});var a=r(67294),n=r(86010),o=r(90980),l=r(35715),p=r(8854),i=r(8241);const s="tabList__CuJ",u="tabItem_LNqP";function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},c.apply(this,arguments)}function d(e){var t;const{lazy:r,block:o,defaultValue:d,values:m,groupId:g,className:v}=e,h=a.Children.map(e.children,(e=>{if((0,a.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),f=null!=m?m:h.map((({props:{value:e,label:t,attributes:r}})=>({value:e,label:t,attributes:r}))),k=(0,l.l)(f,((e,t)=>e.value===t.value));if(k.length>0)throw new Error(`Docusaurus error: Duplicate values "${k.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);var b;const y=null===d?d:null!==(b=null!=d?d:null===(t=h.find((e=>e.props.default)))||void 0===t?void 0:t.props.value)&&void 0!==b?b:h[0].props.value;if(null!==y&&!f.some((e=>e.value===y)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${y}" but none of its children has the corresponding value. Available values are: ${f.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:N,setTabGroupChoices:O}=(0,p.U)(),[w,x]=(0,a.useState)(y),T=[],{blockElementScrollPositionUntilNextRender:j}=(0,i.o5)();if(null!=g){const e=N[g];null!=e&&e!==w&&f.some((t=>t.value===e))&&x(e)}const E=e=>{const t=e.currentTarget,r=T.indexOf(t),a=f[r].value;a!==w&&(j(t),x(a),null!=g&&O(g,String(a)))},U=e=>{let t=null;switch(e.key){case"ArrowRight":{const a=T.indexOf(e.currentTarget)+1;var r;t=null!==(r=T[a])&&void 0!==r?r:T[0];break}case"ArrowLeft":{const r=T.indexOf(e.currentTarget)-1;var a;t=null!==(a=T[r])&&void 0!==a?a:T[T.length-1];break}}null==t||t.focus()};return a.createElement("div",{className:(0,n.Z)("tabs-container",s)},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,n.Z)("tabs",{"tabs--block":o},v)},f.map((({value:e,label:t,attributes:r})=>a.createElement("li",c({role:"tab",tabIndex:w===e?0:-1,"aria-selected":w===e,key:e,ref:e=>T.push(e),onKeyDown:U,onFocus:E,onClick:E},r,{className:(0,n.Z)("tabs__item",u,null==r?void 0:r.className,{"tabs__item--active":w===e})}),null!=t?t:e)))),r?(0,a.cloneElement)(h.filter((e=>e.props.value===w))[0],{className:"margin-top--md"}):a.createElement("div",{className:"margin-top--md"},h.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==w})))))}function m(e){const t=(0,o.Z)();return a.createElement(d,c({key:String(t)},e))}},2318:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>g,frontMatter:()=>i,metadata:()=>u,toc:()=>d});r(67294);var a=r(3905),n=r(67709),o=r(7626);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},l.apply(this,arguments)}function p(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const i={id:"upgrade",title:"Upgrade the extension"},s=void 0,u={unversionedId:"reporting/upgrade",id:"version-23.10/reporting/upgrade",title:"Upgrade the extension",description:"When updating from version = 18.10, you need to",source:"@site/versioned_docs/version-23.10/reporting/upgrade.md",sourceDirName:"reporting",slug:"/reporting/upgrade",permalink:"/centreon-documentation/pr-preview/pr-2832/docs/reporting/upgrade",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/next/versioned_docs/version-23.10/reporting/upgrade.md",tags:[],version:"23.10",lastUpdatedAt:1700565273,formattedLastUpdatedAt:"Nov 21, 2023",frontMatter:{id:"upgrade",title:"Upgrade the extension"},sidebar:"version-23.10/docs",previous:{title:"Update the extension",permalink:"/centreon-documentation/pr-preview/pr-2832/docs/reporting/update"},next:{title:"Migrate the extension",permalink:"/centreon-documentation/pr-preview/pr-2832/docs/reporting/migrate"}},c={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Upgrade your central server",id:"upgrade-your-central-server",level:3},{value:"Update the RPM signing key",id:"update-the-rpm-signing-key",level:3},{value:"Step 1: Update the repository",id:"step-1-update-the-repository",level:2},{value:"Step 2: Upgrade the extension interface",id:"step-2-upgrade-the-extension-interface",level:2},{value:"Step 3: Upgrade the reporting server",id:"step-3-upgrade-the-reporting-server",level:2},{value:"Java version requirement",id:"java-version-requirement",level:3},{value:"Upgrade procedure",id:"upgrade-procedure",level:3},{value:"Step 4: Upgrade the MariaDB database",id:"step-4-upgrade-the-mariadb-database",level:2}],m={toc:d};function g(e){var{components:t}=e,r=p(e,["components"]);return(0,a.kt)("wrapper",l({},m,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"When updating from version < 18.10 to a version >= 18.10, you need to"),(0,a.kt)("ul",{parentName:"blockquote"},(0,a.kt)("li",{parentName:"ul"},"Retrieve a new license from Centreon support"),(0,a.kt)("li",{parentName:"ul"},"Make sure your Centreon MBI server is based on CentOS/RH 7. You may use the\nfollowing procedure to migrate your server: ",(0,a.kt)("a",l({parentName:"li"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/reporting/migrate"}),"Migrate your\nreporting server")))),(0,a.kt)("p",null,"The upgrade of Centreon MBI consists of four steps:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Updating the repository"),(0,a.kt)("li",{parentName:"ul"},"Updating the extension interface"),(0,a.kt)("li",{parentName:"ul"},"Updating the reporting server"),(0,a.kt)("li",{parentName:"ul"},"Updating the MariaDB database")),(0,a.kt)("h2",l({},{id:"prerequisites"}),"Prerequisites"),(0,a.kt)("h3",l({},{id:"upgrade-your-central-server"}),"Upgrade your central server"),(0,a.kt)("p",null,"See ",(0,a.kt)("a",l({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/upgrade/introduction"}),"Introduction to upgrade"),"."),(0,a.kt)("h3",l({},{id:"update-the-rpm-signing-key"}),"Update the RPM signing key"),(0,a.kt)("p",null,"On EL8, for security reasons, the keys used to sign Centreon RPMs are rotated regularly. The last change occurred on October 14, 2021. When upgrading from an older version, you need to go through the ",(0,a.kt)("a",l({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/security/key-rotation#existing-installation"}),"key rotation procedure")," to remove the old key and install the new one."),(0,a.kt)("h2",l({},{id:"step-1-update-the-repository"}),"Step 1: Update the repository"),(0,a.kt)("p",null,"When you upgrade from a previous major version to 23.04.x, you first need to update the repository on your Central & Reporting servers."),(0,a.kt)("p",null,'You will find the new "Business" repository on the "Repositories" page in your ',(0,a.kt)("a",l({parentName:"p"},{href:"https://support.centreon.com/hc/en-us/categories/10341239833105-Repositories"}),"Centreon Support account"),"."),(0,a.kt)("h2",l({},{id:"step-2-upgrade-the-extension-interface"}),"Step 2: Upgrade the extension interface"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Update the package, run the following commands:")),(0,a.kt)(n.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(o.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"dnf clean all\ndnf update centreon-bi-server\n"))),(0,a.kt)(o.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"dnf clean all\ndnf update centreon-bi-server\n"))),(0,a.kt)(o.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"apt clean all\napt update && apt upgrade centreon-bi-server\n")))),(0,a.kt)("ol",l({},{start:2}),(0,a.kt)("li",{parentName:"ol"},"Update through the interface:  Log on to the Centreon web interface, go to\n",(0,a.kt)("strong",{parentName:"li"},"Administration > Extension > Manager")," and click the\nUpdate button to update the extension and the widgets.")),(0,a.kt)("h2",l({},{id:"step-3-upgrade-the-reporting-server"}),"Step 3: Upgrade the reporting server"),(0,a.kt)("h3",l({},{id:"java-version-requirement"}),"Java version requirement"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Ensure a version of Java 17 (or 18) is installed before you start the procedure.")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"If you need to check the Java version, enter the following command:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"java -version\n"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"If you need to upgrade the Java installation to Java 17 (or 18), go to the ",(0,a.kt)("a",l({parentName:"p"},{href:"https://www.oracle.com/java/technologies/downloads/#java17"}),"Oracle official download")," page.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"If several Java versions are installed, you need to activate the right version. Display the installed versions using the following command and select the Java 17 (or 18) version:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"sudo update-alternatives --config java\n")),(0,a.kt)("p",{parentName:"li"},"Then restart the service:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"systemctl restart cbis\n")))),(0,a.kt)("h3",l({},{id:"upgrade-procedure"}),"Upgrade procedure"),(0,a.kt)("p",null,"Now you can start the upgrade process:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Connect to your reporting server and stop the scheduler service (CBIS):"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"systemctl stop cbis\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Then run the following commands:"))),(0,a.kt)(n.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(o.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"dnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm\ndnf clean all\ndnf update centreon-bi\\*\n"))),(0,a.kt)(o.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"dnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm\ndnf clean all\ndnf update centreon-bi\\*\n"))),(0,a.kt)(o.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"apt clean all\napt update && apt upgrade centreon-bi-reporting-server\n")))),(0,a.kt)("ol",l({},{start:3}),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Start the scheduler service:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"systemctl start cbis\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Start and enable ",(0,a.kt)("strong",{parentName:"p"},"gorgoned"),":"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"systemctl start gorgoned && systemctl enable gorgoned\n")))),(0,a.kt)("h2",l({},{id:"step-4-upgrade-the-mariadb-database"}),"Step 4: Upgrade the MariaDB database"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Stop the ",(0,a.kt)("strong",{parentName:"p"},"cbis")," service:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"systemctl stop cbis\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"See ",(0,a.kt)("a",l({parentName:"p"},{href:"/centreon-documentation/pr-preview/pr-2832/docs/upgrade/upgrade-mariadb"}),"Upgrading MariaDB"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Start the ",(0,a.kt)("strong",{parentName:"p"},"cbis")," service:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",l({parentName:"pre"},{className:"language-shell"}),"systemctl start cbis\n")))))}g.isMDXComponent=!0}}]);