"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[57818],{53399:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>m,default:()=>h,frontMatter:()=>s,metadata:()=>u,toc:()=>c});a(67294);var n=a(3905),r=a(51715),l=a(7626);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const s={id:"map-web-install",title:"Installing MAP"},m=void 0,u={unversionedId:"graph-views/map-web-install",id:"version-23.10/graph-views/map-web-install",title:"Installing MAP",description:"This topic describes how to install Centreon MAP. We recommend that you install MAP on a dedicated server. However, if you do not have large volumes of data, you can install it on the central server.",source:"@site/versioned_docs/version-23.10/graph-views/map-web-install.md",sourceDirName:"graph-views",slug:"/graph-views/map-web-install",permalink:"/centreon-documentation/pr-preview/staging/pr-2806/docs/graph-views/map-web-install",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/versioned_docs/version-23.10/graph-views/map-web-install.md",tags:[],version:"23.10",lastUpdatedAt:1699872045,formattedLastUpdatedAt:"Nov 13, 2023",frontMatter:{id:"map-web-install",title:"Installing MAP"},sidebar:"version-23.10/docs",previous:{title:"Introduction to Centreon MAP",permalink:"/centreon-documentation/pr-preview/staging/pr-2806/docs/graph-views/introduction-map"},next:{title:"Installing MAP on a remote server",permalink:"/centreon-documentation/pr-preview/staging/pr-2806/docs/graph-views/map-web-install-remote"}},d={},c=[{value:"License",id:"license",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Centreon MAP Engine server",id:"centreon-map-engine-server",level:3},{value:"License",id:"license-1",level:4},{value:"Software",id:"software",level:4},{value:"Hardware",id:"hardware",level:4},{value:"Information required during configuration",id:"information-required-during-configuration",level:4},{value:"Centreon MAP web client",id:"centreon-map-web-client",level:3},{value:"License",id:"license-2",level:4},{value:"Compatibility",id:"compatibility",level:4},{value:"MAP Engine server installation",id:"map-engine-server-installation",level:2},{value:"Step 1: Set authentication parameters",id:"step-1-set-authentication-parameters",level:3},{value:"Step 2: Create a MySQL user",id:"step-2-create-a-mysql-user",level:3},{value:"Step 3: Install MAP Engine server",id:"step-3-install-map-engine-server",level:3},{value:"Package installation",id:"package-installation",level:4},{value:"Business repository installation",id:"business-repository-installation",level:4},{value:"MAP Engine server installation",id:"map-engine-server-installation-1",level:4},{value:"MariaDB requirement",id:"mariadb-requirement",level:4},{value:"Java requirement",id:"java-requirement",level:4},{value:"Step 4: Check the database configuration",id:"step-4-check-the-database-configuration",level:3},{value:"Step 5: Execute the configure.sh script",id:"step-5-execute-the-configuresh-script",level:3},{value:"Custom URI",id:"custom-uri",level:4},{value:"Java memory optimization",id:"java-memory-optimization",level:4},{value:"Step 6: Apply Centreon Broker configuration and restart MAP Engine service",id:"step-6-apply-centreon-broker-configuration-and-restart-map-engine-service",level:2},{value:"Step 7: Check the configuration",id:"step-7-check-the-configuration",level:3},{value:"MAP web client installation",id:"map-web-client-installation",level:2},{value:"Step 1: Install the business repository",id:"step-1-install-the-business-repository",level:3},{value:"Step 2: Install the MAP module",id:"step-2-install-the-map-module",level:3},{value:"Step 3: Activate the MAP module",id:"step-3-activate-the-map-module",level:3},{value:"Secure MAP in HTTPS",id:"secure-map-in-https",level:2}],k={toc:c},g="wrapper";function h(e){var{components:t}=e,s=p(e,["components"]);return(0,n.kt)(g,i(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){o(e,t,a[t])}))}return e}({},k,s),{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"This topic describes how to install Centreon MAP. We recommend that you install MAP on a dedicated server. However, if you do not have large volumes of data, you can install it on the central server."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Note to users already using the MAP (Legacy) version: the MAP module does not require the ",(0,n.kt)("strong",{parentName:"p"},"centreon_studio")," database (used for a MAP Legacy server). This database can be removed after ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/docs/graph-views/import-into-map-web"},"migrating your legacy maps to MAP"),". Be aware that it is not possible to migrate from MAP to MAP (legacy).")),(0,n.kt)("h2",{id:"license"},"License"),(0,n.kt)("p",null,"If you need an additional ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/docs/administration/licenses"},"license")," for Centreon MAP, please contact the ",(0,n.kt)("a",{parentName:"p",href:"https://support.centreon.com/"},"Centreon support\nteam")," to obtain and install your license key."),(0,n.kt)("h2",{id:"architecture"},"Architecture"),(0,n.kt)("p",null,"The diagram below summarizes the MAP architecture."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"You can install Centreon MAP either on a dedicated server or on the central server."),(0,n.kt)("li",{parentName:"ul"},"Centreon MAP does not require any installation on your machine; this solution is fully available in the Centreon web interface.")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"image",src:a(47075).Z,width:"789",height:"933"})),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Table of network flow")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Application"),(0,n.kt)("th",{parentName:"tr",align:null},"Source"),(0,n.kt)("th",{parentName:"tr",align:null},"Destination"),(0,n.kt)("th",{parentName:"tr",align:null},"Port"),(0,n.kt)("th",{parentName:"tr",align:null},"Protocol"),(0,n.kt)("th",{parentName:"tr",align:null},"Purpose"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Map Server"),(0,n.kt)("td",{parentName:"tr",align:null},"Map server"),(0,n.kt)("td",{parentName:"tr",align:null},"Centreon central broker"),(0,n.kt)("td",{parentName:"tr",align:null},"5758"),(0,n.kt)("td",{parentName:"tr",align:null},"TCP"),(0,n.kt)("td",{parentName:"tr",align:null},"Get real-time status updates")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Map Server"),(0,n.kt)("td",{parentName:"tr",align:null},"Map server"),(0,n.kt)("td",{parentName:"tr",align:null},"Centreon MariaDB database"),(0,n.kt)("td",{parentName:"tr",align:null},"3306"),(0,n.kt)("td",{parentName:"tr",align:null},"TCP"),(0,n.kt)("td",{parentName:"tr",align:null},"Retrieve configuration and other data from Centreon")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Web"),(0,n.kt)("td",{parentName:"tr",align:null},"Map server"),(0,n.kt)("td",{parentName:"tr",align:null},"Centreon central"),(0,n.kt)("td",{parentName:"tr",align:null},"80/443"),(0,n.kt)("td",{parentName:"tr",align:null},"HTTP/HTTPS"),(0,n.kt)("td",{parentName:"tr",align:null},"Authentication & data retrieval")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Web interface"),(0,n.kt)("td",{parentName:"tr",align:null},"User"),(0,n.kt)("td",{parentName:"tr",align:null},"Map server"),(0,n.kt)("td",{parentName:"tr",align:null},"8081/9443"),(0,n.kt)("td",{parentName:"tr",align:null},"HTTP/HTTPS"),(0,n.kt)("td",{parentName:"tr",align:null},"Retrieve views & content")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Web interface"),(0,n.kt)("td",{parentName:"tr",align:null},"User"),(0,n.kt)("td",{parentName:"tr",align:null},"Internet","*"," (Mapbox)"),(0,n.kt)("td",{parentName:"tr",align:null},"443"),(0,n.kt)("td",{parentName:"tr",align:null},"HTTPS"),(0,n.kt)("td",{parentName:"tr",align:null},"Retrieve Mapbox data")))),(0,n.kt)("p",null,"*"," ",(0,n.kt)("em",{parentName:"p"},"With or without a proxy")),(0,n.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,n.kt)("h3",{id:"centreon-map-engine-server"},"Centreon MAP Engine server"),(0,n.kt)("h4",{id:"license-1"},"License"),(0,n.kt)("p",null,"The server requires the license to be available and valid on Centreon's central\nserver. To do this, you must contact the ",(0,n.kt)("a",{parentName:"p",href:"https://support.centreon.com/"},"Centreon support\nteam")," to obtain and install your license key."),(0,n.kt)("h4",{id:"software"},"Software"),(0,n.kt)("p",null,"See the ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/docs/installation/prerequisites#software"},"software requirements"),"."),(0,n.kt)("h4",{id:"hardware"},"Hardware"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Up to 500 hosts",label:"Up to 500 hosts",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Element"),(0,n.kt)("th",{parentName:"tr",align:null},"Value"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"CPU"),(0,n.kt)("td",{parentName:"tr",align:null},"2 vCPU")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"RAM"),(0,n.kt)("td",{parentName:"tr",align:null},"4 GB")))),(0,n.kt)("p",null,"This is how your MAP server should be partitioned:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Volume group (LVM)"),(0,n.kt)("th",{parentName:"tr",align:null},"File system"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"),(0,n.kt)("th",{parentName:"tr",align:null},"Size"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"/boot"),(0,n.kt)("td",{parentName:"tr",align:null},"boot images"),(0,n.kt)("td",{parentName:"tr",align:null},"1 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"/"),(0,n.kt)("td",{parentName:"tr",align:null},"system root"),(0,n.kt)("td",{parentName:"tr",align:null},"20 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"swap"),(0,n.kt)("td",{parentName:"tr",align:null},"swap"),(0,n.kt)("td",{parentName:"tr",align:null},"4 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/log"),(0,n.kt)("td",{parentName:"tr",align:null},"contains all log files"),(0,n.kt)("td",{parentName:"tr",align:null},"10 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/lib/mysql"),(0,n.kt)("td",{parentName:"tr",align:null},"database"),(0,n.kt)("td",{parentName:"tr",align:null},"5 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"Free space (unallocated)"),(0,n.kt)("td",{parentName:"tr",align:null},"2 GB"))))),(0,n.kt)(l.Z,{value:"Up to 1,000 hosts",label:"Up to 1,000 hosts",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Element"),(0,n.kt)("th",{parentName:"tr",align:null},"Value"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"CPU"),(0,n.kt)("td",{parentName:"tr",align:null},"4 vCPU")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"RAM"),(0,n.kt)("td",{parentName:"tr",align:null},"4 GB")))),(0,n.kt)("p",null,"This is how your MAP server should be partitioned:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Volume group (LVM)"),(0,n.kt)("th",{parentName:"tr",align:null},"File system"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"),(0,n.kt)("th",{parentName:"tr",align:null},"Size"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"/boot"),(0,n.kt)("td",{parentName:"tr",align:null},"boot images"),(0,n.kt)("td",{parentName:"tr",align:null},"1 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"/"),(0,n.kt)("td",{parentName:"tr",align:null},"system root"),(0,n.kt)("td",{parentName:"tr",align:null},"20 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"swap"),(0,n.kt)("td",{parentName:"tr",align:null},"swap"),(0,n.kt)("td",{parentName:"tr",align:null},"4 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/log"),(0,n.kt)("td",{parentName:"tr",align:null},"contains all log files"),(0,n.kt)("td",{parentName:"tr",align:null},"10 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/lib/mysql"),(0,n.kt)("td",{parentName:"tr",align:null},"database"),(0,n.kt)("td",{parentName:"tr",align:null},"5 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"Free space (unallocated)"),(0,n.kt)("td",{parentName:"tr",align:null},"2 GB"))))),(0,n.kt)(l.Z,{value:"Up to 2,500 hosts",label:"Up to 2,500 hosts",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Element"),(0,n.kt)("th",{parentName:"tr",align:null},"Value"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"CPU"),(0,n.kt)("td",{parentName:"tr",align:null},"4 vCPU")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"RAM"),(0,n.kt)("td",{parentName:"tr",align:null},"10 GB")))),(0,n.kt)("p",null,"This is how your MAP server should be partitioned:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Volume group (LVM)"),(0,n.kt)("th",{parentName:"tr",align:null},"File system"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"),(0,n.kt)("th",{parentName:"tr",align:null},"Size"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"/boot"),(0,n.kt)("td",{parentName:"tr",align:null},"boot images"),(0,n.kt)("td",{parentName:"tr",align:null},"1 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"/"),(0,n.kt)("td",{parentName:"tr",align:null},"system root"),(0,n.kt)("td",{parentName:"tr",align:null},"20 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"swap"),(0,n.kt)("td",{parentName:"tr",align:null},"swap"),(0,n.kt)("td",{parentName:"tr",align:null},"4 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/log"),(0,n.kt)("td",{parentName:"tr",align:null},"contains all log files"),(0,n.kt)("td",{parentName:"tr",align:null},"10 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/lib/mysql"),(0,n.kt)("td",{parentName:"tr",align:null},"database"),(0,n.kt)("td",{parentName:"tr",align:null},"5 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"Free space (unallocated)"),(0,n.kt)("td",{parentName:"tr",align:null},"2 GB"))))),(0,n.kt)(l.Z,{value:"Up to 5,000 hosts",label:"Up to 5,000 hosts",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Element"),(0,n.kt)("th",{parentName:"tr",align:null},"Value"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"CPU"),(0,n.kt)("td",{parentName:"tr",align:null},"4 vCPU")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"RAM"),(0,n.kt)("td",{parentName:"tr",align:null},"18 GB")))),(0,n.kt)("p",null,"This is how your MAP server should be partitioned:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Volume group (LVM)"),(0,n.kt)("th",{parentName:"tr",align:null},"File system"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"),(0,n.kt)("th",{parentName:"tr",align:null},"Size"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"/boot"),(0,n.kt)("td",{parentName:"tr",align:null},"boot images"),(0,n.kt)("td",{parentName:"tr",align:null},"1 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"/"),(0,n.kt)("td",{parentName:"tr",align:null},"system root"),(0,n.kt)("td",{parentName:"tr",align:null},"20 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"swap"),(0,n.kt)("td",{parentName:"tr",align:null},"swap"),(0,n.kt)("td",{parentName:"tr",align:null},"4 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/log"),(0,n.kt)("td",{parentName:"tr",align:null},"contains all log files"),(0,n.kt)("td",{parentName:"tr",align:null},"10 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/lib/mysql"),(0,n.kt)("td",{parentName:"tr",align:null},"database"),(0,n.kt)("td",{parentName:"tr",align:null},"5 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"Free space (unallocated)"),(0,n.kt)("td",{parentName:"tr",align:null},"2 GB"))))),(0,n.kt)(l.Z,{value:"Up to 10,000 hosts",label:"Up to 10,000 hosts",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Element"),(0,n.kt)("th",{parentName:"tr",align:null},"Value"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"CPU"),(0,n.kt)("td",{parentName:"tr",align:null},"6 vCPU")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"RAM"),(0,n.kt)("td",{parentName:"tr",align:null},"18 GB")))),(0,n.kt)("p",null,"This is how your MAP server should be partitioned:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Volume group (LVM)"),(0,n.kt)("th",{parentName:"tr",align:null},"File system"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"),(0,n.kt)("th",{parentName:"tr",align:null},"Size"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"/boot"),(0,n.kt)("td",{parentName:"tr",align:null},"boot images"),(0,n.kt)("td",{parentName:"tr",align:null},"1 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"/"),(0,n.kt)("td",{parentName:"tr",align:null},"system root"),(0,n.kt)("td",{parentName:"tr",align:null},"20 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"swap"),(0,n.kt)("td",{parentName:"tr",align:null},"swap"),(0,n.kt)("td",{parentName:"tr",align:null},"4 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/log"),(0,n.kt)("td",{parentName:"tr",align:null},"contains all log files"),(0,n.kt)("td",{parentName:"tr",align:null},"10 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/lib/mysql"),(0,n.kt)("td",{parentName:"tr",align:null},"database"),(0,n.kt)("td",{parentName:"tr",align:null},"5 GB")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"Free space (unallocated)"),(0,n.kt)("td",{parentName:"tr",align:null},"2 GB"))))),(0,n.kt)(l.Z,{value:"Over 10,000 hosts",label:"Over 10,000 hosts",mdxType:"TabItem"},(0,n.kt)("p",null,"For very large amounts of data, contact your sales representative."))),(0,n.kt)("h4",{id:"information-required-during-configuration"},"Information required during configuration"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Centreon web login with administration rights.")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Even with a correctly sized server, you should bear in mind the best practices and recommendations when creating views so you can avoid performance issues.")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"If the central server is configured in HTTPS, you must apply the SSL configuration on the MAP server. Follow this ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/docs/graph-views/secure-your-map-platform"},"procedure")," to secure your MAP server.")),(0,n.kt)("h3",{id:"centreon-map-web-client"},"Centreon MAP web client"),(0,n.kt)("h4",{id:"license-2"},"License"),(0,n.kt)("p",null,"The web interface requires the license to be available and valid on Centreon's\ncentral server. To do this, you must contact the ",(0,n.kt)("a",{parentName:"p",href:"https://support.centreon.com/"},"Centreon support\nteam")," to obtain and install your license key."),(0,n.kt)("h4",{id:"compatibility"},"Compatibility"),(0,n.kt)("p",null,"Note that the MAP web interface has the same requirements as the Centreon web interface. See the prerequisites for the compatibility of web browsers ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/docs/installation/prerequisites"},"here"),"."),(0,n.kt)("h2",{id:"map-engine-server-installation"},"MAP Engine server installation"),(0,n.kt)("h3",{id:"step-1-set-authentication-parameters"},"Step 1: Set authentication parameters"),(0,n.kt)("p",null,"You must provide the Centreon MAP Engine server with a dedicated user\n",(0,n.kt)("strong",{parentName:"p"},"who has access to all resources")," through the appropriate ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/docs/administration/access-control-lists"},"access list groups"),".\nSince the password will be stored in human-readable form in a\nconfiguration file, you should not use a Centreon admin user account."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Log into Centreon and go to the ",(0,n.kt)("strong",{parentName:"li"},"Configuration > Users > Contacts/Users")," page. Then click the ",(0,n.kt)("strong",{parentName:"li"},"Centreon Authentication")," tab."),(0,n.kt)("li",{parentName:"ul"},"Set the ",(0,n.kt)("strong",{parentName:"li"},"Reach API Realtime")," parameter to ",(0,n.kt)("strong",{parentName:"li"},"Yes"),".")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"image",src:a(26009).Z,width:"959",height:"582"})),(0,n.kt)("p",null,"Exclude the user from the password expiration policy on the ",(0,n.kt)("strong",{parentName:"p"},"Administration > Authentication")," page: their password will never expire."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"image",src:a(57152).Z,width:"861",height:"734"})),(0,n.kt)("h3",{id:"step-2-create-a-mysql-user"},"Step 2: Create a MySQL user"),(0,n.kt)("p",null,"From the central server terminal, create a user in the MySQL instance hosting 'centreon' and 'centreon_storage'\ndatabases:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE USER 'centreon_map'@'<IP_SERVER_MAP>' IDENTIFIED BY 'centreon_map';\nGRANT SELECT ON centreon_storage.* TO 'centreon_map'@'<IP_SERVER_MAP>';\nGRANT SELECT, INSERT ON centreon.* TO 'centreon_map'@'<IP_SERVER_MAP>';\n")),(0,n.kt)("p",null,"The INSERT privilege will only be used during the installation process\nin order to create new Centreon Broker output. It will be revoked later."),(0,n.kt)("h3",{id:"step-3-install-map-engine-server"},"Step 3: Install MAP Engine server"),(0,n.kt)("h4",{id:"package-installation"},"Package installation"),(0,n.kt)("p",null,"If you installed your Centreon MAP server from a fresh OS installation\nyou need to install the ",(0,n.kt)("strong",{parentName:"p"},"centreon-release")," package:"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("p",null,"First you need to install an EPEL repository:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm\n")),(0,n.kt)("p",null,"The command should return results as follows:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"Installed:\n  epel-release-8-17.el8.noarch\n\nComplete!\n")),(0,n.kt)("p",null,"Then install the ",(0,n.kt)("strong",{parentName:"p"},"centreon-release")," package:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf config-manager --add-repo https://packages.centreon.com/rpm-standard/23.10/el8/centreon-23.10.repo\n"))),(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("p",null,"First you need to install an EPEL repository:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm\n")),(0,n.kt)("p",null,"The command should return results as follows:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"Installed:\n  epel-release-9-2.el9.noarch\n\nComplete!\n")),(0,n.kt)("p",null,"Then install the ",(0,n.kt)("strong",{parentName:"p"},"centreon-release")," package:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf config-manager --add-repo https://packages.centreon.com/rpm-standard/23.10/el9/centreon-23.10.repo\n"))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("p",null,"Install the following dependencies:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"apt update && apt install lsb-release ca-certificates apt-transport-https software-properties-common wget gnupg2 curl\n")),(0,n.kt)("p",null,"To install the Centreon repository, execute the following command:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},'echo "deb https://packages.centreon.com/apt-standard-23.10-stable/ $(lsb_release -sc) main" | tee /etc/apt/sources.list.d/centreon.list\necho "deb https://packages.centreon.com/apt-plugins-stable/ $(lsb_release -sc) main" | tee /etc/apt/sources.list.d/centreon-plugins.list\n')),(0,n.kt)("p",null,"Then import the repository key:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"wget -O- https://apt-key.centreon.com | gpg --dearmor | tee /etc/apt/trusted.gpg.d/centreon.gpg > /dev/null 2>&1\n")))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"If the URL does not work, you can manually find this package in the folder.")),(0,n.kt)("h4",{id:"business-repository-installation"},"Business repository installation"),(0,n.kt)("p",null,"Install the Centreon Business repository. You can find this on the\n",(0,n.kt)("a",{parentName:"p",href:"https://support.centreon.com/hc/en-us/categories/10341239833105-Repositories"},"support portal"),"."),(0,n.kt)("h4",{id:"map-engine-server-installation-1"},"MAP Engine server installation"),(0,n.kt)("p",null,"You have two possibilities for the installation:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"on a new server (without existing Centreon MAP packages),"),(0,n.kt)("li",{parentName:"ul"},"or on an existing Centreon MAP server legacy.")),(0,n.kt)("p",null,"Select the right tab below and install the Centreon MAP Engine server:"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"New MAP Engine server",label:"New MAP Engine server",mdxType:"TabItem"},(0,n.kt)("h4",{id:"mariadb-requirement"},"MariaDB requirement"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"You need to have a MariaDB database to store your Centreon MAP data.")),(0,n.kt)("p",null,"First you need to add the MariaDB repository:"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},'curl -LsS https://r.mariadb.com/downloads/mariadb_repo_setup | sudo bash -s -- --os-type=rhel --os-version=8 --mariadb-server-version="mariadb-10.5"\n'))),(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},'curl -LsS https://r.mariadb.com/downloads/mariadb_repo_setup | sudo bash -s -- --os-type=rhel --os-version=9 --mariadb-server-version="mariadb-10.5"\n'))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},'curl -LsS https://r.mariadb.com/downloads/mariadb_repo_setup | sudo bash -s -- --os-type=debian --os-version=11 --mariadb-server-version="mariadb-10.5"\n')))),(0,n.kt)("p",null,"Then install MariaDB server:"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install MariaDB-server\n"))),(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install MariaDB-server\n"))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"apt update && apt install mariadb-server\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"MariaDB must listen to all interfaces instead of localhost/127.0.0.1, which is the default value. Edit the following file:"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"/etc/mysql/mariadb.conf.d/50-server.cnf\n")),(0,n.kt)("p",{parentName:"blockquote"},"Set the ",(0,n.kt)("strong",{parentName:"p"},"bind-address")," parameter to ",(0,n.kt)("strong",{parentName:"p"},"0.0.0.0")," and restart mariadb."),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart mariadb\n"))))),(0,n.kt)("p",null,"Then enable and restart mariadb"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl enable mariadb\nsystemctl restart mariadb\n")),(0,n.kt)("p",null,"Since MariaDB 10.5, it is mandatory to secure the database's root access before installing Centreon. If you are using a local database, run the following command on the Map server:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"mysql_secure_installation\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Answer ",(0,n.kt)("strong",{parentName:"li"},"yes"),' to all questions except "Disallow root login remotely?".'),(0,n.kt)("li",{parentName:"ul"},"It is mandatory to set a password for the ",(0,n.kt)("strong",{parentName:"li"},"root")," user of the database.")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"For more information, please see the ",(0,n.kt)("a",{parentName:"p",href:"https://mariadb.com/kb/en/mysql_secure_installation/"},"official MariaDB documentation"),".")),(0,n.kt)("p",null,"Now you can install the Centreon MAP Engine."),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-map-engine\n"))),(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-map-engine\n"))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"apt update && apt install centreon-map-engine\n"))))),(0,n.kt)(l.Z,{value:"Existing MAP Legacy server",label:"Existing MAP Legacy server",mdxType:"TabItem"},(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"If you already have MAP Legacy and are installing MAP Engine on the same server, you need to perform the following procedure. Otherwise, move to the ",(0,n.kt)("strong",{parentName:"p"},"New MAP Engine server")," tab.")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"You can use the existing MariaDB database of Centreon MAP Legacy for the new MAP Engine server. So it's not necessary to install a new database.")),(0,n.kt)("p",null,"This procedure is to ensure that the configuration file can be used for both MAP Engine and MAP Legacy."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Make a backup of the ",(0,n.kt)("strong",{parentName:"p"},"map.cnf")," file:"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"cp /etc/my.cnf.d/map.cnf /etc/my.cnf.d/map.cnf.bk\n"))),(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"cp /etc/my.cnf.d/map.cnf /etc/my.cnf.d/map.cnf.bk\n"))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"cp /etc/mysql/map.cnf /etc/mysql/map.cnf.bk\n"))))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Install the centreon-map-engine package"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-map-engine\n"))),(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-map-engine\n"))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},'apt update && apt-get -o Dpkg::Options::="--force-overwrite" install centreon-map-engine\n'))))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Retrieve the configuration file backup:"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"cp /etc/my.cnf.d/map.cnf.bk /etc/my.cnf.d/map.cnf\n"))),(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"cp /etc/my.cnf.d/map.cnf.bk /etc/my.cnf.d/map.cnf\n"))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"cp /etc/mysql/map.cnf.bk /etc/mysql/map.cnf\n"))))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Answer ",(0,n.kt)("strong",{parentName:"p"},"Y")," when prompted. Then restart MySQL:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart mariadb\n")))))),(0,n.kt)("p",null,"When installing Centreon MAP Engine server, it will automatically install java\n(OpenJDK 17) if needed."),(0,n.kt)("h4",{id:"java-requirement"},"Java requirement"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Ensure a version of Java 17 (or 18) is installed before you start the procedure.")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"If you need to check the Java version, enter the following command:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"java -version\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"If you need to upgrade the Java installation to Java 17 (or 18), go to the ",(0,n.kt)("a",{parentName:"p",href:"https://www.oracle.com/java/technologies/downloads/#java17"},"Oracle official download")," page.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"If several Java versions are installed, you need to activate the right version. Display the installed versions using the following command and select the Java 17 (or 18) version:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo update-alternatives --config java\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"If you need to use your platform in HTTPS, you will have to generate a keystore file for the Java 17 (or 18) version (",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/docs/graph-views/secure-your-map-platform#httpstls-configuration-with-a-recognized-key"},"see the procedure"),")."))),(0,n.kt)("h3",{id:"step-4-check-the-database-configuration"},"Step 4: Check the database configuration"),(0,n.kt)("p",null,"Make sure the database that stores Centreon MAP data is optimized\n(automatically added by the RPM in ",(0,n.kt)("strong",{parentName:"p"},"/etc/my.cnf.d/map.cnf")," or in ",(0,n.kt)("strong",{parentName:"p"},"/etc/mysql/map.cnf")," for Debian):"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"max_allowed_packet = 20M\ninnodb_log_file_size = 200M\n")),(0,n.kt)("p",null,"Then, restart MariaDB:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart mariadb\n")),(0,n.kt)("p",null,"Since MariaDB 10.5, it is mandatory to secure the database's root access before installing Centreon. If you are using a local database, run the following command on the central server:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"mysql_secure_installation\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Answer ",(0,n.kt)("strong",{parentName:"li"},"yes"),' to all questions except "Disallow root login remotely?".'),(0,n.kt)("li",{parentName:"ul"},"It is mandatory to set a password for the ",(0,n.kt)("strong",{parentName:"li"},"root")," user of the database. You will need this password during the ",(0,n.kt)("a",{parentName:"li",href:"/centreon-documentation/pr-preview/staging/pr-2806/docs/installation/web-and-post-installation"},"web installation"),".")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"For more information, please see the ",(0,n.kt)("a",{parentName:"p",href:"https://mariadb.com/kb/en/mysql_secure_installation/"},"official MariaDB documentation"),".")),(0,n.kt)("h3",{id:"step-5-execute-the-configuresh-script"},"Step 5: Execute the configure.sh script"),(0,n.kt)("p",null,"Execute the Centreon MAP Engine server configuration script."),(0,n.kt)("p",null,"Two modes are available:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Interactive (no option/default mode): several questions will be asked to interactively fill in the installation variables."),(0,n.kt)("li",{parentName:"ul"},"Automatic (--automatic or -a): the installation will be done automatically from the values set in the file ",(0,n.kt)("strong",{parentName:"li"},"/etc/centreon-map/vars.sh"),".")),(0,n.kt)("p",null,"If it is your first installation, we advise you to use the standard mode (interactive) and choose ",(0,n.kt)("strong",{parentName:"p"},"No")," when asked for advanced installation mode:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"}," /etc/centreon-map/configure.sh\n")),(0,n.kt)("p",null,"The output should look like this:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"Configuration completed, enjoy !\n")),(0,n.kt)("p",null,"This script generates the ",(0,n.kt)("strong",{parentName:"p"},"map-config.properties")," file."),(0,n.kt)("h4",{id:"custom-uri"},"Custom URI"),(0,n.kt)("p",null,"If you have customized the URI for your Centreon platform, you need to edit the ",(0,n.kt)("strong",{parentName:"p"},"map-config.properties")," file by adding the following command using the custom URI already defined ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/docs/administration/secure-platform#custom-uri"},"here"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"centreon.path=/your-custom-uri\n")),(0,n.kt)("h4",{id:"java-memory-optimization"},"Java memory optimization"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"JAVA_OPTS is a standard environment variable used to edit Java properties.")),(0,n.kt)("p",null,"To correctly implement the dedicated memory:"),(0,n.kt)("p",null,"Edit the ",(0,n.kt)("em",{parentName:"p"},"JAVA","_","OPTS")," parameter in the Centreon Map configuration file ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/centreon-map/centreon-map.conf")," by adding -Xms and -Xmx parameters:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},'JAVA_OPTS="-Xms512m -Xmx4G..."\n')),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"The Xmx value depends on the amount of memory indicated in the tables in the ",(0,n.kt)("a",{parentName:"p",href:"#hardware"},"Hardware")," section.")),(0,n.kt)("p",null,"Then restart the ",(0,n.kt)("strong",{parentName:"p"},"centreon-map-engine")," service:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart centreon-map-engine\n")),(0,n.kt)("h2",{id:"step-6-apply-centreon-broker-configuration-and-restart-map-engine-service"},"Step 6: Apply Centreon Broker configuration and restart MAP Engine service"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Before restarting Broker, you must export the configuration from the Centreon web interface.")),(0,n.kt)("p",null,"Restart Centreon Broker on the Central server:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart cbd\n")),(0,n.kt)("p",null,"Remove the INSERT privilege from user ",(0,n.kt)("strong",{parentName:"p"},"centreon_map"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-sql"},"REVOKE INSERT ON centreon.* FROM 'centreon_map'@'<IP_SERVER_MAP>';\n")),(0,n.kt)("p",null,"Then restart the ",(0,n.kt)("strong",{parentName:"p"},"centreon-map-engine")," service:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart centreon-map-engine\n")),(0,n.kt)("p",null,"Run the following command to check that the ",(0,n.kt)("strong",{parentName:"p"},"centreon-map-engine")," service is properly started:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl status centreon-map-engine\n")),(0,n.kt)("p",null,"  This is an example of results:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"\u25cf centreon-map-engine.service - Centreon Studio map server\n Loaded: loaded (/usr/lib/systemd/system/centreon-map-engine.service; disabled; vendor preset: disabled)\n Active: active (running) since Thu 2022-11-24 09:10:58 UTC; 6h ago\nMain PID: 39103 (centreon-map-en)\n  Tasks: 50 (limit: 23465)\n Memory: 598.1M\n CGroup: /system.slice/centreon-map-engine.service\n         \u251c\u250039103 /bin/bash /usr/share/centreon-map-engine/bin/centreon-map-engine\n         \u2514\u250039119 /usr/bin/java -Dsun.misc.URLClassPath.disableJarChecking=true -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/var/log/centreon-map\n")),(0,n.kt)("h3",{id:"step-7-check-the-configuration"},"Step 7: Check the configuration"),(0,n.kt)("p",null,"Check the MAP Engine server configuration by using this command:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"/etc/centreon-map/diagnostic.sh\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"In case of any error, see the ",(0,n.kt)("strong",{parentName:"p"},"Run our diagnostic tool")," section in the ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/docs/graph-views/map-web-troubleshooting#run-our-diagnostic-tool"},"Troubleshooting MAP")," topic.")),(0,n.kt)("p",null,"If the configuration is correct, the ",(0,n.kt)("strong",{parentName:"p"},"centreon-map-engine")," service can be\nstarted from the Centreon MAP server:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart centreon-map-engine\n")),(0,n.kt)("p",null,"Enable the service to start up automatically on server boot:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl enable centreon-map-engine\n")),(0,n.kt)("p",null,"The Centreon MAP Engine server is now started and enabled, so let's install\nthe interface part of the extension."),(0,n.kt)("h2",{id:"map-web-client-installation"},"MAP web client installation"),(0,n.kt)("h3",{id:"step-1-install-the-business-repository"},"Step 1: Install the business repository"),(0,n.kt)("p",null,"Install the Centreon Business repository. You can find this on the\n",(0,n.kt)("a",{parentName:"p",href:"https://support.centreon.com/hc/en-us/categories/10341239833105-Repositories"},"support portal"),"."),(0,n.kt)("h3",{id:"step-2-install-the-map-module"},"Step 2: Install the MAP module"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"From your terminal, run the following command:"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo dnf install centreon-map-web-client\n"))),(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo dnf install centreon-map-web-client\n"))),(0,n.kt)(l.Z,{value:"Debian",label:"Debian",mdxType:"TabItem"},(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo apt install centreon-map-web-client\n"))))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Then you need to log on to the Centreon web interface.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Go to ",(0,n.kt)("strong",{parentName:"p"},"Administration > Extensions > Manager")," and install the ",(0,n.kt)("strong",{parentName:"p"},"Map Web Client")," module."))),(0,n.kt)("h3",{id:"step-3-activate-the-map-module"},"Step 3: Activate the MAP module"),(0,n.kt)("p",null,"By default, the MAP module is not enabled. Perform the following procedure to enable it."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Log on to the Centreon interface and go to ",(0,n.kt)("strong",{parentName:"p"},"Administration > Extensions > Map > Options"),".\n",(0,n.kt)("img",{alt:"image",src:a(6831).Z,width:"684",height:"181"}))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"In the ",(0,n.kt)("strong",{parentName:"p"},"Connection information")," section, set ",(0,n.kt)("strong",{parentName:"p"},"Map Engine server")," to ",(0,n.kt)("strong",{parentName:"p"},"Yes"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Enter the IP address of your MAP server in the ",(0,n.kt)("strong",{parentName:"p"},"Map Engine server address")," field. If you installed MAP on the central server, this is the IP address of the central server. Use its full IP address, not the localhost. The default port is 8081 (for instance: ",(0,n.kt)("inlineCode",{parentName:"p"},"http://10.25.xxx:8081"),").")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Click the ",(0,n.kt)("strong",{parentName:"p"},"Test connection to server")," button to test the connection. This test should return the ",(0,n.kt)("strong",{parentName:"p"},"Connection test successful")," message.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Click ",(0,n.kt)("strong",{parentName:"p"},"Save"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Go to the ",(0,n.kt)("strong",{parentName:"p"},"Configuration > Pollers > Pollers")," page. ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/docs/monitoring/monitoring-servers/deploying-a-configuration"},"Export the configuration")," of the central server (using the ",(0,n.kt)("strong",{parentName:"p"},"Reload")," method).")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"From your terminal, restart the cbd service:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart cbd\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Now that the configuration is correct, you can start the server by running this command:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl start centreon-map-engine\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Run the following command to check that the ",(0,n.kt)("strong",{parentName:"p"},"centreon-map-engine")," service is properly started:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl status centreon-map-engine\n")),(0,n.kt)("p",{parentName:"li"}," This is an example of results:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"\u25cf centreon-map-engine.service - Centreon Studio map server\n Loaded: loaded (/usr/lib/systemd/system/centreon-map-engine.service; disabled; vendor preset: disabled)\n Active: active (running) since Thu 2022-11-24 09:10:58 UTC; 6h ago\nMain PID: 39103 (centreon-map-en)\n  Tasks: 50 (limit: 23465)\n Memory: 598.1M\n CGroup: /system.slice/centreon-map-engine.service\n         \u251c\u250039103 /bin/bash /usr/share/centreon-map-engine/bin/centreon-map-engine\n         \u2514\u250039119 /usr/bin/java -Dsun.misc.URLClassPath.disableJarChecking=true -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/var/log/centreon-map\n")))),(0,n.kt)("p",null,"You can now use the MAP module by accessing the ",(0,n.kt)("strong",{parentName:"p"},"Monitoring > Map")," page."),(0,n.kt)("h2",{id:"secure-map-in-https"},"Secure MAP in HTTPS"),(0,n.kt)("p",null,"If you want to use MAP in HTTPS, you must secure both your Centreon platform and MAP."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Follow this ",(0,n.kt)("a",{parentName:"li",href:"/centreon-documentation/pr-preview/staging/pr-2806/docs/administration/secure-platform"},"procedure")," to secure your Centreon platform."),(0,n.kt)("li",{parentName:"ul"},"Follow this ",(0,n.kt)("a",{parentName:"li",href:"/centreon-documentation/pr-preview/staging/pr-2806/docs/graph-views/secure-your-map-platform"},"procedure")," to secure MAP.")))}h.isMDXComponent=!0},47075:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/map-web-schema-33f8af9ba6d52894d7021ff43cfabf7b.png"},6831:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/switch-map-engine-650131befe7cac507c49eed96501c2e9.png"},57152:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/password-expiration-policy-416dc4f1ff339b5671c70faf1eb1e5ab.png"},26009:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/reach-api-d4b4e3b7f3630ec704bfe285fd841b11.png"}}]);