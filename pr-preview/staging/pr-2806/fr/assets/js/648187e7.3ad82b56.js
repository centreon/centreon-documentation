"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[16909],{59005:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>d,contentTitle:()=>u,default:()=>g,frontMatter:()=>p,metadata:()=>c,toc:()=>m});r(67294);var n=r(3905),a=r(51715),o=r(7626);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const p={id:"upgrade",title:"Mont\xe9e de version de l'extension"},u=void 0,c={unversionedId:"graph-views/upgrade",id:"version-23.10/graph-views/upgrade",title:"Mont\xe9e de version de l'extension",description:"Ce chapitre d\xe9crit comment monter de version votre extension Centreon MAP. Pour ce faire, vous devez mettre \xe0 niveau les quatre principaux composants :",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-23.10/graph-views/upgrade.md",sourceDirName:"graph-views",slug:"/graph-views/upgrade",permalink:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/graph-views/upgrade",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/i18n/fr/docusaurus-plugin-content-docs/version-23.10/graph-views/upgrade.md",tags:[],version:"23.10",lastUpdatedAt:1699870482,formattedLastUpdatedAt:"13 nov. 2023",frontMatter:{id:"upgrade",title:"Mont\xe9e de version de l'extension"},sidebar:"version-23.10/docs",previous:{title:"Mettre \xe0 jour l'extension",permalink:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/graph-views/update"},next:{title:"Migrer l'extension",permalink:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/graph-views/migrate"}},d={},m=[{value:"Pr\xe9requis",id:"pr\xe9requis",level:2},{value:"Mise \xe0 jour de la cl\xe9 de signature du RPM",id:"mise-\xe0-jour-de-la-cl\xe9-de-signature-du-rpm",level:3},{value:"\xc9tape 1 : serveur Centreon MAP",id:"\xe9tape-1--serveur-centreon-map",level:2},{value:"Pr\xe9requis de la version Java",id:"pr\xe9requis-de-la-version-java",level:3},{value:"Proc\xe9dure",id:"proc\xe9dure",level:3},{value:"\xc9tape 2 : interface web Centreon MAP",id:"\xe9tape-2--interface-web-centreon-map",level:2},{value:"\xc9tape 3 : client lourd Centreon MAP",id:"\xe9tape-3--client-lourd-centreon-map",level:2},{value:"\xc9tape 4 : mise \xe0 jour des dialectes dans les fichiers .properties",id:"\xe9tape-4--mise-\xe0-jour-des-dialectes-dans-les-fichiers-properties",level:2},{value:"\xc9tape 5 : base de donn\xe9es MariaDB",id:"\xe9tape-5--base-de-donn\xe9es-mariadb",level:2}],v={toc:m},k="wrapper";function g(e){var{components:t}=e,r=i(e,["components"]);return(0,n.kt)(k,s(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){l(e,t,r[t])}))}return e}({},v,r),{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Ce chapitre d\xe9crit comment monter de version votre extension Centreon MAP. Pour ce faire, vous devez mettre \xe0 niveau les quatre principaux composants :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"le serveur Centreon MAP"),(0,n.kt)("li",{parentName:"ul"},"l'interface web Centreon MAP et son widget"),(0,n.kt)("li",{parentName:"ul"},"le client lourd (mis \xe0 jour automatiquement)"),(0,n.kt)("li",{parentName:"ul"},"la base de donn\xe9es MariaDB.")),(0,n.kt)("h2",{id:"pr\xe9requis"},"Pr\xe9requis"),(0,n.kt)("p",null,"Avant de mettre \xe0 jour le serveur MAP de Centreon, nous vous recommandons vivement d'effectuer un dump (sauvegarde) de votre base de donn\xe9es ",(0,n.kt)("inlineCode",{parentName:"p"},"centreon_studio"),".\nCela vous permettra de revenir facilement \xe0 l'\xe9tat pr\xe9c\xe9dent si n\xe9cessaire."),(0,n.kt)("p",null,"Assurez-vous de lire les notes de version pour une explication des fonctionnalit\xe9s, des corrections et des proc\xe9dures personnalis\xe9es."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Lorsque vous effectuez une mise \xe0 jour vers une nouvelle version majeure ou mineure (c'est-\xe0-dire : A.B.x avec A ou B qui change), vous devez contacter notre service d'assistance pour r\xe9cup\xe9rer le nouveau d\xe9p\xf4t"),"."),(0,n.kt)("h3",{id:"mise-\xe0-jour-de-la-cl\xe9-de-signature-du-rpm"},"Mise \xe0 jour de la cl\xe9 de signature du RPM"),(0,n.kt)("p",null,"Pour des raisons de s\xe9curit\xe9, les cl\xe9s utilis\xe9es pour signer les RPM Centreon sont r\xe9guli\xe8rement renouvel\xe9es. Le dernier changement a eu lieu le 14 octobre 2021.\nLorsque vous effectuez une mise \xe0 jour \xe0 partir d'une ancienne version, vous devez passer par la ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/security/key-rotation#existing-installation"},"proc\xe9dure de rotation des cl\xe9s"),", pour supprimer l'ancienne cl\xe9 et installer la nouvelle."),(0,n.kt)("h2",{id:"\xe9tape-1--serveur-centreon-map"},"\xc9tape 1 : serveur Centreon MAP"),(0,n.kt)("h3",{id:"pr\xe9requis-de-la-version-java"},"Pr\xe9requis de la version Java"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Assurez-vous qu'une version de Java 17 (ou 18) est install\xe9e avant de commencer la proc\xe9dure.")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Pour v\xe9rifier quelle version de Java est install\xe9e, entrez la commande suivante :"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"java -version\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Pour une mise \xe0 jour de Java en version 17 (ou 18), allez sur la ",(0,n.kt)("a",{parentName:"p",href:"https://www.oracle.com/java/technologies/downloads/#java17"},"page officielle de t\xe9l\xe9chargement d'Oracle"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Si plusieurs versions de Java sont install\xe9es, vous devez activer la bonne version. Affichez les versions install\xe9es avec la commande suivante puis s\xe9lectionnez la version 17 (ou 18) :"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo update-alternatives --config java\n")),(0,n.kt)("p",{parentName:"li"},"Puis red\xe9marrez le service :"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart centreon-map\n")))),(0,n.kt)("h3",{id:"proc\xe9dure"},"Proc\xe9dure"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Si vous souhaitez configurer votre plateforme en HTTPS, vous aurez besoin de g\xe9n\xe9rer un fichier keystore pour la version 17 de Java (ou 18) (",(0,n.kt)("a",{parentName:"li",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/graph-views/secure-your-map-platform#configuration-httpstls-avec-une-cl%C3%A9-auto-sign%C3%A9e"},"voir proc\xe9dure"),").")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Si vous utilisez toujours la version ",(0,n.kt)("strong",{parentName:"p"},"4.0.X"),", vous ",(0,n.kt)("strong",{parentName:"p"},"devez d'abord installer et ex\xe9cuter le serveur dans la version 4.1.X avant de passer \xe0 la derni\xe8re version"),".")),(0,n.kt)("p",null,"Ex\xe9cutez les commandes suivantes pour mettre \xe0 niveau votre serveur Centreon MAP :"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Mettez \xe0 jour les d\xe9p\xf4ts Centreon et Centreon MAP :")),(0,n.kt)(a.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(o.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf config-manager --add-repo https://packages.centreon.com/rpm-standard/23.04/el8/centreon-23.04.repo\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Installez le d\xe9p\xf4t Centreon Business, vous pouvez le trouver sur le ",(0,n.kt)("a",{parentName:"p",href:"https://support.centreon.com/hc/fr/categories/10341239833105-D%C3%A9p%C3%B4ts"},"portail du support"),".")),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Mettez \xe0 jour le serveur Centreon MAP (Legacy) :"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf update centreon-map-server\n"))))),(0,n.kt)(o.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf config-manager --add-repo https://packages.centreon.com/rpm-standard/23.04/el9/centreon-23.04.repo\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Installez le d\xe9p\xf4t Centreon Business, vous pouvez le trouver sur le ",(0,n.kt)("a",{parentName:"p",href:"https://support.centreon.com/hc/fr/categories/10341239833105-D%C3%A9p%C3%B4ts"},"portail du support"),".")),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Mettez \xe0 jour le serveur Centreon MAP (Legacy) :"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf update centreon-map-server\n"))))),(0,n.kt)(o.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},'echo "deb https://packages.centreon.com/apt-standard-23.04-stable/ $(lsb_release -sc) main" | tee /etc/apt/sources.list.d/centreon.list\necho "deb https://packages.centreon.com/apt-plugins-stable/ $(lsb_release -sc) main" | tee /etc/apt/sources.list.d/centreon-plugins.list\n')),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Installer le d\xe9p\xf4t Centreon Business, vous pouvez le trouver sur le ","[portail du support]"," (",(0,n.kt)("a",{parentName:"p",href:"https://support.centreon.com/hc/fr/categories/10341239833105-D%C3%A9p%C3%B4ts"},"https://support.centreon.com/hc/fr/categories/10341239833105-D%C3%A9p%C3%B4ts"),").")),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Mettez \xe0 jour le serveur Centreon MAP (Legacy) :"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"apt update && apt upgrade centreon-map-server\n")))))),(0,n.kt)("ol",{start:3},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Activez et d\xe9marrez le service ",(0,n.kt)("strong",{parentName:"p"},"centreon-map")," :"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl enable centreon-map\nsystemctl start centreon-map\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Ce point ne s'applique que si vous avez personnalis\xe9 votre fichier de configuration ",(0,n.kt)("strong",{parentName:"p"},"centreon-map.conf"),".\nLors de la mise \xe0 jour de votre module MAP, le fichier ",(0,n.kt)("strong",{parentName:"p"},"/etc/centreon-studio/centreon-map.conf")," n'est pas mis \xe0 jour automatiquement : le nouveau fichier de configuration apport\xe9 par le rpm ne remplace pas l'ancien fichier.\nVous devez copier les modifications manuellement dans votre fichier de configuration personnalis\xe9."))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"L'ancien fichier de configuration est renomm\xe9 ",(0,n.kt)("strong",{parentName:"p"},"centreon-map.conf.rpmsave"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"La mise \xe0 jour installe un nouveau fichier ",(0,n.kt)("strong",{parentName:"p"},"centreon-map.conf"),"."),(0,n.kt)("p",{parentName:"li"},"Lancez une comparaison entre l'ancien fichier de configuration et le nouveau :"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"diff -u /etc/centreon-studio/centreon-map.conf /etc/centreon-studio/centreon-map.conf.rpmsave\n")),(0,n.kt)("p",{parentName:"li"},"Pour chaque diff\xe9rence entre les fichiers, \xe9valuez si vous devez la copier de ",(0,n.kt)("strong",{parentName:"p"},"centreon-map.conf.rpmsave")," vers ",(0,n.kt)("strong",{parentName:"p"},"centreon-map.conf"),"."))),(0,n.kt)("h2",{id:"\xe9tape-2--interface-web-centreon-map"},"\xc9tape 2 : interface web Centreon MAP"),(0,n.kt)(a.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(o.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf update centreon-map-web-client\n"))),(0,n.kt)(o.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf update centreon-map-web-client\n"))),(0,n.kt)(o.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"apt update && apt upgrade centreon-map-web-client\n")))),(0,n.kt)("p",null,"Terminez la mont\xe9e de version :"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Allez dans ",(0,n.kt)("strong",{parentName:"li"},"Administration > Extensions > Gestionnaire"),"."),(0,n.kt)("li",{parentName:"ol"},"Recherchez ",(0,n.kt)("strong",{parentName:"li"},"Map web client"),"."),(0,n.kt)("li",{parentName:"ol"},"Cliquez sur le bouton de mise \xe0 jour (parties module & widget).")),(0,n.kt)("h2",{id:"\xe9tape-3--client-lourd-centreon-map"},"\xc9tape 3 : client lourd Centreon MAP"),(0,n.kt)("p",null,"Si l'ordinateur de l'utilisateur dispose d'une connexion internet, le client lourd est automatiquement mis \xe0 jour vers la derni\xe8re version correspondant au serveur."),(0,n.kt)("p",null,"Sinon, le client peut \xeatre t\xe9l\xe9charg\xe9 via le menu ",(0,n.kt)("strong",{parentName:"p"},"Supervision > MAP")," et le bouton ",(0,n.kt)("strong",{parentName:"p"},"client lourd"),"."),(0,n.kt)("h2",{id:"\xe9tape-4--mise-\xe0-jour-des-dialectes-dans-les-fichiers-properties"},"\xc9tape 4 : mise \xe0 jour des dialectes dans les fichiers .properties"),(0,n.kt)("p",null,"Dans les fichiers ",(0,n.kt)("strong",{parentName:"p"},"/etc/centreon-studio/centreon-database.properties")," et ",(0,n.kt)("strong",{parentName:"p"},"/etc/centreon-studio/studio-database.properties"),", remplacez  ",(0,n.kt)("strong",{parentName:"p"},"MySQL5Dialect")," par ",(0,n.kt)("strong",{parentName:"p"},"MariaDB10Dialect"),"."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Cette configuration fonctionne \xe9galement avec une base MySQL.")),(0,n.kt)("h2",{id:"\xe9tape-5--base-de-donn\xe9es-mariadb"},"\xc9tape 5 : base de donn\xe9es MariaDB"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Des erreurs de modification de fichiers de configuration peuvent entra\xeener des dysfonctionnements du logiciel. Nous vous recommandons de faire une sauvegarde du fichier avant de le modifier et de ne changer que les param\xe8tres conseill\xe9s par Centreon.")),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Arr\xeatez le service ",(0,n.kt)("strong",{parentName:"p"},"centreon-map")," :"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl stop centreon-map\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Voir ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/upgrade/upgrade-mariadb"},"Mettre \xe0 jour MariaDB"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Si vous avez mis \xe0 niveau votre plateforme Centreon depuis une version ant\xe9rieure \xe0 22.10, le nouveau protocole BBDO v3 est activ\xe9.\nVous devez modifier le fichier suivant pour permettre \xe0 MAP de fonctionner correctement : ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/centreon-studio/studio-config.properties"),"."),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-text"},"broker.pb.message.enabled=true\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"D\xe9marrez le service ",(0,n.kt)("strong",{parentName:"p"},"centreon-map")," :"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl start centreon-map\n")))))}g.isMDXComponent=!0}}]);