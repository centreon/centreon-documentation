"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[42366],{42960:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/centreon-d5c18b09b64e5c125d1858bb06131311.cnf"},64955:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>m,contentTitle:()=>u,default:()=>N,frontMatter:()=>p,metadata:()=>d,toc:()=>c});a(67294);var n=a(3905),r=a(51715),l=a(7626);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const p={id:"installation",title:"Installation de Centreon MBI"},u=void 0,d={unversionedId:"reporting/installation",id:"version-23.10/reporting/installation",title:"Installation de Centreon MBI",description:"Ce chapitre pr\xe9sente l'architecture logicielle de l'extension Centreon MBI et fournit un aper\xe7u de",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-23.10/reporting/installation.md",sourceDirName:"reporting",slug:"/reporting/installation",permalink:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/reporting/installation",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/i18n/fr/docusaurus-plugin-content-docs/version-23.10/reporting/installation.md",tags:[],version:"23.10",lastUpdatedAt:1699631982,formattedLastUpdatedAt:"10 nov. 2023",frontMatter:{id:"installation",title:"Installation de Centreon MBI"},sidebar:"version-23.10/docs",previous:{title:"D\xe9v. de rapport",permalink:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/reporting/report-development"},next:{title:"Mise \xe0 jour de l'extension",permalink:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/reporting/update"}},m={},c=[{value:"Architecture",id:"architecture",level:2},{value:"Un serveur de reporting d\xe9di\xe9",id:"un-serveur-de-reporting-d\xe9di\xe9",level:3},{value:"Tableaux des flux r\xe9seau",id:"tableaux-des-flux-r\xe9seau",level:3},{value:"Informations sur les paquets",id:"informations-sur-les-paquets",level:3},{value:"Pr\xe9-requis",id:"pr\xe9-requis",level:2},{value:"Server Centreon central",id:"server-centreon-central",level:3},{value:"Pr\xe9requis logiciels",id:"pr\xe9requis-logiciels",level:4},{value:"Utilisateurs et groupes",id:"utilisateurs-et-groupes",level:4},{value:"Description des utilisateurs, umask et r\xe9pertoire personnel",id:"description-des-utilisateurs-umask-et-r\xe9pertoire-personnel",level:4},{value:"Serveur de reporting d\xe9di\xe9",id:"serveur-de-reporting-d\xe9di\xe9",level:3},{value:"Couche Mat\xe9riel",id:"couche-mat\xe9riel",level:4},{value:"Couche Interlogiciel et logiciel",id:"couche-interlogiciel-et-logiciel",level:4},{value:"Installer l&#39;extension sur Centreon",id:"installer-lextension-sur-centreon",level:2},{value:"Activer l&#39;extension",id:"activer-lextension",level:3},{value:"Configurer l&#39;extension",id:"configurer-lextension",level:3},{value:"Acc\xe8s \xe0 la base de donn\xe9es Centrale",id:"acc\xe8s-\xe0-la-base-de-donn\xe9es-centrale",level:3},{value:"Configuration sp\xe9cifique \xe0 Debian 11",id:"configuration-sp\xe9cifique-\xe0-debian-11",level:4},{value:"Donner des droits \xe0 l&#39;utilisateur cbis",id:"donner-des-droits-\xe0-lutilisateur-cbis",level:3},{value:"Installer le serveur de reporting",id:"installer-le-serveur-de-reporting",level:2},{value:"Installer les paquets",id:"installer-les-paquets",level:3},{value:"Proc\xe9dure",id:"proc\xe9dure",level:4},{value:"Configurer le serveur de reporting",id:"configurer-le-serveur-de-reporting",level:3},{value:"Optimisations MariaDB",id:"optimisations-mariadb",level:4},{value:"S\xe9curiser la base de donn\xe9es",id:"s\xe9curiser-la-base-de-donn\xe9es",level:3},{value:"Commencer \xe0 configurer",id:"commencer-\xe0-configurer",level:4},{value:"Probl\xe8me avec l&#39;\xe9change de la cl\xe9 SSH",id:"probl\xe8me-avec-l\xe9change-de-la-cl\xe9-ssh",level:4},{value:"ETL : Configuration",id:"etl--configuration",level:3},{value:"ETL: R\xe9tention de donn\xe9es",id:"etl-r\xe9tention-de-donn\xe9es",level:3},{value:"ETL : Execution",id:"etl--execution",level:3},{value:"Reconstruction des statistiques \xe0 partir des donn\xe9es historiques",id:"reconstruction-des-statistiques-\xe0-partir-des-donn\xe9es-historiques",level:4},{value:"Activer l&#39;ex\xe9cution quotidienne du script",id:"activer-lex\xe9cution-quotidienne-du-script",level:4}],k={toc:c},g="wrapper";function N(e){var{components:t}=e,p=o(e,["components"]);return(0,n.kt)(g,s(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){i(e,t,a[t])}))}return e}({},k,p),{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Ce chapitre pr\xe9sente l'architecture logicielle de l'extension ",(0,n.kt)("strong",{parentName:"p"},"Centreon MBI")," et fournit un aper\xe7u de\nl'int\xe9gration de l'extension au logiciel de supervision Centreon."),(0,n.kt)("p",null,"Ce document s'adresse aux administrateurs qui vont installer ou configurer Centreon MBI."),(0,n.kt)("p",null,"Quatre grandes \xe9tapes sont n\xe9cessaires pour installer Centreon MBI :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"V\xe9rifiez les pr\xe9requis du syst\xe8me."),(0,n.kt)("li",{parentName:"ul"},"Installez l'interface Centreon MBI dans l'application Centreon (Centreon MBI Server)."),(0,n.kt)("li",{parentName:"ul"},"Installez le serveur de reporting (Centreon MBI Reporting Server)."),(0,n.kt)("li",{parentName:"ul"},"Configurer l'extraction, la transformation et le chargement (ETL) dans l'interface MBI Centreon.")),(0,n.kt)("h2",{id:"architecture"},"Architecture"),(0,n.kt)("h3",{id:"un-serveur-de-reporting-d\xe9di\xe9"},"Un serveur de reporting d\xe9di\xe9"),(0,n.kt)("p",null,"L'architecture et ces pr\xe9requis s'appliquent aux environnements de :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"test"),(0,n.kt)("li",{parentName:"ul"},"pr\xe9-production"),(0,n.kt)("li",{parentName:"ul"},"production.")),(0,n.kt)("p",null,"Le sch\xe9ma ci-dessous met en avant les principaux composants de Centreon MBI :"),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"image",src:a(19616).Z,width:"580",height:"363"})),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"La base de monitoring n'est pas n\xe9cessairement sur le m\xeame serveur que le serveur Centreon")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"ETL")," : Processus qui extrait, transforme et charge les donn\xe9es dans la\nbase de donn\xe9es de reporting."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"CBIS")," : Ordonnanceur qui g\xe8re l'ex\xe9cution et la publication des rapports."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Base de donn\xe9es de reporting")," : Base de donn\xe9es MariaDB qui contient les donn\xe9es de reporting\net certaines donn\xe9es brutes extraites de la base de donn\xe9es de supervision.")),(0,n.kt)("h3",{id:"tableaux-des-flux-r\xe9seau"},"Tableaux des flux r\xe9seau"),(0,n.kt)("p",null,"Le tableau ci-dessous pr\xe9sente les diff\xe9rents types de flux, par d\xe9faut,\nentre le serveur BI d\xe9di\xe9, le serveur Centreon et les bases de donn\xe9es :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"Application")),(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"Source")),(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"Destination")),(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"Port")),(0,n.kt)("th",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"th"},"Protocol")))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"ETL/CBIS"),(0,n.kt)("td",{parentName:"tr",align:null},"Serveur de reporting"),(0,n.kt)("td",{parentName:"tr",align:null},"Serveur de bases de donn\xe9es Centreon"),(0,n.kt)("td",{parentName:"tr",align:null},"3306"),(0,n.kt)("td",{parentName:"tr",align:null},"TCP")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"SSH"),(0,n.kt)("td",{parentName:"tr",align:null},"Serveur de reporting"),(0,n.kt)("td",{parentName:"tr",align:null},"Serveur Centreon"),(0,n.kt)("td",{parentName:"tr",align:null},"22"),(0,n.kt)("td",{parentName:"tr",align:null},"TCP")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"CBIS"),(0,n.kt)("td",{parentName:"tr",align:null},"Serveur de reporting"),(0,n.kt)("td",{parentName:"tr",align:null},"Serveur Centreon"),(0,n.kt)("td",{parentName:"tr",align:null},"80"),(0,n.kt)("td",{parentName:"tr",align:null},"HTTP*")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"CBIS"),(0,n.kt)("td",{parentName:"tr",align:null},"Centreon"),(0,n.kt)("td",{parentName:"tr",align:null},"Serveur de reporting"),(0,n.kt)("td",{parentName:"tr",align:null},"1234"),(0,n.kt)("td",{parentName:"tr",align:null},"TCP")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Widgets"),(0,n.kt)("td",{parentName:"tr",align:null},"Serveur central Centreon"),(0,n.kt)("td",{parentName:"tr",align:null},"Serveur de reporting"),(0,n.kt)("td",{parentName:"tr",align:null},"3306"),(0,n.kt)("td",{parentName:"tr",align:null},"TCP")))),(0,n.kt)("p",null,"*",(0,n.kt)("em",{parentName:"p"},"Uniquement requis pour les rapports Host-Graph-v2 et Hostgroup-Graph-v2 qui utilisent l'API Centreon pour g\xe9n\xe9rer des graphiques.")),(0,n.kt)("h3",{id:"informations-sur-les-paquets"},"Informations sur les paquets"),(0,n.kt)("p",null,"L'installation de Centreon MBI est bas\xe9e sur deux paquets RPM :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Centreon-bi-server :")," Installe l'interface MBI int\xe9gr\xe9e \xe0 l'interface de Centreon. Le paquet est install\xe9 sur le serveur central Centreon."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"Centreon-bi-reporting-server")," : Contient tous les composants n\xe9cessaires \xe0 l'ex\xe9cution\ndu serveur de reporting (planificateur de rapports, ETL, rapports standard). Il doit \xeatre\ninstall\xe9 sur un serveur d\xe9di\xe9 aux processus de reporting.")),(0,n.kt)("p",null,"L'installation de la base de donn\xe9es doit \xeatre faite en m\xeame temps. Nous recommandons\nfortement d'installer la base MariaDB sur le serveur de reporting pour des raisons de\nperformances & d'isolation."),(0,n.kt)("h2",{id:"pr\xe9-requis"},"Pr\xe9-requis"),(0,n.kt)("h3",{id:"server-centreon-central"},"Server Centreon central"),(0,n.kt)("h4",{id:"pr\xe9requis-logiciels"},"Pr\xe9requis logiciels"),(0,n.kt)("p",null,"Voir les ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/prerequisites#logiciels"},"pr\xe9requis logiciels"),"."),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Centreon Web 23.04"),(0,n.kt)("li",{parentName:"ul"},"V\xe9rifiez que ",(0,n.kt)("inlineCode",{parentName:"li"},"date.timezone")," est correctement configur\xe9e dans le fichier\n",(0,n.kt)("inlineCode",{parentName:"li"},"/etc/php.d/50-centreon.ini")," (m\xeame que celui retourn\xe9 par la commande\n",(0,n.kt)("inlineCode",{parentName:"li"},"timedatectl status"),")"),(0,n.kt)("li",{parentName:"ul"},"Evitez l'utilisation des variables ci-dessous dans le fichier de\nconfiguration MariaDB ",(0,n.kt)("inlineCode",{parentName:"li"},"/etc/my.cnf"),". Elles interrompent l'ex\xe9cution de longues requ\xeates et peuvent arr\xeater les jobs d'ETL ou de g\xe9n\xe9ration de rapports :",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"wait_timeout"),(0,n.kt)("li",{parentName:"ul"},"interactive_timeout")))),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Utilisateur"),(0,n.kt)("th",{parentName:"tr",align:null},"Groupe"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"centreonBI (nouveau)"),(0,n.kt)("td",{parentName:"tr",align:null},"apache,centreon,centreonBI")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"apache (existant)"),(0,n.kt)("td",{parentName:"tr",align:null},"centreonBI"))))),(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Centreon Web 23.04"),(0,n.kt)("li",{parentName:"ul"},"V\xe9rifiez que ",(0,n.kt)("inlineCode",{parentName:"li"},"date.timezone")," est correctement configur\xe9e dans le fichier\n",(0,n.kt)("inlineCode",{parentName:"li"},"/etc/php.d/50-centreon.ini")," (m\xeame que celui retourn\xe9 par la commande\n",(0,n.kt)("inlineCode",{parentName:"li"},"timedatectl status"),")"),(0,n.kt)("li",{parentName:"ul"},"Evitez l'utilisation des variables ci-dessous dans le fichier de\nconfiguration MariaDB ",(0,n.kt)("inlineCode",{parentName:"li"},"/etc/my.cnf"),". Elles interrompent l'ex\xe9cution de longues requ\xeates et peuvent arr\xeater les jobs d'ETL ou de g\xe9n\xe9ration de rapports :",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"wait_timeout"),(0,n.kt)("li",{parentName:"ul"},"interactive_timeout")))),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Utilisateur"),(0,n.kt)("th",{parentName:"tr",align:null},"Groupe"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"centreonBI (nouveau)"),(0,n.kt)("td",{parentName:"tr",align:null},"apache,centreon,centreonBI")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"apache (existant)"),(0,n.kt)("td",{parentName:"tr",align:null},"centreonBI"))))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Centreon Web 23.04"),(0,n.kt)("li",{parentName:"ul"},"V\xe9rifiez que ",(0,n.kt)("inlineCode",{parentName:"li"},"date.timezone")," est correctement configur\xe9e dans le fichier\n",(0,n.kt)("inlineCode",{parentName:"li"},"/etc/php/8.1/mods-available/centreon.ini")," (m\xeame que celui retourn\xe9 par la commande\n",(0,n.kt)("inlineCode",{parentName:"li"},"timedatectl status"),")"),(0,n.kt)("li",{parentName:"ul"},"Evitez l'utilisation des variables ci dessous dans le fichier de\nconfiguration MariaDB ",(0,n.kt)("inlineCode",{parentName:"li"},"/etc/mysql/mariadb.cnf"),". Elles interrompent l'ex\xe9cution de longues requ\xeates et peuvent arr\xeater les jobs d'ETL ou de g\xe9n\xe9ration de rapports :",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"wait_timeout"),(0,n.kt)("li",{parentName:"ul"},"interactive_timeout")))),(0,n.kt)("h4",{id:"utilisateurs-et-groupes"},"Utilisateurs et groupes"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Utilisateur"),(0,n.kt)("th",{parentName:"tr",align:null},"Groupe"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"centreonBI (nouveau)"),(0,n.kt)("td",{parentName:"tr",align:null},"www-data,centreon,centreonBI")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"apache (existant)"),(0,n.kt)("td",{parentName:"tr",align:null},"centreonBI")))))),(0,n.kt)("h4",{id:"description-des-utilisateurs-umask-et-r\xe9pertoire-personnel"},"Description des utilisateurs, umask et r\xe9pertoire personnel"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Utilisateur"),(0,n.kt)("th",{parentName:"tr",align:null},"umask"),(0,n.kt)("th",{parentName:"tr",align:null},"home"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"centreonBI"),(0,n.kt)("td",{parentName:"tr",align:null},"0002"),(0,n.kt)("td",{parentName:"tr",align:null},"/home/centreonBI")))),(0,n.kt)("h3",{id:"serveur-de-reporting-d\xe9di\xe9"},"Serveur de reporting d\xe9di\xe9"),(0,n.kt)("h4",{id:"couche-mat\xe9riel"},"Couche Mat\xe9riel"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Jusqu'\xe0 500 h\xf4tes",label:"Jusqu'\xe0 500 h\xf4tes",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"\xc9l\xe9ment"),(0,n.kt)("th",{parentName:"tr",align:null},"Valeur"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"CPU"),(0,n.kt)("td",{parentName:"tr",align:null},"4 vCPU")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"RAM"),(0,n.kt)("td",{parentName:"tr",align:null},"16 Go")))),(0,n.kt)("p",null,"Votre serveur MBI doit \xeatre partitionn\xe9 de la mani\xe8re suivante :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Groupe de volumes (LVM)"),(0,n.kt)("th",{parentName:"tr",align:null},"Partition"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"),(0,n.kt)("th",{parentName:"tr",align:null},"Taille"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"/boot"),(0,n.kt)("td",{parentName:"tr",align:null},"images de boot"),(0,n.kt)("td",{parentName:"tr",align:null},"1 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"/"),(0,n.kt)("td",{parentName:"tr",align:null},"racine du syst\xe8me"),(0,n.kt)("td",{parentName:"tr",align:null},"20 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"swap"),(0,n.kt)("td",{parentName:"tr",align:null},"swap"),(0,n.kt)("td",{parentName:"tr",align:null},"4 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/log"),(0,n.kt)("td",{parentName:"tr",align:null},"contient tous les fichiers de log"),(0,n.kt)("td",{parentName:"tr",align:null},"10 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/lib/mysql"),(0,n.kt)("td",{parentName:"tr",align:null},"base de donn\xe9es"),(0,n.kt)("td",{parentName:"tr",align:null},"233 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/backup"),(0,n.kt)("td",{parentName:"tr",align:null},"r\xe9pertoire de sauvegarde"),(0,n.kt)("td",{parentName:"tr",align:null},"10 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"Espace libre (non allou\xe9)"),(0,n.kt)("td",{parentName:"tr",align:null},"5 Go"))))),(0,n.kt)(l.Z,{value:"Jusqu'\xe0 1 000 h\xf4tes",label:"Jusqu'\xe0 1 000 h\xf4tes",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"\xc9l\xe9ment"),(0,n.kt)("th",{parentName:"tr",align:null},"Valeur"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"CPU"),(0,n.kt)("td",{parentName:"tr",align:null},"4 vCPU")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"RAM"),(0,n.kt)("td",{parentName:"tr",align:null},"16 Go")))),(0,n.kt)("p",null,"Votre serveur MBI doit \xeatre partitionn\xe9 de la mani\xe8re suivante :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Groupe de volumes (LVM)"),(0,n.kt)("th",{parentName:"tr",align:null},"Partition"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"),(0,n.kt)("th",{parentName:"tr",align:null},"Taille"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"/boot"),(0,n.kt)("td",{parentName:"tr",align:null},"images de boot"),(0,n.kt)("td",{parentName:"tr",align:null},"1 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"/"),(0,n.kt)("td",{parentName:"tr",align:null},"racine du syst\xe8me"),(0,n.kt)("td",{parentName:"tr",align:null},"20 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"swap"),(0,n.kt)("td",{parentName:"tr",align:null},"swap"),(0,n.kt)("td",{parentName:"tr",align:null},"4 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/log"),(0,n.kt)("td",{parentName:"tr",align:null},"contient tous les fichiers de log"),(0,n.kt)("td",{parentName:"tr",align:null},"10 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/lib/mysql"),(0,n.kt)("td",{parentName:"tr",align:null},"base de donn\xe9es"),(0,n.kt)("td",{parentName:"tr",align:null},"465 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/backup"),(0,n.kt)("td",{parentName:"tr",align:null},"r\xe9pertoire de sauvegarde"),(0,n.kt)("td",{parentName:"tr",align:null},"10 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"Espace libre (non allou\xe9)"),(0,n.kt)("td",{parentName:"tr",align:null},"5 Go"))))),(0,n.kt)(l.Z,{value:"Jusqu'\xe0 2 500 h\xf4tes",label:"Jusqu'\xe0 2 500 h\xf4tes",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Element"),(0,n.kt)("th",{parentName:"tr",align:null},"Value"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"CPU"),(0,n.kt)("td",{parentName:"tr",align:null},"4 vCPU")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"RAM"),(0,n.kt)("td",{parentName:"tr",align:null},"24 Go")))),(0,n.kt)("p",null,"Votre serveur MBI doit \xeatre partitionn\xe9 de la mani\xe8re suivante :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Groupe de volumes (LVM)"),(0,n.kt)("th",{parentName:"tr",align:null},"Partition"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"),(0,n.kt)("th",{parentName:"tr",align:null},"Taille"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"/boot"),(0,n.kt)("td",{parentName:"tr",align:null},"images de boot"),(0,n.kt)("td",{parentName:"tr",align:null},"1 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"/"),(0,n.kt)("td",{parentName:"tr",align:null},"racine du syst\xe8me"),(0,n.kt)("td",{parentName:"tr",align:null},"20 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"swap"),(0,n.kt)("td",{parentName:"tr",align:null},"swap"),(0,n.kt)("td",{parentName:"tr",align:null},"4 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/log"),(0,n.kt)("td",{parentName:"tr",align:null},"contient tous les fichiers de log"),(0,n.kt)("td",{parentName:"tr",align:null},"10 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/lib/mysql"),(0,n.kt)("td",{parentName:"tr",align:null},"base de donn\xe9es"),(0,n.kt)("td",{parentName:"tr",align:null},"1163 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/backup"),(0,n.kt)("td",{parentName:"tr",align:null},"r\xe9pertoire de sauvegarde"),(0,n.kt)("td",{parentName:"tr",align:null},"10 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"Espace libre (non allou\xe9)"),(0,n.kt)("td",{parentName:"tr",align:null},"5 Go"))))),(0,n.kt)(l.Z,{value:"Jusqu'\xe0 5 000 h\xf4tes",label:"Jusqu'\xe0 5 000 h\xf4tes",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Element"),(0,n.kt)("th",{parentName:"tr",align:null},"Value"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"CPU"),(0,n.kt)("td",{parentName:"tr",align:null},"8 vCPU")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"RAM"),(0,n.kt)("td",{parentName:"tr",align:null},"24 Go")))),(0,n.kt)("p",null,"Votre serveur MBI doit \xeatre partitionn\xe9 de la mani\xe8re suivante :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Groupe de volumes (LVM)"),(0,n.kt)("th",{parentName:"tr",align:null},"Partition"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"),(0,n.kt)("th",{parentName:"tr",align:null},"Taille"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"/boot"),(0,n.kt)("td",{parentName:"tr",align:null},"images de boot"),(0,n.kt)("td",{parentName:"tr",align:null},"1 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"/"),(0,n.kt)("td",{parentName:"tr",align:null},"racine du syst\xe8me"),(0,n.kt)("td",{parentName:"tr",align:null},"20 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"swap"),(0,n.kt)("td",{parentName:"tr",align:null},"swap"),(0,n.kt)("td",{parentName:"tr",align:null},"4 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/log"),(0,n.kt)("td",{parentName:"tr",align:null},"contient tous les fichiers de log"),(0,n.kt)("td",{parentName:"tr",align:null},"10 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/lib/mysql"),(0,n.kt)("td",{parentName:"tr",align:null},"base de donn\xe9es"),(0,n.kt)("td",{parentName:"tr",align:null},"2326 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/backup"),(0,n.kt)("td",{parentName:"tr",align:null},"r\xe9pertoire de sauvegarde"),(0,n.kt)("td",{parentName:"tr",align:null},"10 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"Espace libre (non allou\xe9)"),(0,n.kt)("td",{parentName:"tr",align:null},"5 Go"))))),(0,n.kt)(l.Z,{value:"Jusqu'\xe0 10 000 h\xf4tes",label:"Jusqu'\xe0 10 000 h\xf4tes",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Element"),(0,n.kt)("th",{parentName:"tr",align:null},"Value"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"CPU"),(0,n.kt)("td",{parentName:"tr",align:null},"12 vCPU")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"RAM"),(0,n.kt)("td",{parentName:"tr",align:null},"32 Go")))),(0,n.kt)("p",null,"Votre serveur MBI doit \xeatre partitionn\xe9 de la mani\xe8re suivante :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Groupe de volumes (LVM)"),(0,n.kt)("th",{parentName:"tr",align:null},"Partition"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"),(0,n.kt)("th",{parentName:"tr",align:null},"Taille"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"/boot"),(0,n.kt)("td",{parentName:"tr",align:null},"images de boot"),(0,n.kt)("td",{parentName:"tr",align:null},"1 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"/"),(0,n.kt)("td",{parentName:"tr",align:null},"racine du syst\xe8me"),(0,n.kt)("td",{parentName:"tr",align:null},"20 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"swap"),(0,n.kt)("td",{parentName:"tr",align:null},"swap"),(0,n.kt)("td",{parentName:"tr",align:null},"4 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_root"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/log"),(0,n.kt)("td",{parentName:"tr",align:null},"contient tous les fichiers de log"),(0,n.kt)("td",{parentName:"tr",align:null},"10 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/lib/mysql"),(0,n.kt)("td",{parentName:"tr",align:null},"base de donn\xe9es"),(0,n.kt)("td",{parentName:"tr",align:null},"4651 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null},"/var/backup"),(0,n.kt)("td",{parentName:"tr",align:null},"r\xe9pertoire de sauvegarde"),(0,n.kt)("td",{parentName:"tr",align:null},"10 Go")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"vg_data"),(0,n.kt)("td",{parentName:"tr",align:null}),(0,n.kt)("td",{parentName:"tr",align:null},"Espace libre (non allou\xe9)"),(0,n.kt)("td",{parentName:"tr",align:null},"5 Go"))))),(0,n.kt)(l.Z,{value:"Plus de 10 000 h\xf4tes",label:"Plus de 10 000 h\xf4tes",mdxType:"TabItem"},(0,n.kt)("p",null,"Pour de grosses volum\xe9tries de donn\xe9es, contactez votre commercial Centreon."))),(0,n.kt)("p",null,"Pour contr\xf4ler l'espace libre, utilisez la commande suivante en rempla\xe7ant\n",(0,n.kt)("strong",{parentName:"p"},"vg_data")," par le nom du groupe de volumes :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"vgdisplay vg_data | grep -i free*\n")),(0,n.kt)("h4",{id:"couche-interlogiciel-et-logiciel"},"Couche Interlogiciel et logiciel"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"OS : voir la compatibilit\xe9 ",(0,n.kt)("a",{parentName:"li",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/prerequisites#syst%C3%A8me-dexploitation"},"ici")),(0,n.kt)("li",{parentName:"ul"},"SGBD : voir la compatibilit\xe9 ",(0,n.kt)("a",{parentName:"li",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/prerequisites#sgbd"},"ici")),(0,n.kt)("li",{parentName:"ul"},"Firewalld : D\xe9sactiv\xe9 (",(0,n.kt)("a",{parentName:"li",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/installation-of-a-central-server/using-packages#Configurer-ou-d%C3%A9sactiver-le-pare-feu"},"voir ici"),")"),(0,n.kt)("li",{parentName:"ul"},"SELinux : D\xe9sactiv\xe9 (",(0,n.kt)("a",{parentName:"li",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/installation-of-a-central-server/using-packages#D%C3%A9sactiver-SELinux"},"voir ici"),")")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Assurez-vous que le fuseau horaire du serveur de reporting est le m\xeame que celui du serveur central, sinon les publications de rapports \xe9choueront (lien vers le t\xe9l\xe9chargement manquant).\nLe m\xeame fuseau horaire doit \xeatre affich\xe9 avec la commande ",(0,n.kt)("inlineCode",{parentName:"p"},"timedatectl"),".\nVous pouvez changer le fuseau horaire avec cette commande :"),(0,n.kt)("pre",{parentName:"blockquote"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"timedatectl set-timezone Europe/Paris\n"))),(0,n.kt)("p",null,"Veillez \xe0 optimiser MariaDB sur votre serveur de reporting. Vous aurez besoin\nd'au moins 12GB de m\xe9moire vive afin d'utiliser le\n",(0,n.kt)("a",{target:"_blank",href:a(42960).Z},"fichier suivant"),"."),(0,n.kt)("p",null,"Assurez-vous d'avoir un dossier ",(0,n.kt)("strong",{parentName:"p"},"tmp")," dans ",(0,n.kt)("strong",{parentName:"p"},"/var/lib/mysql"),"."),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Ne d\xe9finissez pas ces optimisations MariaDB sur votre serveur de supervision.")),(0,n.kt)("p",null,"Utilisateurs et groupes :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Utilisateur"),(0,n.kt)("th",{parentName:"tr",align:null},"Groupe"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"centreonBI"),(0,n.kt)("td",{parentName:"tr",align:null},"centreonBI")))),(0,n.kt)("p",null,"Description des utilisateurs, umask et r\xe9pertoire utilisateur :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Utilisateur"),(0,n.kt)("th",{parentName:"tr",align:null},"umask"),(0,n.kt)("th",{parentName:"tr",align:null},"home"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"centreonBI"),(0,n.kt)("td",{parentName:"tr",align:null},"0002"),(0,n.kt)("td",{parentName:"tr",align:null},"/home/centreonBI")))),(0,n.kt)("h2",{id:"installer-lextension-sur-centreon"},"Installer l'extension sur Centreon"),(0,n.kt)("p",null,"Les actions list\xe9es dans ce chapitre doivent \xeatre ex\xe9cut\xe9es sur le ",(0,n.kt)("strong",{parentName:"p"},"serveur Central Centreon"),"."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Installez le d\xe9p\xf4t Business : vous pouvez le trouver sur le ",(0,n.kt)("a",{parentName:"p",href:"https://support.centreon.com/hc/fr/categories/10341239833105-D%C3%A9p%C3%B4ts"},"portail support"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Puis lancez la commande suivante :"))),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-bi-server\n"))),(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-bi-server\n"))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("p",null,"Installez ",(0,n.kt)("strong",{parentName:"p"},"gpg"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"apt install gpg\n")),(0,n.kt)("p",null,"Importez la cl\xe9 du d\xe9p\xf4t :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"wget -O- https://apt-key.centreon.com | gpg --dearmor | tee /etc/apt/trusted.gpg.d/centreon.gpg > /dev/null 2>&1\n")),(0,n.kt)("p",null,"Ajoutez le d\xe9p\xf4t externe suivant (pour Java 8):"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"wget -qO - https://adoptopenjdk.jfrog.io/adoptopenjdk/api/gpg/key/public | apt-key add -\nadd-apt-repository --yes https://adoptopenjdk.jfrog.io/adoptopenjdk/deb/\napt update\n")),(0,n.kt)("p",null,"Puis installez Centreon MBI:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"apt update && apt install centreon-bi-server\n")))),(0,n.kt)("h3",{id:"activer-lextension"},"Activer l'extension"),(0,n.kt)("p",null,"Le menu ",(0,n.kt)("strong",{parentName:"p"},"Administration > Extension > Gestionnaire")," vous permet\nd'installer les diff\xe9rentes extensions d\xe9tect\xe9es par Centreon. Cliquez sur la tuile  ",(0,n.kt)("strong",{parentName:"p"},"Centreon MBI")," pour l'installer."),(0,n.kt)("p",null,"Par la suite, t\xe9l\xe9chargez la licence envoy\xe9e par l'\xe9quipe Centreon pour pouvoir commencer \xe0 configurer les options g\xe9n\xe9rales."),(0,n.kt)("h3",{id:"configurer-lextension"},"Configurer l'extension"),(0,n.kt)("p",null,"Renseignez les valeurs suivantes dans les options g\xe9n\xe9rales de Centreon\nMBI, menu ",(0,n.kt)("strong",{parentName:"p"},"Rapports > Monitoring Business Intelligence > Param\xe8tres globaux")," :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Onglet"),(0,n.kt)("th",{parentName:"tr",align:null},"Option"),(0,n.kt)("th",{parentName:"tr",align:null},"Value"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Options de  l'ordonnanceur"),(0,n.kt)("td",{parentName:"tr",align:null},"H\xf4te de CBIS"),(0,n.kt)("td",{parentName:"tr",align:null},"Adresse IP du serveur de reporting")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Options de l'ETL"),(0,n.kt)("td",{parentName:"tr",align:null},"Une base de donn\xe9es MySQL d\xe9di\xe9e au reporting a \xe9t\xe9 mise en place"),(0,n.kt)("td",{parentName:"tr",align:null},"Oui")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Widgets de reporting*"),(0,n.kt)("td",{parentName:"tr",align:null},"Reporting MySQL database"),(0,n.kt)("td",{parentName:"tr",align:null},"Adresse IP de la base de reporting (par d\xe9faut = adresse IP du serveur de reporting)")))),(0,n.kt)("p",null,"*"," ",(0,n.kt)("em",{parentName:"p"},"Le test de connexion ne fonctionnera pas encore \xe0 ce moment de l'installation")),(0,n.kt)("h3",{id:"acc\xe8s-\xe0-la-base-de-donn\xe9es-centrale"},"Acc\xe8s \xe0 la base de donn\xe9es Centrale"),(0,n.kt)("p",null,"T\xe9l\xe9chargez la licence envoy\xe9e par l'\xe9quipe Centreon pour pouvoir commencer \xe0 configurer les options g\xe9n\xe9rales."),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Base de supervision locale au central",label:"Base de supervision locale au central",mdxType:"TabItem"},(0,n.kt)("p",null,"La base de donn\xe9es de supervision MariaDB est h\xe9berg\xe9e sur le serveur de supervision central."),(0,n.kt)("p",null,"Lancez la commande ci-dessous pour autoriser le serveur de reporting \xe0 se connecter\naux bases de donn\xe9es du serveur de supervision. Utilisez l'option suivante :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"/usr/share/centreon/www/modules/centreon-bi-server/tools/centreonMysqlRights.pl --root-password=@ROOTPWD@\n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"@ROOTPWD@")," : Mot de passe root de la base MariaDB de supervision.\nS'il n'y a pas de mot de passe pour l'utilisateur \"root\", ne sp\xe9cifiez pas l'option ",(0,n.kt)("strong",{parentName:"p"},"root-password"),".")),(0,n.kt)(l.Z,{value:"Base de supervision d\xe9port\xe9e par rapport au central",label:"Base de supervision d\xe9port\xe9e par rapport au central",mdxType:"TabItem"},(0,n.kt)("p",null,"La base de donn\xe9es de supervision MariaDB est h\xe9berg\xe9e sur un serveur d\xe9di\xe9."),(0,n.kt)("p",null,"Connectez-vous par SSH au serveur de la base de donn\xe9es, et ex\xe9cutez les commandes suivantes :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-SQL"},"CREATE USER 'centreonbi'@'$BI_ENGINE_IP$' IDENTIFIED BY 'centreonbi';\nGRANT ALL PRIVILEGES ON centreon.* TO 'centreonbi'@'$BI_ENGINE_IP$';\nGRANT ALL PRIVILEGES ON centreon_storage.* TO 'centreonbi'@'$BI_ENGINE_IP$';\n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"$BI_ENGINE_IP$")," : Adresse IP du serveur de reporting."))),(0,n.kt)("p",null,"Si vous utilisez la r\xe9plication MariaDB pour vos ",(0,n.kt)("strong",{parentName:"p"},"bases de donn\xe9es de supervision"),",\ncertaines vues sont cr\xe9\xe9es lors de l'installation de Centreon MBI.\nVous devez les exclure de la r\xe9plication en ajoutant la ligne suivante dans le\nfichier ",(0,n.kt)("strong",{parentName:"p"},"my.cnf")," du serveur esclave ou mariadb.cnf sur Debian 11."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"replicate-wild-ignore-table=centreon.mod_bi_%v01,centreon.mod_bi_%V01\n")),(0,n.kt)("p",null,"Ensuite, cr\xe9ez les vues manuellement sur le serveur esclave en lan\xe7ant la\nligne de commande suivante :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"wget https://docs.centreon.com/fr/assets/files/view_creation-948c02cd93f8867179ec47fd611426bd.sql -O /tmp/view_creation.sql\n")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"mysql centreon < /tmp/view_creation.sql\n")),(0,n.kt)("h4",{id:"configuration-sp\xe9cifique-\xe0-debian-11"},"Configuration sp\xe9cifique \xe0 Debian 11"),(0,n.kt)("p",null,"MariaDB doit \xe9couter sur toutes les interfaces au lieu d'\xe9couter sur localhost/127.0.0.1 (valeur par d\xe9faut). \xc9ditez le fichier suivant :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"/etc/mysql/mariadb.conf.d/50-server.cnf\n")),(0,n.kt)("p",null,"Donnez au param\xe8tre ",(0,n.kt)("strong",{parentName:"p"},"bind-address")," la valeur ",(0,n.kt)("strong",{parentName:"p"},"0.0.0.0")," et red\xe9marrez ",(0,n.kt)("strong",{parentName:"p"},"mariadb"),"."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart mariadb\n")),(0,n.kt)("h3",{id:"donner-des-droits-\xe0-lutilisateur-cbis"},"Donner des droits \xe0 l'utilisateur cbis"),(0,n.kt)("p",null,"Lorsque vous installez Centreon MBI, un ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/monitoring/basic-objects/contacts"},"utilisateur")," nomm\xe9 ",(0,n.kt)("strong",{parentName:"p"},"cbis")," est cr\xe9\xe9 automatiquement. Il permet au moteur de g\xe9n\xe9ration de rapports d'extraire les donn\xe9es de Centreon (en utilisant les APIs) afin de les ins\xe9rer dans le rapport. Cet utilisateur doit ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/administration/access-control-lists"},"avoir acc\xe8s \xe0 toutes les ressources supervis\xe9es par Centreon")," afin de pouvoir extraire les graphes de performance pour les rapports suivants :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Host-Graph-v2"),(0,n.kt)("li",{parentName:"ul"},"Hostgroup-Graph-v2.")),(0,n.kt)("p",null,"Pour tester la connexion entre le serveur de reporting MBI et l'API Centreon, utilisez la commande suivante pour t\xe9l\xe9charger un graphique. Remplacez les param\xe8tres du graphique et les timestamps, et remplacez XXXXXXXXX par le jeton d'autologin de l'utilisateur ",(0,n.kt)("strong",{parentName:"p"},"cbis"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curl -XGET 'https://IP_CENTRAL/centreon/include/views/graphs/generateGraphs/generateImage.php?akey=XXXXXXXXX&username=CBIS&hostname=<nom_h\xf4te>&service=<description-service>&start=<date_d\xe9but>&end=<date_fin>' --output /tmp/image.png\n\n")),(0,n.kt)("p",null,"Exemple :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curl -XGET 'https://10.1.1.1/centreon/include/views/graphs/generateGraphs/generateImage.php?akey=otmw3n1hu03bvt9e0caphuf50ph8sdthcsk8ofdk&username=CBIS&hostname=my-poller&service=Cpu&start=1623016800&end=1623621600' --output /tmp/image.png\n")),(0,n.kt)("p",null,"Le r\xe9sultat devrait ressembler au code ci-dessous, et l'image du graphe d\xe9sir\xe9 doit avoir \xe9t\xe9 t\xe9l\xe9charg\xe9e dans le r\xe9pertoire ",(0,n.kt)("inlineCode",{parentName:"p"},"/tmp")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100 18311  100 18311    0     0  30569      0 --:--:-- --:--:-- --:--:-- 30569\n")),(0,n.kt)("h2",{id:"installer-le-serveur-de-reporting"},"Installer le serveur de reporting"),(0,n.kt)("h3",{id:"installer-les-paquets"},"Installer les paquets"),(0,n.kt)("p",null,"Vous devez disposer des informations suivantes avant de proc\xe9der au\nprocessus d'installation :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"IP/DNS de la base de donn\xe9es de supervision"),(0,n.kt)("li",{parentName:"ul"},"IP/DNS de l'interface web Centreon"),(0,n.kt)("li",{parentName:"ul"},"IP/DNS de la base de donn\xe9es de reporting (localhost fortement recommand\xe9)"),(0,n.kt)("li",{parentName:"ul"},"Acc\xe8s (utilisateur/mot de passe) \xe0 la base de donn\xe9es de reporting"),(0,n.kt)("li",{parentName:"ul"},"D\xe9finir puis r\xe9cup\xe9rer le mot de passe ssh de l'utilisateur centreonBI, sur le serveur Central (pour la mise \xe0 disposition des rapports g\xe9n\xe9r\xe9s sur l'interface)")),(0,n.kt)("h4",{id:"proc\xe9dure"},"Proc\xe9dure"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Installez le d\xe9p\xf4t Centreon :")),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf config-manager --add-repo https://packages.centreon.com/rpm-standard/23.04/el8/centreon-23.04.repo\ndnf clean all --enablerepo=*\ndnf update\n"))),(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf config-manager --add-repo https://packages.centreon.com/rpm-standard/23.04/el9/centreon-23.04.repo\ndnf clean all --enablerepo=*\ndnf update\n"))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},'echo "deb https://packages.centreon.com/apt-standard-23.04-stable/ $(lsb_release -sc) main" | tee /etc/apt/sources.list.d/centreon.list\necho "deb https://packages.centreon.com/apt-plugins-stable/ $(lsb_release -sc) main" | tee /etc/apt/sources.list.d/centreon-plugins.list\n')),(0,n.kt)("p",null,"Ensuite, importez la cl\xe9 du d\xe9p\xf4t :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"wget -O- https://apt-key.centreon.com | gpg --dearmor | tee /etc/apt/trusted.gpg.d/centreon.gpg > /dev/null 2>&1\napt update\n")))),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Installez le d\xe9p\xf4t Business. Vous pouvez le trouver sur le ",(0,n.kt)("a",{parentName:"p",href:"https://support.centreon.com/hc/fr/categories/10341239833105-D%C3%A9p%C3%B4ts"},"portail du support"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Assurez-vous qu'une version de Java 17 (ou 18) est install\xe9e."),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Pour v\xe9rifier quelle version de Java est install\xe9e, entrez la commande suivante :")),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"java -version\n")),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Pour une mise \xe0 jour de Java en version 17 (ou 18), allez sur la ",(0,n.kt)("a",{parentName:"p",href:"https://www.oracle.com/java/technologies/downloads/#java17"},"page officielle de t\xe9l\xe9chargement d'Oracle"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Si plusieurs versions de Java sont install\xe9es, vous devez activer la bonne version. Affichez les versions install\xe9es avec la commande suivante puis s\xe9lectionnez la version 17 (ou 18) :"))),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"sudo update-alternatives --config java\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Installez le d\xe9p\xf4t MariaDB :"))),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},'curl -LsS https://r.mariadb.com/downloads/mariadb_repo_setup | sudo bash -s -- --os-type=rhel --os-version=8 --mariadb-server-version="mariadb-10.5"\n'))),(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},'curl -LsS https://r.mariadb.com/downloads/mariadb_repo_setup | sudo bash -s -- --os-type=rhel --os-version=9 --mariadb-server-version="mariadb-10.5"\n'))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},'curl -LsS https://r.mariadb.com/downloads/mariadb_repo_setup | sudo bash -s -- --os-type=debian --os-version=11 --mariadb-server-version="mariadb-10.5"\n')))),(0,n.kt)("ol",{start:5},(0,n.kt)("li",{parentName:"ol"},"Puis lancez la commande suivante:")),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"RHEL 8",label:"RHEL 8",mdxType:"TabItem"},(0,n.kt)("p",null,"Installez le d\xe9p\xf4t ",(0,n.kt)("strong",{parentName:"p"},"epel")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm\n")),(0,n.kt)("p",null,"Activer les d\xe9p\xf4ts codeready-builder :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"subscription-manager repos --enable codeready-builder-for-rhel-8-x86_64-rpms\n")),(0,n.kt)("p",null,"Puis lancer l'installation :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-bi-reporting-server MariaDB-server MariaDB-client\n")),(0,n.kt)("p",null,"Dans le cas d'une installation bas\xe9e sur une distribution vierge, installez la\ncl\xe9 GPG :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"cd /etc/pki/rpm-gpg/\nwget hhttps://yum-gpg.centreon.com/RPM-GPG-KEY-CES\n"))),(0,n.kt)(l.Z,{value:"Oracle Linux 8",label:"Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("p",null,"Installez le d\xe9p\xf4t ",(0,n.kt)("strong",{parentName:"p"},"epel")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm\n")),(0,n.kt)("p",null,"Activer les d\xe9p\xf4ts codeready-builder :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf config-manager --set-enabled ol8_codeready_builder\n")),(0,n.kt)("p",null,"Puis lancer l'installation :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-bi-reporting-server MariaDB-server MariaDB-client\n")),(0,n.kt)("p",null,"Dans le cas d'une installation bas\xe9e sur une distribution vierge, installez la\ncl\xe9 GPG :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"cd /etc/pki/rpm-gpg/\nwget hhttps://yum-gpg.centreon.com/RPM-GPG-KEY-CES\n"))),(0,n.kt)(l.Z,{value:"Alma 8",label:"Alma 8",mdxType:"TabItem"},(0,n.kt)("p",null,"Installez le d\xe9p\xf4t ",(0,n.kt)("strong",{parentName:"p"},"epel")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm\n")),(0,n.kt)("p",null,"Activer les d\xe9p\xf4ts powertools :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf config-manager --set-enabled 'powertools'\n")),(0,n.kt)("p",null,"Puis lancer l'installation :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-bi-reporting-server MariaDB-server MariaDB-client\n")),(0,n.kt)("p",null,"Dans le cas d'une installation bas\xe9e sur une distribution vierge, installez la\ncl\xe9 GPG :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"cd /etc/pki/rpm-gpg/\nwget hhttps://yum-gpg.centreon.com/RPM-GPG-KEY-CES\n"))),(0,n.kt)(l.Z,{value:"RHEL 9",label:"RHEL 9",mdxType:"TabItem"},(0,n.kt)("p",null,"Installez le d\xe9p\xf4t ",(0,n.kt)("strong",{parentName:"p"},"epel")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm\n")),(0,n.kt)("p",null,"Activer les d\xe9p\xf4ts codeready-builder :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"subscription-manager repos --enable codeready-builder-for-rhel-9-x86_64-rpms\n")),(0,n.kt)("p",null,"Puis lancer l'installation :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-bi-reporting-server MariaDB-server MariaDB-client\n")),(0,n.kt)("p",null,"Dans le cas d'une installation bas\xe9e sur une distribution vierge, installez la\ncl\xe9 GPG :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"cd /etc/pki/rpm-gpg/\nwget hhttps://yum-gpg.centreon.com/RPM-GPG-KEY-CES\n"))),(0,n.kt)(l.Z,{value:"Oracle Linux 9",label:"Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("p",null,"Installez le d\xe9p\xf4t ",(0,n.kt)("strong",{parentName:"p"},"epel")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm\n")),(0,n.kt)("p",null,"Activer les d\xe9p\xf4ts codeready-builder :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf config-manager --set-enabled ol9_codeready_builder\n")),(0,n.kt)("p",null,"Puis lancer l'installation :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-bi-reporting-server MariaDB-server MariaDB-client\n")),(0,n.kt)("p",null,"Dans le cas d'une installation bas\xe9e sur une distribution vierge, installez la\ncl\xe9 GPG :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"cd /etc/pki/rpm-gpg/\nwget hhttps://yum-gpg.centreon.com/RPM-GPG-KEY-CES\n"))),(0,n.kt)(l.Z,{value:"Alma 9",label:"Alma 9",mdxType:"TabItem"},(0,n.kt)("p",null,"Installez le d\xe9p\xf4t ",(0,n.kt)("strong",{parentName:"p"},"epel")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm\n")),(0,n.kt)("p",null,"Ex\xe9cutez la commande suivante :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf config-manager --set-enabled 'crb' \n")),(0,n.kt)("p",null,"Puis lancer l'installation :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-bi-reporting-server MariaDB-server MariaDB-client\n")),(0,n.kt)("p",null,"Dans le cas d'une installation bas\xe9e sur une distribution vierge, installez la\ncl\xe9 GPG :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"cd /etc/pki/rpm-gpg/\nwget hhttps://yum-gpg.centreon.com/RPM-GPG-KEY-CES\n"))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("p",null,"Installez le d\xe9p\xf4t Centreon :\n\ufffc\n\ufffc",(0,n.kt)("inlineCode",{parentName:"p"},'shell\n\ufffcecho "deb https://packages.centreon.com/apt-standard-23.04-stable/ $(lsb_release -sc) main" | tee /etc/apt/sources.list.d/centreon.list\n\ufffc')),(0,n.kt)("p",null,"Installez les paquets pr\xe9requis :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"apt install lsb-release ca-certificates apt-transport-https software-properties-common wget gnupg2\n")),(0,n.kt)("p",null,"Ajouter le d\xe9p\xf4t externe suivant (pour Java 8):"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"wget -qO - https://adoptopenjdk.jfrog.io/adoptopenjdk/api/gpg/key/public | apt-key add -\nadd-apt-repository --yes https://adoptopenjdk.jfrog.io/adoptopenjdk/deb/\napt update\n")),(0,n.kt)("p",null,"Dans le cas d'une installation bas\xe9e sur une distribution vierge, installez la\ncl\xe9 GPG :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"wget -O- https://apt-key.centreon.com | gpg --dearmor | tee /etc/apt/trusted.gpg.d/centreon.gpg > /dev/null 2>&1\n")),(0,n.kt)("p",null,"Puis lancer l'installation :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"apt update\napt install centreon-bi-reporting-server mariadb-server mariadb-client\n")))),(0,n.kt)("p",null,"Activez le service ",(0,n.kt)("strong",{parentName:"p"},"cbis")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl enable cbis\n")),(0,n.kt)("p",null,"D\xe9marrez et activez ",(0,n.kt)("strong",{parentName:"p"},"gorgoned"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl start gorgoned && systemctl enable gorgoned\n")),(0,n.kt)("h3",{id:"configurer-le-serveur-de-reporting"},"Configurer le serveur de reporting"),(0,n.kt)("h4",{id:"optimisations-mariadb"},"Optimisations MariaDB"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,n.kt)("p",null,"Assurez vous que ",(0,n.kt)("a",{target:"_blank",href:a(42960).Z},"le fichier")," de configuration\noptimis\xe9 fourni dans les pr\xe9-requis est bien pr\xe9sent dans ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/my.cnf.d/"),", puis red\xe9marrez\nle service MariaDB :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart mariadb\n")),(0,n.kt)("p",null,"Il est n\xe9cessaire de modifier la limitation ",(0,n.kt)("strong",{parentName:"p"},"LimitNOFILE"),". Changer cette\noption dans ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/my.cnf")," NE fonctionnera PAS."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},'mkdir -p  /etc/systemd/system/mariadb.service.d/\necho -ne "[Service]\\nLimitNOFILE=32000\\n" | tee /etc/systemd/system/mariadb.service.d/limits.conf\nsystemctl daemon-reload\nsystemctl restart mariadb\n')),(0,n.kt)("p",null,"Si le service MariaDB \xe9choue lors du d\xe9marrage, supprimer les fichiers\n",(0,n.kt)("em",{parentName:"p"},"ib_logfile")," (MariaDB doit absolument \xeatre stopp\xe9) puis red\xe9marrer \xe0\nnouveau MariaDB:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"rm -f /var/lib/mysql/ib_logfile*\nsystemctl start mariadb\n")),(0,n.kt)("p",null,"Si vous utilisez un fichier de socket sp\xe9cifique pour MariaDB, modifiez le\nfichier ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/my.cnf")," et dans la section ","[client]",", ajoutez :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"socket=$PATH_TO_SOCKET$\n"))),(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,n.kt)("p",null,"Assurez vous que ",(0,n.kt)("a",{target:"_blank",href:a(42960).Z},"le fichier")," de configuration\noptimis\xe9 fourni dans les pr\xe9-requis est bien pr\xe9sent dans ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/my.cnf.d/"),", puis red\xe9marrez\nle service MariaDB :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart mariadb\n")),(0,n.kt)("p",null,"Il est n\xe9cessaire de modifier la limitation ",(0,n.kt)("strong",{parentName:"p"},"LimitNOFILE"),". Changer cette\noption dans ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/my.cnf")," NE fonctionnera PAS."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},'mkdir -p  /etc/systemd/system/mariadb.service.d/\necho -ne "[Service]\\nLimitNOFILE=32000\\n" | tee /etc/systemd/system/mariadb.service.d/limits.conf\nsystemctl daemon-reload\nsystemctl restart mariadb\n')),(0,n.kt)("p",null,"Si le service MariaDB \xe9choue lors du d\xe9marrage, supprimer les fichiers\n",(0,n.kt)("em",{parentName:"p"},"ib_logfile")," (MariaDB doit absolument \xeatre stopp\xe9) puis red\xe9marrer \xe0\nnouveau MariaDB:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"rm -f /var/lib/mysql/ib_logfile*\nsystemctl start mariadb\n")),(0,n.kt)("p",null,"Si vous utilisez un fichier de socket sp\xe9cifique pour MariaDB, modifiez le\nfichier ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/my.cnf")," et dans la section ","[client]",", ajoutez :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"socket=$PATH_TO_SOCKET$\n"))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("p",null,"Assurez vous que ",(0,n.kt)("a",{target:"_blank",href:a(42960).Z},"le fichier")," de configuration\noptimis\xe9 fourni dans les pr\xe9-requis est bien pr\xe9sent dans ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/mysql/mariadb.conf.d/"),"."),(0,n.kt)("p",null,"Renommez le fichier en ",(0,n.kt)("inlineCode",{parentName:"p"},"80-centreon.cnf")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"mv centreon.cnf 80-centreon.cnf\n")),(0,n.kt)("p",null,"MariaDB doit \xe9couter toutes les interfaces au lieu de localhost/127.0.0.1, qui est la valeur par d\xe9faut.\n\xc9ditez le fichier suivant :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"/etc/mysql/mariadb.conf.d/50-server.cnf\n")),(0,n.kt)("p",null,"D\xe9finissez le param\xe8tre ",(0,n.kt)("strong",{parentName:"p"},"bind-address")," \xe0 ",(0,n.kt)("strong",{parentName:"p"},"0.0.0.0")," et red\xe9marrez mariadb."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart mariadb\n")),(0,n.kt)("p",null,"Il est n\xe9cessaire de modifier la limitation ",(0,n.kt)("strong",{parentName:"p"},"LimitNOFILE"),". Changer cette\noption dans ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/mysql/mariadb.cnf")," ne fonctionnera pas."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},'mkdir -p  /etc/systemd/system/mariadb.service.d/\necho -ne "[Service]\\nLimitNOFILE=32000\\n" | tee /etc/systemd/system/mariadb.service.d/limits.conf\nsystemctl daemon-reload\nsystemctl restart mariadb\n')),(0,n.kt)("p",null,"Si le service MariaDB \xe9choue lors du d\xe9marrage, supprimer les fichiers\n",(0,n.kt)("em",{parentName:"p"},"ib_logfile")," (MariaDB doit absolument \xeatre stopp\xe9) puis red\xe9marrer \xe0\nnouveau MariaDB:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"rm -f /var/lib/mysql/ib_logfile*\nsystemctl start mariadb\n")),(0,n.kt)("p",null,"Si vous utilisez un fichier de socket sp\xe9cifique pour MariaDB, modifiez le\nfichier ",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/mysql/mariadb.cnf")," et dans la section ","[client]",", ajoutez :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"socket=$PATH_TO_SOCKET$\n")))),(0,n.kt)("h3",{id:"s\xe9curiser-la-base-de-donn\xe9es"},"S\xe9curiser la base de donn\xe9es"),(0,n.kt)("p",null,"Depuis MariaDB 10.5, il est obligatoire de s\xe9curiser l'acc\xe8s root de la base de donn\xe9es avant d'installer Centreon.\nSi vous utilisez une base de donn\xe9es locale, ex\xe9cutez la commande suivante sur le serveur central, sinon sur le serveur de base de donn\xe9es :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"mysql_secure_installation\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"R\xe9pondez ",(0,n.kt)("strong",{parentName:"li"},"oui"),' \xe0 toutes les questions, sauf \xe0 "Disallow root login remotely?"'),(0,n.kt)("li",{parentName:"ul"},"Il est obligatoire de d\xe9finir un mot de passe pour l'utilisateur ",(0,n.kt)("strong",{parentName:"li"},"root")," de la base de donn\xe9es. Vous aurez besoin de ce mot de passe pendant l'",(0,n.kt)("a",{parentName:"li",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/web-and-post-installation"},"installation web"),".")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Pour plus d'informations, veuillez consulter la ",(0,n.kt)("a",{parentName:"p",href:"https://mariadb.com/kb/en/mysql_secure_installation/"},"documentation officielle de MariaDB"),".")),(0,n.kt)("h4",{id:"commencer-\xe0-configurer"},"Commencer \xe0 configurer"),(0,n.kt)("p",null,"V\xe9rifiez que le MariaDB de reporting est bien d\xe9marr\xe9 puis lancez les\ncommandes ci dessous et r\xe9pondez aux questions:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"/usr/share/centreon-bi/config/install.sh\n")),(0,n.kt)("p",null,"Le script g\xe8re l'\xe9change de cl\xe9s SSH entre le serveur de supervision et le serveur de reporting, et configure la r\xe8gle de publication SFTP par d\xe9faut\nafin de publier les rapports sur l'interface web Centreon. Enfin, il active la sauvegarde et d\xe9marre le service CBIS."),(0,n.kt)("p",null,"Une fois l'installation termin\xe9e, poursuivez au chapitre suivant pour configurer l'ETL."),(0,n.kt)("h4",{id:"probl\xe8me-avec-l\xe9change-de-la-cl\xe9-ssh"},"Probl\xe8me avec l'\xe9change de la cl\xe9 SSH"),(0,n.kt)("p",null,"Dans quelques cas, l'\xe9change de cl\xe9s SSH \xe9choue.\nAfin de r\xe9soudre le probl\xe8me, proc\xe9dez manuellement comme suit :"),(0,n.kt)("p",null,"Connectez-vous avec l'utilisateur ",(0,n.kt)("inlineCode",{parentName:"p"},"centreonBI")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"su - centreonBI\n")),(0,n.kt)("p",null,"Ensuite, g\xe9n\xe9rez une cl\xe9 SSH :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'ssh-keygen -t ed25519 -a 100 -f ~/.ssh/id_ed25519 -P "" -q\n')),(0,n.kt)("p",null,"Et affichez la cl\xe9 publique g\xe9n\xe9r\xe9e (afin de l'autoriser ensuite sur Centreon) :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"cat /home/centreonBI/.ssh/id_ed25519.pub\n")),(0,n.kt)("p",null,"Maintenant, ",(0,n.kt)("strong",{parentName:"p"},"sur le serveur de supervision")," :"),(0,n.kt)("p",null,"Cr\xe9ez un dossier ",(0,n.kt)("inlineCode",{parentName:"p"},".ssh")," dont ",(0,n.kt)("inlineCode",{parentName:"p"},"centreonBI")," sera propri\xe9taire, restreingez les droits sur ce fichier et collez dans le fichier ",(0,n.kt)("inlineCode",{parentName:"p"},"authorized_keys")," le contenu de sa cl\xe9 publique sur le serveur de reporting (affich\xe9e pr\xe9c\xe9demment) :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},'mkdir -p /home/centreonBI/.ssh/ && chown centreonBI: /home/centreonBI/.ssh/ && chmod 700 /home/centreonBI/.ssh/ && echo "@contenu de la cl\xe9 publique@" > /home/centreonBI/.ssh/authorized_keys\n')),(0,n.kt)("p",null,"L'\xe9change de cl\xe9s doit enfin \xeatre valid\xe9 par une premi\xe8re connexion qui acceptera la signature du serveur SSH.\nEn tant que l'utilisateur ",(0,n.kt)("inlineCode",{parentName:"p"},"centreonBI")," ",(0,n.kt)("strong",{parentName:"p"},"depuis le serveur de reporting")," :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"ssh centreonBI@@MONITORING_SERVER@\n")),(0,n.kt)("p",null,"Vous pouvez maintenant quitter la session ",(0,n.kt)("inlineCode",{parentName:"p"},"centreonBI")," avec ",(0,n.kt)("inlineCode",{parentName:"p"},"exit")," ou ",(0,n.kt)("inlineCode",{parentName:"p"},"Ctrl-D"),"."),(0,n.kt)("p",null,"Pour continuer, relancez le script d'installation (",(0,n.kt)("inlineCode",{parentName:"p"},"/usr/share/centreon-bi/config/install.sh"),") comme ci-dessus et r\xe9pondez ",(0,n.kt)("strong",{parentName:"p"},"Oui")," lorsqu'on vous demande de proc\xe9der \xe0 l'\xe9change de cl\xe9s SSH.\nVous aurez une erreur lors de la cr\xe9ation de l'USER car il existe d\xe9j\xe0. Ce n'est pas une \xe9tape bloquante."),(0,n.kt)("h3",{id:"etl--configuration"},"ETL : Configuration"),(0,n.kt)("p",null,"Centreon MBI int\xe8gre un ETL qui permet de :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Synchroniser les donn\xe9es brutes de la supervision vers le serveur de\nreporting"),(0,n.kt)("li",{parentName:"ul"},"Alimenter les bases de donn\xe9es du serveur de reporting avec les\ndonn\xe9es statistiques"),(0,n.kt)("li",{parentName:"ul"},"Contr\xf4ler la r\xe9tention des donn\xe9es sur le serveur de reporting")),(0,n.kt)("p",null,"Avant de passer aux \xe9tapes suivantes, il est n\xe9cessaire de lire le chapitre des ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/reporting/concepts#bonnes-pratiques-de-supervision"},"bonnes pratiques")," afin de\nvous assurer que la configuration des objets dans Centreon (groupes, cat\xe9gories...) est conforme aux attentes de Centreon MBI."),(0,n.kt)("p",null,"Dans le menu ",(0,n.kt)("inlineCode",{parentName:"p"},"Rapports > Monitoring Business Intelligence > Options g\xe9n\xe9rales > Options de l'ETL"),", sp\xe9cifiez les options\nsuivantes :"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Option"),(0,n.kt)("th",{parentName:"tr",align:null},"Valeurs"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"Options g\xe9n\xe9rales")),(0,n.kt)("td",{parentName:"tr",align:null})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Une base de donn\xe9es MariaDB d\xe9di\xe9e au reporting a \xe9t\xe9 mise en place."),(0,n.kt)("td",{parentName:"tr",align:null},"Oui. Vous devez avoir un serveur de reporting d\xe9di\xe9.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Espace de stockage des fichiers temporaires sur le serveur de reporting *"),(0,n.kt)("td",{parentName:"tr",align:null},"Dossier sur le serveur de reporting dans lequel les dumps de donn\xe9es seront positionn\xe9s")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Type de statistiques \xe0 traiter"),(0,n.kt)("td",{parentName:"tr",align:null},"S\xe9lectionnez \xab Disponibilit\xe9 uniquement \xbb si vous utilisez uniquement les rapports de disponibilit\xe9.  S\xe9lectionnez \xab Performance et capacit\xe9 uniquement\xbb si vous souhaitez utiliser uniquement les rapports de capacit\xe9 et de performance. S\xe9lectionnez \xabTous\xbb afin de calculer les statistiques pour les deux types de rapports.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Activer le stockage des tables temporaires en m\xe9moire (uniquement si la m\xe9moire physique allou\xe9e au serveur de reporting est suffisante)"),(0,n.kt)("td",{parentName:"tr",align:null},"Activ\xe9 uniquement si votre configuration MariaDB et la m\xe9moire physique allou\xe9e au serveur de reporting le permet.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"S\xe9lection du p\xe9rim\xe8tre du reporting")),(0,n.kt)("td",{parentName:"tr",align:null})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Groupes d'h\xf4tes"),(0,n.kt)("td",{parentName:"tr",align:null},"S\xe9lectionnez les groupes d\u2019h\xf4tes pour lesquels vous souhaitez conserver les statistiques.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Cat\xe9gories d'h\xf4tes"),(0,n.kt)("td",{parentName:"tr",align:null},"S\xe9lectionnez les cat\xe9gories d\u2019h\xf4tes pour lesquels vous souhaitez conserver les statistiques.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Cat\xe9gories de services"),(0,n.kt)("td",{parentName:"tr",align:null},"S\xe9lectionnez les cat\xe9gories de services pour lesquels vous souhaitez conserver les statistiques.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"Calcul des donn\xe9es de disponibilit\xe9")),(0,n.kt)("td",{parentName:"tr",align:null})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"S\xe9lectionner les plages de services pour le calcul des statistiques de disponibilit\xe9"),(0,n.kt)("td",{parentName:"tr",align:null},"Plages horaires (time periods) pour lesquelles les calculs de disponibilit\xe9 des h\xf4tes et des services sont r\xe9alis\xe9es")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"Calcul des donn\xe9es de performance et de capacit\xe9")),(0,n.kt)("td",{parentName:"tr",align:null})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Granularit\xe9 des donn\xe9es statistiques \xe0 calculer"),(0,n.kt)("td",{parentName:"tr",align:null},"S\xe9lectionnez le ou les niveaux de granularit\xe9 pour le calcul des donn\xe9es de performance (1)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"S\xe9lectionner les plages de services pour le calcul des statistiques de performance"),(0,n.kt)("td",{parentName:"tr",align:null},"Plages horaires sur les jours de la semaine pris en compte dans le calcul des donn\xe9es de capacit\xe9 et de performance")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"Capacity statistic aggregated by month")),(0,n.kt)("td",{parentName:"tr",align:null})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"S\xe9lectionne la plage de service 24h/24, 7j/7 pour le calcul des statistiques mensuelles de capacit\xe9"),(0,n.kt)("td",{parentName:"tr",align:null},"S\xe9lectionnez la plage horaire 24x7.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"S\xe9lectionner les cat\xe9gories de services li\xe9es aux indicateurs de capacit\xe9"),(0,n.kt)("td",{parentName:"tr",align:null},"S\xe9lectionnez les cat\xe9gories de services ayant \xe9t\xe9 rattach\xe9s \xe0 des services de type capacit\xe9")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Exclure les m\xe9triques qui ne renvoient pas une indication d'utilisation des espaces de stockage"),(0,n.kt)("td",{parentName:"tr",align:null},"Concerne uniquement les m\xe9triques li\xe9es aux services qui renvoient une information de capacit\xe9. S\xe9lectionnez uniquement les m\xe9triques qui donnent une valeur maximale ou une valeur totale de capacit\xe9 et non une valeur d\u2019utilisation. (Par exemple, la m\xe9trique \u201c size \u201d return\xe9e par le plugin check_centreon_snmp_remote_storage \xbb)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"Param\xe8tres pour le calcul des centiles")),(0,n.kt)("td",{parentName:"tr",align:null})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Calculating centile aggregation by"),(0,n.kt)("td",{parentName:"tr",align:null},"S\xe9lectionnez la granularit\xe9 des calculs. Le rapport de trafic fourni en standard avec BI 2.1 utilise les donn\xe9es au Mois.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"S\xe9lectionner les cat\xe9gories de services sur lesquelles aggr\xe9ger les donn\xe9es"),(0,n.kt)("td",{parentName:"tr",align:null},"S\xe9lectionnez uniquement les cat\xe9gories de services pertinentes (Ex: Traffic)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Premier jour de la semaine"),(0,n.kt)("td",{parentName:"tr",align:null},"S\xe9lectionnez le premier jour \xe0 consid\xe9rer pour les statistiques \xe0 la semaine")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Cr\xe9er les combinaisons centile-plage horaire qui couvrent vos besoins (Format du centile : 00.0000)"),(0,n.kt)("td",{parentName:"tr",align:null},"Cr\xe9ez des combinaisons centile/plage horaire sur lesquels les statistiques seront effectu\xe9es")))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"(1)")," Les rapports n\xe9cessitant une granularit\xe9 des donn\xe9es \xe0 l'heure sont list\xe9s ci-dessous.\nSi vous ne souhaitez pas utiliser ces rapports,d\xe9sactivez le calcul des statistiques \xe0 l'heure:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Hostgroup-Host-details-1")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Host-detail-v2")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Hostgroup-traffic-Average-Usage-By-Interface")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Hostgroup-traffic-by-Interface-And-Bandwith-Ranges"))),(0,n.kt)("h3",{id:"etl-r\xe9tention-de-donn\xe9es"},"ETL: R\xe9tention de donn\xe9es"),(0,n.kt)("p",null,'Le serveur de reporting contient des tables de statistiques sp\xe9cifiques \xe0 Centreon MBI dans la base de donn\xe9es "centreon_storage".\nL\'espace de stockage utilis\xe9 par ces tables augmente chaque jour. Il est possible de contr\xf4ler la taille de ces tables en d\xe9finissant\ndes r\xe8gles de r\xe9tention des donn\xe9es.'),(0,n.kt)("p",null,"Sous ",(0,n.kt)("strong",{parentName:"p"},"Rapports > Monitoring Business Intelligence > Options G\xe9n\xe9rales > Options de r\xe9tention des donn\xe9es"),",\nla r\xe9tention des donn\xe9es peut \xeatre g\xe9r\xe9e par :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Type de donn\xe9es (disponibilit\xe9, performance)."),(0,n.kt)("li",{parentName:"ul"},"Granularit\xe9 des donn\xe9es (donn\xe9es brutes, valeurs horaires, quotidiennes ou mensuelles).")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Avant d'activer les options de r\xe9tention de donn\xe9es, v\xe9rifiez que le moteur de reporting\nutilise un serveur MariaDB d\xe9di\xe9, et que l'option correspondante est r\xe9gl\xe9e sur\n",(0,n.kt)("strong",{parentName:"p"},"Oui")," dans le menu ",(0,n.kt)("strong",{parentName:"p"},"Reporting > Business Intelligence > Options g\xe9n\xe9rales Options ETL"),".")),(0,n.kt)("p",null,"Activez la gestion de la r\xe9tention des donn\xe9es en s\xe9lectionnant ",(0,n.kt)("strong",{parentName:"p"},"Oui"),", puis d\xe9finissez les options de la configuration (exemple ci-dessous)."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"image",src:a(97720).Z,width:"1352",height:"558"})),(0,n.kt)("p",null,"Pour activer la purge automatique des anciennes donn\xe9es, modifiez le fichier cron\n",(0,n.kt)("strong",{parentName:"p"},"/etc/cron.d/centreon-bi-purge")," sur le serveur de reporting, puis d\xe9commentez la ligne suivante :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"#0 20 * * * root @CENTREON_BI_HOME@/*etl*/dataRetentionManager.pl >> @CENTREON_BI_LOG@/dataRetentionManager.log 2>&1\n")),(0,n.kt)("p",null,"\xc9vitez les p\xe9riodes pr\xe9vues pour les calculs statistiques avec Centreon MBI ETL et les g\xe9n\xe9rations de rapports."),(0,n.kt)("p",null,"Vous pouvez ex\xe9cuter ce cron quotidiennement ou hebdomadairement, en fonction du temps d'ex\xe9cution du batch et de la charge g\xe9n\xe9r\xe9e sur le serveur."),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8 / RHEL 7 / CentOS 7",label:"Alma / RHEL / Oracle Linux 8 / RHEL 7 / CentOS 7",mdxType:"TabItem"},(0,n.kt)("p",null,"Red\xe9marrez le service cron :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart crond\n"))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("p",null,"Red\xe9marrez le service cron :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart cron\n")))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"BONNES PRATIQUES")," : S\xe9lectionnez diff\xe9rentes p\xe9riodes de r\xe9tention en fonction de la granularit\xe9 des donn\xe9es statistiques:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Les valeurs agr\xe9g\xe9es par heure sont utilis\xe9es pour analyser une m\xe9trique sur une courte p\xe9riode, elles prennent\nbeaucoup d'espace sur le disque. Vous n'aurez peut-\xeatre pas besoin de conserver ces statistiques plus de deux ou trois mois."),(0,n.kt)("li",{parentName:"ul"},"Au-del\xe0 de cinq ou six mois, vous n'aurez peut-\xeatre besoin que de visualiser la tendance pour lesstatistiques de disponibilit\xe9 ou de performance.\nVous pourriez alors conserver lesdonn\xe9es agr\xe9g\xe9es quotidiennes pendant un maximum de six mois, par exemple, etconfigurer la conservation des donn\xe9es\nagr\xe9g\xe9es mensuelles pour une p\xe9riode de plusieurs dizaines de mois.")),(0,n.kt)("p",null,"Veuillez passer \xe0 la section suivante pour continuer l'installation."),(0,n.kt)("h3",{id:"etl--execution"},"ETL : Execution"),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Avant de continuer, assurez-vous que vous avez install\xe9 le fichier de configuration MariaDB comme indiqu\xe9 ci-dessus dans les pr\xe9requis.\nConfigurez et activez la r\xe9tention des donn\xe9es afin que seules les donn\xe9es requises soient import\xe9es et calcul\xe9es.")),(0,n.kt)("h4",{id:"reconstruction-des-statistiques-\xe0-partir-des-donn\xe9es-historiques"},"Reconstruction des statistiques \xe0 partir des donn\xe9es historiques"),(0,n.kt)("p",null,"Ex\xe9cutez la commande suivante sur le serveur de reporting. Celle-ci va :"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Supprimer toutes les donn\xe9es existantes du serveur de reporting."),(0,n.kt)("li",{parentName:"ul"},"Importer les donn\xe9es de supervision brutes du serveur de supervision vers le serveur de reporting (en fonction des param\xe8tres de r\xe9tention)."),(0,n.kt)("li",{parentName:"ul"},"Remplir les tables contenant les statistiques de disponibilit\xe9 des h\xf4tes et des services."),(0,n.kt)("li",{parentName:"ul"},"Remplir les tables contenant les statistiques de performance et de capacit\xe9 des h\xf4tes et des services.")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"/usr/share/centreon-bi/bin/centreonBIETL -r\n")),(0,n.kt)("h4",{id:"activer-lex\xe9cution-quotidienne-du-script"},"Activer l'ex\xe9cution quotidienne du script"),(0,n.kt)("p",null,"Une fois le processus de reconstruction des donn\xe9es termin\xe9, vous pouvez activer le calcul des\nstatistiques.\nSur le serveur de reporting, \xe9ditez le fichier ",(0,n.kt)("strong",{parentName:"p"},"/etc/cron.d/centreon-bi-engine")," et d\xe9commentez la ligne suivante :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"#30 4 * * * root /usr/share/centreon-bi/bin/centreonBIETL -d >> /var/log/centreon-bi/centreonBIETL.log 2>&1\n")),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8 / RHEL 7 / CentOS 7",label:"Alma / RHEL / Oracle Linux 8 / RHEL 7 / CentOS 7",mdxType:"TabItem"},(0,n.kt)("p",null,"Red\xe9marrez le service cron sur le serveur de reporting :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart crond\n"))),(0,n.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,n.kt)("p",null,"Red\xe9marrez le service cron sur le serveur de reporting :"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart cron\n")))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Assurez-vous que le batch ",(0,n.kt)("strong",{parentName:"p"},"centreonBIETL")," ne d\xe9marre qu'une fois que le batch ",(0,n.kt)("strong",{parentName:"p"},"eventReportBuilder")," est termin\xe9 sur\nle serveur de supervision (consultez le fichier cron ",(0,n.kt)("strong",{parentName:"p"},"/etc/cron.d/centreon")," sur le serveur de supervision).")),(0,n.kt)("p",null,"L'installation de Centreon MBI est maintenant termin\xe9e, consultez ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/getting-started/analyze-resources-availability"},"le tutoriel"),"."))}N.isMDXComponent=!0},19616:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/architecture-57c0d086ac05ff41f37ef131fb04d7de.png"},97720:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/bi_retention-630acb0acba7833bfa2fe8ba8bd7ecaf.png"}}]);