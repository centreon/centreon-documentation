"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[37951],{35327:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>p,default:()=>v,frontMatter:()=>c,metadata:()=>u,toc:()=>d});n(67294);var a=n(3905),r=n(51715),l=n(7626);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const c={id:"secure-platform",title:"S\xe9curisez votre plateforme"},p=void 0,u={unversionedId:"administration/secure-platform",id:"version-23.10/administration/secure-platform",title:"S\xe9curisez votre plateforme",description:"Ce chapitre vous propose de s\xe9curiser votre plateforme Centreon.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-23.10/administration/secure-platform.md",sourceDirName:"administration",slug:"/administration/secure-platform",permalink:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/administration/secure-platform",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/i18n/fr/docusaurus-plugin-content-docs/version-23.10/administration/secure-platform.md",tags:[],version:"23.10",lastUpdatedAt:1699631982,formattedLastUpdatedAt:"10 nov. 2023",frontMatter:{id:"secure-platform",title:"S\xe9curisez votre plateforme"},sidebar:"version-23.10/docs",previous:{title:"Installation offline",permalink:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/offline"},next:{title:"S\xe9curisez votre plateforme MAP",permalink:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/graph-views/secure-your-map-platform"}},m={},d=[{value:"Renforcez la s\xe9curit\xe9 des comptes utilisateurs",id:"renforcez-la-s\xe9curit\xe9-des-comptes-utilisateurs",level:2},{value:"Activer SELinux",id:"activer-selinux",level:2},{value:"Pr\xe9sentation de SELinux",id:"pr\xe9sentation-de-selinux",level:3},{value:"Activer SELinux en mode permissif",id:"activer-selinux-en-mode-permissif",level:3},{value:"Installer les paquets Centreon SELinux",id:"installer-les-paquets-centreon-selinux",level:3},{value:"Auditer les journaux et activer SELinux",id:"auditer-les-journaux-et-activer-selinux",level:3},{value:"S\xe9curiser les fichiers de configuration",id:"s\xe9curiser-les-fichiers-de-configuration",level:2},{value:"S\xe9curiser l&#39;acc\xe8s root au SGBD",id:"s\xe9curiser-lacc\xe8s-root-au-sgbd",level:2},{value:"Activer firewalld",id:"activer-firewalld",level:2},{value:"Activer fail2ban",id:"activer-fail2ban",level:2},{value:"S\xe9curiser le serveur web en HTTPS",id:"s\xe9curiser-le-serveur-web-en-https",level:2},{value:"Cr\xe9er un certificat auto-sign\xe9",id:"cr\xe9er-un-certificat-auto-sign\xe9",level:3},{value:"Activer le mode HTTPS sur le serveur web",id:"activer-le-mode-https-sur-le-serveur-web",level:3},{value:"URI personnalis\xe9e",id:"uri-personnalis\xe9e",level:2},{value:"Activation du http2",id:"activation-du-http2",level:2},{value:"Authentification des utilisateurs",id:"authentification-des-utilisateurs",level:2},{value:"Cr\xe9er des profils d&#39;utilisateurs",id:"cr\xe9er-des-profils-dutilisateurs",level:2},{value:"Communications s\xe9curis\xe9es entre les serveurs",id:"communications-s\xe9curis\xe9es-entre-les-serveurs",level:2},{value:"Communication Centreon Broker",id:"communication-centreon-broker",level:3},{value:"Centreon Broker et pare-feu",id:"centreon-broker-et-pare-feu",level:4},{value:"Authentification des flux Centreon Broker",id:"authentification-des-flux-centreon-broker",level:4},{value:"Compressez et chiffrez la communication Centreon Broker",id:"compressez-et-chiffrez-la-communication-centreon-broker",level:4},{value:"Communication Centreon Gorgone",id:"communication-centreon-gorgone",level:3},{value:"Gestion de l&#39;information et des \xe9v\xe9nements de s\xe9curit\xe9 (SIEM)",id:"gestion-de-linformation-et-des-\xe9v\xe9nements-de-s\xe9curit\xe9-siem",level:2}],k={toc:d},g="wrapper";function v(e){var{components:t}=e,n=o(e,["components"]);return(0,a.kt)(g,i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){s(e,t,n[t])}))}return e}({},k,n),{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Ce chapitre vous propose de s\xe9curiser votre plateforme Centreon."),(0,a.kt)("h2",{id:"renforcez-la-s\xe9curit\xe9-des-comptes-utilisateurs"},"Renforcez la s\xe9curit\xe9 des comptes utilisateurs"),(0,a.kt)("p",null,"Apr\xe8s l'installation de Centreon, il est n\xe9cessaire de changer les mots de passe par d\xe9faut des utilisateurs suivants:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"root"),(0,a.kt)("li",{parentName:"ul"},"centreon"),(0,a.kt)("li",{parentName:"ul"},"centreon-engine"),(0,a.kt)("li",{parentName:"ul"},"centreon-broker"),(0,a.kt)("li",{parentName:"ul"},"centreon-gorgone")),(0,a.kt)("p",null,"Pour cela, utilisez la commande suivante avec un compte privil\xe9gi\xe9 (par exemple sudo) ou avec root (non recommand\xe9 - vous devez\navoir un utilisateur d\xe9di\xe9) :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"passwd <account_name>\n")),(0,a.kt)("p",null,"De plus, il est important de v\xe9rifier que le compte Apache ne dispose pas de droits de connexion au terminal. Ex\xe9cutez\nla commande suivante :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"cat /etc/passwd | grep apache\n")),(0,a.kt)("p",null,"Vous devez avoir ",(0,a.kt)("strong",{parentName:"p"},"/sbin/nologin")," tel que :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"apache:x:48:48:Apache:/usr/share/httpd:/sbin/nologin\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Pour rappel, la liste des utilisateurs et des groupes se trouve ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/prerequisites#utilisateurs-et-groupes"},"ici"))),(0,a.kt)("h2",{id:"activer-selinux"},"Activer SELinux"),(0,a.kt)("p",null,"Centreon a r\xe9cemment d\xe9velopp\xe9 des r\xe8gles SELinux afin de renforcer le contr\xf4le\ndes composants par le syst\xe8me d'exploitation."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Ces r\xe8gles sont actuellement en ",(0,a.kt)("strong",{parentName:"p"},"mode b\xeata")," et peuvent \xeatre activ\xe9es. Vous\npouvez les activer en suivant cette proc\xe9dure. Lors de la d\xe9tection d'un\nprobl\xe8me, il est possible de d\xe9sactiver SELinux globalement et de nous envoyer\nvos commentaires afin d'am\xe9liorer nos r\xe8gles sur\n",(0,a.kt)("a",{parentName:"p",href:"https://github.com/centreon/centreon"},"Github"),".")),(0,a.kt)("h3",{id:"pr\xe9sentation-de-selinux"},"Pr\xe9sentation de SELinux"),(0,a.kt)("p",null,"Security Enhanced Linux (SELinux) fournit une couche suppl\xe9mentaire de s\xe9curit\xe9 du syst\xe8me. SELinux r\xe9pond\nfondamentalement \xe0 la question: ",(0,a.kt)("inlineCode",{parentName:"p"},"Le <suject> peut-il faire cette <action> sur <object> ?"),", Par exemple: un serveur Web\npeut-il acc\xe9der aux fichiers des r\xe9pertoires personnels des utilisateurs ?"),(0,a.kt)("p",null,"La strat\xe9gie d'acc\xe8s standard bas\xe9e sur l'utilisateur, le groupe et d'autres autorisations, connue sous le nom de\ncontr\xf4le d'acc\xe8s discr\xe9tionnaire (DAC), ne permet pas aux administrateurs syst\xe8me de cr\xe9er des strat\xe9gies de s\xe9curit\xe9\ncompl\xe8tes et pr\xe9cises, telles que la restriction d'applications sp\xe9cifiques \xe0 l'affichage uniquement des fichiers\njournaux, tout en permettant \xe0 d'autres applications d'ajouter de nouvelles donn\xe9es aux fichiers journaux."),(0,a.kt)("p",null,"SELinux impl\xe9mente le contr\xf4le d'acc\xe8s obligatoire (MAC). Chaque processus et ressource syst\xe8me poss\xe8de une \xe9tiquette\nde s\xe9curit\xe9 sp\xe9ciale appel\xe9e contexte SELinux. Un contexte SELinux, parfois appel\xe9 \xe9tiquette SELinux, est un identifiant\nqui fait abstraction des d\xe9tails au niveau du syst\xe8me et se concentre sur les propri\xe9t\xe9s de s\xe9curit\xe9 de l'entit\xe9. Non\nseulement cela fournit un moyen coh\xe9rent de r\xe9f\xe9rencer des objets dans la strat\xe9gie SELinux, mais cela supprime \xe9galement\ntoute ambigu\xeft\xe9 qui peut \xeatre trouv\xe9e dans d'autres m\xe9thodes d'identification. Par exemple, un fichier peut avoir plusieurs\nnoms de chemin valides sur un syst\xe8me qui utilise des montages de liaison."),(0,a.kt)("p",null,"La politique SELinux utilise ces contextes dans une s\xe9rie de r\xe8gles qui d\xe9finissent comment les processus peuvent\ninteragir entre eux et avec les diff\xe9rentes ressources syst\xe8me. Par d\xe9faut, la strat\xe9gie n'autorise aucune interaction\n\xe0 moins qu'une r\xe8gle n'accorde explicitement l'acc\xe8s."),(0,a.kt)("p",null,"Pour plus d'informations \xe0 propos de SELinux, visitez la ",(0,a.kt)("a",{parentName:"p",href:"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/using_selinux/getting-started-with-selinux_using-selinux"},"documentation Red Hat")),(0,a.kt)("h3",{id:"activer-selinux-en-mode-permissif"},"Activer SELinux en mode permissif"),(0,a.kt)("p",null,"Par d\xe9faut, SELinux est d\xe9sactiv\xe9 lors du processus d'installation de Centreon. Pour activer SELinux en mode permissif,\nvous devez modifier le fichier ",(0,a.kt)("inlineCode",{parentName:"p"},"/etc/selinux/config")," comme tel :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"# This file controls the state of SELinux on the system.\n# SELINUX= can take one of these three values:\n#     enforcing - SELinux security policy is enforced.\n#     permissive - SELinux prints warnings instead of enforcing.\n#     disabled - No SELinux policy is loaded.\nSELINUX=permissive\n# SELINUXTYPE= can take one of three two values:\n#     targeted - Targeted processes are protected,\n#     minimum - Modification of targeted policy. Only selected processes are protected.\n#     mls - Multi Level Security protection.\nSELINUXTYPE=targeted\n")),(0,a.kt)("p",null,"Puis red\xe9marrez votre serveur :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"shutdown -r now\n")),(0,a.kt)("h3",{id:"installer-les-paquets-centreon-selinux"},"Installer les paquets Centreon SELinux"),(0,a.kt)("p",null,"Suivant le type de serveur, installer les paquets avec la commande suivante :"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Central / Remote Server",label:"Central / Remote Server",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-common-selinux \\\ncentreon-web-selinux \\\ncentreon-broker-selinux \\\ncentreon-engine-selinux \\\ncentreon-gorgoned-selinux \\\ncentreon-plugins-selinux\n"))),(0,a.kt)(l.Z,{value:"Poller",label:"Poller",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-common-selinux \\\ncentreon-broker-selinux \\\ncentreon-engine-selinux \\\ncentreon-gorgoned-selinux \\\ncentreon-plugins-selinux\n"))),(0,a.kt)(l.Z,{value:"Map server",label:"Map server",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-map-selinux\n"))),(0,a.kt)(l.Z,{value:"MBI server",label:"MBI server",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-mbi-selinux\n"))))),(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Central / Remote Server",label:"Central / Remote Server",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-common-selinux \\\ncentreon-web-selinux \\\ncentreon-broker-selinux \\\ncentreon-engine-selinux \\\ncentreon-gorgoned-selinux \\\ncentreon-plugins-selinux\n"))),(0,a.kt)(l.Z,{value:"Poller",label:"Poller",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-common-selinux \\\ncentreon-broker-selinux \\\ncentreon-engine-selinux \\\ncentreon-gorgoned-selinux \\\ncentreon-plugins-selinux\n"))),(0,a.kt)(l.Z,{value:"Map server",label:"Map server",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-map-selinux\n"))),(0,a.kt)(l.Z,{value:"MBI server",label:"MBI server",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-mbi-selinux\n"))))),(0,a.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Central / Remote Server",label:"Central / Remote Server",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"apt install centreon-common-selinux \\\ncentreon-web-selinux \\\ncentreon-broker-selinux \\\ncentreon-engine-selinux \\\ncentreon-gorgoned-selinux \\\ncentreon-plugins-selinux\n"))),(0,a.kt)(l.Z,{value:"Poller",label:"Poller",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"apt install centreon-common-selinux \\\ncentreon-broker-selinux \\\ncentreon-engine-selinux \\\ncentreon-gorgoned-selinux \\\ncentreon-plugins-selinux\n"))),(0,a.kt)(l.Z,{value:"Map server",label:"Map server",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"apt install centreon-map-selinux\n"))),(0,a.kt)(l.Z,{value:"MBI server",label:"MBI server",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"apt install centreon-mbi-selinux\n")))))),(0,a.kt)("p",null,"Pour v\xe9rifier l'installation, ex\xe9cutez la commande suivante :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"semodule -l | grep centreon\n")),(0,a.kt)("p",null,"Suivant votre type de serveur, vous pouvez voir :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"centreon-broker 0.0.5\ncentreon-common 0.0.10\ncentreon-engine 0.0.8\ncentreon-gorgoned   0.0.3\ncentreon-plugins    0.0.2\ncentreon-web    0.0.8\n")),(0,a.kt)("h3",{id:"auditer-les-journaux-et-activer-selinux"},"Auditer les journaux et activer SELinux"),(0,a.kt)("p",null,"Avant d'activer SELinux en ",(0,a.kt)("strong",{parentName:"p"},"mode renforc\xe9"),", vous devez vous assurer qu'aucune erreur n'appara\xeet \xe0 l'aide de la\ncommande suivante :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"cat /var/log/audit/audit.log | grep -i denied\n")),(0,a.kt)("p",null,"Si des erreurs apparaissent, vous devez les analyser et d\xe9cider si ces erreurs sont r\xe9guli\xe8res et doivent \xeatre ajout\xe9es\nen plus des r\xe8gles SELinux par d\xe9faut de Centreon. Pour ce faire, utilisez la commande suivante pour transformer\nl'erreur en r\xe8gles SELinux :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"audit2allow -a\n")),(0,a.kt)("p",null,"Ex\xe9cutez ensuite les r\xe8gles propos\xe9es."),(0,a.kt)("p",null,"Si apr\xe8s un certain temps, aucune erreur n'est pr\xe9sente, vous pouvez activer SELinux en mode renforc\xe9 en suivant cette\n",(0,a.kt)("a",{parentName:"p",href:"#activer-selinux-en-mode-permissif"},"proc\xe9dure")," avec le mode ",(0,a.kt)("strong",{parentName:"p"},"enforcing"),"."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"N'h\xe9sitez pas \xe0 nous faire part de vos retours sur ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/centreon/centreon"},"Github"),".")),(0,a.kt)("h2",{id:"s\xe9curiser-les-fichiers-de-configuration"},"S\xe9curiser les fichiers de configuration"),(0,a.kt)("p",null,"Changez les permissions des fichiers de configuration suivants:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"chown centreon:centreon /etc/centreon/conf.pm\nchmod 660 /etc/centreon/conf.pm\n")),(0,a.kt)("p",null,"et"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"chown apache:apache /etc/centreon/centreon.conf.php\nchmod 660 /etc/centreon/centreon.conf.php\n")),(0,a.kt)("h2",{id:"s\xe9curiser-lacc\xe8s-root-au-sgbd"},"S\xe9curiser l'acc\xe8s root au SGBD"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://mariadb.com/kb/en/mysql_secure_installation/"},"MariaDB")," propose une proc\xe9dure par d\xe9faut pour s\xe9curiser\nl'installation du SGBD. Vous devez obligatoirement d\xe9finir un mot de passe pour l'utilisateur ",(0,a.kt)("strong",{parentName:"p"},"root")," de la base de donn\xe9es. Si vous ne l'avez pas d\xe9j\xe0 fait, ex\xe9cutez la commande suivante et suivez les instructions :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"mysql_secure_installation\n")),(0,a.kt)("h2",{id:"activer-firewalld"},"Activer firewalld"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("p",null,"Installez firewalld:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install firewalld\n"))),(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("p",null,"Installez firewalld:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install firewalld\n"))),(0,a.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)("p",null,"Installez firewalld:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"apt install firewalld\n")))),(0,a.kt)("p",null,"Activez firewalld:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl enable firewalld\nsystemctl start firewalld\n")),(0,a.kt)("p",null,"Ajoutez des r\xe8gles pour firewalld :"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"La liste des flux r\xe9seau n\xe9cessaires pour chaque type de serveur est d\xe9finie\n",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/architectures#tableau-des-flux-de-la-plate-forme"},"ici"),".")),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Central / Remote Server",label:"Central / Remote Server",mdxType:"TabItem"},(0,a.kt)("p",null,"Ex\xe9cutez les commandes suivantes (changez les num\xe9ros de port si vous avez personnalis\xe9 ceux-ci) :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"# For default protocols\nfirewall-cmd --zone=public --add-service=ssh --permanent\nfirewall-cmd --zone=public --add-service=http --permanent\nfirewall-cmd --zone=public --add-service=https --permanent\nfirewall-cmd --zone=public --add-service=snmp --permanent\nfirewall-cmd --zone=public --add-service=snmptrap --permanent\n# Centreon Gorgone\nfirewall-cmd --zone=public --add-port=5556/tcp --permanent\n# Centreon Broker\nfirewall-cmd --zone=public --add-port=5669/tcp --permanent\n"))),(0,a.kt)(l.Z,{value:"Poller",label:"Poller",mdxType:"TabItem"},(0,a.kt)("p",null,"Ex\xe9cutez les commandes suivantes :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"# For default protocols\nfirewall-cmd --zone=public --add-service=ssh --permanent\nfirewall-cmd --zone=public --add-service=snmp --permanent\nfirewall-cmd --zone=public --add-service=snmptrap --permanent\n# Centreon Gorgone\nfirewall-cmd --zone=public --add-port=5556/tcp --permanent\n")))),(0,a.kt)("p",null,"Une fois les r\xe8gles ajout\xe9es, rechargez firewalld:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"firewall-cmd --reload\n")),(0,a.kt)("p",null,"Pour v\xe9rifier que la configuration a \xe9t\xe9 correctement appliqu\xe9e, utilisez la commande suivante afin de lister toutes les r\xe8gles actives :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"firewall-cmd --list-all\n")),(0,a.kt)("p",null,"Par exemple :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"public (active)\n  target: default\n  icmp-block-inversion: no\n  interfaces: eth0\n  sources:\n  services: http snmp snmptrap ssh\n  ports: 5556/tcp 5669/tcp\n  protocols:\n  forward: no\n  masquerade: no\n  forward-ports:\n  source-ports:\n  icmp-blocks:\n  rich rules:\n")),(0,a.kt)("h2",{id:"activer-fail2ban"},"Activer fail2ban"),(0,a.kt)("p",null,"Fail2ban est un framework de pr\xe9vention contre les intrusions, \xe9crit en Python."),(0,a.kt)("p",null,"Installez le module inotify:"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install python3-inotify\n"))),(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install python3-inotify\n"))),(0,a.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"apt install python3-inotify\n")))),(0,a.kt)("p",null,"Installez fail2ban :"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install epel-release\ndnf install fail2ban fail2ban-systemd\n")),(0,a.kt)("p",null,"Si SELinux est install\xe9, mettez \xe0 jour les politiques SELinux :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf update -y selinux-policy*\n"))),(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install epel-release\ndnf install fail2ban fail2ban-systemd\n")),(0,a.kt)("p",null,"Si SELinux est install\xe9, mettez \xe0 jour les politiques SELinux :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf update -y selinux-policy*\n"))),(0,a.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"apt install fail2ban\n")))),(0,a.kt)("p",null,"Activez fail2ban :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl enable fail2ban\nsystemctl start fail2ban \n")),(0,a.kt)("p",null,"Copiez le fichier de r\xe8gles par d\xe9faut :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local\n")),(0,a.kt)("p",null,"\xc9ditez le fichier ",(0,a.kt)("inlineCode",{parentName:"p"},"/etc/fail2ban/jail.local")," et recherchez le bloc ",(0,a.kt)("strong",{parentName:"p"},"[centreon]"),", puis modifiez tel que :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"[centreon]\nport    = http,https\nlogpath = /var/log/centreon/login.log\nbackend  = pyinotify\n")),(0,a.kt)("p",null,"Pour activer la r\xe8gle ",(0,a.kt)("strong",{parentName:"p"},"centreon")," fail2ban, cr\xe9ez le fichier ",(0,a.kt)("inlineCode",{parentName:"p"},"/etc/fail2ban/jail.d/custom.conf")," et ajoutez les lignes\nsuivantes :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"[centreon]\nenabled = true\nfindtime = 10m\nbantime = 10m\nmaxretry = 3\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("strong",{parentName:"p"},"maxretry")," est le nombre d'authentifications \xe9chou\xe9es avant bannissement de l'adresse IP."),(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("strong",{parentName:"p"},"bantime")," est la dur\xe9e du bannissement."),(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("strong",{parentName:"p"},"findtime")," est la plage de temps pour trouver les authentifications en \xe9checs.")),(0,a.kt)("p",null,"Puis red\xe9marrez fail2ban pour charger votre r\xe8gle :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart fail2ban\n")),(0,a.kt)("p",null,"Pour v\xe9rifier l'\xe9tat de la r\xe8gle ",(0,a.kt)("strong",{parentName:"p"},"centreon"),", vous pouvez ex\xe9cuter :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"fail2ban-client status centreon\n")),(0,a.kt)("p",null,"Voici un exemple de r\xe9sultat :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"Status for the jail: centreon\n|- Filter\n|  |- Currently failed: 1\n|  |- Total failed: 17\n|  `- File list:    /var/log/centreon/login.log\n`- Actions\n   |- Currently banned: 0\n   |- Total banned: 2\n   `- Banned IP list:\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Pour plus d'informations, visitez le ",(0,a.kt)("a",{parentName:"p",href:"http://www.fail2ban.org"},"site officiel"),".")),(0,a.kt)("h2",{id:"s\xe9curiser-le-serveur-web-en-https"},"S\xe9curiser le serveur web en HTTPS"),(0,a.kt)("p",null,"Par d\xe9faut, Centreon installe un serveur web en mode HTTP. Il est fortement recommand\xe9 de passer en mode HTTPS en ajoutant votre certificat. Il est \xe9galement recommand\xe9 d'utiliser un certificat valid\xe9 par une autorit\xe9 plut\xf4t qu'un certificat auto-sign\xe9."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Si vous avez d\xe9j\xe0 un certificat valid\xe9 par une autorit\xe9, vous pouvez passer directement \xe0 cette ",(0,a.kt)("a",{parentName:"p",href:"#activer-le-mode-https-sur-le-serveur-web"},"\xe9tape")," pour activer le mode HTTPS sur votre serveur Apache.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Si vous ne disposez pas d'un certificat valid\xe9 par une autorit\xe9, vous pouvez en g\xe9n\xe9rer un sur des plateformes telles que ",(0,a.kt)("a",{parentName:"p",href:"https://letsencrypt.org/fr/"},"Let's Encrypt"),".")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Si vous souhaitez cr\xe9er un certificat selon la m\xe9thode auto-sign\xe9e, suivez cette ",(0,a.kt)("a",{parentName:"p",href:"#cr%C3%A9er-un-certificat-auto-sign%C3%A9"},"\xe9tape")," avant d'activer le mode HTTPS sur votre serveur."))),(0,a.kt)("h3",{id:"cr\xe9er-un-certificat-auto-sign\xe9"},"Cr\xe9er un certificat auto-sign\xe9"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"}," Cette proc\xe9dure permet de cr\xe9er :"),(0,a.kt)("ul",{parentName:"blockquote"},(0,a.kt)("li",{parentName:"ul"},"Une cl\xe9 priv\xe9e pour le serveur : ",(0,a.kt)("strong",{parentName:"li"},"centreon7.key")," dans notre cas. Elle sera utilis\xe9e par le service Apache."),(0,a.kt)("li",{parentName:"ul"},"Un fichier CSR (Certificate Signing Request) : ",(0,a.kt)("strong",{parentName:"li"},"centreon7.csr")," dans notre cas."),(0,a.kt)("li",{parentName:"ul"},"Une cl\xe9 priv\xe9e pour le certificat de l'autorit\xe9 de certification : ",(0,a.kt)("strong",{parentName:"li"},"ca_demo.key")," dans notre cas."),(0,a.kt)("li",{parentName:"ul"},"Un certificat x509 pour signer votre certificat pour le serveur : ",(0,a.kt)("strong",{parentName:"li"},"ca-demo.crt")," dans notre cas."),(0,a.kt)("li",{parentName:"ul"},"Un certificat pour le serveur : ",(0,a.kt)("strong",{parentName:"li"},"centreon7.crt")," dans notre cas."))),(0,a.kt)("p",null,"Soit un serveur Centreon avec le FQDN suivant : ",(0,a.kt)("strong",{parentName:"p"},"centreon7.localdomain"),"."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Pr\xe9parez la configuration OpenSSL :"),(0,a.kt)("p",{parentName:"li"},"En raison d'un changement de politique chez Google, les certificats auto-sign\xe9s peuvent \xeatre rejet\xe9s par le navigateur Google Chrome (sans qu'il soit possible d'ajouter une exception). Pour continuer \xe0 utiliser ce navigateur, vous devez modifier la configuration OpenSSL."),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("p",{parentName:"li"},"Ouvrez le fichier ",(0,a.kt)("strong",{parentName:"p"},"/etc/pki/tls/openssl.cnf"),". L'objectif est de modifier ce fichier pour renseigner les diff\xe9rents IPs et FQDNs relatifs au serveur.")),(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("p",{parentName:"li"},"Ouvrez le fichier ",(0,a.kt)("strong",{parentName:"p"},"/etc/pki/tls/openssl.cnf"),". L'objectif est de modifier ce fichier pour renseigner les diff\xe9rents IPs et FQDNs relatifs au serveur.")),(0,a.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)("p",{parentName:"li"},"Ouvrez le fichier ",(0,a.kt)("strong",{parentName:"p"},"/etc/ssl/openssl.cnf"),". L'objectif est de modifier ce fichier pour renseigner les diff\xe9rents IPs et FQDNs relatifs au serveur."))),(0,a.kt)("p",{parentName:"li"},"Recherchez la section ",(0,a.kt)("inlineCode",{parentName:"p"},"[v3_ca]")," afin d'ajouter le nouveau tag ",(0,a.kt)("inlineCode",{parentName:"p"},"alt_names")," :"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-text"},"# Add the alt_names tag that allows you to inform our various IPs and FQDNs for the server\n[ alt_names ]\nIP.1 = xxx.xxx.xxx.xxx\nDNS.1 = centreon7.localdomain\n# If you have several IP (HA: vip + ip)\n# IP.2 = xxx.xxx.xxx.xxx\n[ v3_ca ]\nsubjectAltName = @alt_names\n")),(0,a.kt)("p",{parentName:"li"},"Voici un exemple de ce \xe0 quoi le fichier peut ressembler :"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-text"},"[ alt_names ]\nIP.1 = 10.25.11.73\nDNS.1 = centreon7.localdomain\n\n[ v3_ca ]\nsubjectAltName = @alt_names\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Cr\xe9ez une cl\xe9 priv\xe9e pour le serveur :"))),(0,a.kt)("p",null,"Cr\xe9ez une cl\xe9 priv\xe9e nomm\xe9e ",(0,a.kt)("strong",{parentName:"p"},"centreon7.key")," sans mot de passe afin qu'elle puisse \xeatre utilis\xe9e par le service Apache."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"openssl genrsa -out centreon7.key 2048\n")),(0,a.kt)("p",null,"Prot\xe9gez le fichier en modifiant ses droits :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"chmod 400 centreon7.key\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Cr\xe9ez un fichier CSR :")),(0,a.kt)("p",null,"Avec la cl\xe9 que vous venez de cr\xe9er, cr\xe9ez un fichier CSR (Certificate Signing Request). Remplissez les champs avec les informations propres \xe0 votre entreprise. Le champ ",(0,a.kt)("strong",{parentName:"p"},"Common Name")," doit \xeatre identique au hostname de votre serveur Apache (dans notre cas, ",(0,a.kt)("strong",{parentName:"p"},"centreon7.localdomain"),")."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"openssl req -new -key centreon7.key -out centreon7.csr\n")),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"Cr\xe9ez une cl\xe9 priv\xe9e pour le certificat de l'autorit\xe9 de certification :")),(0,a.kt)("p",null,"Cr\xe9ez une cl\xe9 priv\xe9e pour cette autorit\xe9 : ",(0,a.kt)("strong",{parentName:"p"},"ca_demo.key")," dans notre cas. Ajoutez l'option ",(0,a.kt)("strong",{parentName:"p"},"-aes256")," pour chiffrer la cl\xe9 produite et y appliquer un mot de passe. Ce mot de passe sera demand\xe9 chaque fois que la cl\xe9 sera utilis\xe9e."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"openssl genrsa -aes256 2048 > ca_demo.key\n")),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},"Cr\xe9ez un certificat x509 \xe0 partir de la cl\xe9 priv\xe9e du certificat de l'autorit\xe9 de certification :")),(0,a.kt)("p",null,"Cr\xe9ez un certificat x509 qui sera valide pendant un an : ",(0,a.kt)("strong",{parentName:"p"},"ca_demo.crt")," dans notre cas."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"}," Notez qu'il est n\xe9cessaire de simuler un tiers de confiance : le ",(0,a.kt)("strong",{parentName:"p"},"Common Name")," doit \xeatre diff\xe9rent de celui du certificat du serveur."),(0,a.kt)("pre",{parentName:"blockquote"},(0,a.kt)("code",{parentName:"pre",className:"language-text"},"openssl req -new -x509 -days 365 -key ca_demo.key -out ca_demo.crt\n"))),(0,a.kt)("p",null,"Ce certificat \xe9tant cr\xe9\xe9, vous pourrez l'utiliser pour signer le certificat du serveur."),(0,a.kt)("ol",{start:6},(0,a.kt)("li",{parentName:"ol"},"Cr\xe9ez un certificat pour le serveur :")),(0,a.kt)("p",null,"Cr\xe9ez votre certificat pour le serveur en utilisant le certificat x509 (",(0,a.kt)("strong",{parentName:"p"},"ca_demo.crt"),") pour le signer."),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"openssl x509 -req -in centreon7.csr -out centreon7.crt -CA ca_demo.crt -CAkey ca_demo.key -CAcreateserial -CAserial ca_demo.srl  -extfile /etc/pki/tls/openssl.cnf -extensions v3_ca\n"))),(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"openssl x509 -req -in centreon7.csr -out centreon7.crt -CA ca_demo.crt -CAkey ca_demo.key -CAcreateserial -CAserial ca_demo.srl  -extfile /etc/pki/tls/openssl.cnf -extensions v3_ca\n"))),(0,a.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"openssl x509 -req -in centreon7.csr -out centreon7.crt -CA ca_demo.crt -CAkey ca_demo.key -CAcreateserial -CAserial ca_demo.srl  -extfile /etc/ssl/openssl.cnf -extensions v3_ca\n")))),(0,a.kt)("p",null,"Le mot de passe cr\xe9\xe9 \xe0 l'\xe9tape ",(0,a.kt)("strong",{parentName:"p"},"Cr\xe9er une cl\xe9 priv\xe9e pour le certificat de l'autorit\xe9 de certification"),"  doit \xeatre renseign\xe9. Vous obtenez un certificat pour le serveur nomm\xe9 ",(0,a.kt)("strong",{parentName:"p"},"centreon7.crt"),"."),(0,a.kt)("p",null,"Vous pouvez voir le contenu du fichier : "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"less centreon7.crt\n")),(0,a.kt)("ol",{start:7},(0,a.kt)("li",{parentName:"ol"},"Vous devez ensuite r\xe9cup\xe9rer le fichier du certificat x509 (",(0,a.kt)("strong",{parentName:"li"},"ca_demo.crt"),") et l'importer dans le magasin de certificats de votre navigateur.")),(0,a.kt)("p",null,"Maintenant que vous avez votre certificat auto-sign\xe9, vous pouvez suivre la proc\xe9dure suivante pour activer le mode HTTPS sur votre serveur Apache."),(0,a.kt)("h3",{id:"activer-le-mode-https-sur-le-serveur-web"},"Activer le mode HTTPS sur le serveur web"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Installez le module SSL pour Apache :")),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install mod_ssl mod_security openssl\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Installez les certificats :")),(0,a.kt)("p",null,"Installez vos certificats (",(0,a.kt)("strong",{parentName:"p"},"centreon7.key")," et ",(0,a.kt)("strong",{parentName:"p"},"centreon7.crt")," dans notre cas) en les copiant dans la configuration Apache :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"cp centreon7.key /etc/pki/tls/private/\ncp centreon7.crt /etc/pki/tls/certs/\n"))),(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install mod_ssl mod_security openssl\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Installez les certificats :")),(0,a.kt)("p",null,"Installez vos certificats (",(0,a.kt)("strong",{parentName:"p"},"centreon7.key")," et ",(0,a.kt)("strong",{parentName:"p"},"centreon7.crt")," dans notre cas) en les copiant dans la configuration Apache :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"cp centreon7.key /etc/pki/tls/private/\ncp centreon7.crt /etc/pki/tls/certs/\n"))),(0,a.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"curl -sSL https://packages.sury.org/apache2/README.txt | sudo bash -x\napt update\napt install libapache2-mod-security2\na2enmod ssl\na2enmod security2\nsystemctl restart apache2\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Installez les certificats :")),(0,a.kt)("p",null,"Installez vos certificats (",(0,a.kt)("strong",{parentName:"p"},"centreon7.key")," et ",(0,a.kt)("strong",{parentName:"p"},"centreon7.crt")," dans notre cas) en les copiant dans la configuration Apache :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"cp centreon7.key /etc/ssl/private/\ncp centreon7.crt /etc/ssl/certs/\n")))),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Sauvegardez la configuration actuelle du serveur Apache pour Centreon :")),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"cp /etc/httpd/conf.d/10-centreon.conf{,.origin}\n"))),(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"cp /etc/httpd/conf.d/10-centreon.conf{,.origin}\n"))),(0,a.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"cp /etc/apache2/sites-available/centreon.conf{,.origin}\n")))),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"\xc9diter la configuration Apache pour Centreon :")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Centreon propose un fichier de configuration d'exemple HTTPS disponible dans le r\xe9pertoire :\n",(0,a.kt)("strong",{parentName:"p"},"/usr/share/centreon/examples/centreon.apache.https.conf"))),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("p",null,"\xc9ditez le fichier ",(0,a.kt)("strong",{parentName:"p"},"/etc/httpd/conf.d/10-centreon.conf")," en ajoutant la section ",(0,a.kt)("strong",{parentName:"p"},"<VirtualHost *:443>"),".")),(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("p",null,"\xc9ditez le fichier ",(0,a.kt)("strong",{parentName:"p"},"/etc/httpd/conf.d/10-centreon.conf")," en ajoutant la section ",(0,a.kt)("strong",{parentName:"p"},"<VirtualHost *:443>"),".")),(0,a.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)("p",null,"\xc9ditez le fichier ",(0,a.kt)("strong",{parentName:"p"},"/etc/apache2/sites-available/centreon.conf")," en ajoutant la section ",(0,a.kt)("strong",{parentName:"p"},"<VirtualHost *:443>"),"."))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-apacheconf"},'Define base_uri "/centreon"\nDefine install_dir "/usr/share/centreon"\n\nServerTokens Prod\n\n<VirtualHost *:80>\n    RewriteEngine On\n    RewriteCond %{HTTPS} off\n    RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}\n</VirtualHost>\n')),(0,a.kt)("p",null,"Voici un exemple de ce \xe0 quoi le fichier peut ressembler :"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-apacheconf"},'Define base_uri "/centreon"\nDefine install_dir "/usr/share/centreon"\n\nServerTokens Prod\n\n<VirtualHost *:80>\n    RewriteEngine On\n    RewriteCond %{HTTPS} off\n    RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}\n</VirtualHost>\n\n<VirtualHost *:443>\n    #####################\n    # SSL configuration #\n    #####################\n    SSLEngine On\n    SSLProtocol All -SSLv3 -SSLv2 -TLSv1 -TLSv1.1\n    SSLCipherSuite ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-DSS-AES256-GCM-SHA384:DHE-DSS-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-GCM-SHA256:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!DSS:!RC4:!SEED:!ADH:!IDEA\n    SSLHonorCipherOrder On\n    SSLCompression Off\n    SSLCertificateFile /etc/pki/tls/certs/centreon7.crt\n    SSLCertificateKeyFile /etc/pki/tls/private/centreon7.key\n\n    Alias ${base_uri}/api ${install_dir}\n    Alias ${base_uri} ${install_dir}/www/\n\n    <LocationMatch ^\\${base_uri}/?(?!api/latest/|api/beta/|api/v[0-9]+/|api/v[0-9]+\\.[0-9]+/)(.*\\.php(/.*)?)$>\n        ProxyPassMatch "fcgi://127.0.0.1:9042${install_dir}/www/$1"\n    </LocationMatch>\n\n    <LocationMatch ^\\${base_uri}/?(authentication|api/(latest|beta|v[0-9]+|v[0-9]+\\.[0-9]+))/.*$>\n        ProxyPassMatch "fcgi://127.0.0.1:9042${install_dir}/api/index.php/$1"\n    </LocationMatch>\n\n    ProxyTimeout 300\n    ErrorDocument 404 ${base_uri}/index.html\n    Options -Indexes +FollowSymLinks\n\n    <IfModule mod_security2.c>\n        # https://github.com/SpiderLabs/ModSecurity/issues/652\n        SecRuleRemoveById 200003\n    </IfModule>\n\n    <Directory "${install_dir}/www">\n        DirectoryIndex index.php\n        AllowOverride none\n        Require all granted\n        FallbackResource ${base_uri}/index.html\n    </Directory>\n\n    <Directory "${install_dir}/api">\n        AllowOverride none\n        Require all granted\n    </Directory>\n\n    <If "\'${base_uri}\' != \'/\'">\n        RedirectMatch ^/$ ${base_uri}\n    </If>\n</VirtualHost>\n')),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"N'oubliez pas de changer les directives ",(0,a.kt)("strong",{parentName:"p"},"SSLCertificateFile")," et ",(0,a.kt)("strong",{parentName:"p"},"SSLCertificateKeyFile")," avec les chemins d'acc\xe8s vers votre cl\xe9 et votre certificat. Dans notre cas : ",(0,a.kt)("strong",{parentName:"p"},"SSLCertificateFile /etc/pki/tls/certs/centreon7.crt")," et ",(0,a.kt)("strong",{parentName:"p"},"SSLCertificateKeyFile /etc/pki/tls/private/centreon7.key"),"."))),(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-apacheconf"},'Define base_uri "/centreon"\nDefine install_dir "/usr/share/centreon"\n\nServerTokens Prod\n\n<VirtualHost *:80>\n    RewriteEngine On\n    RewriteCond %{HTTPS} off\n    RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}\n</VirtualHost>\n\n<VirtualHost *:443>\n    #####################\n    # SSL configuration #\n    #####################\n    SSLEngine On\n    SSLProtocol All -SSLv3 -SSLv2 -TLSv1 -TLSv1.1\n    SSLCipherSuite ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-DSS-AES256-GCM-SHA384:DHE-DSS-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-GCM-SHA256:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!DSS:!RC4:!SEED:!ADH:!IDEA\n    SSLHonorCipherOrder On\n    SSLCompression Off\n    SSLCertificateFile /etc/pki/tls/certs/centreon7.crt\n    SSLCertificateKeyFile /etc/pki/tls/private/centreon7.key\n\n    Alias ${base_uri}/api ${install_dir}\n    Alias ${base_uri} ${install_dir}/www/\n\n    <LocationMatch ^\\${base_uri}/?(?!api/latest/|api/beta/|api/v[0-9]+/|api/v[0-9]+\\.[0-9]+/)(.*\\.php(/.*)?)$>\n        ProxyPassMatch "fcgi://127.0.0.1:9042${install_dir}/www/$1"\n    </LocationMatch>\n\n    <LocationMatch ^\\${base_uri}/?(authentication|api/(latest|beta|v[0-9]+|v[0-9]+\\.[0-9]+))/.*$>\n        ProxyPassMatch "fcgi://127.0.0.1:9042${install_dir}/api/index.php/$1"\n    </LocationMatch>\n\n    ProxyTimeout 300\n    ErrorDocument 404 ${base_uri}/index.html\n    Options -Indexes +FollowSymLinks\n\n    <IfModule mod_security2.c>\n        # https://github.com/SpiderLabs/ModSecurity/issues/652\n        SecRuleRemoveById 200003\n    </IfModule>\n\n    <Directory "${install_dir}/www">\n        DirectoryIndex index.php\n        AllowOverride none\n        Require all granted\n        FallbackResource ${base_uri}/index.html\n    </Directory>\n\n    <Directory "${install_dir}/api">\n        AllowOverride none\n        Require all granted\n    </Directory>\n\n    <If "\'${base_uri}\' != \'/\'">\n        RedirectMatch ^/$ ${base_uri}\n    </If>\n</VirtualHost>\n')),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"N'oubliez pas de changer les directives ",(0,a.kt)("strong",{parentName:"p"},"SSLCertificateFile")," et ",(0,a.kt)("strong",{parentName:"p"},"SSLCertificateKeyFile")," avec les chemins d'acc\xe8s vers votre cl\xe9 et votre certificat. Dans notre cas : ",(0,a.kt)("strong",{parentName:"p"},"SSLCertificateFile /etc/pki/tls/certs/centreon7.crt")," et ",(0,a.kt)("strong",{parentName:"p"},"SSLCertificateKeyFile /etc/pki/tls/private/centreon7.key"),"."))),(0,a.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-apacheconf"},'Define base_uri "/centreon"\nDefine install_dir "/usr/share/centreon"\n\nServerTokens Prod\n\n<VirtualHost *:80>\n    RewriteEngine On\n    RewriteCond %{HTTPS} off\n    RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}\n</VirtualHost>\n\n<VirtualHost *:443>\n    #####################\n    # SSL configuration #\n    #####################\n    SSLEngine On\n    SSLProtocol All -SSLv3 -SSLv2 -TLSv1 -TLSv1.1\n    SSLCipherSuite ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-DSS-AES256-GCM-SHA384:DHE-DSS-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-GCM-SHA256:!aNULL:!eNULL:!LOW:!3DES:!MD5:!EXP:!PSK:!DSS:!RC4:!SEED:!ADH:!IDEA\n    SSLHonorCipherOrder On\n    SSLCompression Off\n    SSLCertificateFile /etc/ssl/certs/centreon7.crt\n    SSLCertificateKeyFile /etc/ssl/private/centreon7.key\n\n    Alias ${base_uri}/api ${install_dir}\n    Alias ${base_uri} ${install_dir}/www/\n\n    <LocationMatch ^\\${base_uri}/?(?!api/latest/|api/beta/|api/v[0-9]+/|api/v[0-9]+\\.[0-9]+/)(.*\\.php(/.*)?)$>\n        ProxyPassMatch "fcgi://127.0.0.1:9042${install_dir}/www/$1"\n    </LocationMatch>\n\n    <LocationMatch ^\\${base_uri}/?(authentication|api/(latest|beta|v[0-9]+|v[0-9]+\\.[0-9]+))/.*$>\n        ProxyPassMatch "fcgi://127.0.0.1:9042${install_dir}/api/index.php/$1"\n    </LocationMatch>\n\n    ProxyTimeout 300\n    ErrorDocument 404 ${base_uri}/index.html\n    Options -Indexes +FollowSymLinks\n\n    <IfModule mod_security2.c>\n        # https://github.com/SpiderLabs/ModSecurity/issues/652\n        SecRuleRemoveById 200003\n    </IfModule>\n\n    <Directory "${install_dir}/www">\n        DirectoryIndex index.php\n        AllowOverride none\n        Require all granted\n        FallbackResource ${base_uri}/index.html\n    </Directory>\n\n    <Directory "${install_dir}/api">\n        AllowOverride none\n        Require all granted\n    </Directory>\n\n    <If "\'${base_uri}\' != \'/\'">\n        RedirectMatch ^/$ ${base_uri}\n    </If>\n</VirtualHost>\n')),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"N'oubliez pas de changer les directives ",(0,a.kt)("strong",{parentName:"p"},"SSLCertificateFile")," et ",(0,a.kt)("strong",{parentName:"p"},"SSLCertificateKeyFile")," avec les chemins d'acc\xe8s vers votre cl\xe9 et votre certificat. Dans notre cas : ",(0,a.kt)("strong",{parentName:"p"},"SSLCertificateFile /etc/ssl/certs/centreon7.crt")," et ",(0,a.kt)("strong",{parentName:"p"},"SSLCertificateKeyFile /etc/ssl/private/centreon7.key"),".")))),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},"Activez les flags HttpOnly / Secure et cacher la signature du serveur Apache :")),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("p",null,"\xc9ditez le fichier ",(0,a.kt)("strong",{parentName:"p"},"/etc/httpd/conf.d/10-centreon.conf")," en ajoutant les lignes suivantes avant la balise ",(0,a.kt)("inlineCode",{parentName:"p"},"<VirtualHost>")," :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-apacheconf"},'Header always edit Set-Cookie ^(.*)$ $1;HttpOnly;Secure;SameSite=Strict\nHeader always set Strict-Transport-Security "max-age=31536000; includeSubDomains"\nServerSignature Off\nServerTokens Prod\n')),(0,a.kt)("p",null,"\xc9ditez le fichier ",(0,a.kt)("strong",{parentName:"p"},"/etc/php.d/50-centreon.ini")," en d\xe9sactivant le param\xe8tre ",(0,a.kt)("inlineCode",{parentName:"p"},"expose_php")," :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-phpconf"},"expose_php = Off\n"))),(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("p",null,"\xc9ditez le fichier ",(0,a.kt)("strong",{parentName:"p"},"/etc/httpd/conf.d/10-centreon.conf")," en ajoutant les lignes suivantes avant la balise ",(0,a.kt)("inlineCode",{parentName:"p"},"<VirtualHost>")," :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-apacheconf"},'Header always edit Set-Cookie ^(.*)$ $1;HttpOnly;Secure;SameSite=Strict\nHeader always set Strict-Transport-Security "max-age=31536000; includeSubDomains"\nServerSignature Off\nServerTokens Prod\n')),(0,a.kt)("p",null,"\xc9ditez le fichier ",(0,a.kt)("strong",{parentName:"p"},"/etc/php.d/50-centreon.ini")," en d\xe9sactivant le param\xe8tre ",(0,a.kt)("inlineCode",{parentName:"p"},"expose_php")," :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-phpconf"},"expose_php = Off\n"))),(0,a.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)("p",null,"\xc9ditez le fichier ",(0,a.kt)("strong",{parentName:"p"},"/etc/apache2/sites-available/centreon.conf")," en ajoutant les lignes suivantes avant la balise ",(0,a.kt)("inlineCode",{parentName:"p"},"<VirtualHost>")," :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-apacheconf"},'Header set X-Frame-Options: "sameorigin"\nHeader always edit Set-Cookie ^(.*)$ $1;HttpOnly;Secure;SameSite=Strict\nHeader always set Strict-Transport-Security "max-age=31536000; includeSubDomains"\nServerSignature Off\nServerTokens Prod\nTraceEnable Off\n')),(0,a.kt)("p",null,"\xc9ditez le fichier ",(0,a.kt)("strong",{parentName:"p"},"/etc/php/8.1/mods-available/centreon.ini")," en d\xe9sactivant le param\xe8tre ",(0,a.kt)("strong",{parentName:"p"},"expose_php")," :"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Cela a \xe9t\xe9 fait automatiquement pendant l'installation.")))),(0,a.kt)("ol",{start:6},(0,a.kt)("li",{parentName:"ol"},"Cachez le r\xe9pertoire par d\xe9faut ",(0,a.kt)("strong",{parentName:"li"},"/icons")," :")),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("p",null,"\xc9ditez le fichier ",(0,a.kt)("strong",{parentName:"p"},"/etc/httpd/conf.d/autoindex.conf")," en commentant la ligne suivante :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-apacheconf"},'#Alias /icons/ "/usr/share/httpd/icons/"\n'))),(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("p",null,"\xc9ditez le fichier ",(0,a.kt)("strong",{parentName:"p"},"/etc/httpd/conf.d/autoindex.conf")," en commentant la ligne suivante :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-apacheconf"},'#Alias /icons/ "/usr/share/httpd/icons/"\n'))),(0,a.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)("p",null,"\xc9ditez le fichier ",(0,a.kt)("strong",{parentName:"p"},"/etc/apache2/mods-available/autoindex.conf")," en commentant la ligne suivante :"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Le r\xe9pertoire est cach\xe9 par d\xe9faut.")))),(0,a.kt)("ol",{start:7},(0,a.kt)("li",{parentName:"ol"},"Vous pouvez effectuer ce test v\xe9rifiant qu'Apache est bien configur\xe9, en ex\xe9cutant la commande suivante :")),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-apacheconf"},"apachectl configtest\n")),(0,a.kt)("p",null,"Le r\xe9sultat attendu est le suivant :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-apacheconf"},"Syntax OK\n"))),(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-apacheconf"},"apachectl configtest\n")),(0,a.kt)("p",null,"Le r\xe9sultat attendu est le suivant :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-apacheconf"},"Syntax OK\n"))),(0,a.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-apacheconf"},"apache2ctl configtest\n")),(0,a.kt)("p",null,"Le r\xe9sultat attendu est le suivant :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-apacheconf"},"Syntax OK\n")))),(0,a.kt)("ol",{start:8},(0,a.kt)("li",{parentName:"ol"},"Red\xe9marrez le serveur web Apache et PHP pour prendre la configuration en compte :")),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart php-fpm httpd\n")),(0,a.kt)("p",null,"Puis v\xe9rifiez le statut :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl status httpd\n")),(0,a.kt)("p",null,"Si tout est correct, vous devriez avoir quelque chose comme :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'\u25cf httpd.service - The Apache HTTP Server\n   Loaded: loaded (/usr/lib/systemd/system/httpd.service; enabled; vendor preset: disabled)\n  Drop-In: /usr/lib/systemd/system/httpd.service.d\n           \u2514\u2500php-fpm.conf\n   Active: active (running) since Tue 2020-10-27 12:49:42 GMT; 2h 35min ago\n     Docs: man:httpd.service(8)\n Main PID: 1483 (httpd)\n   Status: "Total requests: 446; Idle/Busy workers 100/0;Requests/sec: 0.0479; Bytes served/sec: 443 B/sec"\n    Tasks: 278 (limit: 5032)\n   Memory: 39.6M\n   CGroup: /system.slice/httpd.service\n           \u251c\u25001483 /usr/sbin/httpd -DFOREGROUND\n           \u251c\u25001484 /usr/sbin/httpd -DFOREGROUND\n           \u251c\u25001485 /usr/sbin/httpd -DFOREGROUND\n           \u251c\u25001486 /usr/sbin/httpd -DFOREGROUND\n           \u251c\u25001487 /usr/sbin/httpd -DFOREGROUND\n           \u2514\u25001887 /usr/sbin/httpd -DFOREGROUND\n\n'))),(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart php-fpm httpd\n")),(0,a.kt)("p",null,"Puis v\xe9rifiez le statut :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl status httpd\n")),(0,a.kt)("p",null,"Si tout est correct, vous devriez avoir quelque chose comme :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'\u25cf httpd.service - The Apache HTTP Server\n   Loaded: loaded (/usr/lib/systemd/system/httpd.service; enabled; vendor preset: disabled)\n  Drop-In: /usr/lib/systemd/system/httpd.service.d\n           \u2514\u2500php-fpm.conf\n   Active: active (running) since Tue 2020-10-27 12:49:42 GMT; 2h 35min ago\n     Docs: man:httpd.service(8)\n Main PID: 1483 (httpd)\n   Status: "Total requests: 446; Idle/Busy workers 100/0;Requests/sec: 0.0479; Bytes served/sec: 443 B/sec"\n    Tasks: 278 (limit: 5032)\n   Memory: 39.6M\n   CGroup: /system.slice/httpd.service\n           \u251c\u25001483 /usr/sbin/httpd -DFOREGROUND\n           \u251c\u25001484 /usr/sbin/httpd -DFOREGROUND\n           \u251c\u25001485 /usr/sbin/httpd -DFOREGROUND\n           \u251c\u25001486 /usr/sbin/httpd -DFOREGROUND\n           \u251c\u25001487 /usr/sbin/httpd -DFOREGROUND\n           \u2514\u25001887 /usr/sbin/httpd -DFOREGROUND\n\n'))),(0,a.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart php8.1-fpm apache2\n")),(0,a.kt)("p",null,"Puis v\xe9rifiez le statut :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl status apache2\n")),(0,a.kt)("p",null,"Si tout est correct, vous devriez avoir quelque chose comme :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"\u25cf apache2.service - The Apache HTTP Server\n    Loaded: loaded (/lib/systemd/system/apache2.service; enabled; vendor pres>\n     Active: active (running) since Tue 2022-08-09 05:01:36 UTC; 3h 56min ago\n       Docs: https://httpd.apache.org/docs/2.4/\n   Main PID: 518 (apache2)\n      Tasks: 11 (limit: 2356)\n     Memory: 18.1M\n        CPU: 1.491s\n     CGroup: /system.slice/apache2.service\n             \u251c\u2500 518 /usr/sbin/apache2 -k start\n             \u251c\u25001252 /usr/sbin/apache2 -k start\n             \u251c\u25001254 /usr/sbin/apache2 -k start\n             \u251c\u25001472 /usr/sbin/apache2 -k start\n             \u251c\u25003857 /usr/sbin/apache2 -k start\n             \u251c\u25003858 /usr/sbin/apache2 -k start\n             \u251c\u25003859 /usr/sbin/apache2 -k start\n             \u251c\u25003860 /usr/sbin/apache2 -k start\n             \u251c\u25003876 /usr/sbin/apache2 -k start\n             \u251c\u25006261 /usr/sbin/apache2 -k start\n             \u2514\u25006509 /usr/sbin/apache2 -k start\n")))),(0,a.kt)("p",null,"Vous pouvez maintenant acc\xe9der \xe0 votre plateforme via votre navigateur en mode HTTPS."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Une fois que votre serveur web est configur\xe9 en mode HTTPS et si vous avez un serveur MAP sur votre plateforme, vous devez le configurer en mode HTTPS \xe9galement. Sinon, les navigateurs web r\xe9cents peuvent bloquer la communication entre les deux serveurs. Voir la proc\xe9dure d\xe9taill\xe9e ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/graph-views/secure-your-map-platform/#configure-httpstls-on-the-map-server"},"ici"),".")),(0,a.kt)("ol",{start:9},(0,a.kt)("li",{parentName:"ol"},"Configuration API de Gorgone")),(0,a.kt)("p",null,"\xc9ditez le fichier ",(0,a.kt)("strong",{parentName:"p"},"/etc/centreon-gorgone/config.d/31-centreon-api.yaml")," en rempla\xe7ant ",(0,a.kt)("strong",{parentName:"p"},"127.0.0.1"),"\npar le FQDN de votre serveur central :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},'gorgone:\n  tpapi:\n    - name: centreonv2\n      base_url: "http://centreon7.localdomain/centreon/api/latest/"\n      username: "centreon-gorgone"\n      password: "bpltc4aY"\n    - name: clapi\n      username: "centreon-gorgone"\n      password: "bpltc4aY"\n')),(0,a.kt)("p",null,"Red\xe9marrez le daemon Gorgone :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart gorgoned\n")),(0,a.kt)("p",null,"Puis v\xe9rifiez le statut :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl status gorgoned\n")),(0,a.kt)("p",null,"Si tout est correct, vous devriez avoir quelque chose comme :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"\u25cf gorgoned.service - Centreon Gorgone\n   Loaded: loaded (/etc/systemd/system/gorgoned.service; enabled; vendor preset: disabled)\n   Active: active (running) since Mon 2023-03-06 15:58:10 CET; 27min ago\n Main PID: 1791096 (perl)\n    Tasks: 124 (limit: 23040)\n   Memory: 595.3M\n   CGroup: /system.slice/gorgoned.service\n           \u251c\u25001791096 /usr/bin/perl /usr/bin/gorgoned --config=/etc/centreon-gorgone/config.yaml --logfile=/var/log/centreon-gorgone/gorgoned.log --severity=info\n           \u251c\u25001791109 gorgone-statistics\n           \u251c\u25001791112 gorgone-legacycmd\n           \u251c\u25001791117 gorgone-engine\n           \u251c\u25001791118 gorgone-audit\n           \u251c\u25001791125 gorgone-nodes\n           \u251c\u25001791138 gorgone-action\n           \u251c\u25001791151 gorgone-cron\n           \u251c\u25001791158 gorgone-dbcleaner\n           \u251c\u25001791159 gorgone-autodiscovery\n           \u251c\u25001791166 gorgone-httpserver\n           \u251c\u25001791180 gorgone-proxy\n           \u251c\u25001791181 gorgone-proxy\n           \u251c\u25001791182 gorgone-proxy\n           \u251c\u25001791189 gorgone-proxy\n           \u2514\u25001791190 gorgone-proxy\n\nmars 06 15:58:10 ito-central systemd[1]: gorgoned.service: Succeeded.\nmars 06 15:58:10 ito-central systemd[1]: Stopped Centreon Gorgone.\nmars 06 15:58:10 ito-central systemd[1]: Started Centreon Gorgone.\n")),(0,a.kt)("p",null,"Vous devriez voir la ligne suivante dans les logs de Gorgone ",(0,a.kt)("strong",{parentName:"p"},"/var/log/centreon-gorgone/gorgoned.log")," :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-text"},"2023-03-06 15:58:12 - INFO - [autodiscovery] -class- host discovery - sync started\n")),(0,a.kt)("h2",{id:"uri-personnalis\xe9e"},"URI personnalis\xe9e"),(0,a.kt)("p",null,"Il est possible de personnaliser l'URI de connexion \xe0 votre plateforme Centreon. Par exemple, ",(0,a.kt)("strong",{parentName:"p"},"/centreon")," peut \xeatre remplac\xe9 par ",(0,a.kt)("strong",{parentName:"p"},"/monitoring"),"."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Au moins un niveau de chemin est obligatoire.")),(0,a.kt)("p",null,"Pour personnaliser l'URI de Centreon :"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\xc9ditez le fichier de configuration Apache pour Centreon :")),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"vi /etc/httpd/conf.d/10-centreon.conf\n"))),(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"vi /etc/httpd/conf.d/10-centreon.conf\n"))),(0,a.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"vi /etc/apache2/sites-available/centreon.conf\n")))),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Remplacez le chemin ",(0,a.kt)("strong",{parentName:"li"},"/centreon")," par le chemin d\xe9sir\xe9 :")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-apache"},'Define base_uri "/centreon"\n')),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Red\xe9marrez Apache :")),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart httpd\n"))),(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart httpd\n"))),(0,a.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart apache2\n")))),(0,a.kt)("h2",{id:"activation-du-http2"},"Activation du http2"),(0,a.kt)("p",null,"Il est possible d'activer le protocole http2 pour am\xe9liorer les performances r\xe9seaux de Centreon."),(0,a.kt)("p",null,"Pour utiliser http2, vous devez suivre les \xe9tapes suivantes:"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"#s%C3%A9curiser-le-serveur-web-en-https"},"Configurer le https pour Centreon"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Installez le module nghttp2:"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install nghttp2\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Activez le protocole ",(0,a.kt)("strong",{parentName:"li"},"http2")," dans ",(0,a.kt)("strong",{parentName:"li"},"/opt/rh/httpd24/root/etc/httpd/conf.d/10-centreon.conf")," :")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-apacheconf"},"...\n<VirtualHost *:443>\n    Protocols h2 h2c http/1.1\n    ...\n</VirtualHost>\n...\n")),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"Modifiez la m\xe9thode utilis\xe9e par apache pour le module multi-processus dans ",(0,a.kt)("strong",{parentName:"li"},"/etc/httpd/conf.modules.d/00-mpm.conf")," :")),(0,a.kt)("p",null,"Commentez la ligne suivante :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"LoadModule mpm_prefork_module modules/mod_mpm_prefork.so\n")),(0,a.kt)("p",null,"D\xe9commentez la ligne suivante :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"LoadModule mpm_event_module modules/mod_mpm_event.so\n")),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},"Red\xe9marrez le processus Apache pour prendre en compte la nouvelle configuration :")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart httpd\n"))),(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"#s%C3%A9curiser-le-serveur-web-en-https"},"Configurer le https pour Centreon"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Installez le module nghttp2:"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install nghttp2\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Activez le protocole ",(0,a.kt)("strong",{parentName:"li"},"http2")," dans ",(0,a.kt)("strong",{parentName:"li"},"/opt/rh/httpd24/root/etc/httpd/conf.d/10-centreon.conf")," :")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-apacheconf"},"...\n<VirtualHost *:443>\n    Protocols h2 h2c http/1.1\n    ...\n</VirtualHost>\n...\n")),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"Modifiez la m\xe9thode utilis\xe9e par apache pour le module multi-processus dans ",(0,a.kt)("strong",{parentName:"li"},"/etc/httpd/conf.modules.d/00-mpm.conf")," :")),(0,a.kt)("p",null,"Commentez la ligne suivante :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"LoadModule mpm_prefork_module modules/mod_mpm_prefork.so\n")),(0,a.kt)("p",null,"D\xe9commentez la ligne suivante :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"LoadModule mpm_event_module modules/mod_mpm_event.so\n")),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},"Red\xe9marrez le processus Apache pour prendre en compte la nouvelle configuration :")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart httpd\n"))),(0,a.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"#s%C3%A9curiser-le-serveur-web-en-https"},"Configurer le https pour Centreon"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Installez le module nghttp2:"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"apt install nghttp2\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Activez le protocole ",(0,a.kt)("strong",{parentName:"li"},"http2")," dans ",(0,a.kt)("strong",{parentName:"li"},"/etc/apache2/sites-available/centreon.conf")," :")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-apacheconf"},"...\n<VirtualHost *:443>\n    Protocols h2 h2c http/1.1\n    ...\n</VirtualHost>\n...\n")),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"Ex\xe9cutez les commandes suivantes :")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"a2dismod php8.1\na2dismod mpm_prefork\na2enmod mpm_event\na2enmod http2\n")),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},"Red\xe9marrez le processus Apache pour prendre en compte la nouvelle configuration :")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart apache2\n")))),(0,a.kt)("h2",{id:"authentification-des-utilisateurs"},"Authentification des utilisateurs"),(0,a.kt)("p",null,"Centreon propose plusieurs m\xe9thodes pour authentifier les utilisateurs :"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/connect/loginpwd"},"localement")," (MySQL)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/administration/parameters/ldap"},"LDAP")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/connect/sso"},"Generic SSO")," ou ",(0,a.kt)("a",{parentName:"li",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/connect/openid"},"OpenId Connect"))),(0,a.kt)("h2",{id:"cr\xe9er-des-profils-dutilisateurs"},"Cr\xe9er des profils d'utilisateurs"),(0,a.kt)("p",null,"Centreon propose de g\xe9rer les autorisations d'acc\xe8s aux diff\xe9rents menus, ressources et actions possibles sur ces ressources\nvia la gestion de ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/administration/access-control-lists"},"liste de contr\xf4le d'acc\xe8s"),"."),(0,a.kt)("h2",{id:"communications-s\xe9curis\xe9es-entre-les-serveurs"},"Communications s\xe9curis\xe9es entre les serveurs"),(0,a.kt)("p",null,"Il est fortement recommand\xe9 de s\xe9curiser les communications entre les diff\xe9rents serveurs de la plateforme Centreon si\ncertains serveurs ne sont pas dans un r\xe9seau s\xe9curis\xe9."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Le tableau des flux r\xe9seau est disponible ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/architectures#tableau-des-flux-r%C3%A9seau"},"ici"),".")),(0,a.kt)("h3",{id:"communication-centreon-broker"},"Communication Centreon Broker"),(0,a.kt)("h4",{id:"centreon-broker-et-pare-feu"},"Centreon Broker et pare-feu"),(0,a.kt)("p",null,"Parfois, il n'est pas possible d'initialiser le flux Centreon Broker depuis le collecteur (ou Remote Server)\nvers le serveur Centreon Central ou le Remote Server.\n",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/monitoring/monitoring-servers/advanced-configuration#centreon-broker-and-the-firewall"},"Voir la configuration suivante pour inverser le flux"),"."),(0,a.kt)("h4",{id:"authentification-des-flux-centreon-broker"},"Authentification des flux Centreon Broker"),(0,a.kt)("p",null,"Si vous devez authentifier des collecteurs qui envoient des donn\xe9es, vous pouvez utiliser le m\xe9canisme d'authentification\nCentreon Broker, qui est bas\xe9 sur des certificats X.509.\n",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/monitoring/monitoring-servers/advanced-configuration#authentification-avec-centreon-broker"},"Voir la configuration suivante pour authentifier les collecteurs"),"."),(0,a.kt)("h4",{id:"compressez-et-chiffrez-la-communication-centreon-broker"},"Compressez et chiffrez la communication Centreon Broker"),(0,a.kt)("p",null,"Il est \xe9galement possible de compresser et de chiffrer la communication de Centreon Broker. Allez dans le menu\n",(0,a.kt)("inlineCode",{parentName:"p"},"Configuration > Pollers > Broker configuration"),", modifiez votre configuration Centreon Broker et activez les entr\xe9es\net sorties ",(0,a.kt)("strong",{parentName:"p"},"IPv4"),":"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Enable TLS encryption: Auto"),(0,a.kt)("li",{parentName:"ul"},"Enable negotiation: Yes"),(0,a.kt)("li",{parentName:"ul"},"Compression (zlib): Auto")),(0,a.kt)("h3",{id:"communication-centreon-gorgone"},"Communication Centreon Gorgone"),(0,a.kt)("p",null,"Par d\xe9faut, les communications ZMQ sont s\xe9curis\xe9es, \xe0 la fois celles externes (avec le collecteur) et celles internes (entre processus gorgone)."),(0,a.kt)("p",null,"Cependant, l'API gorgone HTTP n'est pas s\xe9curis\xe9e par d\xe9faut. Seul localhost peut communiquer avec gorgone, mais il n'utilise pas SSL."),(0,a.kt)("p",null,"Vous pouvez ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/centreon/centreon/blob/develop/centreon-gorgone/docs/modules/core/httpserver.md"},"configurer SSL")," via le fichier ",(0,a.kt)("strong",{parentName:"p"},"/etc/centreon-gorgone/config.d/40-gorgoned.yaml"),"."),(0,a.kt)("p",null,"Puis configurez gorgone \xe0 la page ",(0,a.kt)("strong",{parentName:"p"},"Administration > Param\xe8tres > Gorgone"),"."),(0,a.kt)("h2",{id:"gestion-de-linformation-et-des-\xe9v\xe9nements-de-s\xe9curit\xe9-siem"},"Gestion de l'information et des \xe9v\xe9nements de s\xe9curit\xe9 (SIEM)"),(0,a.kt)("p",null,"Les journaux des \xe9v\xe9nements Centreon sont disponibles dans les r\xe9pertoires suivants :"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"R\xe9pertoires des journaux"),(0,a.kt)("th",{parentName:"tr",align:null},"Central server"),(0,a.kt)("th",{parentName:"tr",align:null},"Remote Server"),(0,a.kt)("th",{parentName:"tr",align:null},"Poller"),(0,a.kt)("th",{parentName:"tr",align:null},"Centreon Map server"),(0,a.kt)("th",{parentName:"tr",align:null},"Centreon MBI Server"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"/var/log/centreon"),(0,a.kt)("td",{parentName:"tr",align:null},"X"),(0,a.kt)("td",{parentName:"tr",align:null},"X"),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"/var/log/centreon-broker"),(0,a.kt)("td",{parentName:"tr",align:null},"X"),(0,a.kt)("td",{parentName:"tr",align:null},"X"),(0,a.kt)("td",{parentName:"tr",align:null},"X"),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"/var/log/centreon-engine"),(0,a.kt)("td",{parentName:"tr",align:null},"X"),(0,a.kt)("td",{parentName:"tr",align:null},"X"),(0,a.kt)("td",{parentName:"tr",align:null},"X"),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"/var/log/centreon-gorgone"),(0,a.kt)("td",{parentName:"tr",align:null},"X"),(0,a.kt)("td",{parentName:"tr",align:null},"X"),(0,a.kt)("td",{parentName:"tr",align:null},"X"),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"/var/log/centreon-bi"),(0,a.kt)("td",{parentName:"tr",align:null},"X"),(0,a.kt)("td",{parentName:"tr",align:null},"X"),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"/var/log/centreon-map"),(0,a.kt)("td",{parentName:"tr",align:null},"X"),(0,a.kt)("td",{parentName:"tr",align:null},"X"),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"X"),(0,a.kt)("td",{parentName:"tr",align:null},"X")))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"De plus, toutes les actions de modification de la configuration de Centreon effectu\xe9es par les utilisateurs sont\ndisponibles via le menu ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/administration/logging-configuration-changes"},(0,a.kt)("strong",{parentName:"a"},"Administration > Logs")),".")),(0,a.kt)("h1",{id:"sauvegardez-votre-plateforme"},"Sauvegardez votre plateforme"),(0,a.kt)("p",null,"Centreon propose de sauvegarder la configuration de la plateforme. Pour ce faire, acc\xe9dez au menu\n",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/administration/backup"},(0,a.kt)("strong",{parentName:"a"},"Administration > Parameters > Backup")),"."))}v.isMDXComponent=!0}}]);