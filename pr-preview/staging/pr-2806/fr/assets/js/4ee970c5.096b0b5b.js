"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[23332],{19849:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>u,default:()=>k,frontMatter:()=>p,metadata:()=>c,toc:()=>m});t(67294);var r=t(3905),a=t(51715),l=t(7626);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}const p={id:"using-sources",title:"\xc0 partir des sources"},u=void 0,c={unversionedId:"installation/installation-of-a-central-server/using-sources",id:"version-23.10/installation/installation-of-a-central-server/using-sources",title:"\xc0 partir des sources",description:"Pr\xe9requis",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-23.10/installation/installation-of-a-central-server/using-sources.md",sourceDirName:"installation/installation-of-a-central-server",slug:"/installation/installation-of-a-central-server/using-sources",permalink:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/installation-of-a-central-server/using-sources",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/i18n/fr/docusaurus-plugin-content-docs/version-23.10/installation/installation-of-a-central-server/using-sources.md",tags:[],version:"23.10",lastUpdatedAt:1699870482,formattedLastUpdatedAt:"13 nov. 2023",frontMatter:{id:"using-sources",title:"\xc0 partir des sources"},sidebar:"version-23.10/docs",previous:{title:"\xc0 partir d'une VM",permalink:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/installation-of-a-central-server/using-virtual-machines"},next:{title:"Installation Web",permalink:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/web-and-post-installation"}},d={},m=[{value:"Pr\xe9requis",id:"pr\xe9requis",level:2},{value:"Centreon library (Centreon CLIB)",id:"centreon-library-centreon-clib",level:2},{value:"Monitoring engine (Centreon Engine)",id:"monitoring-engine-centreon-engine",level:2},{value:"Pr\xe9requis",id:"pr\xe9requis-1",level:3},{value:"Installation",id:"installation",level:3},{value:"Stream Multiplexer (Centreon Broker)",id:"stream-multiplexer-centreon-broker",level:2},{value:"Pr\xe9requis",id:"pr\xe9requis-2",level:3},{value:"Installation",id:"installation-1",level:3},{value:"Centreon Plugins",id:"centreon-plugins",level:2},{value:"Centreon Gorgone",id:"centreon-gorgone",level:2},{value:"S\xe9curiser la base de donn\xe9es",id:"s\xe9curiser-la-base-de-donn\xe9es",level:3},{value:"Nom du serveur",id:"nom-du-serveur",level:2},{value:"Centreon",id:"centreon",level:2},{value:"Contr\xf4le de pr\xe9requis",id:"contr\xf4le-de-pr\xe9requis",level:3},{value:"Approbation de la licence",id:"approbation-de-la-licence",level:3},{value:"Composants principaux",id:"composants-principaux",level:3},{value:"D\xe9finition des chemins d&#39;installation",id:"d\xe9finition-des-chemins-dinstallation",level:3},{value:"Utilisateur et groupe centreon",id:"utilisateur-et-groupe-centreon",level:3},{value:"Utilisateur de la supervision",id:"utilisateur-de-la-supervision",level:3},{value:"R\xe9pertoire des journaux d&#39;\xe9v\xe8nements",id:"r\xe9pertoire-des-journaux-d\xe9v\xe8nements",level:3},{value:"Configuration des droits sudo",id:"configuration-des-droits-sudo",level:3},{value:"Configuration du serveur Apache",id:"configuration-du-serveur-apache",level:3},{value:"Configuration de PHP FPM",id:"configuration-de-php-fpm",level:3},{value:"Installation des modules pear",id:"installation-des-modules-pear",level:3},{value:"Installation du fichier de configuration",id:"installation-du-fichier-de-configuration",level:3},{value:"Installation du composant Centstorage",id:"installation-du-composant-centstorage",level:3},{value:"Installation des plugins",id:"installation-des-plugins",level:3},{value:"Installation du syst\xe8me de gestion des traps SNMP (Centreontrapd)",id:"installation-du-syst\xe8me-de-gestion-des-traps-snmp-centreontrapd",level:3},{value:"Fin de l&#39;installation",id:"fin-de-linstallation",level:4},{value:"Installation des d\xe9pendances PHP",id:"installation-des-d\xe9pendances-php",level:3},{value:"Installation des d\xe9pendances Javascript",id:"installation-des-d\xe9pendances-javascript",level:3},{value:"Pour tous les OS",id:"pour-tous-les-os",level:3},{value:"Installation web",id:"installation-web",level:2}],g={toc:m},h="wrapper";function k(e){var{components:n}=e,t=i(e,["components"]);return(0,r.kt)(h,s(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){o(e,n,t[n])}))}return e}({},g,t),{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"pr\xe9requis"},"Pr\xe9requis"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"La plupart des utilisateurs de CentOS pr\xe9f\xe8reront installer Centreon Web en utilisant\n",(0,r.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/installation-of-a-central-server/using-packages"},"les paquets fournis par Centreon"),".")),(0,r.kt)(a.Z,{groupId:"sync",mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"Oracle Linux 8",label:"Oracle Linux 8",mdxType:"TabItem"},(0,r.kt)("p",null,"Afin d'installer les logiciels Centreon, le d\xe9p\xf4t Oracle CodeReady Builder de Oracle doit \xeatre activ\xe9."),(0,r.kt)("p",null,"Ex\xe9cutez les commandes suivantes :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dnf -y install dnf-plugins-core oracle-epel-release-el8\ndnf config-manager --set-enabled ol8_codeready_builder\n")),(0,r.kt)("p",null,"Installez le d\xe9p\xf4t Centreon pour les d\xe9pendances perl additionnelles :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install -y https://yum.centreon.com/standard/23.04/el8/stable/noarch/RPMS/centreon-release-23.04-1.el8.noarch.rpm\n")),(0,r.kt)("p",null,"Activez PHP 7.3 avec la commande suivante :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dnf module enable php:7.3 -y\n")),(0,r.kt)("p",null,"Contr\xf4lez que PHP 7.3 est activ\xe9 :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dnf module list php\n")),(0,r.kt)("p",null,"Vous devriez avoir le r\xe9sultat suivant :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"Oracle Linux 8 Application Stream (x86_64)\nName                                Stream                                 Profiles                                                 Summary\nphp                                 7.2 [d]                                common [d], devel, minimal                               PHP scripting language\nphp                                 7.3 [e]                                common [d], devel, minimal                               PHP scripting language\nphp                                 7.4                                    common [d], devel, minimal                               PHP scripting language\n\nHint: [d]efault, [e]nabled, [x]disabled, [i]nstalled\n")),(0,r.kt)("p",null,"Les d\xe9p\xf4ts sont maintenant install\xe9s."),(0,r.kt)("p",null,"Vous pouvez maintenant installer les pr\xe9requis :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dnf update\ndnf install -y \\\n    cpp \\\n    dmidecode \\\n    fping \\\n    freetds \\\n    gcc \\\n    gcc-c++ \\\n    glib2-devel \\\n    gnutls \\\n    gnutls-devel \\\n    httpd \\\n    libstdc++ \\\n    lm_sensors \\\n    lua \\\n    lua-devel \\\n    mailx \\\n    make \\\n    net-snmp \\\n    net-snmp-libs \\\n    net-snmp-perl \\\n    net-snmp-utils \\\n    net-tools \\\n    npm \\\n    openssl \\\n    openwsman-perl \\\n    perl \\\n    perl-Crypt-DES \\\n    perl-DBD-MySQL \\\n    perl-DBI \\\n    perl-DateTime \\\n    perl-DateTime-Format-Duration-ISO8601 \\\n    perl-Digest-HMAC \\\n    perl-Digest-SHA1 \\\n    perl-Encode \\\n    perl-interpreter \\\n    perl-IO-Socket-INET6 \\\n    perl-JSON \\\n    perl-MQSeries \\\n    perl-MongoDB \\\n    perl-Net-Curl \\\n    perl-Redis \\\n    perl-Socket \\\n    perl-Socket6 \\\n    perl-Sys-Syslog \\\n    perl-URI \\\n    perl-UUID \\\n    perl-rrdtool \\\n    php \\\n    php-cli \\\n    php-common \\\n    php-devel \\\n    php-fpm \\\n    php-gd \\\n    php-intl \\\n    php-json \\\n    php-ldap \\\n    php-mbstring \\\n    php-mysqlnd \\\n    php-pdo \\\n    php-pear \\\n    php-process \\\n    php-snmp \\\n    php-xml \\\n    php-zip \\\n    plink \\\n    quota \\\n    rrdtool \\\n    rrdtool-devel \\\n    unixODBC\n")),(0,r.kt)("p",null,"Des commandes suppl\xe9mentaires sont n\xe9cessaires pour configurer correctement l'environnement :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"/bin/pear channel-update pear.php.net\n")),(0,r.kt)("p",null,"Si vous ne pouvez pas acc\xe9der directement \xe0 Internet mais que vous devez passer par un proxy, ex\xe9cutez la commande\nsuivante :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"/bin/pear config-set http_proxy http://my_proxy.com:port\n")),(0,r.kt)("p",null,"Puis ex\xe9cutez :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"/bin/pear upgrade-all\n"))),(0,r.kt)(l.Z,{value:"RHEL 8",label:"RHEL 8",mdxType:"TabItem"},(0,r.kt)("p",null,"Afin d'installer les logiciels Centreon, le d\xe9p\xf4t CodeReady Builder de Redhat doit \xeatre activ\xe9."),(0,r.kt)("p",null,"Ex\xe9cutez les commandes suivantes :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dnf -y install dnf-plugins-core https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm\nsubscription-manager repos --enable codeready-builder-for-rhel-8-x86_64-rpms\n")),(0,r.kt)("p",null,"Installez le d\xe9p\xf4t Centreon pour les d\xe9pendances perl additionnelles :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install -y https://yum.centreon.com/standard/23.04/el8/stable/noarch/RPMS/centreon-release-23.04-1.el8.noarch.rpm\n")),(0,r.kt)("p",null,"Activez PHP 7.3 avec la commande suivante :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dnf module enable php:7.3 -y\n")),(0,r.kt)("p",null,"Contr\xf4lez que PHP 7.3 est activ\xe9 :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dnf module list php\n")),(0,r.kt)("p",null,"Vous devriez avoir le r\xe9sultat suivant :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"Red Hat Enterprise Linux 8 for x86_64 - AppStream (RPMs)\nName                                Stream                                 Profiles                                                 Summary\nphp                                 7.2 [d]                                common [d], devel, minimal                               PHP scripting language\nphp                                 7.3 [e]                                common [d], devel, minimal                               PHP scripting language\nphp                                 7.4                                    common [d], devel, minimal                               PHP scripting language\n\nHint: [d]efault, [e]nabled, [x]disabled, [i]nstalled\n")),(0,r.kt)("p",null,"Les d\xe9p\xf4ts sont maintenant install\xe9s."),(0,r.kt)("p",null,"Vous pouvez maintenant installer les pr\xe9requis :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dnf update\ndnf install -y \\\n    cpp \\\n    dmidecode \\\n    fping \\\n    freetds \\\n    gcc \\\n    gcc-c++ \\\n    glib2-devel \\\n    gnutls \\\n    gnutls-devel \\\n    httpd \\\n    libstdc++ \\\n    lm_sensors \\\n    lua \\\n    lua-devel \\\n    mailx \\\n    make \\\n    net-snmp \\\n    net-snmp-libs \\\n    net-snmp-perl \\\n    net-snmp-utils \\\n    net-tools \\\n    npm \\\n    openssl \\\n    openwsman-perl \\\n    perl \\\n    perl-Crypt-DES \\\n    perl-DBD-MySQL \\\n    perl-DBI \\\n    perl-DateTime \\\n    perl-DateTime-Format-Duration-ISO8601 \\\n    perl-Digest-HMAC \\\n    perl-Digest-SHA1 \\\n    perl-Encode \\\n    perl-interpreter \\\n    perl-IO-Socket-INET6 \\\n    perl-JSON \\\n    perl-MQSeries \\\n    perl-MongoDB \\\n    perl-Net-Curl \\\n    perl-Redis \\\n    perl-Socket \\\n    perl-Socket6 \\\n    perl-Sys-Syslog \\\n    perl-URI \\\n    perl-UUID \\\n    perl-rrdtool \\\n    php \\\n    php-cli \\\n    php-common \\\n    php-devel \\\n    php-fpm \\\n    php-gd \\\n    php-intl \\\n    php-json \\\n    php-ldap \\\n    php-mbstring \\\n    php-mysqlnd \\\n    php-pdo \\\n    php-pear \\\n    php-process \\\n    php-snmp \\\n    php-xml \\\n    php-zip \\\n    plink \\\n    quota \\\n    rrdtool \\\n    rrdtool-devel \\\n    unixODBC\n")),(0,r.kt)("p",null,"Des commandes suppl\xe9mentaires sont n\xe9cessaires pour configurer correctement l'environnement :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"/bin/pear channel-update pear.php.net\n")),(0,r.kt)("p",null,"Si vous ne pouvez pas acc\xe9der directement \xe0 Internet mais que vous devez passer par un proxy, ex\xe9cutez la commande\nsuivante :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"/bin/pear config-set http_proxy http://my_proxy.com:port\n")),(0,r.kt)("p",null,"Puis ex\xe9cutez :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"/bin/pear upgrade-all\n")))),(0,r.kt)("h2",{id:"centreon-library-centreon-clib"},"Centreon library (Centreon CLIB)"),(0,r.kt)("p",null,"Installez Centreon CLIB en utilisant ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/centreon/centreon-clib#fetching-sources"},"cette proc\xe9dure"),"."),(0,r.kt)("h2",{id:"monitoring-engine-centreon-engine"},"Monitoring engine (Centreon Engine)"),(0,r.kt)("h3",{id:"pr\xe9requis-1"},"Pr\xe9requis"),(0,r.kt)("p",null,"Cr\xe9ez un utilisateur et un groupe Centreon Engine :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'groupadd -g 6001 centreon-engine\nuseradd -u 6001 -g centreon-engine -m -r -d /var/lib/centreon-engine -c "Centreon Engine" -s /bin/bash centreon-engine\n')),(0,r.kt)("h3",{id:"installation"},"Installation"),(0,r.kt)("p",null,"Installez Centreon Engine en utilisant ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/centreon/centreon-engine/blob/master/README.md#fetching-sources"},"cette proc\xe9dure"),"."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"N'oubliez pas d'installer les ",(0,r.kt)("a",{parentName:"p",href:"https://library.nagios.com/"},"Nagios plugins")," si vous ne l'avez pas d\xe9j\xe0 fait.")),(0,r.kt)("h2",{id:"stream-multiplexer-centreon-broker"},"Stream Multiplexer (Centreon Broker)"),(0,r.kt)("h3",{id:"pr\xe9requis-2"},"Pr\xe9requis"),(0,r.kt)("p",null,"Cr\xe9ez un utilisateur et un groupe Centreon Broker :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'groupadd -g 6002 centreon-broker\nuseradd -u 6002 -g centreon-broker -m -r -d /var/lib/centreon-broker -c "Centreon Broker"  -s /bin/bash centreon-broker\n')),(0,r.kt)("h3",{id:"installation-1"},"Installation"),(0,r.kt)("p",null,"Installez Centreon Broker en utilisant ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/centreon/centreon-broker/blob/master/README.md#fetching-sources"},"cette proc\xe9dure"),"."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Si vous souhaitez utiliser la fonctionnalit\xe9 Stream Connector, installez\n",(0,r.kt)("a",{parentName:"p",href:"https://luarocks.org/modules/moteus/lua-curl"},"lua-curl"),".")),(0,r.kt)("h2",{id:"centreon-plugins"},"Centreon Plugins"),(0,r.kt)("p",null,"T\xe9l\xe9chargez la derni\xe8re version depuis le ",(0,r.kt)("a",{parentName:"p",href:"https://download.centreon.com"},"site Web de t\xe9l\xe9chargement Centreon"),"\ndans l'onglet ",(0,r.kt)("strong",{parentName:"p"},"Custom Platforms"),", puis l'onglet ",(0,r.kt)("strong",{parentName:"p"},"Plugins"),"."),(0,r.kt)("p",null,"Copiez ensuite l'archive tar sur votre serveur dans le r\xe9pertoire ",(0,r.kt)("strong",{parentName:"p"},"/tmp")," et ex\xe9cutez les commandes suivantes :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tar xzf centreon-plugins-20210317.tar.gz\ncd centreon-plugins-20210317\nchown centreon-engine: *\nchmod gu+x *\nmkdir -p /usr/lib/centreon/plugins\nmv * /usr/lib/centreon/plugins/\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Modifiez la date du paquet ",(0,r.kt)("strong",{parentName:"p"},"20210317")," par la votre.")),(0,r.kt)("h2",{id:"centreon-gorgone"},"Centreon Gorgone"),(0,r.kt)("p",null,"Installez Centreon Gorgone en utilisant ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/centreon/centreon-gorgone/blob/master/docs/getting_started.md#installation"},"cette proc\xe9dure"),"."),(0,r.kt)("h3",{id:"s\xe9curiser-la-base-de-donn\xe9es"},"S\xe9curiser la base de donn\xe9es"),(0,r.kt)("p",null,"Depuis MariaDB 10.5, il est obligatoire de s\xe9curiser l'acc\xe8s en root \xe0 la base avant d'installer Centreon. Ex\xe9cutez la commande suivante :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"mysql_secure_installation\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'R\xe9pondez oui \xe0 toute question sauf \xe0 "Disallow root login remotely?". '),(0,r.kt)("li",{parentName:"ul"},"Vous devez obligatoirement d\xe9finir un mot de passe pour l'utilisateur ",(0,r.kt)("strong",{parentName:"li"},"root")," de la base de donn\xe9es.\nCe mot de passe vous sera demand\xe9 lors de l'",(0,r.kt)("a",{parentName:"li",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/web-and-post-installation"},"installation web"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Pour plus d'informations, veuillez consulter la ",(0,r.kt)("a",{parentName:"p",href:"https://mariadb.com/kb/en/mysql_secure_installation/"},"documentation officielle MariaDB"),".")),(0,r.kt)("h2",{id:"nom-du-serveur"},"Nom du serveur"),(0,r.kt)("p",null,"Si vous le souhaitez, vous pouvez changer le nom du serveur \xe0 l'aide de la commande suivante:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"hostnamectl set-hostname new-server-name\n")),(0,r.kt)("p",null,"Remplacez ",(0,r.kt)("strong",{parentName:"p"},"new-server-name")," par le nom de votre choix. Exemple :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"hostnamectl set-hostname central\n")),(0,r.kt)("h2",{id:"centreon"},"Centreon"),(0,r.kt)("p",null,"T\xe9l\xe9chargez la derni\xe8re version depuis le ",(0,r.kt)("a",{parentName:"p",href:"https://download.centreon.com"},"site Web de t\xe9l\xe9chargement Centreon"),"\ndans l'onglet ",(0,r.kt)("strong",{parentName:"p"},"Custom Platforms"),", puis l'onglet ",(0,r.kt)("strong",{parentName:"p"},"Web"),"."),(0,r.kt)("p",null,"Ouvrez l'archive Centreon :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tar zxf centreon-web-YY.MM.x.tar.gz\ncd centreon-web-YY.MM.x\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Le script d'installation permet une configuration personnalis\xe9e, cette proc\xe9dure vous montrera les meilleurs chemins \xe0 utiliser."),(0,r.kt)("p",{parentName:"blockquote"},"En outre, les questions rapides Yes/No peuvent \xeatre r\xe9pondues par ","[y]"," la plupart du temps."),(0,r.kt)("p",{parentName:"blockquote"},"Si les sources de centreon ont \xe9t\xe9 t\xe9l\xe9charg\xe9es depuis github, ex\xe9cutez ces commandes :"),(0,r.kt)("pre",{parentName:"blockquote"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"composer install --no-dev --optimize-autoloader\nnpm ci\nnpm run build\n")),(0,r.kt)("p",{parentName:"blockquote"},"Vous pouvez t\xe9l\xe9charger ",(0,r.kt)("strong",{parentName:"p"},"composer")," deuisp ",(0,r.kt)("a",{parentName:"p",href:"https://getcomposer.org/doc/00-intro.md#installation-linux-unix-macos"},"le site officiel"),".")),(0,r.kt)("p",null,"Ex\xe9cutez le script d'installation :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"./install.sh -i\n")),(0,r.kt)("h3",{id:"contr\xf4le-de-pr\xe9requis"},"Contr\xf4le de pr\xe9requis"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Si l'\xe9tape d'installation des pr\xe9requis s'est d\xe9roul\xe9e avec succ\xe8s, vous ne devriez avoir aucun probl\xe8me lors de cette\n\xe9tape. Sinon, reprennez la proc\xe9dure d'installation des pr\xe9requis.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"###############################################################################\n#                                                                             #\n#                         Centreon (www.centreon.com)                         #\n#                          Thanks for using Centreon                          #\n#                                                                             #\n#                                    vYY.MM.x                                 #\n#                                                                             #\n#                              infos@centreon.com                             #\n#                                                                             #\n#                   Make sure you have installed and configured               #\n#         centreon-gorgone - sudo - sed - php - apache - rrdtool - mysql      #\n#                                                                             #\n###############################################################################\n------------------------------------------------------------------------\n        Checking all needed binaries\n------------------------------------------------------------------------\nrm                                                         OK\ncp                                                         OK\nmv                                                         OK\n/bin/chmod                                                 OK\n/bin/chown                                                 OK\necho                                                       OK\nmore                                                       OK\nmkdir                                                      OK\nfind                                                       OK\n/bin/grep                                                  OK\n/bin/cat                                                   OK\n/bin/sed                                                   OK\n\n------------------------------------------------------------------------\n        Check mandatory gorgone service status\n------------------------------------------------------------------------\n\nIs the Gorgone module already installed?\n[y/n], default to [n]:\n> y\n")),(0,r.kt)("h3",{id:"approbation-de-la-licence"},"Approbation de la licence"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"This General Public License does not permit incorporating your program into\nproprietary programs.  If your program is a subroutine library, you may\nconsider it more useful to permit linking proprietary applications with the\nlibrary.  If this is what you want to do, use the GNU Library General\nPublic License instead of this License.\n\nDo you accept GPLv2 license ?\n[y/n], default to [n]:\n> y\n")),(0,r.kt)("h3",{id:"composants-principaux"},"Composants principaux"),(0,r.kt)("p",null,"R\xe9pondez ",(0,r.kt)("strong",{parentName:"p"},"[y]")," \xe0 toutes les questions :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"------------------------------------------------------------------------\n        Please choose what you want to install\n------------------------------------------------------------------------\n\nDo you want to install : Centreon Web Front\n[y/n], default to [n]:\n> y\n\nDo you want to install : Centreon Nagios Plugins\n[y/n], default to [n]:\n> y\n\nDo you want to install : CentreonTrapd process\n[y/n], default to [n]:\n> y\n")),(0,r.kt)("h3",{id:"d\xe9finition-des-chemins-dinstallation"},"D\xe9finition des chemins d'installation"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"------------------------------------------------------------------------\n        Start CentWeb Installation\n------------------------------------------------------------------------\n\nWhere is your Centreon directory ?\ndefault to [/usr/local/centreon]\n> /usr/share/centreon\nPath /usr/share/centreon                                   OK\n\nWhere is your Centreon log directory ?\ndefault to [/usr/local/centreon/log]\n> /var/log/centreon\n\nDo you want me to create this directory ? [/var/log/centreon]\n[y/n], default to [n]:\n> y\nPath /var/log/centreon                                     OK\n\nWhere is your Centreon etc directory ?\ndefault to [/etc/centreon]\n>\n\nDo you want me to create this directory ? [/etc/centreon]\n[y/n], default to [n]:\n> y\nPath /etc/centreon                                         OK\n\nWhere is your Centreon variable state information directory ?\ndefault to [/var/lib/centreon]\n>\n\nDo you want me to create this directory ? [/var/lib/centreon]\n[y/n], default to [n]:\n> y\nPath /var/lib/centreon                                     OK\n\nWhere is rrdtool\ndefault to [/usr/bin/rrdtool]\n> /opt/rrdtool-broker/bin/rrdtool\n/opt/rrdtool-broker/bin/rrdtool                            OK\n\n/usr/bin/mail                                              OK\n\nWhere is your php binary ?\ndefault to [/usr/bin/php]\n>\n/usr/bin/php                                               OK\n\nWhere is PEAR [PEAR.php]\ndefault to [/usr/share/pear/PEAR.php]\n> /usr/share/php/PEAR.php\nPath /usr/share/php/PEAR.php                               OK\n/usr/bin/perl                                              OK\nComposer dependencies are installed                        OK\nFrontend application is built                              OK\nEnable Apache configuration                                OK\nConf centreon already enabled\nFinding Apache user :                                      www-data\nFinding Apache group :                                     www-data\n")),(0,r.kt)("h3",{id:"utilisateur-et-groupe-centreon"},"Utilisateur et groupe centreon"),(0,r.kt)("p",null,"Le groupe d'applications ",(0,r.kt)("strong",{parentName:"p"},"centreon")," est utilis\xe9 pour les droits d'acc\xe8s entre les diff\xe9rents logiciels de la suite\nCentreon :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"What is the Centreon group ? [centreon]\ndefault to [centreon]\n>\n\nWhat is the Centreon user ? [centreon]\ndefault to [centreon]\n>\n")),(0,r.kt)("h3",{id:"utilisateur-de-la-supervision"},"Utilisateur de la supervision"),(0,r.kt)("p",null,"Cet utilisateur ex\xe9cute le moteur de supervision Centreon Engine."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"What is the Monitoring engine user ? [centreon-engine]\ndefault to [centreon-engine]\n>\n")),(0,r.kt)("p",null,"Cet utilisateur ex\xe9cute le multiplexeur de flux Centreon Broker."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"What is your Centreon Broker user ? [centreon-broker]\ndefault to [centreon-broker]\n>\n")),(0,r.kt)("h3",{id:"r\xe9pertoire-des-journaux-d\xe9v\xe8nements"},"R\xe9pertoire des journaux d'\xe9v\xe8nements"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"What is the Monitoring engine log directory ?[/var/log/centreon-engine]\ndefault to [/var/log/centreon-engine]\n>\nPath                                                       OK\nPath                                                       OK\nAdd group centreon to user www-data                        OK\nAdd group centreon to user centreon-engine                 OK\nAdd group centreon-engine to user www-data                 OK\nAdd group centreon-engine to user centreon                 OK\nAdd group www-data to user centreon                        OK\n")),(0,r.kt)("h3",{id:"configuration-des-droits-sudo"},"Configuration des droits sudo"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"------------------------------------------------------------------------\n        Configure Sudo\n------------------------------------------------------------------------\n\nWhere is sudo configuration file ?\ndefault to [/etc/sudoers.d/centreon]\n>\n\nDo you want me to create this file ? [/etc/sudoers.d/centreon]\n[y/n], default to [n]:\n>  y\n/etc/sudoers.d/centreon                                    OK\n\nWhat is the Monitoring engine binary ? [/usr/sbin/centengine]\ndefault to [/usr/sbin/centengine]\n>\n\nWhere is the Monitoring engine configuration directory ? [/etc/centreon-engine]\ndefault to [/etc/centreon-engine]\n>\n\nWhere is the configuration directory for broker module ? [/etc/centreon-broker]\ndefault to [/etc/centreon-broker]\n>\n\nWhere is your service command binary ?\ndefault to [/usr/sbin/service]\n>\nYour sudo is not configured\n\nDo you want me to configure your sudo ? (WARNING)\n[y/n], default to [n]:\n>  y\nConfiguring Sudo                                           OK\n")),(0,r.kt)("h3",{id:"configuration-du-serveur-apache"},"Configuration du serveur Apache"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"------------------------------------------------------------------------\n        Configure Apache server\n------------------------------------------------------------------------\n\nDo you want to add Centreon Apache sub configuration file ?\n[y/n], default to [n]:\n> y\nCreate '/etc/apache2/conf-available/centreon.conf'         OK\nConfiguring Apache                                         OK\n\nDo you want to reload your Apache ?\n[y/n], default to [n]:\n> y\nReloading Apache service                                   OK\n")),(0,r.kt)("h3",{id:"configuration-de-php-fpm"},"Configuration de PHP FPM"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"------------------------------------------------------------------------\n        Configure PHP FPM service\n------------------------------------------------------------------------\n\nDo you want to add Centreon PHP FPM sub configuration file ?\n[y/n], default to [n]:\n> y\nCreating directory /var/lib/centreon/sessions              OK\nCreate 'etc/php/7.2/fpm/pool.d/centreon.conf'              OK\nConfiguring PHP FPM                                        OK\n\nDo you want to reload PHP FPM service ?\n[y/n], default to [n]:\n> y\nReloading PHP FPM service                                  OK\nPreparing Centreon temporary files                         OK\nChange right on /var/log/centreon                          OK\nChange right on /etc/centreon                              OK\nChange macros for insertBaseConf.sql                       OK\nChange macros for sql update files                         OK\nChange macros for php files                                OK\nChange macros for php config file                          OK\nChange macros for perl binary                              OK\nChange right on /etc/centreon-engine                       OK\nAdd group centreon-broker to user www-data                 OK\nAdd group centreon-broker to user centreon-engine          OK\nAdd group centreon to user centreon-broker                 OK\nChange right on /etc/centreon-broker                       OK\nCopy CentWeb in system directory                           OK\nInstall CentWeb (web front of centreon)                    OK\nChange right for install directory                         OK\nInstall libraries                                          OK\nWrite right to Smarty Cache                                OK\nChange macros for centreon.cron                            OK\nInstall Centreon cron.d file                               OK\nChange macros for centAcl.php                              OK\nChange macros for downtimeManager.php                      OK\nChange macros for centreon-backup.pl                       OK\nInstall cron directory                                     OK\nChange right for eventReportBuilder                        OK\nChange right for dashboardBuilder                          OK\nChange right for centreon-backup.pl                        OK\nChange right for centreon-backup-mysql.pl                  OK\nChange macros for centreon.logrotate                       OK\nInstall Centreon logrotate.d file                          OK\nPrepare centFillTrapDB                                     OK\nInstall centFillTrapDB                                     OK\nPrepare centreon_trap_send                                 OK\nInstall centreon_trap_send                                 OK\nPrepare centreon_check_perfdata                            OK\nInstall centreon_check_perfdata                            OK\nPrepare centreonSyncPlugins                                OK\nInstall centreonSyncPlugins                                OK\nPrepare centreonSyncArchives                               OK\nInstall centreonSyncArchives                               OK\nPrepare generateSqlLite                                    OK\nInstall generateSqlLite                                    OK\nInstall changeRrdDsName.pl                                 OK\nPrepare export-mysql-indexes                               OK\nInstall export-mysql-indexes                               OK\nPrepare import-mysql-indexes                               OK\nInstall import-mysql-indexes                               OK\nPrepare clapi binary                                       OK\nInstall clapi binary                                       OK\nCentreon Web Perl lib installed                            OK\n")),(0,r.kt)("h3",{id:"installation-des-modules-pear"},"Installation des modules pear"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"------------------------------------------------------------------------\nPear Modules\n------------------------------------------------------------------------\nCheck PEAR modules\nPEAR                            1.4.9       1.10.8         OK\nDB                              1.7.6       1.9.2          OK\nDate                            1.4.6       1.4.7          OK\nAll PEAR modules                                           OK\n")),(0,r.kt)("h3",{id:"installation-du-fichier-de-configuration"},"Installation du fichier de configuration"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"------------------------------------------------------------------------\n            Centreon Post Install\n------------------------------------------------------------------------\nCreate /usr/share/centreon/www/install/install.conf.php    OK\nCreate /etc/centreon/instCentWeb.conf                      OK\n")),(0,r.kt)("h3",{id:"installation-du-composant-centstorage"},"Installation du composant Centstorage"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"------------------------------------------------------------------------\n        Starting CentStorage Installation\n------------------------------------------------------------------------\n\nWhere is your Centreon Run Dir directory?\ndefault to [/var/run/centreon]\n>\n\nDo you want me to create this directory ? [/var/run/centreon]\n[y/n], default to [n]:\n> y\nPath /var/run/centreon                                     OK\n\nWhere is your CentStorage binary directory ?\ndefault to [/usr/share/centreon/bin]\n>\nPath /usr/share/centreon/bin                               OK\n\nWhere is your CentStorage RRD directory ?\ndefault to [/var/lib/centreon]\n>\nPath /var/lib/centreon                                     OK\nPreparing Centreon temporary files\n/tmp/centreon-setup exists, it will be moved...\ninstall www/install/createTablesCentstorage.sql            OK\nCreating Centreon Directory '/var/lib/centreon/status'     OK\nCreating Centreon Directory '/var/lib/centreon/metrics'    OK\nChange right : /var/run/centreon                           OK\nInstall logAnalyserBroker                                  OK\nInstall nagiosPerfTrace                                    OK\nChange macros for centstorage.cron                         OK\nInstall CentStorage cron                                   OK\nCreate /etc/centreon/instCentStorage.conf                  OK\n")),(0,r.kt)("h3",{id:"installation-des-plugins"},"Installation des plugins"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"------------------------------------------------------------------------\n        Starting Centreon Plugins Installation\n------------------------------------------------------------------------\nPath                                                       OK\nPath                                                       OK\n\nWhere is your CentPlugins lib directory\ndefault to [/var/lib/centreon/centplugins]\n>\n\nDo you want me to create this directory ? [/var/lib/centreon/centplugins]\n[y/n], default to [n]:\n> y\nPath /var/lib/centreon/centplugins                         OK\nCreate /etc/centreon/instCentPlugins.conf                  OK\n")),(0,r.kt)("h3",{id:"installation-du-syst\xe8me-de-gestion-des-traps-snmp-centreontrapd"},"Installation du syst\xe8me de gestion des traps SNMP (Centreontrapd)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"------------------------------------------------------------------------\n        Starting CentreonTrapD Installation\n------------------------------------------------------------------------\n\nPath                                                       OK\nPath                                                       OK\n\nWhere is your SNMP configuration directory ?\ndefault to [/etc/snmp]\n>\n/etc/snmp                                                  OK\n\nWhere is your CentreonTrapd binaries directory ?\ndefault to [/usr/local/centreon/bin]\n> /usr/share/centreon/bin\n/usr/share/centreon/bin                                    OK\n\nFinding Apache user :                                      www-data\nPreparing Centreon temporary files\nChange macros for snmptrapd.conf                           OK\nReplace CentreonTrapd init script Macro                    OK\nReplace CentreonTrapd default script Macro                 OK\n\nDo you want me to install CentreonTrapd init script ?\n[y/n], default to [n]:\n> y\nCentreonTrapd init script installed                        OK\nCentreonTrapd default script installed                     OK\n\nDo you want me to install CentreonTrapd run level ?\n[y/n], default to [n]:\n> y\ntrapd Perl lib installed                                   OK\nInstall : snmptrapd.conf                                   OK\nInstall : centreontrapdforward                             OK\nInstall : centreontrapd                                    OK\nChange macros for centreontrapd.logrotate                  OK\nInstall Centreon Trapd logrotate.d file                    OK\nCreate /etc/centreon/instCentPlugins.conf                  OK\n")),(0,r.kt)("h4",{id:"fin-de-linstallation"},"Fin de l'installation"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"###############################################################################\n#                                                                             #\n#                         Thanks for using Centreon.                          #\n#                          -----------------------                            #\n#                                                                             #\n#                 Go to the URL : http://localhost.localdomain/centreon/      #\n#                          to finish the setup                                #\n#                                                                             #\n#                Please read the documentation available here :               #\n#                         documentation.centreon.com                          #\n#                                                                             #\n#      ------------------------------------------------------------------     #\n#                                                                             #\n#         Report bugs at https://github.com/centreon/centreon/issues          #\n#                                                                             #\n#                        Contact : contact@centreon.com                       #\n#                          http://www.centreon.com                            #\n#                                                                             #\n#                          -----------------------                            #\n#              For security issues, please read our security policy           #\n#              https://github.com/centreon/centreon/security/policy           #\n#                                                                             #\n###############################################################################\n")),(0,r.kt)("h3",{id:"installation-des-d\xe9pendances-php"},"Installation des d\xe9pendances PHP"),(0,r.kt)("p",null,"Tout d'abord, vous devez installer l'installeur de d\xe9pendance PHP ",(0,r.kt)("strong",{parentName:"p"},"composer"),". Composer peut \xeatre t\xe9l\xe9charg\xe9\n",(0,r.kt)("a",{parentName:"p",href:"https://getcomposer.org/download/"},"ici")," (celui-ci est \xe9galement disponible dans les d\xe9p\xf4ts EPEL)."),(0,r.kt)("p",null,"Une fois que composer est install\xe9, rendez-vous dans les r\xe9pertoires Centreon (habituellement ",(0,r.kt)("strong",{parentName:"p"},"/usr/share/centreon/"),")\net ex\xe9cutez la commande suivante :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"composer install --no-dev --optimize-autoloader\n")),(0,r.kt)("h3",{id:"installation-des-d\xe9pendances-javascript"},"Installation des d\xe9pendances Javascript"),(0,r.kt)("p",null,"Tout d'abord, vous devez installer l'environnement d'ex\xe9cution javascript ",(0,r.kt)("strong",{parentName:"p"},"nodejs"),". Les instructions d'installation\nsont disponibles ",(0,r.kt)("a",{parentName:"p",href:"https://nodejs.org/en/download/package-manager/"},"ici"),"."),(0,r.kt)("p",null,"Une fois que nodejs est install\xe9, copiez les fichiers JSON vers le dossier d'installation :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"cp /usr/local/src/centreon-web-YY.MM.x/package* /usr/share/centreon/\n")),(0,r.kt)("p",null,"Puis, rendez vous dans le r\xe9pertoire centreon (habituellement ",(0,r.kt)("strong",{parentName:"p"},"/usr/share/centreon/"),") et ex\xe9cutez les commandes\nsuivantes :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"npm install\nnpm run build\nrm -rf node_modules\n")),(0,r.kt)("h3",{id:"pour-tous-les-os"},"Pour tous les OS"),(0,r.kt)("p",null,"SELinux doit \xeatre d\xe9sactiv\xe9. Pour cela, vous devez modifier le fichier ",(0,r.kt)("strong",{parentName:"p"},"/etc/sysconfig/selinux")," et remplacer\n",(0,r.kt)("strong",{parentName:"p"},"enforcing")," par ",(0,r.kt)("strong",{parentName:"p"},"disabled")," comme dans l'exemple suivant :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"SELINUX=disabled\n")),(0,r.kt)("p",null,"Apr\xe8s avoir sauvegard\xe9 le fichier, veuillez red\xe9marrer votre syst\xe8me d'exploitation pour prendre en compte les changements."),(0,r.kt)("p",null,"La timezone par d\xe9faut ainsi que des param\xe8tres requis de PHP doivent \xeatre configur\xe9s. Pour cela, allez dans le\nr\xe9pertoire ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/php/7.2/cli/conf.d")," ou ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/php/7.2/apache2/conf.d")," et cr\xe9ez un fichier nomm\xe9 ",(0,r.kt)("inlineCode",{parentName:"p"},"centreon.ini")," contenant\nles lignes suivantes :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"date.timezone = Europe/Paris\nmax_execution_time = 300\nsession.use_strict_mode = 1\nsession.gc_maxlifetime = 7200\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Remplacez ",(0,r.kt)("strong",{parentName:"p"},"Europe/Paris")," par votre fuseau horaire. La liste des fuseaux\nhoraires est disponible ",(0,r.kt)("a",{parentName:"p",href:"http://php.net/manual/en/timezones.php"},"ici"),".")),(0,r.kt)("p",null,"Apr\xe8s avoir sauvegard\xe9 le fichier, n'oubliez pas de red\xe9marrer le service apache de votre serveur."),(0,r.kt)("p",null,"La base de donn\xe9es MariaDB doit \xeatre disponible pour pouvoir continuer l'installation (localement ou non). Pour\ninformation, nous recommandons MariaDB."),(0,r.kt)("h2",{id:"installation-web"},"Installation web"),(0,r.kt)("p",null,"Terminez l'installation en r\xe9alisant les\n",(0,r.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/web-and-post-installation#installation-web"},"\xe9tapes de l'installation web"),"."))}k.isMDXComponent=!0}}]);