<!doctype html>
<html lang="fr" dir="ltr" class="docs-wrapper docs-doc-page docs-version-23.10 plugin-docs plugin-id-default docs-doc-id-installation/installation-of-centreon-ha/installation-2-nodes" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Installation d&#x27;un cluster √† 2 n≈ìuds | Centreon Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.centreon.com/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/installation-of-centreon-ha/installation-2-nodes/"><meta data-rh="true" name="docusaurus_locale" content="fr"><meta data-rh="true" name="docsearch:language" content="fr"><meta data-rh="true" name="docusaurus_version" content="23.10"><meta data-rh="true" name="docusaurus_tag" content="docs-default-23.10"><meta data-rh="true" name="docsearch:version" content="23.10"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-23.10"><meta data-rh="true" property="og:title" content="Installation d&#x27;un cluster √† 2 n≈ìuds | Centreon Documentation"><meta data-rh="true" name="description" content="Pr√©requis"><meta data-rh="true" property="og:description" content="Pr√©requis"><link data-rh="true" rel="icon" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.centreon.com/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/installation-of-centreon-ha/installation-2-nodes/"><link data-rh="true" rel="alternate" href="https://docs.centreon.com/centreon-documentation/pr-preview/staging/pr-2806/docs/installation/installation-of-centreon-ha/installation-2-nodes/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.centreon.com/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/installation-of-centreon-ha/installation-2-nodes/" hreflang="fr"><link data-rh="true" rel="alternate" href="https://docs.centreon.com/centreon-documentation/pr-preview/staging/pr-2806/docs/installation/installation-of-centreon-ha/installation-2-nodes/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://3WEC6XPLDB-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-8418698-13","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BGL69N5GPJ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-BGL69N5GPJ",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Centreon Documentation" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/opensearch.xml"><link rel="stylesheet" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/assets/css/styles.189e4fc9.css">
<link rel="preload" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/assets/js/runtime~main.0643b7b7.js" as="script">
<link rel="preload" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/assets/js/main.03c984fd.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Aller au contenu principal"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Aller au contenu principal</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Ouvrir/fermer la barre de navigation" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/"><div class="navbar__logo"><img src="/centreon-documentation/pr-preview/staging/pr-2806/fr/img/logo_centreon_dark.png" alt="Logo Centreon Docs" class="themedImage_ToTc themedImage--light_HNdA"><img src="/centreon-documentation/pr-preview/staging/pr-2806/fr/img/logo_centreon.png" alt="Logo Centreon Docs" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/getting-started/welcome/">Centreon OnPrem</a><a class="navbar__item navbar__link" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/pp/integrations/plugin-packs/getting-started/introduction/">Connecteurs de supervision</a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Chercher"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Chercher</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/getting-started/welcome/">‚≠ê 23.10</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/installation-of-centreon-ha/installation-2-nodes/">‚≠ê 23.10</a></li><li><hr class="dropdown-separator"></li><li class="dropdown-archived-versions"><b>Versions archiv√©es</b></li><li><a href="https://archives-docs.centreon.com/21.04/" target="_blank" rel="noopener noreferrer" class="dropdown__link">21.04<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://archives-docs.centreon.com/20.10/" target="_blank" rel="noopener noreferrer" class="dropdown__link">20.10<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://archives-docs.centreon.com/20.04/" target="_blank" rel="noopener noreferrer" class="dropdown__link">20.04<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://docs-older.centreon.com" target="_blank" rel="noopener noreferrer" class="dropdown__link">Older<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>üá´üá∑ Fran√ßais</a><ul class="dropdown__menu"><li><a href="/centreon-documentation/pr-preview/staging/pr-2806/docs/installation/installation-of-centreon-ha/installation-2-nodes/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">üá¨üáß English</a></li><li><a href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/installation-of-centreon-ha/installation-2-nodes/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="fr">üá´üá∑ Fran√ßais</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Basculer entre le mode sombre et clair (actuellement mode clair)" aria-label="Basculer entre le mode sombre et clair (actuellement mode clair)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Revenez en haut" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/getting-started/welcome/">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/introduction/">Installation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/administration/secure-platform/">S√©curiser la plateforme</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/monitoring/about/">Superviser des ressources</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/alerts-notifications/concepts/">G√©rer √©v√®nements et alertes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/monitoring/basic-objects/contacts/">G√©rer les utilisateurs de Centreon</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/metrology/chart-management/">Graphiques de performance</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/service-mapping/introduction/">Service Mapping</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/category/graphical-views/">Vues graphiques</a><button aria-label="Toggle the collapsible sidebar category &#x27;Vues graphiques&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/reporting/introduction/">Reporting</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/administration/parameters/centreon-ui/">Administrer</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/update/update-centreon-platform/">Mettre √† jour, monter de version et migrer</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/pp/integrations/plugin-packs/getting-started/introduction/">Connecteurs de supervision</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/integrations/introduction-integrations/">Int√©grations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/mobile/introduction/">Centreon mobile</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/category/developer-resources/">Ressources d√©veloppeur</a><button aria-label="Toggle the collapsible sidebar category &#x27;Ressources d√©veloppeur&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/installation-of-centreon-ha/overview/">Centreon HA</a><button aria-label="Toggle the collapsible sidebar category &#x27;Centreon HA&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/installation-of-centreon-ha/installation-2-nodes/">Installer Centreon HA</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/installation-of-centreon-ha/installation-2-nodes/">Installation d&#x27;un cluster √† 2 n≈ìuds</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/installation-of-centreon-ha/installation-4-nodes/">Installation d&#x27;un cluster √† 4 n≈ìuds</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/installation-of-centreon-ha/integrating-pollers/">Int√©grer des pollers dans un cluster Centreon-HA</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/installation-of-centreon-ha-manual/centreon-ha-2-nodes-installation-manual-failover/">Installer un Centreon HA √† basculement manuel</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/administration/centreon-ha/acceptance-guide/">Faire fonctionner Centreon HA</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/update/update-centreon-ha/">Mettre √† jour Centreon HA</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/upgrade/centreon-ha/upgrade-centreon-ha-from-21-04/">Monter de version Centreon HA</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/health/centreon-agent/">Superviser la plateforme</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/releases/introduction/">Releases</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/security/">S√©curit√©</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/resources/known-issues/">Ressources</a></div></li></ul></nav><button type="button" title="R√©duire le menu lat√©ral" aria-label="R√©duire le menu lat√©ral" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Sur cette page</button></div><div class="theme-doc-markdown markdown"><header><h1>Installation d&#x27;un cluster √† 2 n≈ìuds</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pr√©requis">Pr√©requis<a href="#pr√©requis" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="compr√©hension">Compr√©hension<a href="#compr√©hension" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><p>Avant de suivre cette proc√©dure, il est recommand√© d&#x27;avoir un niveau de connaissance satisfaisant du syst√®me d&#x27;exploitation Linux, de Centreon et des outils de clustering Pacemaker-Corosync pour bien comprendre ce qui va √™tre fait et pour pouvoir se sortir d&#x27;un √©ventuel faux pas.</p><blockquote><p><strong>AVERTISSEMENT :</strong> Toute personne mettant en application cette proc√©dure doit √™tre consciente qu&#x27;elle prend ses responsabilit√©s en cas de dysfonctionnement. En aucun cas la soci√©t√© Centreon ne saurait pas √™tre tenue pour responsable de toute d√©t√©rioration ou perte de donn√©es.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="flux-r√©seaux">Flux r√©seaux<a href="#flux-r√©seaux" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><p>En plus des flux r√©seaux n√©cessaires d√©crits dans le chapitre <a href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/architectures/#Tableaux_des_flux_r%C3%A9seau">pr√©requis</a>
Il sera n√©cessaire d&#x27;ouvrir les flux suppl√©mentaires suivants :</p><table><thead><tr><th align="left">Source</th><th align="left">Destination</th><th align="left">Protocole</th><th align="left">Port</th><th align="left">Commentaires</th></tr></thead><tbody><tr><td align="left">N≈ìud actif</td><td align="left">N≈ìud passif</td><td align="left">SSH</td><td align="left">TCP 22</td><td align="left">Synchronisation des fichiers de configuration (Le flux doit √™tre aussi ouvert dans le sens passif --&gt; actif)</td></tr><tr><td align="left">N≈ìud actif</td><td align="left">N≈ìud passif</td><td align="left">BDDO</td><td align="left">TCP 5670</td><td align="left">Synchronisation des RRDs (Le flux doit √™tre aussi ouvert dans le sens passif --&gt; actif)</td></tr><tr><td align="left">N≈ìud actif</td><td align="left">N≈ìud passif</td><td align="left">MySQL</td><td align="left">TCP 3306</td><td align="left">Synchronisation MySQL (Le flux doit √™tre aussi ouvert dans le sens passif --&gt; actif)</td></tr><tr><td align="left">Serveurs Centraux + QDevice</td><td align="left">Serveurs Centraux + QDevice</td><td align="left">Corosync</td><td align="left">UDP 5404</td><td align="left">Communication au sein du cluster (Multicast)</td></tr><tr><td align="left">Serveurs Centraux + QDevice</td><td align="left">Serveurs Centraux + QDevice</td><td align="left">Corosync</td><td align="left">UDP 5405</td><td align="left">Communication au sein du cluster (Unicast)</td></tr><tr><td align="left">Serveurs Centraux + QDevice</td><td align="left">Serveurs Centraux + QDevice</td><td align="left">PCS</td><td align="left">TCP 2224</td><td align="left">Communication au sein du cluster</td></tr><tr><td align="left">Serveurs Centraux + QDevice</td><td align="left">Serveurs Centraux + QDevice</td><td align="left">Corosync</td><td align="left">TCP 5403</td><td align="left">Communication avec le QDevice</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="installation-de-centreon">Installation de Centreon<a href="#installation-de-centreon" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><p>L&#x27;installation d&#x27;un cluster Centreon-HA ne peut se faire que sur la base d&#x27;une installation fonctionnelle de Centreon. Avant de suivre cette proc√©dure, il est donc imp√©ratif d&#x27;avoir appliqu√© <strong><a href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/introduction/">cette proc√©dure d&#x27;installation</a></strong> jusqu&#x27;au bout <strong>en r√©servant environ 5GB de libre</strong> sur le <em>volume group</em> qui contient  les donn√©es MariaDB (point de montage <code>/var/lib/mysql</code> par d√©faut).</p><p>La commande <code>vgs</code> doit retourner un affichage de la forme ci-dessous (en particulier la valeur sous <code>VFree</code>) :</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  VG                    #PV #LV #SN Attr   VSize   VFree </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  centos_centreon-c1      1   5   0 wz--n- &lt;31,00g &lt;5,00g</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Les fichiers MariaDB <code>ibdata*</code> et <code>ib_logfile*</code> doivent √™tre dans le r√©pertoire &quot;datadir&quot; ou dans un sous-r√©pertoire (les scripts <code>centreondb-smooth-backup.sh</code> et <code>mysql-sync-bigdb.sh</code> ne sont pas compatibles avec cette op√©ration) ;</li><li>Les fichiers MariaDB <code>log-bin*</code> et <code>relay-log*</code> peuvent √™tre situ√©s dans un r√©pertoire (ou un sous-r√©pertoire) diff√©rent de &quot;datadir&quot;. Ils peuvent √©galement se trouver sur un volume logique (<code>lvm</code>) diff√©rent de &quot;datadir&quot;. Cependant, le volume logique doit √™tre situ√© dans le groupe de volume o√π &quot;datadir&quot; est stock√©.</li></ul><blockquote><p><strong>AVERTISSEMENT :</strong> Si ces pr√©requis sp√©cifiques ne sont pas respect√©s, la m√©thode de synchronisation des bases de donn√©es d√©crite ci-dessous ne fonctionnera pas.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="quorum-device">Quorum Device<a href="#quorum-device" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><p>Pour le bon fonctionnement du cluster, en particulier pour √©viter les cas de split-brain, il est n√©cessaire d&#x27;avoir un serveur tiers pour tenir le r√¥le d&#x27;arbitre. Il est possible d&#x27;utiliser un collecteur pour remplir ce r√¥le.</p><blockquote><p><strong>AVERTISSEMENT:</strong> Assurez-vous que Selinux et Firewalld sont d√©sactiv√©s.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="d√©finition-des-noms-et-adresses-ip-des-serveurs">D√©finition des noms et adresses IP des serveurs<a href="#d√©finition-des-noms-et-adresses-ip-des-serveurs" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><p>Dans cette proc√©dure, nous ferons r√©f√©rence √† des param√®tres variant d&#x27;une installation √† une autre (noms et adresses IP des n≈ìuds par exemple) par l&#x27;interm√©diaire des macros suivantes :</p><ul><li><code>@CENTRAL_MASTER_IPADDR@</code> : adresse IP du serveur principal</li><li><code>@CENTRAL_MASTER_NAME@</code> : nom du serveur principal (doit √™tre identique au r√©sultat de <code>hostname -s</code>)</li><li><code>@CENTRAL_SLAVE_IPADDR@</code> : adresse IP du serveur secondaire</li><li><code>@CENTRAL_SLAVE_NAME@</code> : nom du serveur secondaire (doit √™tre identique au r√©sultat de <code>hostname -s</code>)</li><li><code>@QDEVICE_IPADDR@</code> : adresse IP du serveur supportant le <em>quorum device</em></li><li><code>@QDEVICE_NAME@</code> : nom du serveur supportant le <em>quorum device</em> (doit √™tre identique au r√©sultat de <code>hostname -s</code>)</li><li><code>@MARIADB_REPL_USER@</code> : nom du compte MariaDB de r√©plication (sugg√©r√© : centreon-repl)</li><li><code>@MARIADB_REPL_PASSWD@</code> : mot de passe de ce compte</li><li><code>@MARIADB_CENTREON_USER@</code> : nom du compte MariaDB de Centreon (sugg√©r√© : centreon)</li><li><code>@MARIADB_CENTREON_PASSWD@</code> : mot de passe de ce compte</li><li><code>@VIP_IPADDR@</code> : adresse IP virtuelle du cluster</li><li><code>@VIP_IFNAME@</code> : nom de l&#x27;interface qui portera la VIP</li><li><code>@VIP_CIDR_NETMASK@</code> : masque de sous-r√©seau exprim√© en nombre de bits sans le &#x27;/&#x27; (exemple : 24)</li><li><code>@VIP_BROADCAST_IPADDR@</code> : adresse de broadcast</li><li><code>@CENTREON_CLUSTER_PASSWD@</code> : mot de passe du compte <code>hacluster</code></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-de-centreon-broker">Configuration de centreon-broker<a href="#configuration-de-centreon-broker" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="liaison-au-service-cbd">Liaison au service cbd<a href="#liaison-au-service-cbd" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h4><p>Dans une installation standard de Centreon, le service <code>cbd</code> pilote deux instances de <code>centreon-broker-daemon</code> :</p><ul><li><code>central-broker-master</code> : que l&#x27;on appelle aussi &quot;broker central&quot; ou encore &quot;broker SQL&quot;, qui redirige toutes les entr√©es-sorties en provenance des collecteurs, vers les bases de donn√©es, vers le broker RRD, etc.</li><li><code>central-rrd-master</code> : le broker RRD qui re√ßoit son flux du broker SQL, et dont la seule fonction est d&#x27;√©crire les fichiers RRD utilis√©s pour afficher les graphes.</li></ul><p>Dans un cluster Centreon-HA, les deux processus broker vont √™tre g√©r√©s chacun via un service distinct qui sera pilot√©s par le cluster :</p><ul><li><code>central-broker-master</code> en tant que la ressource <code>cbd_central_broker</code>, li√©e au service <em>systemd</em> <code>cbd-sql</code></li><li><code>central-rrd-master</code> en tant que la ressource clone <code>cbd_rrd</code>, li√©e au service <em>systemd</em> <code>cbd</code> standard de Centreon.</li></ul><p>Pour que tout se mette bien en place dans la suite, il faut d√®s √† pr√©sent d√©faire la liaison entre central-broker-master et le service <code>cbd</code> <strong>en cochant &quot;non&quot; pour le param√®tre &quot;Li√© au service cbd&quot;</strong> dans <em>Configuration</em> &gt; <em>Pollers</em> &gt; <em>Broker configuration</em> &gt; <em>central-broker-master</em> dans l&#x27;onglet <em>General</em>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="double-flux-rrd">Double flux RRD<a href="#double-flux-rrd" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h4><p>Plut√¥t que de mettre en place une r√©plication en temps r√©el des fichiers de donn√©es RRD, le choix technique qui a √©t√© fait pour permettre d&#x27;afficher les graphes sur n&#x27;importe quel n≈ìud d√®s qu&#x27;il devient <code>master</code> a √©t√© de dupliquer le flux de sortie (<code>output</code>) de <code>central-broker-master</code> vers <code>central-rrd-master</code>. Cela se configure dans le m√™me menu qu&#x27;au paragraphe pr√©c√©dent, mais cette fois dans l&#x27;onglet <em>Output</em> de <em>Configuration  &gt;  Collecteurs  &gt;  Configuration de Centreon Broker</em>.</p><ul><li>Modifier la sortie &quot;IPv4&quot; en rempla√ßant &quot;localhost&quot; par <code>@CENTRAL_MASTER_IPADDR@</code></li></ul><table><thead><tr><th>Output IPv4</th><th></th></tr></thead><tbody><tr><td>Nom</td><td>centreon-broker-master-rrd</td></tr><tr><td>Port de connexion</td><td>5670</td></tr><tr><td>H√¥te distant</td><td><code>@CENTRAL_MASTER_IPADDR@</code></td></tr><tr><td>Temps avant activation du processus de basculement (failover)</td><td>0</td></tr><tr><td>Intervalle entre 2 tentatives</td><td>60</td></tr></tbody></table><ul><li>Ajouter une nouvelle sortie IPv4, similaire √† la premi√®re et nomm√©e par exemple &quot;centreon-broker-slave-rrd&quot; pointant cette fois vers <code>@CENTRAL_SLAVE_IPADDR@</code>.</li></ul><table><thead><tr><th>Output IPv4</th><th></th></tr></thead><tbody><tr><td>Nom</td><td>centreon-broker-slave-rrd</td></tr><tr><td>Port de connexion</td><td>5670</td></tr><tr><td>H√¥te distant</td><td><code>@CENTRAL_SLAVE_IPADDR@</code></td></tr><tr><td>Temps avant activation du processus de basculement (failover)</td><td>0</td></tr><tr><td>Intervalle entre 2 tentatives</td><td>60</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="exporter-la-configuration">Exporter la configuration<a href="#exporter-la-configuration" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h4><p>Une fois que les actions des deux pr√©c√©dents paragraphes ont √©t√© r√©alis√©es, il faut exporter la configuration (3 premi√®res cases pour l&#x27;export du collecteur &quot;Central&quot;) pour que celle-ci soit effective.</p><p>Ces actions doivent √™tre r√©alis√©es soit sur les deux n≈ìuds, soit uniquement sur <code>@CENTRAL_MASTER_NAME@</code> puis les fichiers de configuration de broker doivent √™tre copi√©s vers <code>@CENTRAL_SLAVE_NAME@</code>.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">rsync</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-a</span><span class="token plain"> /etc/centreon-broker/*json @CENTRAL_SLAVE_IPADDR@:/etc/centreon-broker/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="modification-de-la-commande-de-rechargement-de-cbd">Modification de la commande de rechargement de <code>cbd</code><a href="#modification-de-la-commande-de-rechargement-de-cbd" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><p>Cela n&#x27;est pas forc√©ment connu de tous les utilisateurs de Centreon, mais chaque fois qu&#x27;un rechargement de la configuration du collecteur central est effectu√© via l&#x27;interface, le service broker (<code>cbd</code>) est recharg√© (pas seulement centengine), d&#x27;o√π le param√®tre &quot;Centreon Broker reload command&quot; dans <em>Configuration &gt; Pollers &gt; Central</em>.</p><p>Ainsi que cela a √©t√© expliqu√© plus haut, les processus broker sont r√©partis entre deux services : <code>cbd</code> pour le broker RRD, <code>cbd-sql</code> pour le broker central. Dans le cadre d&#x27;un cluster centreon-ha, service que l&#x27;on doit recharger lors de l&#x27;export de configuration est <code>cbd-sql</code> et non plus <code>cbd</code>. Il faut donc appliquer la valeur <code>service cbd-sql reload</code> au param√®tre &quot;Centreon Broker reload command&quot;.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pr√©paration-du-syst√®me">Pr√©paration du syst√®me<a href="#pr√©paration-du-syst√®me" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h2><p>Avant d&#x27;en arriver au param√©trage du cluster √† proprement parler, quelques √©tapes pr√©paratoires sont n√©cessaires au niveau de l&#x27;OS.</p><p><strong>Remarque :</strong> sauf mention contraire, chacune des √©tapes suivantes est √† r√©aliser <strong>sur les deux n≈ìuds centraux</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="tuning-de-la-configuration-r√©seau">Tuning de la configuration r√©seau<a href="#tuning-de-la-configuration-r√©seau" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><p>Afin d&#x27;am√©liorer la fiabilit√© du cluster et √©tant donn√© que <em>Centreon HA</em> ne fonctionne qu&#x27;en IP v4, il est recommand√© d&#x27;appliquer le tuning suivant sur tous les serveurs de la plateforme Centreon :</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Alma / RHEL / Oracle Linux 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Debian 11</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> /etc/sysctl.conf </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">net.ipv6.conf.all.disable_ipv6 = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">net.ipv6.conf.default.disable_ipv6 = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">net.ipv4.tcp_retries2 = 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">net.ipv4.tcp_keepalive_time = 200</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">net.ipv4.tcp_keepalive_probes = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">net.ipv4.tcp_keepalive_intvl = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl restart NetworkManager</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> /etc/sysctl.conf </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">net.ipv6.conf.all.disable_ipv6 = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">net.ipv6.conf.default.disable_ipv6 = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">net.ipv4.tcp_retries2 = 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">net.ipv4.tcp_keepalive_time = 200</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">net.ipv4.tcp_keepalive_probes = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">net.ipv4.tcp_keepalive_intvl = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">reboot</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="r√©solution-de-noms">R√©solution de noms<a href="#r√©solution-de-noms" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><p>Pour s√©curiser le bon fonctionnement du cluster m√™me en cas de panne du service de r√©solution de noms, il est imp√©ratif que les n≈ìuds se connaissent <em>via</em> le fichier <code>/etc/hosts</code>.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">/etc/hosts </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">&quot;EOF&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">@CENTRAL_MASTER_IPADDR@ @CENTRAL_MASTER_NAME@</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">@CENTRAL_SLAVE_IPADDR@ @CENTRAL_SLAVE_NAME@</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">@QDEVICE_IPADDR@ @QDEVICE_NAME@</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Dans la suite de ce document, on parlera de n≈ìud principal pour le premier et de n≈ìud secondaire pour le second. Cette distinction est purement arbitraire, les r√¥les pourront bien s√ªr √™tre √©chang√©s une fois l&#x27;installation termin√©e.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="installation-des-paquets">Installation des paquets<a href="#installation-des-paquets" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><p>Centreon propose les paquets <code>centreon-ha-common</code> et <code>centreon-ha-web</code>, qui fournit tous les scripts et les d√©pendances n√©cessaires au fonctionnement d&#x27;un cluster Centreon. Ces paquets sont √† installer sur les deux n≈ìuds centraux :</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Alma Linux 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">RHEL 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Oracle Linux 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Debian 11</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dnf config-manager </span><span class="token parameter variable" style="color:#36acaa">--enable</span><span class="token plain"> ha</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dnf </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> centreon-ha-web pcs pacemaker corosync corosync-qdevice</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dnf </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> dnf-plugins-core https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">subscription-manager repos </span><span class="token parameter variable" style="color:#36acaa">--enable</span><span class="token plain"> rhel-8-for-x86_64-highavailability-rpms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dnf </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> centreon-ha-web pcs pacemaker corosync corosync-qdevice</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dnf config-manager </span><span class="token parameter variable" style="color:#36acaa">--enable</span><span class="token plain"> ol8_addons</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dnf </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> centreon-ha-web pcs pacemaker corosync corosync-qdevice</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> update </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> centreon-ha-web pcs pacemaker corosync corosync-qdevice </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="√©changes-de-clefs-ssh">√âchanges de clefs SSH<a href="#√©changes-de-clefs-ssh" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><p>Afin de permettre aux deux serveurs centraux d&#x27;√©changer des fichiers et des commandes, il faut mettre en place la possibilit√© de se connecter <em>via</em> SSH d&#x27;un serveur √† l&#x27;autre pour les utilisateurs :</p><ul><li><code>mysql</code></li><li><code>centreon</code></li></ul><p>Il existe 2 fa√ßons d&#x27;√©changer des clefs SSH :</p><ul><li>En utilisant <code>ssh-copy-id</code> : l&#x27;utilisation de cette commande n√©cessite de pouvoir valider l&#x27;authentification au moyen d&#x27;un mot de passe. Or, il n&#x27;est pas souhaitable, pour les comptes de service dont il est question ici, de d√©finir de mot de passe. Si cette m√©thode est retenue malgr√© tout, il est recommand√© de supprimer le mot de passe apr√®s l&#x27;√©change, avec les commandes <code>passwd -d centreon</code> et <code>passwd -d mysql</code></li><li>En copiant manuellement la clef publique dans <code>~/.ssh/authorized_keys</code>. Cette m√©thode est √† privil√©gier, mais demande, pour fonctionner correctement, que seul le propri√©taire du fichier soit capable d&#x27;acc√©der en lecture √† celui-ci.</li></ul><p>C&#x27;est la seconde m√©thode qui sera propos√©e plus bas.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="compte-centreon">Compte <code>centreon</code><a href="#compte-centreon" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h4><p>Cette proc√©dure est √† appliquer sur les deux n≈ìuds centraux. Pour commencer passer dans l&#x27;environnement <code>bash</code> de <code>centreon</code> :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">su</span><span class="token plain"> - centreon</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Puis lancer ces commandes sur les deux n≈ìuds centraux :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh-keygen </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> ed25519 </span><span class="token parameter variable" style="color:#36acaa">-a</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> ~/.ssh/id_ed25519.pub</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Apr√®s avoir lanc√© ces commandes sur les deux n≈ìuds, copier le contenu du fichier qui s&#x27;est affich√© sous la commande <code>cat</code> et le coller dans le fichier (√† cr√©er) <code>~/.ssh/authorized_keys</code>, puis appliquer les bons droits sur le fichier (toujours en tant que <code>centreon</code>) :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">600</span><span class="token plain"> ~/.ssh/authorized_keys</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>L&#x27;√©change de clefs doit ensuite √™tre valid√© par une premi√®re connexion qui permettra d&#x27;accepter la signature du serveur SSH (toujours en tant que <code>centreon</code>) :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ssh</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">nom de l&#x27;autre n≈ìud</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Puis sortir de la session de <code>centreon</code> avec <code>exit</code> ou <code>Ctrl-D</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="compte-mysql">Compte <code>mysql</code><a href="#compte-mysql" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h4><p>Pour le compte <code>mysql</code> la proc√©dure diff√®re quelque peu, car cet utilisateur n&#x27;a normalement pas de <em>home directory</em> ni la possibilit√© d&#x27;ouvrir une session Shell. Cette proc√©dure est √©galement √† appliquer sur les deux n≈ìuds centraux.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl stop mariadb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> /home/mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">chown</span><span class="token plain"> mysql: /home/mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">usermod</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"> /home/mysql mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">usermod</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-s</span><span class="token plain"> /bin/bash mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl start mariadb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">su</span><span class="token plain"> - mysql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Une fois dans l&#x27;environnement <code>bash</code> de <code>mysql</code>, lancer ces commandes sur les deux n≈ìuds centraux :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh-keygen </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> ed25519 </span><span class="token parameter variable" style="color:#36acaa">-a</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> ~/.ssh/id_ed25519.pub</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Apr√®s avoir lanc√© ces commandes sur les deux n≈ìuds, copier le contenu du fichier et le coller dans <code>~/.ssh/authorized_keys</code>, puis appliquer les bons droits sur le fichier (toujours en tant que <code>mysql</code>) :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">600</span><span class="token plain"> ~/.ssh/authorized_keys</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>L&#x27;√©change de clefs doit ensuite √™tre valid√© par une premi√®re connexion qui permettra d&#x27;accepter la signature du serveur SSH (toujours en tant que <code>mysql</code>) :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ssh</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">nom de l&#x27;autre n≈ìud</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Puis sortir de la session de <code>mysql</code> avec <code>exit</code> ou <code>Ctrl-D</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="mise-en-place-de-la-r√©plication-mariadb">Mise en place de la r√©plication MariaDB<a href="#mise-en-place-de-la-r√©plication-mariadb" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h2><p>Afin que les deux n≈ìuds soient interchangeables √† tout moment, il faut que les deux bases de donn√©es soient r√©pliqu√©es en continu. Pour cela, nous allons mettre en place une r√©plication Master-Slave.</p><p><strong>Remarque :</strong> sauf mention contraire, chacune des √©tapes suivantes est √† r√©aliser <strong>sur les deux n≈ìuds centraux</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-de-mariadb">Configuration de MariaDB<a href="#configuration-de-mariadb" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Alma / RHEL / Oracle Linux 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Debian 11</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>Pour commencer, il faut am√©liorer la configuration de MariaDB, qui sera concentr√©e dans le seul fichier <code>/etc/my.cnf.d/server.cnf</code>.  Par d√©faut, la section <code>[server]</code> de ce fichier est vide, c&#x27;est l√† que doit √™tre coll√©es les lignes suivantes :</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[server]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server-id=1 # SET TO 1 FOR MASTER AND 2 FOR SLAVE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#read_only</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">log-bin=mysql-bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">binlog-do-db=centreon</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">binlog-do-db=centreon_storage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">innodb_flush_log_at_trx_commit=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sync_binlog=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">binlog_format=MIXED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">slave_compressed_protocol=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">slave_parallel_mode=conservative</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">datadir=/var/lib/mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pid-file=/var/lib/mysql/mysql.pid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">skip-slave-start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">log-slave-updates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gtid_strict_mode=ON</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">expire_logs_days=7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ignore-db-dir=lost+found</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Tuning standard Centreon</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">innodb_file_per_table=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">open_files_limit=32000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">key_buffer_size=256M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sort_buffer_size=32M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">join_buffer_size=4M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">thread_cache_size=64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">read_buffer_size=512K</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">read_rnd_buffer_size=256K</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">max_allowed_packet=64M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Uncomment for 4 Go Ram</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#innodb_buffer_pool_size=512M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Uncomment for 8 Go Ram</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#innodb_buffer_pool_size=1G</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>Pour commencer, il faut am√©liorer la configuration de MariaDB, qui sera concentr√©e dans le seul fichier <code>/etc/mysql/mariadb.conf.d/50-server.cnf</code>. Par d√©faut, la section <code>[server]</code> de ce fichier est vide, c&#x27;est l√† que doit √™tre coll√©es les lignes suivantes :</p><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[server]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server-id=1 # SET TO 1 FOR MASTER AND 2 FOR SLAVE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#read_only</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">log-bin=mysql-bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">binlog-do-db=centreon</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">binlog-do-db=centreon_storage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">innodb_flush_log_at_trx_commit=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sync_binlog=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">binlog_format=MIXED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">slave_compressed_protocol=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">slave_parallel_mode=conservative</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">datadir=/var/lib/mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pid-file=/run/mysqld/mysql.pid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">skip-slave-start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">log-slave-updates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gtid_strict_mode=ON</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">expire_logs_days=7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ignore-db-dir=lost+found</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Tuning standard Centreon</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">innodb_file_per_table=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">open_files_limit=32000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">key_buffer_size=256M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sort_buffer_size=32M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">join_buffer_size=4M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">thread_cache_size=64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">read_buffer_size=512K</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">read_rnd_buffer_size=256K</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">max_allowed_packet=64M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Uncomment for 4 Go Ram</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#innodb_buffer_pool_size=512M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Uncomment for 8 Go Ram</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#innodb_buffer_pool_size=1G</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>De plus, commentez la ligne :</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#bind-address            = 127.0.0.1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><blockquote><p><strong>Important :</strong> la valeur de <code>server-id</code> doit √™tre diff√©rente d&#x27;un serveur √† l&#x27;autre, pour qu&#x27;ils puissent s&#x27;identifier correctement. Les valeurs 1 =&gt; Master et 2 =&gt; Slave ne sont pas obligatoires, mais sont recommand√©es.</p></blockquote><p><strong>NB :</strong> Ne pas oublier de d√©commenter (supprimer le &#x27;#&#x27; en d√©but de ligne) le param√®tre <code>innodb_buffer_pool_size</code> qui correspond √† votre plateforme.</p><p>Pour que ces modifications soient bien prises en compte, il faut red√©marrer le serveur de base de donn√©es :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl restart mariadb</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Bien s&#x27;assurer que le red√©marrage s&#x27;est bien d√©roul√© avec la commande suivante :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl status mariadb</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong>Avertissement :</strong> Le fichier <code>centreon.cnf</code> ne sera plus pris en compte, si des param√®tres y ont √©t√© personnalis√©s, il faut les reporter dans <code>server.cnf</code>.</p></blockquote><blockquote><p><strong>Avertissement:</strong> N&#x27;oubliez pas de changer le param√®tre <code>Chemin d&#x27;acc√®s au fichier de configuration MySQL</code> dans <strong>Administration &gt; Param√®tres &gt; Backup</strong></p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="s√©curisation-de-la-base-de-donn√©es">S√©curisation de la base de donn√©es<a href="#s√©curisation-de-la-base-de-donn√©es" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><p>L&#x27;acc√®s aux bases de donn√©es doit √™tre limit√© de la fa√ßon la plus stricte possible. La commande <code>mysql_secure_installation</code> permet de supprimer les acc√®s non prot√©g√©s par des mots de passe et la base de donn√©es de test. Lancer cette commande et se laisser guider par les choix par d√©faut. Attention √† choisir un mot de passe n&#x27;appartenant √† aucun dictionnaire.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql_secure_installation</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cr√©ation-du-compte-centreon">Cr√©ation du compte centreon<a href="#cr√©ation-du-compte-centreon" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><p>Pour pouvoir administrer les utilisateurs MariaDB, il faut d&#x27;abord se connecter en tant que root (avec le mot de passe saisi au paragraphe pr√©c√©dent) :</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysql </span><span class="token parameter variable" style="color:#36acaa">-p</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Coller alors dans le prompt MariaDB les commandes ci-dessous en modifiant les adresses IP ainsi que les mots de passe.</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USER</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@MARIADB_CENTREON_USER@&#x27;</span><span class="token variable" style="color:#36acaa">@&#x27;@CENTRAL_SLAVE_IPADDR@&#x27;</span><span class="token plain"> IDENTIFIED </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@MARIADB_CENTREON_PASSWD@&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ALL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">PRIVILEGES</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> centreon</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@MARIADB_CENTREON_USER@&#x27;</span><span class="token variable" style="color:#36acaa">@&#x27;@CENTRAL_SLAVE_IPADDR@&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ALL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">PRIVILEGES</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> centreon_storage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@MARIADB_CENTREON_USER@&#x27;</span><span class="token variable" style="color:#36acaa">@&#x27;@CENTRAL_SLAVE_IPADDR@&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USER</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@MARIADB_CENTREON_USER@&#x27;</span><span class="token variable" style="color:#36acaa">@&#x27;@CENTRAL_MASTER_IPADDR@&#x27;</span><span class="token plain"> IDENTIFIED </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@MARIADB_CENTREON_PASSWD@&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ALL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">PRIVILEGES</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> centreon</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@MARIADB_CENTREON_USER@&#x27;</span><span class="token variable" style="color:#36acaa">@&#x27;@CENTRAL_MASTER_IPADDR@&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ALL</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">PRIVILEGES</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> centreon_storage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@MARIADB_CENTREON_USER@&#x27;</span><span class="token variable" style="color:#36acaa">@&#x27;@CENTRAL_MASTER_IPADDR@&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Lorsque la solution centreon-ha est ajout√©e √† une plateforme Centreon existante ou d√©ploy√©e via une VM OVA, le mot de passe de l&#x27;utilisateur <code>&#x27;@MARIADB_CENTREON_USER@&#x27;@&#x27;localhost&#x27;</code> doit √™tre mis √† jour:</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">ALTER</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">USER</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@MARIADB_CENTREON_USER@&#x27;</span><span class="token variable" style="color:#36acaa">@&#x27;localhost&#x27;</span><span class="token plain"> IDENTIFIED </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@MARIADB_CENTREON_PASSWD@&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cr√©ation-du-compte-de-r√©plication">Cr√©ation du compte de r√©plication<a href="#cr√©ation-du-compte-de-r√©plication" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><p>Toujours dans le prompt MariaDB (cf paragraphe pr√©c√©dent) cr√©er l&#x27;utilisateur <code>@MARIADB_REPL_USER@</code>, d√©di√© √† la r√©plication, √† l&#x27;aide des commandes suivantes :</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SHUTDOWN</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PROCESS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> RELOAD</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SUPER</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REPLICATION</span><span class="token plain"> CLIENT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REPLICATION</span><span class="token plain"> SLAVE </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@MARIADB_REPL_USER@&#x27;</span><span class="token variable" style="color:#36acaa">@&#x27;localhost&#x27;</span><span class="token plain"> IDENTIFIED </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@MARIADB_REPL_PASSWD@&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SHUTDOWN</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PROCESS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> RELOAD</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SUPER</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REPLICATION</span><span class="token plain"> CLIENT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REPLICATION</span><span class="token plain"> SLAVE </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@MARIADB_REPL_USER@&#x27;</span><span class="token variable" style="color:#36acaa">@&#x27;@CENTRAL_SLAVE_IPADDR@&#x27;</span><span class="token plain"> IDENTIFIED </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@MARIADB_REPL_PASSWD@&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GRANT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SHUTDOWN</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PROCESS</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> RELOAD</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SUPER</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REPLICATION</span><span class="token plain"> CLIENT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">REPLICATION</span><span class="token plain"> SLAVE </span><span class="token keyword" style="color:#00009f">ON</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">TO</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@MARIADB_REPL_USER@&#x27;</span><span class="token variable" style="color:#36acaa">@&#x27;@CENTRAL_MASTER_IPADDR@&#x27;</span><span class="token plain"> IDENTIFIED </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@MARIADB_REPL_PASSWD@&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-des-variables-denvironnement-des-scripts-mariadb">Configuration des variables d&#x27;environnement des scripts MariaDB<a href="#configuration-des-variables-denvironnement-des-scripts-mariadb" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><p>Le fichier <code>/etc/centreon-ha/mysql-resources.sh</code> contient des variables d&#x27;environnement qu&#x27;il faut adapter √† l&#x27;installation courante en rempla√ßant les macros par la valeur qui convient.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">###############################</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Database access credentials #</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">###############################</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">DBHOSTNAMEMASTER</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;@CENTRAL_MASTER_NAME@&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">DBHOSTNAMESLAVE</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;@CENTRAL_SLAVE_NAME@&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">DBREPLUSER</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;@MARIADB_REPL_USER@&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">DBREPLPASSWORD</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;@MARIADB_REPL_PASSWD@&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">DBROOTUSER</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;@MARIADB_REPL_USER@&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">DBROOTPASSWORD</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;@MARIADB_REPL_PASSWD@&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">CENTREON_DB</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;centreon&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">CENTREON_STORAGE_DB</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;centreon_storage&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">###############################</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Pour s&#x27;assurer que les derni√®res √©tapes ont √©t√© effectu√©es correctement, et que les bons noms, logins et mots de passe ont bien √©t√© saisis dans le fichier de configuration, il faut lancer la commande :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/usr/share/centreon-ha/bin/mysql-check-status.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Le r√©sultat attendu est :</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Connection MASTER Status &#x27;@CENTRAL_MASTER_NAME@&#x27; [OK]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Connection SLAVE Status &#x27;@CENTRAL_SLAVE_NAME@&#x27; [OK]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Slave Thread Status [KO]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error reports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    No slave (maybe because we cannot check a server).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Position Status [SKIP]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!Error reports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Skip because we can&#x27;t identify a unique slave.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Ce qu&#x27;il est important de v√©rifier est que les deux premiers tests de connexion sont <code>OK</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="passage-en-read-only">Passage en read-only<a href="#passage-en-read-only" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Alma / RHEL / Oracle Linux 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Debian 11</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>Maintenant, que tout est bien configur√©, il faut activer le mode <code>read_only</code> sur les deux serveurs en d√©commentant (<em>ie.</em> retirer le <code>#</code> en d√©but de ligne) cette instruction dans le fichier <code>/etc/my.cnf.d/server.cnf</code> :</p><ul><li>N≈ìud principal</li></ul><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[server]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server-id=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">read_only</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">log-bin=mysql-bin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>N≈ìud secondaire</li></ul><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[server]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server-id=2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">read_only</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">log-bin=mysql-bin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Appliquer ensuite ce changement par un red√©marrage de MariaDB sur les deux n≈ìuds :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl restart mariadb</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>Maintenant, que tout est bien configur√©, il faut activer le mode <code>read_only</code> sur les deux serveurs en d√©commentant (<em>ie.</em> retirer le <code>#</code> en d√©but de ligne) cette instruction dans le fichier <code>/etc/mysql/mariadb.conf.d/50-server.cnf</code> :</p><ul><li>N≈ìud principal</li></ul><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[server]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server-id=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">read_only</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">log-bin=mysql-bin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>N≈ìud secondaire</li></ul><div class="language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[server]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server-id=2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">read_only</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">log-bin=mysql-bin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Appliquer ensuite ce changement par un red√©marrage de MariaDB sur les deux n≈ìuds :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl restart mariadb</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="synchroniser-les-bases-et-lancer-la-r√©plication-mariadb">Synchroniser les bases et lancer la r√©plication MariaDB<a href="#synchroniser-les-bases-et-lancer-la-r√©plication-mariadb" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><p>Pour synchroniser les bases, arr√™ter le service <code>mysql</code> sur le n≈ìud secondaire pour √©craser ses donn√©es avec celles du serveur principal.</p><p>Il faut donc lancer la commande suivante <strong>sur le n≈ìud secondaire</strong> :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl stop mariadb</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Dans certains cas, il se peut que systemd ne parvienne pas √† arr√™ter le service <code>mysql</code>, pour s&#x27;en assurer, v√©rifier que la commande suivante ne retourne aucune ligne :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-ef</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> mariadb</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">d</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Si un processus <code>mysqld</code> est toujours en activit√©, alors il faut lancer la commande suivante pour l&#x27;arr√™ter (et fournir le mot de passe du compte root de mysql quand il est demand√©) :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mysqladmin </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">shutdown</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Une fois que le service est bien arr√™t√© sur le n≈ìud <strong>secondaire</strong>, lancer le script de synchronisation <strong>depuis le n≈ìud principal</strong> :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/usr/share/centreon-ha/bin/mysql-sync-bigdb.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Ce script effectue les op√©rations suivantes :</p><ul><li>v√©rifier que mysql est arr√™t√© sur le n≈ìud secondaire</li><li>arr√™ter mysql sur le n≈ìud principal</li><li>monter un snapshot LVM sur le <em>volume group</em> qui supporte la partition /var/lib/mysql</li><li>d√©marrer mysql sur le n≈ìud principal</li><li>m√©moriser la position courante dans les logs binaires</li><li>d√©sactiver la variable globale MariaDB <code>read_only</code> sur le n≈ìud principal (<em>ie.</em> le n≈ìud principal est maintenant autoris√© √† √©crire dans sa base)</li><li>synchroniser tous les fichiers de donn√©es (hors base syst√®me <code>mysql</code>) en √©crasant les fichiers du n≈ìud secondaire</li><li>d√©monter le snapshot LVM</li><li>cr√©er le thread de r√©plication qui va maintenir les donn√©es √† jour sur le n≈ìud secondaire</li></ul><p>Ce script est tr√®s verbeux, et tout ce qui est, s&#x27;affiche, n&#x27;est pas forc√©ment compr√©hensible, mais pour s&#x27;assurer qu&#x27;il s&#x27;est bien d√©roul√© jusqu&#x27;au bout, il suffit de s&#x27;assurer que la fin ressemble bien √† :</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Umount and Delete LVM snapshot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Logical volume &quot;dbbackupdatadir&quot; successfully removed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Start MySQL Slave</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Start Replication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Id User Host db Command Time State Info Progress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[nombre variable de lignes]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Ce qu&#x27;il est important de v√©rifier est que les lignes <code>Start MySQL Slave</code> et <code>Start Replication</code> ne soient suivies d&#x27;aucune erreur.</p><p>Si tout s&#x27;est bien pass√©, alors la commande <code>mysql-check-status.sh</code> doit renvoyer un r√©sultat sans erreurs :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/usr/share/centreon-ha/bin/mysql-check-status.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>R√©sultat attendu :</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Connection MASTER Status &#x27;@CENTRAL_MASTER_NAME@&#x27; [OK]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Connection SLAVE Status &#x27;@CENTRAL_SLAVE_NAME@&#x27; [OK]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Slave Thread Status [OK]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Position Status [OK]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="mise-en-place-du-cluster-centreon">Mise en place du cluster Centreon<a href="#mise-en-place-du-cluster-centreon" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h2><p><strong>Remarque :</strong> sauf mention contraire, chacune des √©tapes suivantes est √† r√©aliser <strong>sur les deux n≈ìuds centraux</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-du-service-de-synchronisation">Configuration du service de synchronisation<a href="#configuration-du-service-de-synchronisation" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><p>Le service de synchronisation <code>centreon-central-sync</code> n√©cessite que l&#x27;on d√©finisse pour chaque n≈ìud dans <code>/etc/centreon-ha/centreon_central_sync.pm</code> l&#x27;adresse IP de son correspondant :</p><p>Ainsi pour le serveur <code>@CENTRAL_MASTER_NAME@</code> on doit avoir :</p><div class="language-perl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-perl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">our</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">%centreon_central_sync_config</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    peer_addr </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@CENTRAL_SLAVE_IPADDR@&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Et pour le serveur <code>@CENTRAL_SLAVE_NAME@</code> on doit avoir :</p><div class="language-perl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-perl codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">our</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">%centreon_central_sync_config</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    peer_addr </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@CENTRAL_MASTER_IPADDR@&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="suppression-des-crons">Suppression des crons<a href="#suppression-des-crons" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><p>Les t√¢ches planifi√©es de type <strong>cron</strong> sont ex√©cut√©es directement par le processus gorgone dans les architectures hautement disponible. Cela permet de garantir la non-concurrence de leur ex√©cution sur les n≈ìuds centraux. Il est donc n√©cessaire de les supprimer manuellement :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> /etc/cron.d/centreon</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> /etc/cron.d/centstorage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> /etc/cron.d/centreon-auto-disco</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> /etc/cron.d/centreon-ha-mysql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="modification-des-droits">Modification des droits<a href="#modification-des-droits" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><p>Les r√©pertoires /var/log/centreon-engine et /tmp/centreon-autodisco sont partag√©s entre plusieurs processus. Il est n√©cessaire
de modifier les droits des r√©pertoires et fichiers pour garantir le bon fonctionnement de la r√©plication de fichiers et de la
d√©couverte automatique des services:</p><ul><li>R√©plication des fichiers</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">775</span><span class="token plain"> /var/log/centreon-engine/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> /var/log/centreon-engine/archives</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">chown</span><span class="token plain"> centreon-engine: /var/log/centreon-engine/archives</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">775</span><span class="token plain"> /var/log/centreon-engine/archives/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /var/log/centreon-engine/ </span><span class="token parameter variable" style="color:#36acaa">-type</span><span class="token plain"> f </span><span class="token parameter variable" style="color:#36acaa">-exec</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">664</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /usr/share/centreon/www/img/media </span><span class="token parameter variable" style="color:#36acaa">-type</span><span class="token plain"> d </span><span class="token parameter variable" style="color:#36acaa">-exec</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">775</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">find</span><span class="token plain"> /usr/share/centreon/www/img/media </span><span class="token parameter variable" style="color:#36acaa">-type</span><span class="token plain"> f </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-iname</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;.keep&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-iname</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;.htaccess&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-exec</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">664</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>D√©couverte des services</li></ul><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Alma / RHEL / Oracle Linux 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Debian 11</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> /tmp/centreon-autodisco/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">chown</span><span class="token plain"> apache: /tmp/centreon-autodisco/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">775</span><span class="token plain"> /tmp/centreon-autodisco/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> /tmp/centreon-autodisco/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">chown</span><span class="token plain"> www-data: /tmp/centreon-autodisco/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">chmod</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">775</span><span class="token plain"> /tmp/centreon-autodisco/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="arr√™t-et-d√©sactivation-des-services">Arr√™t et d√©sactivation des services<a href="#arr√™t-et-d√©sactivation-des-services" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><p>Les services applicatifs de Centreon ne seront plus lanc√©s au d√©marrage du serveur comme c&#x27;est le cas pour une installation standard, ce sont les services de clustering qui s&#x27;en chargeront. Il faut donc arr√™ter et d√©sactiver ces services.</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Alma / RHEL / Oracle Linux 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Debian 11</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl stop centengine snmptrapd centreontrapd gorgoned cbd httpd php-fpm centreon mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl disable centengine snmptrapd centreontrapd gorgoned cbd httpd php-fpm centreon mysql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl stop centengine snmptrapd centreontrapd gorgoned cbd apache2 php8.1-fpm centreon mariadb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl disable centengine snmptrapd centreontrapd gorgoned cbd apache2 php8.1-fpm centreon mariadb</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Alma / RHEL / Oracle Linux 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Debian 11</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>Le service MariaDB √©tant sur un mode mixte entre SysV init et systemd, pour bien s&#x27;assurer qu&#x27;il ne soit plus lanc√© au d√©marrage, il faut √©galement lancer la commande :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">chkconfig</span><span class="token plain"> mysql off</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>Le service MariaDB √©tant sur un mode mixte entre SysV init et systemd, pour bien s&#x27;assurer qu&#x27;il ne soit plus lanc√© au d√©marrage, il faut √©galement lancer la commande :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">update-rc.d </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> mariadb remove</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cr√©ation-du-cluster">Cr√©ation du cluster<a href="#cr√©ation-du-cluster" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="activation-des-services-de-clustering">Activation des services de clustering<a href="#activation-des-services-de-clustering" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h4><p>Pour commencer, d√©marrer le service pcsd sur les deux n≈ìuds centraux :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl start pcsd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="pr√©paration-du-serveur-qui-jouera-le-r√¥le-de-quorum-device">Pr√©paration du serveur qui jouera le r√¥le de <em>Quorum Device</em><a href="#pr√©paration-du-serveur-qui-jouera-le-r√¥le-de-quorum-device" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h4><p>Vous pouvez utiliser un de vos pollers pour jouer ce r√¥le. Il doit √™tre pr√©par√© avec les commandes suivantes:</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Alma Linux 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">RHEL 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Oracle Linux 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Debian 11</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dnf config-manager </span><span class="token parameter variable" style="color:#36acaa">--enable</span><span class="token plain"> ha</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dnf </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> pcs corosync-qnetd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl start pcsd.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> pcsd.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pcs qdevice setup model net </span><span class="token parameter variable" style="color:#36acaa">--enable</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--start</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pcs qdevice status net </span><span class="token parameter variable" style="color:#36acaa">--full</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dnf </span><span class="token parameter variable" style="color:#36acaa">-y</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> dnf-plugins-core https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">subscription-manager repos </span><span class="token parameter variable" style="color:#36acaa">--enable</span><span class="token plain"> rhel-8-for-x86_64-highavailability-rpms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dnf </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> pcs corosync-qnetd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl start pcsd.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> pcsd.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pcs qdevice setup model net </span><span class="token parameter variable" style="color:#36acaa">--enable</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--start</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pcs qdevice status net </span><span class="token parameter variable" style="color:#36acaa">--full</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dnf config-manager </span><span class="token parameter variable" style="color:#36acaa">--enable</span><span class="token plain"> ol8_addons</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dnf </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> pcs corosync-qnetd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl start pcsd.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> pcsd.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pcs qdevice setup model net </span><span class="token parameter variable" style="color:#36acaa">--enable</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--start</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pcs qdevice status net </span><span class="token parameter variable" style="color:#36acaa">--full</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">apt</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> pcs corosync-qnetd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl start pcsd.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> pcsd.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pcs qdevice setup model net </span><span class="token parameter variable" style="color:#36acaa">--enable</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--start</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pcs qdevice status net </span><span class="token parameter variable" style="color:#36acaa">--full</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Alma / RHEL / Oracle Linux 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Debian 11</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>Modifier le param√®tre <code>COROSYNC_QNETD_OPTIONS</code> du fichier de configuration <code>/etc/sysconfig/corosync-qnetd</code> du Quorum afin de restreindre les connexions entrant √† IPv4.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">COROSYNC_QNETD_OPTIONS</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;-4&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>Modifier le param√®tre <code>COROSYNC_QNETD_OPTIONS</code> du fichier de configuration <code>/etc/default/corosync-qnetd</code> du Quorum afin de restreindre les connexions entrant √† IPv4.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">COROSYNC_QNETD_OPTIONS</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;-4&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="authentification-aupr√®s-des-membres-du-cluster">Authentification aupr√®s des membres du cluster<a href="#authentification-aupr√®s-des-membres-du-cluster" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h4><p>Par mesure de simplicit√©, nous allons d√©finir le m√™me mot de passe pour le compte <code>hacluster</code> sur les deux n≈ìuds <strong>et sur <code>@QDEVICE_NAME@</code></strong> :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">passwd</span><span class="token plain"> hacluster</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Une fois ce mot de passe commun d√©fini, il est possible pour un n≈ìud de s&#x27;authentifier sur les autres. <strong>La commande suivante ainsi que toutes les commandes agissant sur le cluster doivent √™tre lanc√©e sur un seul n≈ìud.</strong></p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Alma / RHEL / Oracle Linux 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Debian 11</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs </span><span class="token function" style="color:#d73a49">host</span><span class="token plain"> auth </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;@CENTRAL_MASTER_NAME@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;@CENTRAL_SLAVE_NAME@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;@QDEVICE_NAME@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hacluster&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@CENTREON_CLUSTER_PASSWD@&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>Sur Debian, le cluster est autoconfigur√© avec des valeurs par d√©faut. Afin d&#x27;installer notre cluster, nous devons d√©truire se pr√©param√©trage avec cette commande :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs cluster destroy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Puis vous pouvez lancer l&#x27;authentification du cluster :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs </span><span class="token function" style="color:#d73a49">host</span><span class="token plain"> auth </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;@CENTRAL_MASTER_NAME@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;@CENTRAL_SLAVE_NAME@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;@QDEVICE_NAME@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-u</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;hacluster&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@CENTREON_CLUSTER_PASSWD@&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cr√©ation-du-cluster-1">Cr√©ation du cluster<a href="#cr√©ation-du-cluster-1" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h4><p>Cette commande doit √™tre lanc√©e sur un des deux n≈ìuds :</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Alma / RHEL / Oracle Linux 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Debian 11</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs cluster setup </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    centreon_cluster </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;@CENTRAL_MASTER_NAME@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;@CENTRAL_SLAVE_NAME@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--force</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs cluster setup </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    centreon_cluster </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;@CENTRAL_MASTER_NAME@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;@CENTRAL_SLAVE_NAME@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--force</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><p>D√©marrer ensuite <code>pacemaker</code> sur les deux n≈ìuds :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl </span><span class="token builtin class-name">enable</span><span class="token plain"> pacemaker pcsd corosync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemctl start pacemaker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Puis d√©finir les propri√©t√©s par d√©faut sur un des deux n≈ìuds :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs property </span><span class="token builtin class-name">set</span><span class="token plain"> symmetric-cluster</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pcs property </span><span class="token builtin class-name">set</span><span class="token plain"> stonith-enabled</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;false&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource defaults resource-stickiness</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;100&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>L&#x27;√©tat du cluster peut √™tre suivi en temps r√©el avec la commande <code>crm_mon -f</code>, qui vous permettra de voir appara√Ætre les nouvelles ressources au fur et √† mesure.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ajout-du-quorum-device">Ajout du <em>Quorum Device</em><a href="#ajout-du-quorum-device" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h4><p>Cette commande doit √™tre lanc√©e depuis l&#x27;un des deux n≈ìuds :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs quorum device </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> model net </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">host</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;@QDEVICE_NAME@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">algorithm</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;ffsplit&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cr√©ation-des-ressources-mariadb">Cr√©ation des ressources MariaDB<a href="#cr√©ation-des-ressources-mariadb" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><p>Cette commande ne doit √™tre lanc√©e <strong>uniquement sur un des deux n≈ìuds centraux</strong>:</p><blockquote><p><strong>ATTENTION :</strong> la commande suivante varie suivant la distribution Linux utilis√©e.</p></blockquote><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Alma / RHEL / Oracle Linux 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Debian 11</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource create </span><span class="token string" style="color:#e3116c">&quot;ms_mysql&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ocf:heartbeat:mariadb-centreon </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">config</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/etc/my.cnf.d/server.cnf&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">pid</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/var/lib/mysql/mysql.pid&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">datadir</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/var/lib/mysql&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">socket</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/var/lib/mysql/mysql.sock&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">binary</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/usr/bin/mysqld_safe&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">node_list</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;@CENTRAL_MASTER_NAME@ @CENTRAL_SLAVE_NAME@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">replication_user</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;@MARIADB_REPL_USER@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">replication_passwd</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;@MARIADB_REPL_PASSWD@&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">test_user</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;@MARIADB_REPL_USER@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">test_passwd</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;@MARIADB_REPL_PASSWD@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">test_table</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;centreon.host&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource create </span><span class="token string" style="color:#e3116c">&quot;ms_mysql&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ocf:heartbeat:mariadb-centreon </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">config</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/etc/mysql/mariadb.conf.d/50-server.cnf&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">pid</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/run/mysqld/mysqld.pid&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">datadir</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/var/lib/mysql&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">socket</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/run/mysqld/mysqld.sock&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">binary</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/usr/bin/mysqld_safe&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">node_list</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;@CENTRAL_MASTER_NAME@ @CENTRAL_SLAVE_NAME@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">replication_user</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;@MARIADB_REPL_USER@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">replication_passwd</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;@MARIADB_REPL_PASSWD@&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">test_user</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;@MARIADB_REPL_USER@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">test_passwd</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;@MARIADB_REPL_PASSWD@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">test_table</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;centreon.host&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><blockquote><p><strong>ATTENTION :</strong> la commande suivante varie suivant la distribution Linux utilis√©e.</p></blockquote><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Alma / RHEL / Oracle Linux 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Debian 11</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource promotable ms_mysql </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    master-node-max</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">clone_max</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;2&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    globally-unique</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;false&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    clone-node-max</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">notify</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource promotable ms_mysql </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    master-node-max</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">clone_max</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;2&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    globally-unique</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;false&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    clone-node-max</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;1&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">notify</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cr√©ation-des-ressources-clones">Cr√©ation des ressources clones<a href="#cr√©ation-des-ressources-clones" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><p>Certaines ressources ne doivent √™tre d√©marr√©es que sur un seul n≈ìud, mais pour d&#x27;autres, il n&#x27;est pas g√™nant, voire souhaitable de les d√©marrer sur les deux n≈ìuds. Pour ces derni√®res, nous d√©clarerons des ressources <em>clones</em>.</p><blockquote><p><strong>Avertissement :</strong> Toutes les commandes qui suivent ne doivent √™tre lanc√©es que sur un seul des deux n≈ìuds centraux.</p></blockquote><h5 class="anchor anchorWithStickyNavbar_LWe7" id="php8">PHP8<a href="#php8" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h5><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Alma / RHEL / Oracle Linux 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Debian 11</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource create </span><span class="token string" style="color:#e3116c">&quot;php&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    systemd:php-fpm </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    meta target-role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">op</span><span class="token plain"> start </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;30s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stop </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;30s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    monitor </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;5s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;30s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    clone</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource create </span><span class="token string" style="color:#e3116c">&quot;php&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    systemd:php8.1-fpm </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    meta target-role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">op</span><span class="token plain"> start </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;30s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stop </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;30s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    monitor </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;5s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;30s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    clone</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="broker-rrd">Broker RRD<a href="#broker-rrd" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h5><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource create </span><span class="token string" style="color:#e3116c">&quot;cbd_rrd&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    systemd:cbd </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    meta target-role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">op</span><span class="token plain"> start </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;90s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stop </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;90s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    monitor </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;20s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;30s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    clone</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cr√©ation-du-groupe-de-ressources-centreon">Cr√©ation du groupe de ressources Centreon<a href="#cr√©ation-du-groupe-de-ressources-centreon" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><h5 class="anchor anchorWithStickyNavbar_LWe7" id="adresse-vip">Adresse VIP<a href="#adresse-vip" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h5><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource create vip </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ocf:heartbeat:IPaddr2 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">ip</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;@VIP_IPADDR@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">nic</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;@VIP_IFNAME@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">cidr_netmask</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;@VIP_CIDR_NETMASK@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">broadcast</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;@VIP_BROADCAST_IPADDR@&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">flush_routes</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;true&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    meta target-role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">op</span><span class="token plain"> start </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;20s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stop </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;20s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    monitor </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;10s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;20s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--group</span><span class="token plain"> centreon</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="service-httpd">Service httpd<a href="#service-httpd" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h5><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Alma / RHEL / Oracle Linux 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Debian 11</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource create http </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    systemd:httpd </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    meta target-role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">op</span><span class="token plain"> start </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;40s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stop </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;40s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    monitor </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;5s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;20s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--group</span><span class="token plain"> centreon </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--force</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource create http </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    systemd:apache2 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    meta target-role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">op</span><span class="token plain"> start </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;40s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stop </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;40s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    monitor </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;5s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;20s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--group</span><span class="token plain"> centreon </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--force</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="service-gorgone">Service Gorgone<a href="#service-gorgone" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h5><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource create gorgone </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    systemd:gorgoned </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    meta target-role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">op</span><span class="token plain"> start </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;90s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stop </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;90s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    monitor </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;5s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;20s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--group</span><span class="token plain"> centreon</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="service-centreon-central-sync">Service centreon-central-sync<a href="#service-centreon-central-sync" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h5><p>Ce service est sp√©cifique √† <em>Centreon HA</em>. Sa fonction est de r√©pliquer les changements de configuration, l&#x27;ajout d&#x27;images via l&#x27;interface, etc.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource create centreon_central_sync </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    systemd:centreon-central-sync </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    meta target-role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">op</span><span class="token plain"> start </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;90s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stop </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;90s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    monitor </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;5s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;20s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--group</span><span class="token plain"> centreon</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="broker-sql">Broker SQL<a href="#broker-sql" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h5><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource create cbd_central_broker </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    systemd:cbd-sql </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    meta target-role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">op</span><span class="token plain"> start </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;90s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stop </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;90s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    monitor </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;5s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;30s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--group</span><span class="token plain"> centreon</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="service-centengine">Service centengine<a href="#service-centengine" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h5><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource create centengine </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    systemd:centengine </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    meta multiple-active</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;stop_start&quot;</span><span class="token plain"> target-role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">op</span><span class="token plain"> start </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;90s&quot;</span><span class="token plain"> stop </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;90s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    monitor </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;5s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;30s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--group</span><span class="token plain"> centreon</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="service-centreontrapd">Service centreontrapd<a href="#service-centreontrapd" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h5><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource create centreontrapd </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    systemd:centreontrapd </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    meta target-role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">op</span><span class="token plain"> start </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;30s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stop </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;30s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    monitor </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;5s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;20s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--group</span><span class="token plain"> centreon</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="service-snmptrapd">Service snmptrapd<a href="#service-snmptrapd" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h5><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource create snmptrapd </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    systemd:snmptrapd </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    meta target-role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">op</span><span class="token plain"> start </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;30s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stop </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;0s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;30s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    monitor </span><span class="token assign-left variable" style="color:#36acaa">interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;5s&quot;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;20s&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--group</span><span class="token plain"> centreon</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="contraintes-de-colocation">Contraintes de colocation<a href="#contraintes-de-colocation" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h4><p>Pour indiquer au cluster que les ressources Centreon doivent √™tre d√©marr√©es sur le n≈ìud portant le r√¥le <em>master</em> MariaDB, nous cr√©ons ces deux contraintes :</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Alma / RHEL / Oracle Linux 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Debian 11</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs constraint colocation </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> master </span><span class="token string" style="color:#e3116c">&quot;centreon&quot;</span><span class="token plain"> with </span><span class="token string" style="color:#e3116c">&quot;ms_mysql-clone&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pcs constraint colocation </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> master </span><span class="token string" style="color:#e3116c">&quot;ms_mysql-clone&quot;</span><span class="token plain"> with </span><span class="token string" style="color:#e3116c">&quot;centreon&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs constraint colocation </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> master </span><span class="token string" style="color:#e3116c">&quot;centreon&quot;</span><span class="token plain"> with </span><span class="token string" style="color:#e3116c">&quot;ms_mysql-clone&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pcs constraint colocation </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> master </span><span class="token string" style="color:#e3116c">&quot;ms_mysql-clone&quot;</span><span class="token plain"> with </span><span class="token string" style="color:#e3116c">&quot;centreon&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><p>Apr√®s cette √©tape, toutes les ressources doivent √™tre actives au m√™me endroit, et la plateforme fonctionnelle et redond√©e. Dans le cas contraire, se r√©f√©rer au guide de troubleshooting du paragraphe suivant.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lancement-du-cluster-et-contr√¥le-de-l√©tat-des-ressources">Lancement du Cluster et contr√¥le de l&#x27;√©tat des ressources<a href="#lancement-du-cluster-et-contr√¥le-de-l√©tat-des-ressources" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="activer-les-ressources">Activer les ressources<a href="#activer-les-ressources" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h4><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource </span><span class="token builtin class-name">enable</span><span class="token plain"> php-clone</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource </span><span class="token builtin class-name">enable</span><span class="token plain"> cbd_rrd-clone</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource meta vip target-role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource meta vip_mysql target-role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource meta centreontrapd target-role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource meta snmptrapd target-role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource meta centengine target-role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource meta cbd_central_broker target-role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource meta gorgone target-role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource meta centreon_central_sync target-role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource meta http target-role</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;started&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="contr√¥le-de-l√©tat-du-cluster">Contr√¥le de l&#x27;√©tat du cluster<a href="#contr√¥le-de-l√©tat-du-cluster" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="contr√¥le-de-l√©tat-des-ressources">Contr√¥le de l&#x27;√©tat des ressources<a href="#contr√¥le-de-l√©tat-des-ressources" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h4><p>Il est possible de suivre l&#x27;√©tat du cluster en temps r√©el via la commande <code>crm_mon -fr</code> :</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Alma / RHEL / Oracle Linux 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Debian 11</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Cluster Summary:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Stack: corosync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Current DC: @CENTRAL_MASTER_NAME@ </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">version </span><span class="token number" style="color:#36acaa">2.0</span><span class="token plain">.5-9.0.1.el8_4.1-ba59be7122</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> - partition with quorum</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Last updated: Wed Sep </span><span class="token number" style="color:#36acaa">15</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token plain">:35:47 </span><span class="token number" style="color:#36acaa">2021</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Last change:  Wed Sep </span><span class="token number" style="color:#36acaa">15</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain">:41:50 </span><span class="token number" style="color:#36acaa">2021</span><span class="token plain"> by root via crm_attribute on @CENTRAL_MASTER_NAME@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> nodes configured</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * </span><span class="token number" style="color:#36acaa">14</span><span class="token plain"> resource instances configured</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Node List:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Online: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> @CENTRAL_MASTER_NAME@ @CENTRAL_SLAVE_NAME@ </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Full List of Resources:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Clone Set: ms_mysql-clone </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ms_mysql</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">promotable</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * Masters: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> @CENTRAL_MASTER_NAME@ </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * Slaves: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> @CENTRAL_SLAVE_NAME@ </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Clone Set: php-clone </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">php</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * Started: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> @CENTRAL_MASTER_NAME@ @CENTRAL_SLAVE_NAME@ </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Clone Set: cbd_rrd-clone </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">cbd_rrd</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * Started: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> @CENTRAL_MASTER_NAME@ @CENTRAL_SLAVE_NAME@ </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Resource Group: centreon:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * vip       </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ocf::heartbeat:IPaddr2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:        Started @CENTRAL_MASTER_NAME@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * http      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">systemd:httpd</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:         Started @CENTRAL_MASTER_NAME@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * gorgone   </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">systemd:gorgoned</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:      Started @CENTRAL_MASTER_NAME@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * centreon_central_sync     </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">systemd:centreon-central-sync</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:         Started @CENTRAL_MASTER_NAME@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * cbd_central_broker        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">systemd:cbd-sql</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:       Started @CENTRAL_MASTER_NAME@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * centengine        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">systemd:centengine</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:    Started @CENTRAL_MASTER_NAME@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * centreontrapd     </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">systemd:centreontrapd</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:         Started @CENTRAL_MASTER_NAME@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * snmptrapd </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">systemd:snmptrapd</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:     Started @CENTRAL_MASTER_NAME@</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Cluster Summary:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Stack: corosync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Current DC: @CENTRAL_MASTER_NAME@ </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">version </span><span class="token number" style="color:#36acaa">2.0</span><span class="token plain">.5-9.0.1.el8_4.1-ba59be7122</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> - partition with quorum</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Last updated: Wed Sep </span><span class="token number" style="color:#36acaa">15</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token plain">:35:47 </span><span class="token number" style="color:#36acaa">2021</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Last change:  Wed Sep </span><span class="token number" style="color:#36acaa">15</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain">:41:50 </span><span class="token number" style="color:#36acaa">2021</span><span class="token plain"> by root via crm_attribute on @CENTRAL_MASTER_NAME@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> nodes configured</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * </span><span class="token number" style="color:#36acaa">14</span><span class="token plain"> resource instances configured</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Node List:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Online: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> @CENTRAL_MASTER_NAME@ @CENTRAL_SLAVE_NAME@ </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Full List of Resources:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Clone Set: ms_mysql-clone </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ms_mysql</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">promotable</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * Masters: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> @CENTRAL_MASTER_NAME@ </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * Slaves: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> @CENTRAL_SLAVE_NAME@ </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Clone Set: php-clone </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">php</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * Started: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> @CENTRAL_MASTER_NAME@ @CENTRAL_SLAVE_NAME@ </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Clone Set: cbd_rrd-clone </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">cbd_rrd</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * Started: </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> @CENTRAL_MASTER_NAME@ @CENTRAL_SLAVE_NAME@ </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  * Resource Group: centreon:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * vip       </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ocf::heartbeat:IPaddr2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:        Started @CENTRAL_MASTER_NAME@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * http      </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">systemd:httpd</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:         Started @CENTRAL_MASTER_NAME@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * gorgone   </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">systemd:gorgoned</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:      Started @CENTRAL_MASTER_NAME@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * centreon_central_sync     </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">systemd:centreon-central-sync</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:         Started @CENTRAL_MASTER_NAME@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * cbd_central_broker        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">systemd:cbd-sql</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:       Started @CENTRAL_MASTER_NAME@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * centengine        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">systemd:centengine</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:    Started @CENTRAL_MASTER_NAME@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * centreontrapd     </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">systemd:centreontrapd</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:         Started @CENTRAL_MASTER_NAME@</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    * snmptrapd </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">systemd:snmptrapd</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">:     Started @CENTRAL_MASTER_NAME@</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><p>Si la ressource <strong>centreon_central_sync</strong> ne veut pas d√©marrer, v√©rifiez si le dossier <code>/usr/share/centreon-broker/lua</code> existe.</p><p>Si non, vous pouvez le cr√©er avec cette commande <code>mkdir -p /usr/share/centreon-broker/lua</code>. Puis, lancez un cleanup avec cette commande <code>pcs resource cleanup</code>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ressources-d√©sactiv√©es">Ressources d√©sactiv√©es<a href="#ressources-d√©sactiv√©es" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h4><p>Lorsque vous faites un <code>crm_mon -fr</code> et que vous avez une ressource qui est d√©sactiv√©e :</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Master/Slave Set: ms_mysql-master [ms_mysql]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Masters: [ @DATABASE_MASTER_NAME@ ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Slaves: [ @DATABASE_SLAVE_NAME@ ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     Stopped: [ @CENTRAL_MASTER_NAME@ @CENTRAL_SLAVE_NAME@ ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vip_mysql       (ocf::heartbeat:IPaddr2):       Stopped (disabled)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Vous devez activer la ressource avec la commande suivante :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource </span><span class="token builtin class-name">enable</span><span class="token plain"> @RESSOURCE_NAME@</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Dans notre cas :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource </span><span class="token builtin class-name">enable</span><span class="token plain"> vip_mysql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="contr√¥ler-la-synchronisation-des-bases">Contr√¥ler la synchronisation des bases<a href="#contr√¥ler-la-synchronisation-des-bases" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h4><p>L&#x27;√©tat de la r√©plication MariaDB peut √™tre v√©rifi√© √† n&#x27;importe quel moment gr√¢ce √† la commande <code>mysql-check-status.sh</code> :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/usr/share/centreon-ha/bin/mysql-check-status.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>R√©sultat attendu :</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Connection MASTER Status </span><span class="token string" style="color:#e3116c">&#x27;@CENTRAL_MASTER_NAME@&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">OK</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Connection SLAVE Status </span><span class="token string" style="color:#e3116c">&#x27;@CENTRAL_SLAVE_NAME@&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">OK</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Slave Thread Status </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">OK</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Position Status </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">OK</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Il est possible qu&#x27;imm√©diatement apr√®s l&#x27;installation, le thread de r√©plication ne soit pas actif. Un red√©marrage de la ressource <code>ms_mysql</code> doit permettre d&#x27;y rem√©dier.</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Alma / RHEL / Oracle Linux 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Debian 11</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource restart ms_mysql-clone</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pcs resource restart ms_mysql-clone</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="contr√¥le-de-labsence-de-contraintes">Contr√¥le de l&#x27;absence de contraintes<a href="#contr√¥le-de-labsence-de-contraintes" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h4><p>En temps normal, seules les contraintes de colocation doivent √™tre actives sur le cluster. La commande <code>pcs constraint</code> doit retourner :</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Alma / RHEL / Oracle Linux 8</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Debian 11</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Location Constraints:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ordering Constraints:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Colocation Constraints:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  centreon with ms_mysql-clone </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">score:INFINITY</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rsc-role:Started</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">with-rsc-role:Master</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ms_mysql-clone with centreon </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">score:INFINITY</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rsc-role:Master</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">with-rsc-role:Started</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ticket Constraints:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Location Constraints:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ordering Constraints:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Colocation Constraints:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  centreon with ms_mysql-clone </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">score:INFINITY</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rsc-role:Started</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">with-rsc-role:Master</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ms_mysql-clone with centreon </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">score:INFINITY</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rsc-role:Master</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">with-rsc-role:Started</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Ticket Constraints:</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copier le code" title="Copier" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="int√©grer-des-collecteurs">Int√©grer des collecteurs<a href="#int√©grer-des-collecteurs" class="hash-link" aria-label="Lien direct vers le titre" title="Lien direct vers le titre">‚Äã</a></h2><p>Il ne reste maintenant plus qu&#x27;√† <a href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/installation-of-centreon-ha/integrating-pollers/">int√©grer les collecteurs</a> et commencer √† superviser !</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/centreon/centreon-documentation/edit/staging/i18n/fr/docusaurus-plugin-content-docs/version-23.10/installation/installation-of-centreon-ha/installation-2-nodes.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>√âditer cette page</a></div><div class="col"><svg id="feedback" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" xml:space="preserve" fill="none" style="height:24px;width:24px;vertical-align:text-top;margin-right:4px"><rect y="0" class="st0" width="24" height="24"></rect><rect x="2" y="2" class="st0" width="20" height="20"></rect><path fill="none" stroke="currentColor" stroke-miterlimit="10" d="M16.14,9.08c0,3.09-2.76,5.6-6.16,5.6c-1.11,0-5.45,0-5.45,0s1.36-1.38,0.93-1.79c-1.02-1-1.64-2.34-1.64-3.81 c0-3.09,2.76-5.6,6.16-5.6S16.14,5.99,16.14,9.08z"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" d="M8.61,16.28c0.76,2.31,3.12,4,5.91,4c1.11,0,5.45,0,5.45,0s-1.36-1.38-0.93-1.79c1.02-1,1.64-2.34,1.64-3.81 c0-2-1.15-3.75-2.88-4.74"></path><line fill="none" stroke="currentColor" stroke-linecap="round" x1="6.78" y1="6.86" x2="13.55" y2="6.86"></line><line fill="none" stroke="currentColor" stroke-linecap="round" x1="6.78" y1="8.74" x2="13.55" y2="8.74"></line><line fill="none" stroke="currentColor" stroke-linecap="round" x1="6.78" y1="10.62" x2="13.55" y2="10.62"></line></svg><a rel="noreferrer noopener" href="https://docs.google.com/forms/d/e/1FAIpQLSdeKkEHWbxn4ZweR1M4OEMzP_QoqKmjl6t4iC_yKeX2CFjzAw/viewform?usp=pp_url&amp;entry.371845164=docs.centreon.com/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/installation-of-centreon-ha/installation-2-nodes/" target="_blank">Envoyer du feedback sur cette page</a></div><div class="col lastUpdated_VsjB"><span class="theme-last-updated">Derni√®re mise √† jour<!-- --> le <b><time datetime="2023-11-10T15:59:42.000Z">10 nov. 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Pagination des documents"><a class="pagination-nav__link pagination-nav__link--prev" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/installation-of-centreon-ha/overview/"><div class="pagination-nav__sublabel">Pr√©c√©dent</div><div class="pagination-nav__label">Centreon HA</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/centreon-documentation/pr-preview/staging/pr-2806/fr/docs/installation/installation-of-centreon-ha/installation-4-nodes/"><div class="pagination-nav__sublabel">Suivant</div><div class="pagination-nav__label">Installation d&#x27;un cluster √† 4 n≈ìuds</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#pr√©requis" class="table-of-contents__link toc-highlight">Pr√©requis</a><ul><li><a href="#compr√©hension" class="table-of-contents__link toc-highlight">Compr√©hension</a></li><li><a href="#flux-r√©seaux" class="table-of-contents__link toc-highlight">Flux r√©seaux</a></li><li><a href="#installation-de-centreon" class="table-of-contents__link toc-highlight">Installation de Centreon</a></li><li><a href="#quorum-device" class="table-of-contents__link toc-highlight">Quorum Device</a></li><li><a href="#d√©finition-des-noms-et-adresses-ip-des-serveurs" class="table-of-contents__link toc-highlight">D√©finition des noms et adresses IP des serveurs</a></li><li><a href="#configuration-de-centreon-broker" class="table-of-contents__link toc-highlight">Configuration de centreon-broker</a></li><li><a href="#modification-de-la-commande-de-rechargement-de-cbd" class="table-of-contents__link toc-highlight">Modification de la commande de rechargement de <code>cbd</code></a></li></ul></li><li><a href="#pr√©paration-du-syst√®me" class="table-of-contents__link toc-highlight">Pr√©paration du syst√®me</a><ul><li><a href="#tuning-de-la-configuration-r√©seau" class="table-of-contents__link toc-highlight">Tuning de la configuration r√©seau</a></li><li><a href="#r√©solution-de-noms" class="table-of-contents__link toc-highlight">R√©solution de noms</a></li><li><a href="#installation-des-paquets" class="table-of-contents__link toc-highlight">Installation des paquets</a></li><li><a href="#√©changes-de-clefs-ssh" class="table-of-contents__link toc-highlight">√âchanges de clefs SSH</a></li></ul></li><li><a href="#mise-en-place-de-la-r√©plication-mariadb" class="table-of-contents__link toc-highlight">Mise en place de la r√©plication MariaDB</a><ul><li><a href="#configuration-de-mariadb" class="table-of-contents__link toc-highlight">Configuration de MariaDB</a></li><li><a href="#s√©curisation-de-la-base-de-donn√©es" class="table-of-contents__link toc-highlight">S√©curisation de la base de donn√©es</a></li><li><a href="#cr√©ation-du-compte-centreon" class="table-of-contents__link toc-highlight">Cr√©ation du compte centreon</a></li><li><a href="#cr√©ation-du-compte-de-r√©plication" class="table-of-contents__link toc-highlight">Cr√©ation du compte de r√©plication</a></li><li><a href="#configuration-des-variables-denvironnement-des-scripts-mariadb" class="table-of-contents__link toc-highlight">Configuration des variables d&#39;environnement des scripts MariaDB</a></li><li><a href="#passage-en-read-only" class="table-of-contents__link toc-highlight">Passage en read-only</a></li><li><a href="#synchroniser-les-bases-et-lancer-la-r√©plication-mariadb" class="table-of-contents__link toc-highlight">Synchroniser les bases et lancer la r√©plication MariaDB</a></li></ul></li><li><a href="#mise-en-place-du-cluster-centreon" class="table-of-contents__link toc-highlight">Mise en place du cluster Centreon</a><ul><li><a href="#configuration-du-service-de-synchronisation" class="table-of-contents__link toc-highlight">Configuration du service de synchronisation</a></li><li><a href="#suppression-des-crons" class="table-of-contents__link toc-highlight">Suppression des crons</a></li><li><a href="#modification-des-droits" class="table-of-contents__link toc-highlight">Modification des droits</a></li><li><a href="#arr√™t-et-d√©sactivation-des-services" class="table-of-contents__link toc-highlight">Arr√™t et d√©sactivation des services</a></li><li><a href="#cr√©ation-du-cluster" class="table-of-contents__link toc-highlight">Cr√©ation du cluster</a></li><li><a href="#cr√©ation-des-ressources-mariadb" class="table-of-contents__link toc-highlight">Cr√©ation des ressources MariaDB</a></li><li><a href="#cr√©ation-des-ressources-clones" class="table-of-contents__link toc-highlight">Cr√©ation des ressources clones</a></li><li><a href="#cr√©ation-du-groupe-de-ressources-centreon" class="table-of-contents__link toc-highlight">Cr√©ation du groupe de ressources Centreon</a></li><li><a href="#lancement-du-cluster-et-contr√¥le-de-l√©tat-des-ressources" class="table-of-contents__link toc-highlight">Lancement du Cluster et contr√¥le de l&#39;√©tat des ressources</a></li><li><a href="#contr√¥le-de-l√©tat-du-cluster" class="table-of-contents__link toc-highlight">Contr√¥le de l&#39;√©tat du cluster</a></li></ul></li><li><a href="#int√©grer-des-collecteurs" class="table-of-contents__link toc-highlight">Int√©grer des collecteurs</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.centreon.com/en/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Site Corporate<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.centreon.com/en/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://download.centreon.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Download<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/centreon-documentation/pr-preview/staging/pr-2806/fr/img/logo_centreon.png" alt="Centreon Open Source Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/centreon-documentation/pr-preview/staging/pr-2806/fr/img/logo_centreon.png" alt="Centreon Open Source Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></div><div class="footer__copyright">Copyright ¬© 2005 - 2023 Centreon</div></div></div></footer></div>
<script src="/centreon-documentation/pr-preview/staging/pr-2806/fr/assets/js/runtime~main.0643b7b7.js"></script>
<script src="/centreon-documentation/pr-preview/staging/pr-2806/fr/assets/js/main.03c984fd.js"></script>
</body>
</html>