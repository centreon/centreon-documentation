"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[11157],{99430:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>g,frontMatter:()=>a,metadata:()=>u,toc:()=>c});n(67294);var r=n(3905);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function i(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}const a={id:"centreon-nsclient-tutorial",title:"Centreon NSClient++"},o=void 0,u={unversionedId:"integrations/plugin-packs/getting-started/how-to-guides/centreon-nsclient-tutorial",id:"integrations/plugin-packs/getting-started/how-to-guides/centreon-nsclient-tutorial",title:"Centreon NSClient++",description:"Introduction",source:"@site/i18n/fr/docusaurus-plugin-content-docs-pp/current/integrations/plugin-packs/getting-started/how-to-guides/centreon-nsclient-tutorial.md",sourceDirName:"integrations/plugin-packs/getting-started/how-to-guides",slug:"/integrations/plugin-packs/getting-started/how-to-guides/centreon-nsclient-tutorial",permalink:"/centreon-documentation/pr-preview/staging/pr-2776/fr/pp/integrations/plugin-packs/getting-started/how-to-guides/centreon-nsclient-tutorial",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/i18n/fr/docusaurus-plugin-content-docs-pp/current/integrations/plugin-packs/getting-started/how-to-guides/centreon-nsclient-tutorial.md",tags:[],version:"current",frontMatter:{id:"centreon-nsclient-tutorial",title:"Centreon NSClient++"},sidebar:"pp",previous:{title:"Pr\xe9requis pour la supervision Azure",permalink:"/centreon-documentation/pr-preview/staging/pr-2776/fr/pp/integrations/plugin-packs/getting-started/how-to-guides/azure-credential-configuration"},next:{title:"Collecter des OpenMetrics",permalink:"/centreon-documentation/pr-preview/staging/pr-2776/fr/pp/integrations/plugin-packs/getting-started/how-to-guides/collect-openmetrics"}},p={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Support et mises \xe0 jour",id:"support-et-mises-\xe0-jour",level:2},{value:"T\xe9l\xe9chargement",id:"t\xe9l\xe9chargement",level:2},{value:"Installation",id:"installation",level:2},{value:"Mise \xe0 Jour",id:"mise-\xe0-jour",level:2},{value:"Configuration",id:"configuration",level:2},{value:"NRPE",id:"nrpe",level:3},{value:"Serveur Web / RestAPI",id:"serveur-web--restapi",level:3},{value:"Pr\xe9requis",id:"pr\xe9requis",level:4},{value:"Configurer l&#39;acc\xe8s Rest HTTPS",id:"configurer-lacc\xe8s-rest-https",level:4},{value:"Diagnostic des erreurs communes",id:"diagnostic-des-erreurs-communes",level:2}],d={toc:c},m="wrapper";function g(e){var{components:t}=e,a=i(e,["components"]);return(0,r.kt)(m,l(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}({},d,a),{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"NSClient++ est un agent de supervision Open Source multi plateformes utilisable sur les environnements Microsoft Windows et Linux. Il permet l'ex\xe9cution\nlocale de commandes personnalis\xe9es et l'utilisation de protocoles de supervision standards : NRPE, NSCA, HTTPS. Cet agent vise \xe0 fournir un ensemble\nexhaustif d'indicateurs, tant au niveau syst\xe8me qu'au niveau applicatif."),(0,r.kt)("p",null,"Centreon fournit une version recompil\xe9e et personnalis\xe9e pr\xeate \xe0 l'emploi de l'agent tout simplement baptis\xe9e ",(0,r.kt)("strong",{parentName:"p"},"centreon-nsclient"),".\nCette version permet de profiter des fonctionnalit\xe9s natives de NSClient++ combin\xe9es \xe0 la puissance des Plugins Centreon, permettant ainsi la supervision\nd'indicateurs applicatifs tels que Hyper-V, Active Directory, WSUS, SCCM, Microsoft Exchange, Veeam et bien d'autres."),(0,r.kt)("p",null,"Les Plugins Centreon issus du ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/centreon/centreon-plugins"},"projet centreon-plugins")," sont sp\xe9cialement recompil\xe9s et packag\xe9s pour une utilisation\nsous Windows. Ils sont directement d\xe9ploy\xe9s et pr\xeats \xe0 l'emploi lors de l'installation de l'agent ",(0,r.kt)("strong",{parentName:"p"},"centreon-nsclient")," sous la forme d'un ex\xe9cutable nomm\xe9\n",(0,r.kt)("em",{parentName:"p"},"centreon_plugins.exe"),"."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Retrouvez la liste des connecteurs de supervision compatibles avec l'agent centreon-nsclient sur le ",(0,r.kt)("a",{parentName:"p",href:"https://www.centreon.com/catalogue-plugins-packs/"},"catalogue"),"\nofficiel Centreon")),(0,r.kt)("p",null,"La proc\xe9dure suivante vous permettra de comprendre le fonctionnement, l'installation et l'exploitation de l'agent ",(0,r.kt)("strong",{parentName:"p"},"centreon-nsclient")," sur vos serveurs\nWindows."),(0,r.kt)("h2",{id:"support-et-mises-\xe0-jour"},"Support et mises \xe0 jour"),(0,r.kt)("p",null,"Centreon supporte et maintient uniquement les Plugins personnalis\xe9s fournis au travers de l'agent ",(0,r.kt)("strong",{parentName:"p"},"centreon-nsclient"),". Pour toute question ou probl\xe8me\nrelatif au fonctionnement de NSClient++, rendez-vous sur la ",(0,r.kt)("a",{parentName:"p",href:"https://docs.nsclient.org/"},"documentation officielle")," de NSClient++."),(0,r.kt)("p",null,"Centreon publiera une version mensuelle des ex\xe9cutables ",(0,r.kt)("em",{parentName:"p"},"centreon_plugins.exe")," et ",(0,r.kt)("em",{parentName:"p"},"check_logfiles")," comprenant les derni\xe8res nouveaut\xe9s ainsi que les\n",(0,r.kt)("em",{parentName:"p"},"bugfixes"),". L'installateur de l'agent ",(0,r.kt)("strong",{parentName:"p"},"centreon-nsclient")," est \xe9galement mis \xe0 jour et propos\xe9 dans sa derni\xe8re version pour les nouvelles installations."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Pour la mise \xe0 jour des Plugins Centreon integr\xe9s \xe0 l'agent ",(0,r.kt)("strong",{parentName:"p"},"centreon-nsclient"),", consultez le chapitre ",(0,r.kt)("a",{parentName:"p",href:"#mise-%C3%A0-jour"},"Mise \xe0 Jour"))),(0,r.kt)("h2",{id:"t\xe9l\xe9chargement"},"T\xe9l\xe9chargement"),(0,r.kt)("p",null,"Tout d'abord, rendez-vous sur la page Github du projet ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/centreon/centreon-nsclient-build/releases"},"centreon-nsclient")," et r\xe9cup\xe9rez\nles derni\xe8res versions des ex\xe9cutables d\xe9taill\xe9s ci-dessous en fonction de votre environnement (x86 ou x64):"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"pour une nouvelle installation de l'agent, t\xe9l\xe9chargez le package d'installation ",(0,r.kt)("inlineCode",{parentName:"li"},"Centreon-NSClient-0.5.x.xx-YYYYMMDD")),(0,r.kt)("li",{parentName:"ul"},"pour une mise \xe0 jour des Plugins custom, t\xe9l\xe9chargez les binaires ",(0,r.kt)("inlineCode",{parentName:"li"},"centreon_plugins_YYYYMMDD_*\\*\\*_.exe")," & ",(0,r.kt)("inlineCode",{parentName:"li"},"check_logfiles_x.x.x_\\*\\*\\*.exe"))),(0,r.kt)("h2",{id:"installation"},"Installation"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Cette section concerne une nouvelle installation de l'agent ",(0,r.kt)("strong",{parentName:"p"},"centreon-nsclient"),".")),(0,r.kt)("p",null,"Lancez l'installation de l'agent ",(0,r.kt)("strong",{parentName:"p"},"centreon-nsclient")," et suivez l'assistant :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"La premi\xe8re \xe9tape vous informe sur NSClient++, sa version et sa date de publication. Appuyez sur ",(0,r.kt)("em",{parentName:"li"},"Suivant")," pour passer \xe0 la deuxi\xe8me \xe9tape :")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:n(32335).Z,width:"627",height:"486"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Choisissez le dossier d'installation et cliquez sur ",(0,r.kt)("em",{parentName:"li"},"Suivant")," :")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:n(41418).Z,width:"625",height:"491"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Attendez la fin de l'installation :")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:n(9922).Z,width:"629",height:"489"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Une fois l'installation termin\xe9e, vous pouvez cliquer sur ",(0,r.kt)("em",{parentName:"li"},"Suivant")," :")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:n(59288).Z,width:"624",height:"488"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"L'assistant d'installation confirme le succ\xe8s de l'installation et vous pouvez cliquer sur ",(0,r.kt)("em",{parentName:"li"},"Terminer")," :")),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:n(37406).Z,width:"624",height:"485"})),(0,r.kt)("h2",{id:"mise-\xe0-jour"},"Mise \xe0 Jour"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Cette section concerne la mise \xe0 jour des ex\xe9cutables ",(0,r.kt)("em",{parentName:"p"},"centreon_plugins.exe")," et ",(0,r.kt)("em",{parentName:"p"},"check_logfiles")," sur une installation existante.")),(0,r.kt)("p",null,"Lors des nouvelles ",(0,r.kt)("em",{parentName:"p"},"releases")," mensuelles, il n'est pas n\xe9cessaire de r\xe9installer compl\xe8tement l'agent, seul les Plugins packag\xe9s peuvent \xeatre mis \xe0 jour."),(0,r.kt)("p",null,"Pour cela, rendez-vous dans le dossier contenant les scripts ",(0,r.kt)("em",{parentName:"p"},"centreon_plugins.exe")," et ",(0,r.kt)("em",{parentName:"p"},"check_logfiles.exe")," (g\xe9n\xe9ralement\n",(0,r.kt)("inlineCode",{parentName:"p"},"C:\\Program Files\\Centreon NSClient++\\scripts\\centreon")," et remplacez les ex\xe9cutables par les derni\xe8res versions t\xe9l\xe9charg\xe9es sur Github\n(voir le chapitre ",(0,r.kt)("a",{parentName:"p",href:"#installation"},"Installation"),")."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:n(77788).Z,width:"1162",height:"224"})),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Remarque N'oubliez pas de renommer les fichiers en supprimant les num\xe9ros de version des t\xe9l\xe9chargements\n(le fichiers doivent \xeatre imp\xe9rativement nomm\xe9s ",(0,r.kt)("em",{parentName:"p"},"centreon_plugins.exe")," et ",(0,r.kt)("em",{parentName:"p"},"check_logfiles.exe"),")")),(0,r.kt)("h2",{id:"configuration"},"Configuration"),(0,r.kt)("p",null,"La configuration g\xe9n\xe9rale de l'agent, des modules et des commandes appel\xe9es est centralis\xe9e dans le fichier ",(0,r.kt)("inlineCode",{parentName:"p"},"nsclient.ini"),", g\xe9n\xe9ralement\npr\xe9sent dans le r\xe9pertoire ",(0,r.kt)("inlineCode",{parentName:"p"},"C:\\Program Files\\Centreon NSClient++\\"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:n(51076).Z,width:"1026",height:"512"})),(0,r.kt)("p",null,"La configuration par d\xe9faut permet une utilisation imm\xe9diate de la plupart des fonctionnalit\xe9s. Il est cependant recommand\xe9 d'ajuster\ncertains param\xe8tres, notamment pour des raisons de s\xe9curit\xe9."),(0,r.kt)("h3",{id:"nrpe"},"NRPE"),(0,r.kt)("p",null,"Dans la section ",(0,r.kt)("inlineCode",{parentName:"p"},"[/modules]"),", v\xe9rifiez que le serveur NRPE est activ\xe9 :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"NRPEServer = 1\n")),(0,r.kt)("p",null,"Dans la section ",(0,r.kt)("inlineCode",{parentName:"p"},"[/settings/NRPE/server]"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Saisissez l'adresse IP des Collecteurs Centreon autoris\xe9s \xe0 superviser le serveur:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"allowed hosts = @IP_Poller1, @IP_Poller2\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"V\xe9rifiez que le num\xe9ro de port NRPE utilis\xe9 est d\xe9fini sur 5666 :")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"port = 5666\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Centreon recommande l'utilisation du chiffrement SSL/TLS des donn\xe9es \xe9chang\xe9es.\nAinsi, V\xe9rifiez que l'option correspondante est activ\xe9e :")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"use ssl = true\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"V\xe9rifiez que la taille maximale des paquets est bien d\xe9finie \xe0 8192 :")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csv"},"payload length = 8192\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Enfin, depuis une interface ligne de commandes (cmd/powershell), red\xe9marrez l'agent NSCP :")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"net stop nscp\nnet start nscp\n")),(0,r.kt)("p",null,"(Il est \xe9galement possible de red\xe9marrer le service via la console de management des ",(0,r.kt)("em",{parentName:"p"},"Services")," Windows)."),(0,r.kt)("h3",{id:"serveur-web--restapi"},"Serveur Web / RestAPI"),(0,r.kt)("p",null,"NSClient++ embarque nativement un serveur Web permettant la supervision via le protocole HTTPS, privil\xe9gi\xe9 par rapport aux anciens protocoles NRPE et\nNSCLIENT, et ce pour les raisons suivantes :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Protocole s\xe9curis\xe9 par d\xe9faut"),(0,r.kt)("li",{parentName:"ul"},"Utilisation possible de certificats personnalis\xe9s"),(0,r.kt)("li",{parentName:"ul"},"Suppression des probl\xe8mes de compatibilit\xe9 NRPE v2/v3")),(0,r.kt)("h4",{id:"pr\xe9requis"},"Pr\xe9requis"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Le port HTTPS 8443/TCP doit \xeatre ouvert et accessible sur le serveur Windows cible afin de permettre la communication du collecteur Centreon avec\nl'API NSClient++"),(0,r.kt)("li",{parentName:"ul"},"Comme pour le protocole NRPE, les param\xe8tres ",(0,r.kt)("em",{parentName:"li"},"port")," et ",(0,r.kt)("em",{parentName:"li"},"allowed hosts")," de la section ",(0,r.kt)("inlineCode",{parentName:"li"},"/settings/WEB/server")," doivent \xeatre renseign\xe9s dans le fichier\n",(0,r.kt)("inlineCode",{parentName:"li"},"nsclient.ini")," (le num\xe9ro de port \xe0 utiliser est ici le 8443 ou tout autre port personnalis\xe9 >1024).\n")),(0,r.kt)("h4",{id:"configurer-lacc\xe8s-rest-https"},"Configurer l'acc\xe8s Rest HTTPS"),(0,r.kt)("p",null,"Pour utiliser l\u2019API Rest de NSClient++, vous devez tout d'abord activer le service web :"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"En tant qu'administrateur"),", depuis un shell sous le serveur Windows, ex\xe9cutez les commandes suivantes :")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"nscp web install\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Configurez un mot de passe afin de s\xe9curiser la communication.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"nscp web -- password --set new-password\nPassword updated successfully, please restart nsclient++ for changes to affect.\n")),(0,r.kt)("p",null,"Il est \xe9galement possible d'afficher le mot de passe pr\xe9c\xe9demment d\xe9fini :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"nscp web -- password --display\nCurrent password: centreon\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Enfin, red\xe9marrez l'agent NSCP")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"net stop nscp\nnet start nscp\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"En local sur le serveur Windows, v\xe9rifiez que le serveur Web est op\xe9rationnel \xe0 l'adresse\n",(0,r.kt)("inlineCode",{parentName:"li"},"https://127.0.0.1:8443/"))),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"image",src:n(5288).Z,width:"1510",height:"644"})),(0,r.kt)("h2",{id:"diagnostic-des-erreurs-communes"},"Diagnostic des erreurs communes"),(0,r.kt)("p",null,"En cas de soucis de configuration et/ou d'exploitation, r\xe9f\xe9rez-vous \xe0 la ",(0,r.kt)("a",{parentName:"p",href:"https://docs.nsclient.org/faq/"},"documentation officielle")," de NSClient++ qui\noffre les r\xe9solutions aux probl\xe8mes les plus courants."),(0,r.kt)("p",null,"Vous pouvez aussi nous rendre visite et ouvrir une ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/centreon/centreon-nsclient-build/issues"},"issue sur la page Github du projet"),"\n",(0,r.kt)("strong",{parentName:"p"},"centreon-nsclient")," pour toute probl\xe9matique li\xe9e aux Plugins Centreon."))}g.isMDXComponent=!0},51076:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/centreon-nsclient-tutorial-configuration-6b0d4a1a39eecadc4f483810efcb6121.png"},77788:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/centreon-nsclient-tutorial-update-255bf2c60f28d2823efe26f27b004635.png"},5288:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/centreon-nsclient-tutorial-webserver-471775677af57ed7a379366013c8f7a0.png"},32335:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/centreon-nsclient-tutorial-wizard1-a7ee22982b5bc03b00669b1beca3ddd3.png"},41418:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/centreon-nsclient-tutorial-wizard2-9b351b84d188e1e33632bbbee0b65bfb.png"},9922:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/centreon-nsclient-tutorial-wizard3-5ce2d295fe1494dc541c3127a3d7c415.png"},59288:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/centreon-nsclient-tutorial-wizard4-2430622a282a57e8126b9aab8cd6296e.png"},37406:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/centreon-nsclient-tutorial-wizard5-7706c9dab26185334881147970e5f03f.png"}}]);