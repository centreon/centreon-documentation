<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-pp docs-doc-id-integrations/plugin-packs/procedures/cloud-kubernetes-api" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Kubernetes API | Centreon Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.centreon.com/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-kubernetes-api/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-pp-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-pp-current"><meta data-rh="true" property="og:title" content="Kubernetes API | Centreon Documentation"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/centreon-documentation/pr-preview/staging/pr-2776/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.centreon.com/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-kubernetes-api/"><link data-rh="true" rel="alternate" href="https://docs.centreon.com/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-kubernetes-api/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.centreon.com/centreon-documentation/pr-preview/staging/pr-2776/fr/pp/integrations/plugin-packs/procedures/cloud-kubernetes-api/" hreflang="fr"><link data-rh="true" rel="alternate" href="https://docs.centreon.com/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-kubernetes-api/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://3WEC6XPLDB-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-8418698-13","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-BGL69N5GPJ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-BGL69N5GPJ",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Centreon Documentation" href="/centreon-documentation/pr-preview/staging/pr-2776/opensearch.xml"><link rel="stylesheet" href="/centreon-documentation/pr-preview/staging/pr-2776/assets/css/styles.f59eb0f0.css">
<link rel="preload" href="/centreon-documentation/pr-preview/staging/pr-2776/assets/js/runtime~main.19bee68d.js" as="script">
<link rel="preload" href="/centreon-documentation/pr-preview/staging/pr-2776/assets/js/main.0a7e4a90.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/centreon-documentation/pr-preview/staging/pr-2776/"><div class="navbar__logo"><img src="/centreon-documentation/pr-preview/staging/pr-2776/img/logo_centreon_dark.png" alt="Logo Centreon Docs" class="themedImage_ToTc themedImage--light_HNdA"><img src="/centreon-documentation/pr-preview/staging/pr-2776/img/logo_centreon.png" alt="Logo Centreon Docs" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/centreon-documentation/pr-preview/staging/pr-2776/docs/getting-started/welcome/">Centreon OnPrem</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/getting-started/introduction/">Monitoring Connectors</a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>ðŸ‡¬ðŸ‡§ English</a><ul class="dropdown__menu"><li><a href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-kubernetes-api/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">ðŸ‡¬ðŸ‡§ English</a></li><li><a href="/centreon-documentation/pr-preview/staging/pr-2776/fr/pp/integrations/plugin-packs/procedures/cloud-kubernetes-api/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="fr">ðŸ‡«ðŸ‡· FranÃ§ais</a></li></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/getting-started/introduction/">Getting started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/applications-voip-3cx-restapi/">Applications</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/blockchain-hyperledger-exporter/">Blockchain</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/applications-monitoring-centreon-central/">Centreon</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-apigateway/">Cloud</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-apigateway/">Amazon API Gateway</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-backup/">Amazon Backup Vault</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-cloudfront/">Amazon CloudFront</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-cloudwatch/">Amazon CloudWatch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-cloudwatchlogs/">Amazon CloudWatch Logs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-directconnect/">Amazon Direct Connect</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-ebs/">Amazon EBS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-ec2/">Amazon EC2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-efs/">Amazon EFS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-elasticache/">Amazon ElastiCache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-fsx/">Amazon FSx</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-kinesis/">Amazon Kinesis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-rds/">Amazon RDS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-s3/">Amazon S3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-ses/">Amazon SES</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-sns/">Amazon SNS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-sqs/">Amazon SQS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-billing/">AWS Billing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-cloudtrail/">AWS CloudTrail</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-cloudwatch-discover/">AWS Discover</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-elb/">AWS ELB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-health/">AWS Health</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-lambda/">AWS Lambda</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-transitgateway/">AWS Transit Gateway</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-aws-vpn/">AWS VPN</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-management-apimanagement/">Azure API Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-devtools-appconfiguration/">Azure App Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-web-appservice/">Azure App Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-web-appserviceplan/">Azure App Service Plan</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-network-appgateway/">Azure Application Gateway</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-management-applicationinsights/">Azure Application Insights</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-management-automation/">Azure Automation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-database-redis/">Azure Cache for Redis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-network-cdn/">Azure CDN</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-classicstorage-storageaccount/">Azure Classic Storage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-storage-acr/">Azure Container Registry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-database-cosmosdb/">Azure Cosmos DB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-datafactory-factories/">Azure Data Factory</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-database-mariadb/">Azure Database for MariaDB</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-database-mysql/">Azure Database for MySQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-management-discover/">Azure Discover</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-database-elasticpool/">Azure Elastic Pool</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-integration-eventgrid/">Azure Event Grid</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-analytics-eventhubs/">Azure Event Hubs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-network-expressroute/">Azure ExpressRoute</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-network-firewall/">Azure Firewall</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-network-frontdoor/">Azure Front Door</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-compute-functions/">Azure Functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-management-insightsmetrics/">Azure InsightsMetrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-security-keyvault/">Azure Key Vault</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-compute-aks/">Azure Kubernetes Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-network-loadbalancer/">Azure Load Balancer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-management-loganalytics/">Azure Log Analytics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-management-costs/">Azure Management Costs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-management-monitor/">Azure Monitor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-network-networkinterface/">Azure Network Interface</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-policyinsights-policystates/">Azure Policy States</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-network-publicip/">Azure Public IP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-management-recovery/">Azure Recovery</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-management-resource/">Azure Resource</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-integration-servicebus/">Azure ServiceBus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-web-signalr/">Azure SignalR</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-database-sqldatabase/">Azure SQL Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-database-sqlmanagedinstance/">Azure SQL Managed Instance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-database-sqlserver/">Azure SQL Server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-storage-storageaccount/">Azure Storage Account</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-storage-storagesync/">Azure Storage Sync</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-network-trafficmanager/">Azure Traffic Manager</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-compute-virtualmachine/">Azure Virtual Machine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-compute-vmscalesets/">Azure Virtual Machine Scale Sets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-network-virtualnetwork/">Azure Virtual Network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-azure-network-vpngateway/">Azure VPN Gateway</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-prometheus-cadvisor-api/">cAdvisor</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-cadvisor-api/">cAdvisor API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-cloudfoundry-api/">Cloud Foundry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/applications-docker-restapi/">Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-gcp-cloudsql-mysql/">Google CloudSQL MySQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-gcp-compute-computeengine/">Google Compute Engine</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-gcp-management-stackdriver/">Google Stackdriver</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-gcp-storage/">Google Storage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-ibm-softlayer-api/">IBM Softlayer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-iics-restapi/">IICS Rest API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-kubernetes-api/">Kubernetes API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-prometheus-kubernetes-api/">Kubernetes w/ Prometheus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-prometheus-node-exporter-api/">Node Exporter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-microsoft-office365-azuread/">Office 365 Azure AD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-microsoft-office365-management/">Office 365 Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-microsoft-office365-exchange/">Office365 Exchange</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-microsoft-office365-onedrive/">Office365 OneDrive</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-microsoft-office365-sharepoint/">Office365 SharePoint</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-microsoft-office365-skype/">Office365 Skype</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-microsoft-office365-teams/">Office365 Teams</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-outscale/">Outscale API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-ovh-restapi/">OVH</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-prometheus-api/">Prometheus Server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-talend-tmc-api/">Talend TMC API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-vmware-velocloud-restapi/">VMware VeloCloud</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/applications-databases-couchdb-restapi/">Database</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/hardware-kvm-adder-aim-snmp/">Hardware-server</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/network-3com-snmp/">Network</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/operatingsystems-aix-snmp/">Operating-system</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/hardware-printers-standard-rfc3805-snmp/">Printer</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/applications-protocol-bgp/">Protocol</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/hardware-devices-abb-cms700-snmp/">Sensor</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/hardware-storage-adic-tape-snmp/">Storage</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/hardware-telephony-alcatel-oxe-snmp/">Toip-voip</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/hardware-ups-alpha-snmp/">Ups-pdu</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/virtualization-hpe-simplivity-restapi/">Virtualization</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Kubernetes API</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>Kubernetes is an open-source container-orchestration system for automating
computer application deployment, scaling, and management.</p><p>This Pack aims to monitor both infrastructure layer (nodes) and cluster
services (deployments, daemonsets, etc).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pack-assets">Pack assets<a href="#pack-assets" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>The Kubernetes API Pack gives multiple choices regarding the way you can
arrange a cluster monitoring.</p><p>There is mainly three ways:</p><ul><li>Gather all metrics on only one Centreon host with a service per Kubernetes
unit (i.e. deployments, daemonsets, etc) - apply
<a href="#manual-creation">manual creation</a> procedure,</li><li>Gather all metrics on only one Centreon host with a service for each
instances of each Kubernetes units - apply <a href="#manual-creation">manual creation</a>
and <a href="#service-discovery">service discovery</a> procedures,</li><li>Collect infrastructural metrics (master and worker nodes) with a Centreon
host per Kubernetes node, and keep orchestration/application metrics
on a unique host (using one of the 2 previous scenarii) - apply
<a href="#host-discovery">host discovery</a> procedure.</li></ul><p>For all those scenarii, discovery and classic templating will be used.</p><p>You just need to choose which flavor you like the most: communicating with
the RestAPI exposed by the Kubernetes cluster, or using the CLI tool <code>kubectl</code>
to communicate with the cluster&#x27;s control plane.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="discovery">Discovery<a href="#discovery" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>The Kubernetes API Pack comes with several discovery providers and rules.</p><p>Here is the list of the Host Discovery providers:</p><table><thead><tr><th>Provider</th><th>Description</th></tr></thead><tbody><tr><td>Kubernetes Nodes (RestAPI)</td><td>Discover Kubernetes nodes by requesting Kubernetes RestAPI</td></tr><tr><td>Kubernetes Nodes (Kubectl)</td><td>Discover Kubernetes nodes by requesting Kubernetes cluster using kubectl</td></tr></tbody></table><p>Both providers will search for Kubernetes nodes, and link them to a minimal
host template to monitor the node usage in terms of pods allocation, cpu and
memory requests/limits.</p><p>In parallel to this discovery, unitary services can be created thanks to
the Service Discovery rules:</p><table><thead><tr><th>Rule</th><th>Description</th></tr></thead><tbody><tr><td>Cloud-Kubernetes-Api-CronJobs-Status</td><td>Discover Kubernetes CronJobs to monitor their status</td></tr><tr><td>Cloud-Kubernetes-Api-Daemonsets-Status</td><td>Discover Kubernetes DaemonSets to monitor their status</td></tr><tr><td>Cloud-Kubernetes-Api-Deployments-Status</td><td>Discover Kubernetes Deployments to monitor their status</td></tr><tr><td>Cloud-Kubernetes-Api-Nodes-Status</td><td>Discover Kubernetes Nodes to monitor their status</td></tr><tr><td>Cloud-Kubernetes-Api-Nodes-Usage</td><td>Discover Kubernetes Nodes to monitor their usage</td></tr><tr><td>Cloud-Kubernetes-Api-PersistentVolumes-Status</td><td>Discover Kubernetes PersistentVolumes to monitor their status</td></tr><tr><td>Cloud-Kubernetes-Api-Pods-Status</td><td>Discover Kubernetes Pods to monitor their status</td></tr><tr><td>Cloud-Kubernetes-Api-ReplicaSets-Status</td><td>Discover Kubernetes ReplicaSets to monitor their status</td></tr><tr><td>Cloud-Kubernetes-Api-ReplicationControllers-Status</td><td>Discover Kubernetes ReplicationControllers to monitor their status</td></tr><tr><td>Cloud-Kubernetes-Api-StatefulSets-Status</td><td>Discover Kubernetes StatefulSets to monitor their status</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="templates">Templates<a href="#templates" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>The Kubernetes API Pack brings 2 different host templates to be used depending
on the scenarii mentioned earlier:</p><ul><li><p>All in one host template that will gather checks and metrics with a
service per Kubernetes unit:</p><table><thead><tr><th>Cloud-Kubernetes-Api</th></tr></thead><tbody><tr><td>Cluster Events</td></tr><tr><td>CronJob Status</td></tr><tr><td>DaemonSet Status</td></tr><tr><td>Deployment Status</td></tr><tr><td>Node Status</td></tr><tr><td>Node Usage</td></tr><tr><td>PersistentVolume Status</td></tr><tr><td>Pod Status</td></tr><tr><td>ReplicatSet Status</td></tr><tr><td>ReplicationController Status</td></tr><tr><td>StatefulSet Status</td></tr></tbody></table></li><li><p>A minimal host template that will only collect metrics for the Kubernetes
nodes:</p><table><thead><tr><th>Cloud-Kubernetes-Node-Api</th></tr></thead><tbody><tr><td>Node Usage</td></tr><tr><td>Node Status</td></tr></tbody></table></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="monitored-metrics-and-indicators">Monitored metrics and indicators<a href="#monitored-metrics-and-indicators" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cluster-events">Cluster events<a href="#cluster-events" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>This indicator allows to watch the number of events occurring on the cluster,
like the <code>kubectl get events</code> can provide:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE   LAST SEEN   TYPE      REASON      OBJECT           MESSAGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">graphite    26m         Warning   Unhealthy   pod/graphite-0   Liveness probe failed: Get &quot;http://10.244.2.10:8080/&quot;: context deadline exceeded (Client.Timeout exceeded while awaiting headers)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The resulting output in Centreon could look like:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Event &#x27;Warning&#x27; for object &#x27;Pod/graphite-0&#x27; with message &#x27;Liveness probe failed: Get &quot;http://10.244.2.10:8080/&quot;: context deadline exceeded (Client.Timeout exceeded while awaiting headers)&#x27;, Count: 1, First seen: 26m 21s ago (2021-03-11T12:26:23Z), Last seen: 26m 21s ago (2021-03-11T12:26:23Z)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The collected metrics will be:</p><table><thead><tr><th>Metric</th></tr></thead><tbody><tr><td><code>events.type.warning.count</code></td></tr><tr><td><code>events.type.normal.count</code></td></tr></tbody></table><p>It is then possible to place thresholds using the following special variables:</p><ul><li><code>%{type}</code></li><li><code>%{object}</code></li><li><code>%{message}</code></li><li><code>%{count}</code></li><li><code>%{first_seen}</code></li><li><code>%{last_seen}</code></li><li><code>%{name}</code></li><li><code>%{namespace}</code></li></ul><p>The defaults values are the following:</p><table><thead><tr><th>Threshold</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>Warning</td><td><code>%{type} =~ /warning/i</code></td><td>Will raise a warning alert if there is <code>warning</code> events</td></tr><tr><td>Critical</td><td><code>%{type} =~ /error/i</code></td><td>Will raise a critical alert if there is <code>error</code> events</td></tr></tbody></table><p>Refer to the
<a href="https://kubernetes.io/docs/tasks/debug-application-cluster/debug-application-introspection/" target="_blank" rel="noopener noreferrer">official documentation</a>
for more information about collected metrics and how to fine tune your
thresholds.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cronjobs-status">CronJobs status<a href="#cronjobs-status" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>This indicator allows to check that CronJobs are executed as they should,
like the <code>kubectl get cronjobs</code> can provide:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAME    SCHEDULE      SUSPEND   ACTIVE   LAST SCHEDULE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello   */1 * * * *   False     1        6s              2d1h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The resulting output in Centreon could look like:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CronJob &#x27;hello&#x27; Jobs Active: 1, Last schedule time: 6s ago (2021-03-11T12:31:00Z)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The collected metric for each CronJobs will be:</p><table><thead><tr><th>Metric</th><th>Kubernetes metric</th></tr></thead><tbody><tr><td><code>cronjob.jobs.active.count</code></td><td><code>active</code></td></tr></tbody></table><p>If the service collects metrics of several CronJobs (depending on the
chosen scenario), CronJob&#x27;s name will be appended to the metric name:</p><table><thead><tr><th>Metric</th></tr></thead><tbody><tr><td><code>hello#cronjob.jobs.active.count</code></td></tr></tbody></table><p>It is then possible to place thresholds using the following special variables:</p><ul><li><code>%{active}</code></li><li><code>%{last_schedule}</code></li><li><code>%{name}</code></li><li><code>%{namespace}</code></li></ul><p>There is no default thresholds. An interesting one could be the following:
<code>%{last_schedule} &gt; x</code> where <code>x</code> in seconds is the duration beyond which
the CronJob is considered not running as scheduled.</p><p>Refer to the
<a href="https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/" target="_blank" rel="noopener noreferrer">official documentation</a>
for more information about collected metrics and how to fine tune your
thresholds.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="daemonsets-status">DaemonSets status<a href="#daemonsets-status" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>This indicator will ensure that DaemonSets are within defined bounds by
looking at the number of available and/or up-to-date pods compared to
the desired count, like the <code>kubectl get daemonsets</code> can provide:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE     NAME                    DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR                   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system   kube-flannel-ds-amd64   3         3         3       3            3           beta.kubernetes.io/arch=amd64   624d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system   kube-proxy              3         3         3       3            3           kubernetes.io/os=linux          624d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The resulting output in Centreon could look like:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Daemonset &#x27;kube-flannel-ds-amd64&#x27; Pods Desired: 3, Current: 3, Available: 3, Up-to-date: 3, Ready: 3, Misscheduled: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Daemonset &#x27;kube-proxy&#x27; Pods Desired: 3, Current: 3, Available: 3, Up-to-date: 3, Ready: 3, Misscheduled: 0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The collected metrics for each Daemonsets will be:</p><table><thead><tr><th>Metric</th><th>Kubernetes metric</th></tr></thead><tbody><tr><td><code>daemonset.pods.desired.count</code></td><td><code>desiredNumberScheduled</code></td></tr><tr><td><code>daemonset.pods.current.count</code></td><td><code>currentNumberScheduled</code></td></tr><tr><td><code>daemonset.pods.available.count</code></td><td><code>numberAvailable</code></td></tr><tr><td><code>daemonset.pods.uptodate.count</code></td><td><code>updatedNumberScheduled</code></td></tr><tr><td><code>daemonset.pods.ready.count</code></td><td><code>numberReady</code></td></tr><tr><td><code>daemonset.pods.misscheduled.count</code></td><td><code>numberMisscheduled</code></td></tr></tbody></table><p>If the service collects metrics of several DaemonSets (depending on the
chosen scenario), DaemonSet&#x27;s name will be appended to the metric name:</p><table><thead><tr><th>Metric</th></tr></thead><tbody><tr><td><code>kube-proxy#daemonset.pods.desired.count</code></td></tr></tbody></table><p>It is then possible to place thresholds using the following special variables:</p><ul><li><code>%{desired}</code></li><li><code>%{current}</code></li><li><code>%{available}</code></li><li><code>%{up_to_date}</code></li><li><code>%{ready}</code></li><li><code>%{misscheduled}</code></li><li><code>%{name}</code></li><li><code>%{namespace}</code></li></ul><p>The defaults values are the following:</p><table><thead><tr><th>Threshold</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>Warning</td><td><code>%{up_to_date} &lt; %{desired}</code></td><td>Will raise a warning alert if the number of up-to-date pods is lower than the desired number</td></tr><tr><td>Critical</td><td><code>%{available} &lt; %{desired}</code></td><td>Will raise a critical alert if the number of available pods is lower than the desired number</td></tr></tbody></table><p>Refer to the
<a href="https://kubernetes.io/docs/concepts/workloads/controllers/daemonset/" target="_blank" rel="noopener noreferrer">official documentation</a>
for more information about collected metrics and how to fine tune your
thresholds.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deployments-status">Deployments status<a href="#deployments-status" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>This indicator will ensure that Deployments are within defined bounds by
looking at the number of available and/or up-to-date replicas compared to
the desired count, like the <code>kubectl get deployments</code> can provide:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE              NAME                        READY   UP-TO-DATE   AVAILABLE   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system            coredns                     2/2     2            2           624d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system            tiller-deploy               1/1     1            1           624d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard   dashboard-metrics-scraper   1/1     1            1           37d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard   kubernetes-dashboard        1/1     1            1           37d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The resulting output in Centreon could look like:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Deployment &#x27;coredns&#x27; Replicas Desired: 2, Current: 2, Available: 2, Ready: 2, Up-to-date: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Deployment &#x27;tiller-deploy&#x27; Replicas Desired: 1, Current: 1, Available: 1, Ready: 1, Up-to-date: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Deployment &#x27;dashboard-metrics-scraper&#x27; Replicas Desired: 1, Current: 1, Available: 1, Ready: 1, Up-to-date: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Deployment &#x27;kubernetes-dashboard&#x27; Replicas Desired: 1, Current: 1, Available: 1, Ready: 1, Up-to-date: 1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The collected metrics for each Deployments will be:</p><table><thead><tr><th>Metric</th><th>Kubernetes metric</th></tr></thead><tbody><tr><td><code>deployment.replicas.desired.count</code></td><td><code>replicas</code> (in <code>spec</code> entry)</td></tr><tr><td><code>deployment.replicas.current.count</code></td><td><code>replicas</code> (in <code>status</code> entry)</td></tr><tr><td><code>deployment.replicas.available.count</code></td><td><code>availableReplicas</code></td></tr><tr><td><code>deployment.replicas.ready.count</code></td><td><code>readyReplicas</code></td></tr><tr><td><code>deployment.replicas.uptodate.count</code></td><td><code>updatedReplicas</code></td></tr></tbody></table><p>If the service collects metrics of several Deployments (depending on the
chosen scenario), Deployment&#x27;s name will be appended to the metric name:</p><table><thead><tr><th>Metric</th></tr></thead><tbody><tr><td><code>tiller-deploy#deployment.replicas.desired.count</code></td></tr></tbody></table><p>It is then possible to place thresholds using the following special variables:</p><ul><li><code>%{desired}</code></li><li><code>%{current}</code></li><li><code>%{available}</code></li><li><code>%{ready}</code></li><li><code>%{up_to_date}</code></li><li><code>%{name}</code></li><li><code>%{namespace}</code></li></ul><p>The defaults values are the following:</p><table><thead><tr><th>Threshold</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>Warning</td><td><code>%{up_to_date} &lt; %{desired}</code></td><td>Will raise a warning alert if the number of up-to-date replicas is lower than the desired number</td></tr><tr><td>Critical</td><td><code>%{available} &lt; %{desired}</code></td><td>Will raise a critical alert if the number of available replicas is lower than the desired number</td></tr></tbody></table><p>Refer to the
<a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/" target="_blank" rel="noopener noreferrer">official documentation</a>
for more information about collected metrics and how to fine tune your
thresholds.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nodes-status">Nodes status<a href="#nodes-status" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>This indicator will ensure that Nodes are running well by looking at the
conditions statuses, like the <code>kubectl describe nodes</code> can list:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Conditions:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type             Status  LastHeartbeatTime                 LastTransitionTime                Reason                       Message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ----             ------  -----------------                 ------------------                ------                       -------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  MemoryPressure   False   Thu, 11 Mar 2021 14:20:25 +0100   Tue, 26 Jan 2021 09:38:11 +0100   KubeletHasSufficientMemory   kubelet has sufficient memory available</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  DiskPressure     False   Thu, 11 Mar 2021 14:20:25 +0100   Wed, 17 Feb 2021 09:37:40 +0100   KubeletHasNoDiskPressure     kubelet has no disk pressure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  PIDPressure      False   Thu, 11 Mar 2021 14:20:25 +0100   Tue, 26 Jan 2021 09:38:11 +0100   KubeletHasSufficientPID      kubelet has sufficient PID available</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Ready            True    Thu, 11 Mar 2021 14:20:25 +0100   Tue, 26 Jan 2021 17:26:36 +0100   KubeletReady                 kubelet is posting ready status</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The resulting output in Centreon could look like:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Condition &#x27;DiskPressure&#x27; Status is &#x27;False&#x27;, Reason: &#x27;KubeletHasNoDiskPressure&#x27;, Message: &#x27;kubelet has no disk pressure&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Condition &#x27;MemoryPressure&#x27; Status is &#x27;False&#x27;, Reason: &#x27;KubeletHasSufficientMemory&#x27;, Message: &#x27;kubelet has sufficient memory available&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Condition &#x27;PIDPressure&#x27; Status is &#x27;False&#x27;, Reason: &#x27;KubeletHasSufficientPID&#x27;, Message: &#x27;kubelet has sufficient PID available&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Condition &#x27;Ready&#x27; Status is &#x27;True&#x27;, Reason: &#x27;KubeletReady&#x27;, Message: &#x27;kubelet is posting ready status&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>No metrics are collected.</p><p>It is possible to place thresholds using the following special variables:</p><ul><li><code>%{type}</code></li><li><code>%{status}</code></li><li><code>%{reason}</code></li><li><code>%{message}</code></li></ul><p>The defaults values are the following:</p><table><thead><tr><th>Threshold</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>Critical</td><td><code>(%{type} =~ /Ready/i &amp;&amp; %{status} !~ /True/i) <!-- -->|<!-- -->|<!-- --> (%{type} =~ /.*Pressure/i &amp;&amp; %{status} !~ /False/i)</code></td><td>Will raise a critical alert if the status of the <code>Ready</code> condition is not <code>True</code> or if the status of a <code>Pressure</code> condition is not <code>False</code></td></tr></tbody></table><p>Refer to the
<a href="https://kubernetes.io/docs/concepts/architecture/nodes/#condition" target="_blank" rel="noopener noreferrer">official documentation</a>
for more information about statuses and how to fine tune your thresholds.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="nodes-usage">Nodes usage<a href="#nodes-usage" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>This indicator will gather metrics about Nodes usage like pods allocation,
requests for CPU and memory made by those pods, and limits for CPU and
memory allowed to those same pods.</p><p>Using Kubernetes command line tool, it could look like the following:</p><ul><li><p>Nodes capacity:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get nodes </span><span class="token parameter variable" style="color:#36acaa">-o</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">custom-columns</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;NODE:.metadata.name,PODS ALLOCATABLE:.status.allocatable.pods,CPU ALLOCATABLE:.status.allocatable.cpu,MEMORY ALLOCATABLE:.status.allocatable.memory&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NODE          PODS ALLOCATABLE   CPU ALLOCATABLE   MEMORY ALLOCATABLE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">master-node   </span><span class="token number" style="color:#36acaa">110</span><span class="token plain">                </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">                 3778172Ki</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">worker-node   </span><span class="token number" style="color:#36acaa">110</span><span class="token plain">                </span><span class="token number" style="color:#36acaa">2</span><span class="token plain">                 3778184Ki</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Running pods:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get pods </span><span class="token parameter variable" style="color:#36acaa">-o</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">custom-columns</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;NODE:.spec.nodeName,POD:.metadata.name,CPU REQUESTS:.spec.containers[*].resources.requests.cpu,CPU LIMITS:.spec.containers[*].resources.limits.cpu,MEMORY REQUESTS:.spec.containers[*].resources.requests.memory,MEMORY LIMITS:.spec.containers[*].resources.limits.memory&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NODE          POD                                     CPU REQUESTS   CPU LIMITS   MEMORY REQUESTS   MEMORY LIMITS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">worker-node   coredns-74ff55c5b-g4hmt                 100m           </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">       70Mi              170Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">master-node   etcd-master-node                        100m           </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">       100Mi             </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">master-node   kube-apiserver-master-node              250m           </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">       </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">master-node   kube-controller-manager-master-node     200m           </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">       </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">master-node   kube-flannel-ds-amd64-fk59g             100m           100m         50Mi              50Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">worker-node   kube-flannel-ds-amd64-jwzms             100m           100m         50Mi              50Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">master-node   kube-proxy-kkwmb                        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">         </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">       </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">worker-node   kube-proxy-vprs8                        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">         </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">       </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">master-node   kube-scheduler-master-node              100m           </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">       </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">master-node   kubernetes-dashboard-7d75c474bb-7zc5j   </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">         </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">       </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">            </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">none</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><p>From the Kubernetes dashboard, the metrics can be found in the
<code>Cluser &gt; Nodes</code> menu:</p><ul><li><p>Listing from <code>Cluser &gt; Nodes</code>:</p><p>  <img loading="lazy" alt="Cluster nodes listing" src="/centreon-documentation/pr-preview/staging/pr-2776/assets/images/cloud-kubernetes-api-cluster-nodes-listing-4f09461457985762ae5f1fc9c4b17aa3.png" width="1920" height="489" class="img_ev3q"></p></li><li><p>Allocation detail for a node:</p><p>  <img loading="lazy" alt="Node allocation detail" src="/centreon-documentation/pr-preview/staging/pr-2776/assets/images/cloud-kubernetes-api-cluster-nodes-detail-ef0a545a1dfd9e156a5451f598548855.png" width="1920" height="504" class="img_ev3q"></p></li></ul><p>The resulting output in Centreon could look like:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Node &#x27;master-node&#x27; CPU requests: 37.50% (0.75/2), CPU limits: 5.00% (0.1/2), Memory requests: 3.96% (150.00MB/3.70GB), Memory limits: 1.32% (50.00MB/3.70GB), Pods allocation: 7.27% (8/110)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Node &#x27;worker-node&#x27; CPU requests: 35.00% (0.7/2), CPU limits: 115.00% (2.3/2), Memory requests: 31.51% (1.17GB/3.70GB), Memory limits: 115.21% (4.26GB/3.70GB), Pods allocation: 9.09% (10/110)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The collected metrics for each Nodes will be:</p><table><thead><tr><th>Metric</th></tr></thead><tbody><tr><td><code>cpu.requests.percentage</code></td></tr><tr><td><code>cpu.limits.percentage</code></td></tr><tr><td><code>memory.requests.percentage</code></td></tr><tr><td><code>memory.limits.percentage</code></td></tr><tr><td><code>pods.allocation.percentage</code></td></tr></tbody></table><p>If the service collects metrics of several Nodes (depending on the
chosen scenario), Node&#x27;s name will be appended to the metric name:</p><table><thead><tr><th>Metric</th></tr></thead><tbody><tr><td><code>worker-node#pods.allocation.percentage</code></td></tr></tbody></table><p>Thresholds expressed in percentage can be put for all metrics, for warning
and critical alerts.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="persistentvolumes-status">PersistentVolumes status<a href="#persistentvolumes-status" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>This indicator will ensure that PersistentVolumes are operating correctly by
looking at the phase they are in, like the <code>kubectl get pv</code> can provide:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAME                     CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS      CLAIM                   STORAGECLASS   REASON   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pv-nfs-kubestorage-001   5Gi        RWO            Retain           Available                                                   630d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pv-nfs-kubestorage-002   5Gi        RWO            Retain           Bound       tick/data-influxdb                              630d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pv-nfs-kubestorage-003   5Gi        RWO            Retain           Released    graphite/graphite-pvc                           630d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The resulting output in Centreon could look like:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Persistent Volume &#x27;pv-nfs-kubestorage-001&#x27; Phase is &#x27;Available&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Persistent Volume &#x27;pv-nfs-kubestorage-002&#x27; Phase is &#x27;Bound&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Persistent Volume &#x27;pv-nfs-kubestorage-003&#x27; Phase is &#x27;Released&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>No metrics are collected.</p><p>It is possible to place thresholds using the following special variables:</p><ul><li><code>%{phase}</code></li><li><code>%{name}</code></li></ul><p>The defaults values are the following:</p><table><thead><tr><th>Threshold</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>Critical</td><td>`%{phase} !~ /Bound</td><td>Available</td></tr></tbody></table><p>Refer to the
<a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/" target="_blank" rel="noopener noreferrer">official documentation</a>
for more information about statuses and how to fine tune your thresholds.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="pods-status">Pods status<a href="#pods-status" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>This indicator will ensure that Pods and their containers are within defined
bounds by looking at the number of ready containers compared to
the desired count, like the <code>kubectl get pods</code> can provide:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE              NAME                                                     READY   STATUS        RESTARTS   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system            kube-proxy-65zhn                                         1/1     Running       0          37d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system            kube-proxy-kkwmb                                         1/1     Running       0          37d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system            kube-proxy-vprs8                                         1/1     Running       0          37d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system            tiller-deploy-7bf78cdbf7-z5n24                           1/1     Running       5          550d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard   dashboard-metrics-scraper-79c5968bdc-vncxc               1/1     Running       0          37d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard   kubernetes-dashboard-7448ffc97b-42rps                    1/1     Running       0          37d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The resulting output in Centreon could look like:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Checking pod &#x27;kube-proxy-65zhn&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Containers Ready: 1/1 (100.00%), Status is &#x27;Running&#x27;, Restarts: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Container &#x27;kube-proxy&#x27; Status is &#x27;running&#x27;, State is &#x27;ready&#x27;, Restarts: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Checking pod &#x27;kube-proxy-kkwmb&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Containers Ready: 1/1 (100.00%), Status is &#x27;Running&#x27;, Restarts: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Container &#x27;kube-proxy&#x27; Status is &#x27;running&#x27;, State is &#x27;ready&#x27;, Restarts: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Checking pod &#x27;kube-proxy-vprs8&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Containers Ready: 1/1 (100.00%), Status is &#x27;Running&#x27;, Restarts: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Container &#x27;kube-proxy&#x27; Status is &#x27;running&#x27;, State is &#x27;ready&#x27;, Restarts: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Checking pod &#x27;tiller-deploy-7bf78cdbf7-z5n24&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Containers Ready: 1/1 (100.00%), Status is &#x27;Running&#x27;, Restarts: 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Container &#x27;tiller&#x27; Status is &#x27;running&#x27;, State is &#x27;ready&#x27;, Restarts: 5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Checking pod &#x27;dashboard-metrics-scraper-79c5968bdc-vncxc&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Containers Ready: 1/1 (100.00%), Status is &#x27;Running&#x27;, Restarts: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Container &#x27;dashboard-metrics-scraper&#x27; Status is &#x27;running&#x27;, State is &#x27;ready&#x27;, Restarts: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Checking pod &#x27;kubernetes-dashboard-7448ffc97b-42rps&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Containers Ready: 1/1 (100.00%), Status is &#x27;Running&#x27;, Restarts: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Container &#x27;kubernetes-dashboard&#x27; Status is &#x27;running&#x27;, State is &#x27;ready&#x27;, Restarts: 0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The collected metrics for each Pods will be:</p><table><thead><tr><th>Metric</th></tr></thead><tbody><tr><td><code>containers.ready.count</code></td></tr><tr><td><code>restarts.total.count</code></td></tr><tr><td><code>containers.restarts.count</code></td></tr></tbody></table><p>If the service collects metrics of several Pods (depending on the
chosen scenario), Pod&#x27;s name and container&#x27;s name will be appended to the
metric name:</p><table><thead><tr><th>Metric</th></tr></thead><tbody><tr><td><code>coredns-74ff55c5b-g4hmt#containers.ready.count</code></td></tr><tr><td><code>coredns-74ff55c5b-g4hmt#restarts.total.count</code></td></tr><tr><td><code>coredns-74ff55c5b-g4hmt_coredns#containers.restarts.count</code></td></tr></tbody></table><p>It is then possible to place thresholds using the following special variables:</p><ul><li><code>%{name}</code></li><li><code>%{status}</code></li><li><code>%{state}</code> (containers only)</li><li><code>%{name}</code></li><li><code>%{namespace}</code> (Pods only)</li></ul><p>The defaults values are the following:</p><table><thead><tr><th>Threshold</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>Critical (pod)</td><td><code>%{status} !~ /running/i</code></td><td>Will raise a critical alert if a pod is not in a <code>running</code> status</td></tr><tr><td>Critical (container)</td><td><code>%{status} !~ /running/i <!-- -->|<!-- -->|<!-- --> %{state} !~ /^ready$/</code></td><td>Will raise a critical alert if a container is not in a <code>running</code> status or not in a <code>ready</code> state</td></tr></tbody></table><p>Refer to the
<a href="https://kubernetes.io/docs/concepts/workloads/pods/" target="_blank" rel="noopener noreferrer">official documentation</a>
for more information about collected metrics and how to fine tune your
thresholds.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="replicasets-status">ReplicaSets status<a href="#replicasets-status" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>This indicator will ensure that ReplicaSets are within defined bounds by
looking at the number of ready replicas compared to the desired count,
like the <code>kubectl get replicasets</code> can provide:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE              NAME                                   DESIRED   CURRENT   READY   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system            coredns-74ff55c5b                      2         2         2       44d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kube-system            tiller-deploy-7bf78cdbf7               1         1         1       630d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard   dashboard-metrics-scraper-79c5968bdc   1         1         1       44d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubernetes-dashboard   kubernetes-dashboard-7448ffc97b        1         1         1       44d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The resulting output in Centreon could look like:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ReplicaSet &#x27;coredns-74ff55c5b&#x27; Replicas Desired: 2, Current: 2, Ready: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ReplicaSet &#x27;tiller-deploy-7bf78cdbf7&#x27; Replicas Desired: 1, Current: 1, Ready: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ReplicaSet &#x27;dashboard-metrics-scraper-79c5968bdc&#x27; Replicas Desired: 1, Current: 1, Ready: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ReplicaSet &#x27;kubernetes-dashboard-7448ffc97b&#x27; Replicas Desired: 1, Current: 1, Ready: 1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The collected metrics for each ReplicaSets will be:</p><table><thead><tr><th>Metric</th><th>Kubernetes metric</th></tr></thead><tbody><tr><td><code>replicaset.replicas.desired.count</code></td><td><code>replicas</code> (in <code>spec</code> entry)</td></tr><tr><td><code>replicaset.replicas.current.count</code></td><td><code>replicas</code> (in <code>status</code> entry)</td></tr><tr><td><code>replicaset.replicas.ready.count</code></td><td><code>readyReplicas</code></td></tr></tbody></table><p>If the service collects metrics of several ReplicaSets (depending on the
chosen scenario), ReplicaSet&#x27;s name will be appended to the metric name:</p><table><thead><tr><th>Metric</th></tr></thead><tbody><tr><td><code>tiller-deploy-7bf78cdbf7#replicaset.replicas.desired.count</code></td></tr></tbody></table><p>It is then possible to place thresholds using the following special variables:</p><ul><li><code>%{desired}</code></li><li><code>%{current}</code></li><li><code>%{ready}</code></li><li><code>%{name}</code></li><li><code>%{namespace}</code></li></ul><p>The defaults values are the following:</p><table><thead><tr><th>Threshold</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>Critical</td><td><code>%{ready} &lt; %{desired}</code></td><td>Will raise a critical alert if the number of ready replicas is lower than the desired number</td></tr></tbody></table><p>Refer to the
<a href="https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/" target="_blank" rel="noopener noreferrer">official documentation</a>
for more information about collected metrics and how to fine tune your
thresholds.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="replicationcontrollers-status">ReplicationControllers status<a href="#replicationcontrollers-status" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>This indicator will ensure that ReplicationControllers are within defined
bounds by looking at the number of ready replicas compared to the desired
count, like the <code>kubectl get rc</code> can provide:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE   NAME    DESIRED   CURRENT   READY   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">elk         nginx   3         3         3       2d19h</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The resulting output in Centreon could look like:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ReplicationController &#x27;nginx&#x27; Replicas Desired: 3, Current: 3, Ready: 3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The collected metrics for each ReplicaSets will be:</p><table><thead><tr><th>Metric</th><th>Kubernetes metric</th></tr></thead><tbody><tr><td><code>replicationcontroller.replicas.desired.count</code></td><td><code>replicas</code> (in <code>spec</code> entry)</td></tr><tr><td><code>replicationcontroller.replicas.current.count</code></td><td><code>replicas</code> (in <code>status</code> entry)</td></tr><tr><td><code>replicationcontroller.replicas.ready.count</code></td><td><code>readyReplicas</code></td></tr></tbody></table><p>If the service collects metrics of several ReplicationControllers (depending
on the chosen scenario), ReplicationController&#x27;s name will be appended to
the metric name:</p><table><thead><tr><th>Metric</th></tr></thead><tbody><tr><td><code>nginx#replicationcontroller.replicas.desired.count</code></td></tr></tbody></table><p>It is then possible to place thresholds using the following special variables:</p><ul><li><code>%{desired}</code></li><li><code>%{current}</code></li><li><code>%{ready}</code></li><li><code>%{name}</code></li><li><code>%{namespace}</code></li></ul><p>The defaults values are the following:</p><table><thead><tr><th>Threshold</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>Critical</td><td><code>%{ready} &lt; %{desired}</code></td><td>Will raise a critical alert if the number of ready replicas is lower than the desired number</td></tr></tbody></table><p>Refer to the
<a href="https://kubernetes.io/docs/concepts/workloads/controllers/replicationcontroller/" target="_blank" rel="noopener noreferrer">official documentation</a>
for more information about collected metrics and how to fine tune your
thresholds.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="statefulsets-status">StatefulSets status<a href="#statefulsets-status" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>This indicator will ensure that StatefulSets are within defined bounds by
looking at the number of ready/up-to-date replicas compared to the desired
count, like the <code>kubectl get statefulsets</code> can provide:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NAMESPACE    NAME                                        READY   AGE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">elk          elasticsearch-master                        2/2     44d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">graphite     graphite                                    1/1     3d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">prometheus   prometheus-prometheus-operator-prometheus   1/1     619d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The resulting output in Centreon could look like:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">StatefulSet &#x27;elasticsearch-master&#x27; Replicas Desired: 2, Current: 2, Up-to-date: 2, Ready: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StatefulSet &#x27;graphite&#x27; Replicas Desired: 1, Current: 1, Up-to-date: 1, Ready: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">StatefulSet &#x27;prometheus-prometheus-operator-prometheus&#x27; Replicas Desired: 1, Current: 1, Up-to-date: 1, Ready: 1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The collected metrics for each StatefulSets will be:</p><table><thead><tr><th>Metric</th><th>Kubernetes metric</th></tr></thead><tbody><tr><td><code>statefulset.replicas.desired.count</code></td><td><code>replicas</code> (in <code>spec</code> entry)</td></tr><tr><td><code>statefulset.replicas.current.count</code></td><td><code>currentReplicas</code></td></tr><tr><td><code>statefulset.replicas.ready.count</code></td><td><code>readyReplicas</code></td></tr><tr><td><code>statefulset.replicas.uptodate.count</code></td><td><code>updatedReplicas</code></td></tr></tbody></table><p>If the service collects metrics of several StatefulSets (depending on the
chosen scenario), StatefulSet&#x27;s name will be appended to the metric name:</p><table><thead><tr><th>Metric</th></tr></thead><tbody><tr><td><code>graphite#statefulset.replicas.desired.count</code></td></tr></tbody></table><p>It is then possible to place thresholds using the following special variables:</p><ul><li><code>%{desired}</code></li><li><code>%{current}</code></li><li><code>%{ready}</code></li><li><code>%{up_to_date}</code></li><li><code>%{name}</code></li><li><code>%{namespace}</code></li></ul><p>The defaults values are the following:</p><table><thead><tr><th>Threshold</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td>Warning</td><td><code>%{up_to_date} &lt; %{desired}</code></td><td>Will raise a warning alert if the number of up-to-date replicas is lower than the desired number</td></tr><tr><td>Critical</td><td><code>%{ready} &lt; %{desired}</code></td><td>Will raise a critical alert if the number of ready replicas is lower than the desired number</td></tr></tbody></table><p>Refer to the
<a href="https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/" target="_blank" rel="noopener noreferrer">official documentation</a>
for more information about collected metrics and how to fine tune your
thresholds.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="centreon-plugin">Centreon Plugin<a href="#centreon-plugin" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>Install this Plugin on each needed Poller:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">yum </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> centreon-plugin-Cloud-Kubernetes-Api</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes">Kubernetes<a href="#kubernetes" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>As mentioned in the introduction, two ways of communication are available:</p><ul><li>the RestAPI exposed by the Kubernetes cluster,</li><li>the CLI tool kubectl to communicate with the cluster&#x27;s control plane.</li></ul><p>For better performances, we recommend to use the RestAPI.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-service-account">Create a service account<a href="#create-a-service-account" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p>Both flavors can use a service account with sufficient rights to access
Kubernetes API.</p><p>Create a dedicated service account <code>centreon-service-account</code> in the
<code>kube-system</code> namespace to access the API:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl create serviceaccount centreon-service-account </span><span class="token parameter variable" style="color:#36acaa">--namespace</span><span class="token plain"> kube-system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Create a cluster role <code>api-access</code> with needed privileges for the Plugin,
and bind it to the newly created service account:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">|</span><span class="token string bash punctuation" style="color:#393A34"> kubectl create </span><span class="token string bash punctuation parameter variable" style="color:#36acaa">-f</span><span class="token string bash punctuation" style="color:#393A34"> -</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: ClusterRole</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: api-access</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">rules:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  - apiGroups:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - &quot;&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - apps</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - batch</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    resources:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - cronjobs</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - daemonsets</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - deployments</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - events</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - namespaces</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - nodes</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - persistentvolumes</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - pods</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - replicasets</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - replicationcontrollers</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - statefulsets</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    verbs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - get</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - list</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">---</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: rbac.authorization.k8s.io/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: ClusterRoleBinding</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: api-access</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">roleRef:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  apiGroup: rbac.authorization.k8s.io</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  kind: ClusterRole</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: api-access</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">subjects:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">- kind: ServiceAccount</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: centreon-service-account</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  namespace: kube-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Refer to the official documentation for
<a href="https://kubernetes.io/docs/reference/access-authn-authz/authentication/#service-account-tokens" target="_blank" rel="noopener noreferrer">service account creation</a>
or information about
<a href="https://kubernetes.io/docs/concepts/configuration/secret/" target="_blank" rel="noopener noreferrer">secret concept</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-restapi">Using RestAPI<a href="#using-restapi" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p>If you chose to communicate with your Kubernetes platform&#x27;s RestAPI, the
following prerequisites need to be matched:</p><ul><li>Expose the API with TLS,</li><li>Retrieve token from service account.</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="expose-the-api">Expose the API<a href="#expose-the-api" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h5><p>As the API is using HTTPS, you will need a certificate.</p><p>You can make an auto-signed key/certificate couple with the following
command:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl req </span><span class="token parameter variable" style="color:#36acaa">-x509</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-nodes</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-days</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">365</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-newkey</span><span class="token plain"> rsa:2048 </span><span class="token parameter variable" style="color:#36acaa">-keyout</span><span class="token plain"> /etc/ssl/private/kubernetesapi.key </span><span class="token parameter variable" style="color:#36acaa">-out</span><span class="token plain"> /etc/ssl/certs/kubernetesapi.crt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then load it as <code>api-certificate</code> into the cluster, from the master node:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl create secret tls api-certificate </span><span class="token parameter variable" style="color:#36acaa">--key</span><span class="token plain"> /etc/ssl/private/kubernetesapi.key </span><span class="token parameter variable" style="color:#36acaa">--cert</span><span class="token plain"> /etc/ssl/certs/kubernetesapi.crt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The ingress can now be created:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">|</span><span class="token string bash punctuation" style="color:#393A34"> kubectl create </span><span class="token string bash punctuation parameter variable" style="color:#36acaa">-f</span><span class="token string bash punctuation" style="color:#393A34"> -</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: extensions/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: Ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  name: kubernetesapi-ingress</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  annotations:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    kubernetes.io/ingress.class: &quot;nginx&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    nginx.ingress.kubernetes.io/backend-protocol: HTTPS</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">spec:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  tls:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    - hosts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - kubernetesapi.local.domain</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      secretName: api-certificate</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  rules:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  - host: kubernetesapi.local.domain</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    http:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      paths:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">      - backend:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          serviceName: kubernetes</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">          servicePort: 443</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">        path: /</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Adapt the host entry to your needs.</p><p>Refer to the official documentation for
<a href="https://kubernetes.io/docs/concepts/services-networking/ingress/" target="_blank" rel="noopener noreferrer">ingresses management</a>.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="retrieve-token-from-service-account">Retrieve token from service account<a href="#retrieve-token-from-service-account" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h5><p>Retrieve the secret name from the previously created service account:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get serviceaccount centreon-service-account </span><span class="token parameter variable" style="color:#36acaa">--namespace</span><span class="token plain"> kube-system </span><span class="token parameter variable" style="color:#36acaa">--output</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">jsonpath</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;{.secrets[].name}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then retrieve the token from the service account secret:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl get secrets centreon-service-account-token-xqw7m </span><span class="token parameter variable" style="color:#36acaa">--namespace</span><span class="token plain"> kube-system </span><span class="token parameter variable" style="color:#36acaa">--output</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">jsonpath</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;{.data.token}&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> base64 </span><span class="token parameter variable" style="color:#36acaa">--decode</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This token will be used later for Centreon host configuration.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-kubectl">Using kubectl<a href="#using-kubectl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p>If you chose to communicate with the cluster&#x27;s control plane with kubectl, the
following prerequisites need to be matched:</p><ul><li>Install the kubectl tool,</li><li>Create a kubectl configuration.</li></ul><p>Those actions are needed on all Pollers that will do Kubernetes monitoring.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="install-kubectl">Install kubectl<a href="#install-kubectl" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h5><p>Download the latest release with the following command:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-LO</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://dl.k8s.io/release/</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable function" style="color:#d73a49">curl</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable parameter variable" style="color:#36acaa">-L</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable parameter variable" style="color:#36acaa">-s</span><span class="token string variable" style="color:#36acaa"> https://dl.k8s.io/release/stable.txt</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">/bin/linux/amd64/kubectl&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Be sure to download a version within one minor version difference of
your cluster. To download a specific version, change the embedded curl by
the version like <code>v1.20.0</code>.</p></blockquote><p>Install the tool in the binaries directory:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-o</span><span class="token plain"> root </span><span class="token parameter variable" style="color:#36acaa">-g</span><span class="token plain"> root </span><span class="token parameter variable" style="color:#36acaa">-m</span><span class="token plain"> 0755 kubectl /usr/local/bin/kubectl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Refer to the
<a href="https://kubernetes.io/docs/tasks/tools/install-kubectl-linux/" target="_blank" rel="noopener noreferrer">official documentation</a>
for more details.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-kubectl-configuration">Create a kubectl configuration<a href="#create-a-kubectl-configuration" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h5><p>To access the cluster, kubectl needs a configuration file with all needed
information.</p><p>Here is an example of a configuration file creation based on a service
account (created in <a href="#create-a-service-account">previous chapter</a>).</p><p>You will need to fill the following information and execute the commands
on the master node:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">ip</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">master </span><span class="token function" style="color:#d73a49">node</span><span class="token plain"> ip</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">port</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">api port</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">account</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">centreon-service-account</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">namespace</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">kube-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">clustername</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">my-kube-cluster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">context</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">my-kube-cluster</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">secret</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">kubectl get serviceaccount $account </span><span class="token variable parameter variable" style="color:#36acaa">--namespace</span><span class="token variable" style="color:#36acaa"> $namespace </span><span class="token variable parameter variable" style="color:#36acaa">--output</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable assign-left variable" style="color:#36acaa">jsonpath</span><span class="token variable operator" style="color:#393A34">=</span><span class="token variable string" style="color:#e3116c">&#x27;{.secrets[].name}&#x27;</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">ca</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">kubectl get secret $secret </span><span class="token variable parameter variable" style="color:#36acaa">--namespace</span><span class="token variable" style="color:#36acaa"> $namespace </span><span class="token variable parameter variable" style="color:#36acaa">--output</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable assign-left variable" style="color:#36acaa">jsonpath</span><span class="token variable operator" style="color:#393A34">=</span><span class="token variable string" style="color:#e3116c">&#x27;{.data.ca\.crt}&#x27;</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">token</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">kubectl get secret $secret </span><span class="token variable parameter variable" style="color:#36acaa">--namespace</span><span class="token variable" style="color:#36acaa"> $namespace </span><span class="token variable parameter variable" style="color:#36acaa">--output</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable assign-left variable" style="color:#36acaa">jsonpath</span><span class="token variable operator" style="color:#393A34">=</span><span class="token variable string" style="color:#e3116c">&#x27;{.data.token}&#x27;</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"> base64 </span><span class="token variable parameter variable" style="color:#36acaa">--decode</span><span class="token variable" style="color:#36acaa">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>The account name and namespace must match with the account created earlier.
All others need to be adapted.</p></blockquote><p>Then execute this command to generate the config file :</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token string" style="color:#e3116c">EOF</span><span class="token string bash punctuation" style="color:#393A34"> </span><span class="token string bash punctuation operator" style="color:#393A34">&gt;&gt;</span><span class="token string bash punctuation" style="color:#393A34"> config</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">kind: Config</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">clusters:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">- name: </span><span class="token string variable" style="color:#36acaa">${clustername}</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  cluster:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    certificate-authority-data: </span><span class="token string variable" style="color:#36acaa">${ca}</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    server: https://</span><span class="token string variable" style="color:#36acaa">${ip}</span><span class="token string" style="color:#e3116c">:</span><span class="token string variable" style="color:#36acaa">${port}</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">contexts:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">- name: </span><span class="token string variable" style="color:#36acaa">${context}</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  context:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    cluster: </span><span class="token string variable" style="color:#36acaa">${clustername}</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    namespace: </span><span class="token string variable" style="color:#36acaa">${namespace}</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    user: </span><span class="token string variable" style="color:#36acaa">${account}</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">current-context: </span><span class="token string variable" style="color:#36acaa">${context}</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">users:</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">- name: </span><span class="token string variable" style="color:#36acaa">${account}</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">  user: </span><span class="token string variable" style="color:#36acaa">${token}</span><span class="token string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This will create a <code>config</code> file. This file must be copied to the Pollers
Engine user&#x27;s home, usually in a <code>.kube</code> directory (i.e.
<code>/var/lib/centreon-engine/.kube/config</code>).</p><p>This path will be used later in Centreon host configuration.</p><blockquote><p>You may also want to copy the configuration to Gorgone user&#x27;s home
if using Host Discovery.</p></blockquote><p>Refer to the
<a href="https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/" target="_blank" rel="noopener noreferrer">official documentation</a>
for more details.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring-configuration">Monitoring configuration<a href="#monitoring-configuration" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="manual-creation">Manual creation<a href="#manual-creation" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><p>Add a host from <code>Configuration &gt; Hosts</code> menu and choose a template
between <code>Cloud-Kubernetes-Api</code> (global monitoring, scenarii 1 and 2) and
<code>Cloud-Kubernetes-Node-Api</code> (unitary monitoring, scenario 3) from the list.</p><p>In both cases, fill the following fields:</p><table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody><tr><td>Host name</td><td>Name of the host</td></tr><tr><td>Alias</td><td>Host description</td></tr><tr><td>IP</td><td>Host IP Address</td></tr><tr><td>Monitored from</td><td>Monitoring Poller to use</td></tr></tbody></table><blockquote><p>IP address can either be the Kubernetes IP (node master) or the IP of each
nodes if choosing <code>Cloud-Kubernetes-Node-Api</code> template.</p></blockquote><p>Then set the values for each needed macros:</p><ul><li><p>If using RestAPI:</p><table><thead><tr><th>Macro</th><th>Description</th><th>Example value</th></tr></thead><tbody><tr><td><code>KUBERNETESAPICUSTOMMODE</code></td><td>Plugin custom mode</td><td><code>api</code></td></tr><tr><td><code>KUBERNETESAPIHOSTNAME</code></td><td>Hostname or address of the Kubernetes API service</td><td><code>kubenetesapi.local.domain</code></td></tr><tr><td><code>KUBERNETESAPIPORT</code></td><td>Port of the API</td><td><code>443</code></td></tr><tr><td><code>KUBERNETESAPIPROTO</code></td><td>Protocol used by API</td><td><code>https</code></td></tr><tr><td><code>KUBERNETESAPITOKEN</code></td><td>Token retrieved from service account</td><td><code>eyJhbG...KEw</code></td></tr></tbody></table></li><li><p>If using kubectl:</p><table><thead><tr><th>Macro</th><th>Description</th><th>Example value</th></tr></thead><tbody><tr><td><code>KUBERNETESAPICUSTOMMODE</code></td><td>Plugin custom mode</td><td><code>kubectl</code></td></tr><tr><td><code>KUBECTLCONFIGFILE</code></td><td>Path to the configuration file</td><td><code>~/.kube/config</code></td></tr></tbody></table></li></ul><p>Optional macros values can be set:</p><table><thead><tr><th>Macro</th><th>Description</th><th>Default value</th></tr></thead><tbody><tr><td><code>PROXYURL</code></td><td>URL of the proxy (if needed)</td><td>none</td></tr><tr><td><code>TIMEOUT</code></td><td>Time in seconds before the query timed out</td><td><code>10</code></td></tr><tr><td><code>EXTRAOPTIONS</code></td><td>Extra options (if needed)</td><td>none</td></tr><tr><td><code>KUBERNETESAPINAMESPACE</code></td><td>Namespace filter</td><td>none</td></tr></tbody></table><p>If choosing <code>Cloud-Kubernetes-Api</code>, host will be added with all services to
check each Kubernetes unit (scenario 1).</p><p>If choosing <code>Cloud-Kubernetes-Node-Api</code>, host will be added with only one
service to check node usage (scenario 3).</p><p>Click on the <strong>Save</strong> button and you&#x27;re good to push the configuration to
the Engines.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="automatic-discovery">Automatic discovery<a href="#automatic-discovery" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="host-discovery">Host discovery<a href="#host-discovery" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p>Add a job from <code>Configuration &gt; Discovery</code> menu and choose a provider
between <code>Kubernetes Nodes (RestAPI)</code> and <code>Kubernetes Nodes (Kubectl)</code>
from the list.</p><p>Set credentials to access the Kubernetes API depending on the chosen flavor:</p><ul><li>If using RestAPI: set the token
<a href="#retrieve-token-from-service-account">retrieved ealier</a> from the service
account,</li><li>If using kubectl: set the path to the
<a href="#create-a-kubectl-configuration">created configuration file</a> (prefer using
relative path to make it work for both discovery and monitoring,
i.e. <code>~/.kube/config</code>).</li></ul><p>For RestAPI: hostname/address, port and protocol are needed to access
the Kubernetes API.</p><p>By default, discovery will add hosts with a minimal host template that will
only collect metrics for the Kubernetes nodes usage. It will then add a
special <code>KUBERNETESNODENAME</code> macro with node name as value (scenario 3).</p><p>If scheduled, job will add new nodes added to the cluster automatically.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="service-discovery">Service discovery<a href="#service-discovery" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h4><p>In addition to <a href="#manual-creation">manual creation</a>, it is possible to add a
service for each instances of each Kubernetes units (scenario 2). It is then
recommended to disable the previously created services when adding host.</p><p>Launch a scan on the added host from <code>Configuration &gt; Service &gt; Scan</code> menu,
and add all wanted services.</p><p>If enabled, service discovery rule will add new instances created in the
cluster automatically.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to heading" title="Direct link to heading">â€‹</a></h2><p>Here are some common errors and their description. You will often want to use
the <code>--debug</code> option to get the root error.</p><table><thead><tr><th>Error</th><th>Description</th></tr></thead><tbody><tr><td><code>UNKNOWN: Cannot decode json response: Can&#x27;t connect to &lt;hostname&gt;:&lt;port&gt; (certificate verify failed)</code></td><td>This error may appear if the TLS cetificate in self-signed. Use the option <code>--ssl-opt=&quot;SSL_verify_mode =&gt; SSL_VERIFY_NONE&quot;</code> to omit the certificate validity.</td></tr><tr><td><code>UNKNOWN: API return error code &#x27;401&#x27; (add --debug option for detailed message)</code></td><td>If adding <code>--debug</code> option, API response message says <code>Unauthorized</code>. It generally means that the provided token is not valid.</td></tr><tr><td><code>UNKNOWN: API return error code &#x27;403&#x27; (add --debug option for detailed message)</code></td><td>If adding <code>--debug</code> option, API response message says <code>nodes is forbidden: User &quot;system:serviceaccount:&lt;namespace&gt;:&lt;account&gt;&quot; cannot list resource &quot;nodes&quot; in API group &quot;&quot; at the cluster scope</code>. It means that the cluster role RBAC bound to the service account does not have the necessary privileges</td></tr><tr><td><code>UNKNOWN: CLI return error code &#x27;1&#x27; (add --debug option for detailed message)</code></td><td>If adding <code>--debug</code> option, CLI response message says <code>error: stat ~/.kube/config:: no such file or directory</code>. The provided configuration file cannot be found.</td></tr><tr><td><code>UNKNOWN: CLI return error code &#x27;1&#x27; (add --debug option for detailed message)</code></td><td>If adding <code>--debug</code> option, CLI response message says <code>error: error loading config file &quot;/root/.kube/config&quot;: open /root/.kube/config: permission denied</code>. The provided configuration file cannot be read by current user.</td></tr><tr><td><code>UNKNOWN: CLI return error code &#x27;1&#x27; (add --debug option for detailed message)</code></td><td>If adding <code>--debug</code> option, CLI response message says <code>error: error loading config file &quot;/root/.kube/config&quot;: v1.Config.AuthInfos: []v1.NamedAuthInfo: v1.NamedAuthInfo.AuthInfo: v1.AuthInfo.ClientKeyData: decode base64: illegal base64...</code>. The provided configuration file is not valid.</td></tr><tr><td><code>UNKNOWN: CLI return error code &#x27;1&#x27; (add --debug option for detailed message)</code></td><td>If adding <code>--debug</code> option, CLI response message says <code>The connection to the server &lt;hostname&gt;:&lt;port&gt; was refused - did you specify the right host or port?</code>. The provided configuration file is not valid.</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/centreon/centreon-documentation/edit/staging/pp/integrations/plugin-packs/procedures/cloud-kubernetes-api.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col"><svg id="feedback" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" xml:space="preserve" fill="none" style="height:24px;width:24px;vertical-align:text-top;margin-right:4px"><rect y="0" class="st0" width="24" height="24"></rect><rect x="2" y="2" class="st0" width="20" height="20"></rect><path fill="none" stroke="currentColor" stroke-miterlimit="10" d="M16.14,9.08c0,3.09-2.76,5.6-6.16,5.6c-1.11,0-5.45,0-5.45,0s1.36-1.38,0.93-1.79c-1.02-1-1.64-2.34-1.64-3.81 c0-3.09,2.76-5.6,6.16-5.6S16.14,5.99,16.14,9.08z"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" d="M8.61,16.28c0.76,2.31,3.12,4,5.91,4c1.11,0,5.45,0,5.45,0s-1.36-1.38-0.93-1.79c1.02-1,1.64-2.34,1.64-3.81 c0-2-1.15-3.75-2.88-4.74"></path><line fill="none" stroke="currentColor" stroke-linecap="round" x1="6.78" y1="6.86" x2="13.55" y2="6.86"></line><line fill="none" stroke="currentColor" stroke-linecap="round" x1="6.78" y1="8.74" x2="13.55" y2="8.74"></line><line fill="none" stroke="currentColor" stroke-linecap="round" x1="6.78" y1="10.62" x2="13.55" y2="10.62"></line></svg><a rel="noreferrer noopener" href="https://docs.google.com/forms/d/e/1FAIpQLSdeKkEHWbxn4ZweR1M4OEMzP_QoqKmjl6t4iC_yKeX2CFjzAw/viewform?usp=pp_url&amp;entry.371845164=docs.centreon.com/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-kubernetes-api/" target="_blank">Give feedback on this page</a></div><div class="col lastUpdated_VsjB"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-iics-restapi/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">IICS Rest API</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/centreon-documentation/pr-preview/staging/pr-2776/pp/integrations/plugin-packs/procedures/cloud-prometheus-kubernetes-api/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Kubernetes w/ Prometheus</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#pack-assets" class="table-of-contents__link toc-highlight">Pack assets</a><ul><li><a href="#discovery" class="table-of-contents__link toc-highlight">Discovery</a></li><li><a href="#templates" class="table-of-contents__link toc-highlight">Templates</a></li></ul></li><li><a href="#monitored-metrics-and-indicators" class="table-of-contents__link toc-highlight">Monitored metrics and indicators</a><ul><li><a href="#cluster-events" class="table-of-contents__link toc-highlight">Cluster events</a></li><li><a href="#cronjobs-status" class="table-of-contents__link toc-highlight">CronJobs status</a></li><li><a href="#daemonsets-status" class="table-of-contents__link toc-highlight">DaemonSets status</a></li><li><a href="#deployments-status" class="table-of-contents__link toc-highlight">Deployments status</a></li><li><a href="#nodes-status" class="table-of-contents__link toc-highlight">Nodes status</a></li><li><a href="#nodes-usage" class="table-of-contents__link toc-highlight">Nodes usage</a></li><li><a href="#persistentvolumes-status" class="table-of-contents__link toc-highlight">PersistentVolumes status</a></li><li><a href="#pods-status" class="table-of-contents__link toc-highlight">Pods status</a></li><li><a href="#replicasets-status" class="table-of-contents__link toc-highlight">ReplicaSets status</a></li><li><a href="#replicationcontrollers-status" class="table-of-contents__link toc-highlight">ReplicationControllers status</a></li><li><a href="#statefulsets-status" class="table-of-contents__link toc-highlight">StatefulSets status</a></li></ul></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a><ul><li><a href="#centreon-plugin" class="table-of-contents__link toc-highlight">Centreon Plugin</a></li><li><a href="#kubernetes" class="table-of-contents__link toc-highlight">Kubernetes</a></li></ul></li><li><a href="#monitoring-configuration" class="table-of-contents__link toc-highlight">Monitoring configuration</a><ul><li><a href="#manual-creation" class="table-of-contents__link toc-highlight">Manual creation</a></li><li><a href="#automatic-discovery" class="table-of-contents__link toc-highlight">Automatic discovery</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.centreon.com/en/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Corporate Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.centreon.com/en/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://download.centreon.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Download<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/centreon-documentation/pr-preview/staging/pr-2776/img/logo_centreon.png" alt="Centreon Open Source Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/centreon-documentation/pr-preview/staging/pr-2776/img/logo_centreon.png" alt="Centreon Open Source Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></div><div class="footer__copyright">Copyright Â© 2005 - 2023 Centreon</div></div></div></footer></div>
<script src="/centreon-documentation/pr-preview/staging/pr-2776/assets/js/runtime~main.19bee68d.js"></script>
<script src="/centreon-documentation/pr-preview/staging/pr-2776/assets/js/main.0a7e4a90.js"></script>
</body>
</html>