"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[33504],{69109:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>u,contentTitle:()=>m,default:()=>g,frontMatter:()=>p,metadata:()=>d,toc:()=>c});n(67294);var a=n(3905),r=n(51715),o=n(7626);function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}function s(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}const p={id:"virtualization-vmware2-esx",title:"VMware ESX"},m=void 0,d={unversionedId:"integrations/plugin-packs/procedures/virtualization-vmware2-esx",id:"integrations/plugin-packs/procedures/virtualization-vmware2-esx",title:"VMware ESX",description:"Overview",source:"@site/pp/integrations/plugin-packs/procedures/virtualization-vmware2-esx.md",sourceDirName:"integrations/plugin-packs/procedures",slug:"/integrations/plugin-packs/procedures/virtualization-vmware2-esx",permalink:"/centreon-documentation/pr-preview/staging/pr-2551/pp/integrations/plugin-packs/procedures/virtualization-vmware2-esx",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/pp/integrations/plugin-packs/procedures/virtualization-vmware2-esx.md",tags:[],version:"current",frontMatter:{id:"virtualization-vmware2-esx",title:"VMware ESX"},sidebar:"pp",previous:{title:"Proxmox VE Rest API",permalink:"/centreon-documentation/pr-preview/staging/pr-2551/pp/integrations/plugin-packs/procedures/virtualization-proxmox-ve-restapi"},next:{title:"VMware ESX WS-MAN",permalink:"/centreon-documentation/pr-preview/staging/pr-2551/pp/integrations/plugin-packs/procedures/virtualization-vmware2-esx-wsman"}},u={},c=[{value:"Overview",id:"overview",level:2},{value:"Monitoring Connector Assets",id:"monitoring-connector-assets",level:2},{value:"Monitored Objects",id:"monitored-objects",level:3},{value:"Discovery rules",id:"discovery-rules",level:3},{value:"Monitored Metrics",id:"monitored-metrics",level:3},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Centreon VMWare Connector",id:"centreon-vmware-connector",level:3},{value:"Tags and Custom Attributes",id:"tags-and-custom-attributes",level:3},{value:"Network flows",id:"network-flows",level:3},{value:"Installation",id:"installation",level:2},{value:"Configuration",id:"configuration",level:2},{value:"FAQ",id:"faq",level:2},{value:"How do I run my plugin through the CLI and what do the main parameters stand for ?",id:"how-do-i-run-my-plugin-through-the-cli-and-what-do-the-main-parameters-stand-for-",level:3},{value:"Why do I get the following error:",id:"why-do-i-get-the-following-error",level:3},{value:"UNKNOWN: Unknown container name &#39;default&#39; |",id:"unknown-unknown-container-name-default-",level:4},{value:"UNKNOWN: Container connection problem |",id:"unknown-container-connection-problem-",level:4},{value:"UNKNOWN: Cannot get value for counters (Maybe, object(s) cannot be reached: disconnected, not running, time not synced (see time-host mode),...) |",id:"unknown-cannot-get-value-for-counters-maybe-objects-cannot-be-reached-disconnected-not-running-time-not-synced-see-time-host-mode-",level:4},{value:"UNKNOWN: Cannot get counter &#39;net.received.average&#39; for the sampling period &#39;300&#39; (counter level: 2, sampling level: 1)",id:"unknown-cannot-get-counter-netreceivedaverage-for-the-sampling-period-300-counter-level-2-sampling-level-1",level:4}],k={toc:c},N="wrapper";function g(t){var{components:e}=t,n=s(t,["components"]);return(0,a.kt)(N,i(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),a.forEach((function(e){l(t,e,n[e])}))}return t}({},k,n),{components:e,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"overview"},"Overview"),(0,a.kt)("p",null,"VMWare is a software company based in the USA. VMWare provides cloud computing and virtualization software and services."),(0,a.kt)("p",null,"The Centreon Plugins and Monitoring Connectors rely on the Centreon VMWare Connector to request the vCenter API."),(0,a.kt)("h2",{id:"monitoring-connector-assets"},"Monitoring Connector Assets"),(0,a.kt)("h3",{id:"monitored-objects"},"Monitored Objects"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"ESX or ESXi")),(0,a.kt)("h3",{id:"discovery-rules"},"Discovery rules"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(o.Z,{value:"Host",label:"Host",mdxType:"TabItem"},(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Rule name"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"Virt-VMWare2-Esx-HostDiscovery"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Discover VMWare ESX linked to a vcenter or ESXi"))))),(0,a.kt)(o.Z,{value:"Services",label:"Services",mdxType:"TabItem"},(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Rule name"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"Virt-VMWare2-Esx-Datastores-Latency-Name"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Discover the Datastores and monitor latency")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"Virt-VMWare2-Esx-Nics-Traffic-Name"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Discover the traffic NIC and monitor")))))),(0,a.kt)("h3",{id:"monitored-metrics"},"Monitored Metrics"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(o.Z,{value:"Esx-Cpu",label:"Esx-Cpu",mdxType:"TabItem"},(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Metric name"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Unit"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"host.cpu.utilization.percentage"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Total CPU usage in percentage"),(0,a.kt)("td",{parentName:"tr",align:"left"},"%")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"host.cpu.utilization.mhz"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Total CPU usage in MHz"),(0,a.kt)("td",{parentName:"tr",align:"left"},"MHz")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"core#host.core.cpu.utilization.percentage"),(0,a.kt)("td",{parentName:"tr",align:"left"},"CPU usage per core in percentage"),(0,a.kt)("td",{parentName:"tr",align:"left"},"%"))))),(0,a.kt)(o.Z,{value:"Esx-Health",label:"Esx-Health",mdxType:"TabItem"},(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Metric name"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Unit"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"host.health.problems.current.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Total number of problem on the ESXs"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Count")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"host.health.problems.current.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of health checks in green"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Count")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"host.health.yellow.current.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of health checks in yellow"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Count")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"host.health.red.current.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of health checks in red"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Count"))))),(0,a.kt)(o.Z,{value:"Esx-Memory",label:"Esx-Memory",mdxType:"TabItem"},(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Metric name"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Unit"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"host.memory.usage.bytes"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Memory used"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Bytes")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"host.memory.overhead.bytes"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Memory overhead needed by the VMs on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Bytes")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"host.memory.state.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Memory state"),(0,a.kt)("td",{parentName:"tr",align:"left"}))))),(0,a.kt)(o.Z,{value:"Esx-Status",label:"Esx-Status",mdxType:"TabItem"},(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Metric name"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Unit"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"Status"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Overall status on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"}))))),(0,a.kt)(o.Z,{value:"Esx-Storage",label:"Esx-Storage",mdxType:"TabItem"},(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Metric name"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Unit"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"status"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Status of the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"adapters status"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Adapter statuses of the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("em",{parentName:"td"},"esx_name"),"#host.adapters.total.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of adapters on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("em",{parentName:"td"},"esx_name"),"#host.adapters.online.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of adapters with status online on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("em",{parentName:"td"},"esx_name"),"#host.adapters.offline.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of adapters with status offline on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("em",{parentName:"td"},"esx_name"),"#host.adapters.fault.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of adapters with status fault on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("em",{parentName:"td"},"esx_name"),"#host.adapters.unknown.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of adapters with status unknown on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"luns status"),(0,a.kt)("td",{parentName:"tr",align:"left"},"LUN statuses of the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("em",{parentName:"td"},"esx_name"),"#host.luns.total.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of LUNs on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("em",{parentName:"td"},"esx_name"),"#host.luns.ok.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of LUNs with status ok on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("em",{parentName:"td"},"esx_name"),"#host.luns.error.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of LUNs with status error on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("em",{parentName:"td"},"esx_name"),"#host.luns.off.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of LUNs with status off on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("em",{parentName:"td"},"esx_name"),"#host.luns.unknown.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of LUNs with status unknown on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("em",{parentName:"td"},"esx_name"),"#host.luns.quiesced.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of LUNs with status quiesced on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("em",{parentName:"td"},"esx_name"),"#host.luns.degraded.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of LUNs with status degraded on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"paths status"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Paths statuses of the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("em",{parentName:"td"},"esx_name"),"#host.paths.total.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of paths on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("em",{parentName:"td"},"esx_name"),"#host.paths.active.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of paths with status active on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("em",{parentName:"td"},"esx_name"),"#host.paths.disabled.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of paths with status disabed on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("em",{parentName:"td"},"esx_name"),"#host.paths.standby.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of paths with status standby on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("em",{parentName:"td"},"esx_name"),"#host.paths.dead.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of paths with status dead on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},(0,a.kt)("em",{parentName:"td"},"esx_name"),"#host.paths.unknown.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of paths with status unknown on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"}))))),(0,a.kt)(o.Z,{value:"Esx-Swap",label:"Esx-Swap",mdxType:"TabItem"},(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Metric name"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Unit"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"host.swap.in.usage.bytespersecond"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Swap in rate Usage"),(0,a.kt)("td",{parentName:"tr",align:"left"},"B/s")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"host.swap.out.usage.bytespersecond"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Swap out rate Usage"),(0,a.kt)("td",{parentName:"tr",align:"left"},"B/s"))))),(0,a.kt)(o.Z,{value:"Esx-Vm-Count",label:"Esx-Vm-Count",mdxType:"TabItem"},(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Metric name"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Unit"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"host.vm.poweredon.current.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of powered on VMs on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Count")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"host.vm.poweredoff.current.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of powered off VMs on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Count")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"host.vm.suspended.current.count"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Number of suspended VMs on the ESX"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Count")))))),(0,a.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,a.kt)("h3",{id:"centreon-vmware-connector"},"Centreon VMWare Connector"),(0,a.kt)("p",null,"For the VMWare monitoring, Centreon use daemon to connect and request the vCenter."),(0,a.kt)("p",null,"Install this daemon on each needed poller:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"yum install centreon-plugin-Virtualization-VMWare-daemon\n")),(0,a.kt)("p",null,'To configure the access to your infrastructure, edit the\n"/etc/centreon/centreon',"_",'vmware.pm" configuration file:'),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-perl"},"%centreon_vmware_config = (\n    vsphere_server => {\n        default => {\n            url => 'https://<ip_hostname>/sdk',\n            username => '<username>',\n            password => '<password>'\n        }\n    }\n);\n\n1;\n")),(0,a.kt)("p",null,"Make sure to replace variables with needed information:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("em",{parentName:"li"},"ip","_","hostname"),": IP address or hostname of the vCenter or ESX (if standalone),"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("em",{parentName:"li"},"username"),': username with at least "read only" access to the vCenter or ESX (you can use domain user),'),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("em",{parentName:"li"},"password"),": password of the username.")),(0,a.kt)("p",null,"You can configure multiple vCenter or ESXi connections using this\nstructure:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-perl"},"%centreon_vmware_config = (\n    vsphere_server => {\n        'my_first_vcenter' => {\n            url => 'https://<ip_hostname>/sdk',\n            username => '<username>',\n            password => '<password>'\n        },\n        'my_other_vcenter' => {\n            url => 'https://<ip_hostname>/sdk',\n            username => '<DOMAIN>\\<username>',\n            password => '<password>'\n        },\n    },\n    port => 5700\n);\n\n1;\n")),(0,a.kt)("p",null,"Each entry is called a ",(0,a.kt)("strong",{parentName:"p"},"container"),"."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},'You can also define the "port" attribute to change the listening port.')),(0,a.kt)("p",null,"Then start the daemon and make sure it is configured to start at server boot:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"systemctl start centreon_vmware\nsystemctl enable centreon_vmware\n")),(0,a.kt)("p",null,"Make sure that the daemon configuration works fine by looking for errors in\n",(0,a.kt)("strong",{parentName:"p"},"/var/log/centreon/centreon","_","vmware.log"),"."),(0,a.kt)("h3",{id:"tags-and-custom-attributes"},"Tags and Custom Attributes"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"To discover Tags and Custom Attributes, you must use version 3.2.5 of ",(0,a.kt)("strong",{parentName:"p"},"centreon-vmware-daemon")," and add ",(0,a.kt)("strong",{parentName:"p"},"--tags")," in the discovery extra options.\nGo to page ",(0,a.kt)("strong",{parentName:"p"},"Configuration > Hosts > Discovery"),", and at the 3rd step (",(0,a.kt)("strong",{parentName:"p"},"Define discovery parameters"),"), in section ",(0,a.kt)("strong",{parentName:"p"},"Additional parameters"),", in the ",(0,a.kt)("strong",{parentName:"p"},"Extra Options")," field, enter ",(0,a.kt)("strong",{parentName:"p"},"--tags"),".")),(0,a.kt)("h3",{id:"network-flows"},"Network flows"),(0,a.kt)("p",null,"The Poller with the Centreon VMware Connector installed needs to access the vCenter on TCP/443 HTTPS."),(0,a.kt)("p",null,"The Pollers that request the Centreon VMWare Connector host need to access the Centreon VMWare Connector host on TCP/5700."),(0,a.kt)("h2",{id:"installation"},"Installation"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(o.Z,{value:"Online License",label:"Online License",mdxType:"TabItem"},(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Install the Vmware2 Connector Centreon Plugin on every Poller expected to monitor the devices: ")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"yum install centreon-plugin-Virtualization-Vmware2-Connector-Plugin\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Install the 'Vmware ESX' Centreon Monitoring Connector on the ",(0,a.kt)("strong",{parentName:"li"},"Configuration > Monitoring Connectors Manager")," page "))),(0,a.kt)(o.Z,{value:"Offline License",label:"Offline License",mdxType:"TabItem"},(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Install the Vmware ESX Centreon Plugin on every poller expected to monitor the devices:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"yum install centreon-plugin-Virtualization-Vmware2-Connector-Plugin\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Install the Centreon Monitoring Connector RPM: ")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"yum install centreon-pack-virtualization-vmware2-esx\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"Install the 'Vmware ESX' Centreon Monitoring Connector on the ",(0,a.kt)("strong",{parentName:"li"},"Configuration > Monitoring Connectors Manager")," page ")))),(0,a.kt)("h2",{id:"configuration"},"Configuration"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},'Log into Centreon and add a new Host through "Configuration > Hosts".'),(0,a.kt)("li",{parentName:"ul"},'Apply the relevant Host Template "Virt-VMWare2-ESX-custom", and configure the mandatory Macros:')),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"left"},"Mandatory"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,a.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"X"),(0,a.kt)("td",{parentName:"tr",align:"left"},"CENTREONVMWARECONTAINER"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Name of your container in the file centreon_vmware.pm")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"X"),(0,a.kt)("td",{parentName:"tr",align:"left"},"CENTREONVMWAREHOST"),(0,a.kt)("td",{parentName:"tr",align:"left"},"The Centreon server that launches the connection")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"X"),(0,a.kt)("td",{parentName:"tr",align:"left"},"CENTREONVMWAREPORT"),(0,a.kt)("td",{parentName:"tr",align:"left"},"By default: 5700")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"},"X"),(0,a.kt)("td",{parentName:"tr",align:"left"},"ESXNAME"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Name of the ESX (defined in your VMWare infrastructure)")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"left"}),(0,a.kt)("td",{parentName:"tr",align:"left"},"CENTREONVMWAREEXTRAOPTIONS"),(0,a.kt)("td",{parentName:"tr",align:"left"},"Customize it with your own if needed")))),(0,a.kt)("h2",{id:"faq"},"FAQ"),(0,a.kt)("h3",{id:"how-do-i-run-my-plugin-through-the-cli-and-what-do-the-main-parameters-stand-for-"},"How do I run my plugin through the CLI and what do the main parameters stand for ?"),(0,a.kt)("p",null,"Once you've installed the plugin, you can test it logging with centreon-engine user:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"/usr/lib/centreon/plugins//centreon_vmware_connector_client.pl \\\n    --plugin=apps::vmware::connector::plugin \\\n    --mode=cpu-host \\\n    --custommode=connector \\\n    --connector-hostname='localhost' \\\n    --connector-port='5700' \\\n    --container='vcenter01' \\\n    --esx-hostname='SRV-ESX-TLS' \\\n    --unknown-status='%{status} !~ /^connected$/i' \\\n    --warning-status='' \\\n    --critical-status='' \\\n    --warning-total-cpu='80' \\\n    --critical-total-cpu='90' \\\n    --warning-total-cpu-mhz='' \\\n    --critical-total-cpu-mhz='' \\\n    --warning-cpu='' \\\n    --critical-cpu=''\n")),(0,a.kt)("p",null,"Expected command output is shown below:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"OK: Host 'SRV-ESX-TLS' : status connected - cpu total average : 48.63 %, 14592.00 MHz - All CPUs are ok |\n'cpu_total'=48.63%;;;0;100 'cpu_total_MHz'=14592.00MHz;;;0;30000 'cpu_0'=13.95%;;;0;100 'cpu_1'=12.01%;;;0;100\n'cpu_2'=24.58%;;;0;100 'cpu_3'=24.55%;;;0;100 'cpu_4'=26.72%;;;0;100 'cpu_5'=24.38%;;;0;100 'cpu_6'=24.23%;;;0;100\n'cpu_7'=26.37%;;;0;100 'cpu_8'=27.71%;;;0;100 'cpu_9'=26.16%;;;0;100\n")),(0,a.kt)("p",null,"This command above checks the CPU Usage (",(0,a.kt)("inlineCode",{parentName:"p"},"--plugin=apps::vmware::connector::plugin --mode=cpu-host"),") of the ESX ",(0,a.kt)("strong",{parentName:"p"},"SRV-ESX-TLS")," (",(0,a.kt)("inlineCode",{parentName:"p"},"--esx-hostname='SRV-ESX-TLS'"),").\nIt connects to the VMWare daemon on ",(0,a.kt)("strong",{parentName:"p"},"localhost")," (",(0,a.kt)("inlineCode",{parentName:"p"},"--connector-hostname='localhost'"),") on the port ",(0,a.kt)("strong",{parentName:"p"},"5700")," (",(0,a.kt)("inlineCode",{parentName:"p"},"--connector-port='5700'"),").\nThen the command requests the container ",(0,a.kt)("strong",{parentName:"p"},"vcenter01")," (",(0,a.kt)("inlineCode",{parentName:"p"},"--container='vcenter01'"),") because the ESX ",(0,a.kt)("strong",{parentName:"p"},"SRV-ESX-TLS")," is managed by ",(0,a.kt)("strong",{parentName:"p"},"vcenter01"),"."),(0,a.kt)("p",null,"It will trigger a WARNING alarm if the CPU Usage is above 80% (",(0,a.kt)("inlineCode",{parentName:"p"},"--warning-total-cpu='80'"),")\nand a CRITICAL alarm if the CPU Usage is above 90% (",(0,a.kt)("inlineCode",{parentName:"p"},"--critical-total-cpu='90'"),")."),(0,a.kt)("p",null,"All available modes with the plugin can be displayed with: "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"/usr/lib/centreon/plugins/./centreon_vmware_connector_client.pl \\\n    --plugin=apps::vmware::connector::plugin \\\n    --list-mode\n")),(0,a.kt)("p",null,"The available options for a mode can be displayed using the ",(0,a.kt)("inlineCode",{parentName:"p"},"--help")," parameter: "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"/usr/lib/centreon/plugins/./centreon_vmware_connector_client.pl \\\n    --plugin=apps::vmware::connector::plugin \\\n    --mode=cpu-host \\\n    --help\n")),(0,a.kt)("h3",{id:"why-do-i-get-the-following-error"},"Why do I get the following error:"),(0,a.kt)("h4",{id:"unknown-unknown-container-name-default-"},"UNKNOWN: Unknown container name 'default' |"),(0,a.kt)("p",null,"This error message means that the container invoked in the command doesn't exist in your VMWare connector configuration.\nCheck your macro ",(0,a.kt)("strong",{parentName:"p"},"CENTREONVMWARECONTAINER")," on your host or check the file ",(0,a.kt)("em",{parentName:"p"},"/etc/centreon/centreon_vmware.pm")),(0,a.kt)("h4",{id:"unknown-container-connection-problem-"},"UNKNOWN: Container connection problem |"),(0,a.kt)("p",null,"This error message means that you have a issue with the credentials provided for your Container.\nCheck your credentials in ",(0,a.kt)("em",{parentName:"p"},"/etc/centreon/centreon_vmware.pm"),".\nYou can also take a look into the log for more information: ",(0,a.kt)("em",{parentName:"p"},"/var/log/centreon/centreon_vmware.log")),(0,a.kt)("h4",{id:"unknown-cannot-get-value-for-counters-maybe-objects-cannot-be-reached-disconnected-not-running-time-not-synced-see-time-host-mode-"},"UNKNOWN: Cannot get value for counters (Maybe, object(s) cannot be reached: disconnected, not running, time not synced (see time-host mode),...) |"),(0,a.kt)("p",null,"This error message means that you the plugin cannot get value for some counters.\nMost of the time it caused by a time shift between the Centreon Servers and the VMWare Infrastructure.\nCheck the synchronization with the mode ",(0,a.kt)("inlineCode",{parentName:"p"},"time-host"),"."),(0,a.kt)("h4",{id:"unknown-cannot-get-counter-netreceivedaverage-for-the-sampling-period-300-counter-level-2-sampling-level-1"},"UNKNOWN: Cannot get counter 'net.received.average' for the sampling period '300' (counter level: 2, sampling level: 1)"),(0,a.kt)("p",null,"Some counters like 'mem.state.latest' and 'net.received.average' are only available with a sampling level at 2.\nYou can configure the level sampling in the vCenter console for these counters.\nYou can also configure the macro ",(0,a.kt)("em",{parentName:"p"},"SERVICEEXTRAOPTIONS")," on the services where you catched this error with the option ",(0,a.kt)("inlineCode",{parentName:"p"},"--sampling-period='20'"),"."))}g.isMDXComponent=!0}}]);