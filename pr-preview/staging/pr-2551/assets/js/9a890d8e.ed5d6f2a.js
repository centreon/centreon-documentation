"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[51645],{79839:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>m,contentTitle:()=>d,default:()=>g,frontMatter:()=>p,metadata:()=>c,toc:()=>u});a(67294);var n=a(3905),r=a(51715),o=a(7626);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const p={id:"network-versa-director-restapi",title:"Versa Director Restapi"},d=void 0,c={unversionedId:"integrations/plugin-packs/procedures/network-versa-director-restapi",id:"integrations/plugin-packs/procedures/network-versa-director-restapi",title:"Versa Director Restapi",description:"Overview",source:"@site/pp/integrations/plugin-packs/procedures/network-versa-director-restapi.md",sourceDirName:"integrations/plugin-packs/procedures",slug:"/integrations/plugin-packs/procedures/network-versa-director-restapi",permalink:"/centreon-documentation/pr-preview/staging/pr-2551/pp/integrations/plugin-packs/procedures/network-versa-director-restapi",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/pp/integrations/plugin-packs/procedures/network-versa-director-restapi.md",tags:[],version:"current",frontMatter:{id:"network-versa-director-restapi",title:"Versa Director Restapi"},sidebar:"pp",previous:{title:"Vectra Rest API",permalink:"/centreon-documentation/pr-preview/staging/pr-2551/pp/integrations/plugin-packs/procedures/network-vectra-restapi"},next:{title:"Versa SNMP",permalink:"/centreon-documentation/pr-preview/staging/pr-2551/pp/integrations/plugin-packs/procedures/network-versa-snmp"}},m={},u=[{value:"Overview",id:"overview",level:2},{value:"Monitoring Connector assets",id:"monitoring-connector-assets",level:2},{value:"Monitored objects",id:"monitored-objects",level:3},{value:"Discovery Rules",id:"discovery-rules",level:3},{value:"Collected metrics",id:"collected-metrics",level:3},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Device Configuration",id:"device-configuration",level:3},{value:"Network flows",id:"network-flows",level:3},{value:"Installation",id:"installation",level:2},{value:"Host configuration",id:"host-configuration",level:2},{value:"FAQ",id:"faq",level:2},{value:"How to test the Plugin and what are the main options for ?",id:"how-to-test-the-plugin-and-what-are-the-main-options-for-",level:3},{value:"Why do I get the following error:",id:"why-do-i-get-the-following-error",level:3},{value:"<code>UNKNOWN: 500 Can&#39;t connect to myversadirector:9182</code>",id:"unknown-500-cant-connect-to-myversadirector9182",level:4},{value:"<code>UNKNOWN: 501 Protocol scheme &#39;connect&#39; is not supported |</code>",id:"unknown-501-protocol-scheme-connect-is-not-supported-",level:4},{value:"<code>UNKNOWN: Cannot load module &#39;Net::Curl::Easy&#39;</code>",id:"unknown-cannot-load-module-netcurleasy",level:4}],k={toc:u},h="wrapper";function g(e){var{components:t}=e,a=s(e,["components"]);return(0,n.kt)(h,l(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){i(e,t,a[t])}))}return e}({},k,a),{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"overview"},"Overview"),(0,n.kt)("p",null,"Versa Director provides the management, monitoring and orchestration capabilities\nneeded to deliver Versa\u2019s VNF-based network and security services."),(0,n.kt)("p",null,"The Centreon Monitoring Connector relies on the Versa Director API to query and\ncollect status and metrics of the Versa equipments managed by the Director."),(0,n.kt)("p",null,"You can find more information about the Versa Director API on the official documentation:\n",(0,n.kt)("a",{parentName:"p",href:"https://apidocs.versa-networks.com/"},"https://apidocs.versa-networks.com/")),(0,n.kt)("h2",{id:"monitoring-connector-assets"},"Monitoring Connector assets"),(0,n.kt)("h3",{id:"monitored-objects"},"Monitored objects"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Versa Networks devices")),(0,n.kt)("h3",{id:"discovery-rules"},"Discovery Rules"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(o.Z,{value:"Hosts",label:"Hosts",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Rule Name"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"Net-Versa-Director-Restapi-HostDiscovery-devices"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Discover and monitor Versa Devices managed by Versa Director")))))),(0,n.kt)("h3",{id:"collected-metrics"},"Collected metrics"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(o.Z,{value:"Devices",label:"Devices",mdxType:"TabItem"},(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Global")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Metric name"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"status"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Status of the device"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"memory.usage.bytes"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Memory usage on the device"),(0,n.kt)("td",{parentName:"tr",align:"left"},"B")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"memory.free.bytes"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Free memory on the device"),(0,n.kt)("td",{parentName:"tr",align:"left"},"B")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"memory.usage.percentage"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Percentage of memory usage on the device"),(0,n.kt)("td",{parentName:"tr",align:"left"},"%")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"disk.usage.bytes"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Disk usage on the device"),(0,n.kt)("td",{parentName:"tr",align:"left"},"B")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"disk.free.bytes"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Free disk space on the device"),(0,n.kt)("td",{parentName:"tr",align:"left"},"B")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"disk.usage.percentage"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Percentage of disk usage on the device"),(0,n.kt)("td",{parentName:"tr",align:"left"},"%")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"alarms.critical.count"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Number of critical alarms on the device"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"alarms.major.count"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Number of major alarms on the device"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"alarms.minor.count"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Number of minor alarms on the device"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"alarms.warning.count"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Number of warning alarms on the device"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"alarms.indeterminate.count"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Number of indeterminate alarms on the device"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"policy.violation.packets.dropped.novalidlink.count"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Number of packets dropped by no valid link"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"policy.violation.packets.dropped.slaaction.count"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Number of packets dropped by sla action"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Count")))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Per health monitor. monitor-name are 'bgp', 'config', 'ike', 'interface', 'port', 'path', 'reachability', 'service'.")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Metric name"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Unit"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"<monitor-name>"),".health.up.count"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Number of health monitors up"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"<monitor-name>"),".health.disabled.count"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Number of health monitors disabled"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Count")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},(0,n.kt)("inlineCode",{parentName:"td"},"<monitor-name>"),".health.down.count"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Number of health monitors down"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Count")))))),(0,n.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,n.kt)("h3",{id:"device-configuration"},"Device Configuration"),(0,n.kt)("p",null,"The API must be enabled and running on the Versa Director device.\nPlease refer to the manufacturer documentation to achieve this."),(0,n.kt)("h3",{id:"network-flows"},"Network flows"),(0,n.kt)("p",null,"The Centreon Poller must be able to reach the TCP/9182 HTTPS port of the Versa Director device."),(0,n.kt)("h2",{id:"installation"},"Installation"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(o.Z,{value:"Online License",label:"Online License",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Install the Centreon package on every Centreon Poller expected to monitor\nVersa devices trough Versa Director API:")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"yum install centreon-plugin-Network-Versa-Director-Restapi\n")),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},"On the Centreon Web interface, install the ",(0,n.kt)("em",{parentName:"li"},"Versa Director Restapi")," Monitoring Connector\nthrough ",(0,n.kt)("strong",{parentName:"li"},"Configuration > Monitoring Connectors Manager")," page."))),(0,n.kt)(o.Z,{value:"Offline License",label:"Offline License",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Install the Centreon package on every Centreon Poller expected to monitor\nVersa devices trough Versa Director API ")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"yum install centreon-plugin-Network-Versa-Director-Restapi\n")),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},"Install the Centreon Monitoring Connector RPM on the Centreon Central server:")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"yum install centreon-pack-network-versa-director-restapi\n")),(0,n.kt)("ol",{start:3},(0,n.kt)("li",{parentName:"ol"},"On the Centreon Web interface, install the ",(0,n.kt)("em",{parentName:"li"},"Versa Director Restapi")," Monitoring Connector\nthrough ",(0,n.kt)("strong",{parentName:"li"},"Configuration > Monitoring Connectors Manager")," page.")))),(0,n.kt)("h2",{id:"host-configuration"},"Host configuration"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},'Log into Centreon and add a new Host through "Configuration > Hosts".'),(0,n.kt)("li",{parentName:"ul"},"Apply the template ",(0,n.kt)("em",{parentName:"li"},"Net-Versa-Director-Device-Restapi-custom")," and configure all the mandatory Macros:")),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Mandatory"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Name"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"X"),(0,n.kt)("td",{parentName:"tr",align:"left"},"DIRECTORAPIPORT"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Port used. Default: 9182")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"X"),(0,n.kt)("td",{parentName:"tr",align:"left"},"DIRECTORAPIPROTO"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Protocol used. Default: https")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"X"),(0,n.kt)("td",{parentName:"tr",align:"left"},"DIRECTORAPIORGANIZATION"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Linked organizations of the device. Default: .*")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"X"),(0,n.kt)("td",{parentName:"tr",align:"left"},"DIRECTORAPIHOSTNAME"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Hostname of the Versa Director.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"X"),(0,n.kt)("td",{parentName:"tr",align:"left"},"DIRECTORAPIUSERNAME"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Username to access to the API.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"X"),(0,n.kt)("td",{parentName:"tr",align:"left"},"DIRECTORAPIPASSWORD"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Password to access to the API.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"X"),(0,n.kt)("td",{parentName:"tr",align:"left"},"DIRECTORAPIDEVICENAME"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Name of the Versa device.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"}),(0,n.kt)("td",{parentName:"tr",align:"left"},"DIRECTORAPIEXTRAOPTIONS"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Any extra option you may want to add to the command (eg. a --verbose flag)")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"}),(0,n.kt)("td",{parentName:"tr",align:"left"},"PROXYURL"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Proxy URL. (eg. ",(0,n.kt)("a",{parentName:"td",href:"http://myproxy.int:3128"},"http://myproxy.int:3128"),")")))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Use the discovery module to add the monitoring of your Versa devices.\nGo to Configuration > Host > Discovery and use the provider ",(0,n.kt)("em",{parentName:"p"},"Versa Networks devices (Director RestAPI)"))),(0,n.kt)("h2",{id:"faq"},"FAQ"),(0,n.kt)("h3",{id:"how-to-test-the-plugin-and-what-are-the-main-options-for-"},"How to test the Plugin and what are the main options for ?"),(0,n.kt)("p",null,"Once the Plugin installed, log into your Centreon Poller CLI using the ",(0,n.kt)("em",{parentName:"p"},"centreon-engine")," user account\nand test the Plugin by running the following command:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"/usr/lib/centreon/plugins//centreon_versa_director_restapi.pl \\\n  --plugin=network::versa::director::restapi::plugin \\\n  --mode=devices \\\n  --hostname=10.0.0.1 \\\n  --port='9182' \\\n  --proto='https' \\\n  --api-username='jdoe' \\\n  --api-password='6fbadZEJbsLG' \\\n  --organization='.*' \\\n  --filter-device-name='^CENFRGW101$' \\\n  --warning-status='' \\\n  --critical-status='%{ping_status} ne \"reachable\" or %{services_status} ne \"good\"' \\\n  --verbose\n")),(0,n.kt)("p",null,"Expected command output is shown below: "),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"OK: Device 'CENFRGW101' status services: good [ping: reachable] [sync: in_sync] [path: unavailable] [controller: unavailable] -\nmemory total: 31.42 GB used: 11.49 GB (36.57%) free: 19.93 GB (63.43%) - disk total: 250.00 B used: 18.00 B (7.20%) free: 232.00 B (92.80%) -\nalarms critical: 0, major: 0, minor: 0, warning: 0, indeterminate: 0 -\npolicy violation packets-dropped-novalidlink : 0, packets-dropped-slaaction : 0 -\nall health monitors are ok | 'devices.total.count'=1;;;0; 'CENFRGW101#memory.usage.bytes'=12337293557B;;;0;33736968110.08\n'CENFRGW101#memory.free.bytes'=21399674552B;;;0;33736968110.08 'CENFRGW101#memory.usage.percentage'=36.57;;;0;100\n'CENFRGW101#disk.usage.bytes'=18B;;;0;250 'CENFRGW101#disk.free.bytes'=232B;;;0;250\n'CENFRGW101#disk.usage.percentage'=7.20;;;0;100 'CENFRGW101#alarms.critical.count'=0;;;0;\n'CENFRGW101#alarms.major.count'=0;;;0; 'CENFRGW101#alarms.minor.count'=0;;;0; 'CENFRGW101#alarms.warning.count'=0;;;0;\n'CENFRGW101#alarms.indeterminate.count'=0;;;0; 'CENFRGW101~bgp adjacencies#health.up.count'=3;;;0;3\n'CENFRGW101~bgp adjacencies#health.down.count'=0;;;0;3 'CENFRGW101~bgp adjacencies#health.disabled.count'=0;;;0;3\n'CENFRGW101~config sync status#health.up.count'=1;;;0;1 'CENFRGW101~config sync status#health.down.count'=0;;;0;1\n'CENFRGW101~config sync status#health.disabled.count'=0;;;0;1 'CENFRGW101~ike status#health.up.count'=2;;;0;2\n'CENFRGW101~ike status#health.down.count'=0;;;0;2 'CENFRGW101~ike status#health.disabled.count'=0;;;0;2\n'CENFRGW101~interfaces#health.up.count'=3;;;0;3 'CENFRGW101~interfaces#health.down.count'=0;;;0;3\n'CENFRGW101~interfaces#health.disabled.count'=0;;;0;3 'CENFRGW101~paths#health.up.count'=24;;;0;24\n'CENFRGW101~paths#health.down.count'=0;;;0;24 'CENFRGW101~paths#health.disabled.count'=0;;;0;24\n'CENFRGW101~physical ports#health.up.count'=0;;;0;0 'CENFRGW101~physical ports#health.down.count'=0;;;0;0\n'CENFRGW101~physical ports#health.disabled.count'=0;;;0;0 'CENFRGW101~reachability status#health.up.count'=1;;;0;1\n'CENFRGW101~reachability status#health.down.count'=0;;;0;1 'CENFRGW101~reachability status#health.disabled.count'=0;;;0;1\n'CENFRGW101~service status#health.up.count'=1;;;0;1 'CENFRGW101~service status#health.down.count'=0;;;0;1\n'CENFRGW101~service status#health.disabled.count'=0;;;0;1\nchecking device 'CENFRGW101' [type: hub]\n    status services: good [ping: reachable] [sync: in_sync] [path: unavailable] [controller: unavailable]\n    memory total: 31.42 GB used: 11.49 GB (36.57%) free: 19.93 GB (63.43%)\n    disk total: 250.00 B used: 18.00 B (7.20%) free: 232.00 B (92.80%)\n    alarms critical: 0, major: 0, minor: 0, warning: 0, indeterminate: 0\n    policy violation packets-dropped-novalidlink : 0, packets-dropped-slaaction : 0\n    health monitor 'bgp adjacencies' up: 3, down: 0, disabled: 0\n    health monitor 'config sync status' up: 1, down: 0, disabled: 0\n    health monitor 'ike status' up: 2, down: 0, disabled: 0\n    health monitor 'interfaces' up: 3, down: 0, disabled: 0\n    health monitor 'paths' up: 24, down: 0, disabled: 0\n    health monitor 'physical ports' up: 0, down: 0, disabled: 0\n    health monitor 'reachability status' up: 1, down: 0, disabled: 0\n    health monitor 'service status' up: 1, down: 0, disabled: 0\n")),(0,n.kt)("p",null,"The command above monitors a Versa Networks device ",(0,n.kt)("strong",{parentName:"p"},"CENFRGW101")," (",(0,n.kt)("inlineCode",{parentName:"p"},"--filter-device-name='^CENFRGW101$'"),")\ntrough the Versa Director API (",(0,n.kt)("inlineCode",{parentName:"p"},"--plugin=network::versa::director::restapi::plugin --mode=devices"),").\nIt connects to the Versa Director host ",(0,n.kt)("strong",{parentName:"p"},"10.0.0.1")," (",(0,n.kt)("inlineCode",{parentName:"p"},"--hostname=10.0.01"),") using the user ",(0,n.kt)("strong",{parentName:"p"},"jdoe"),"\nand its password (",(0,n.kt)("inlineCode",{parentName:"p"},"--api-username='jdoe' --api-password='6fbadZEJbsLG'"),").\nThe device can be under several organizations, so we use a wildcard (",(0,n.kt)("inlineCode",{parentName:"p"},"--organization='.*'"),")."),(0,n.kt)("p",null,"This command will trigger a CRITICAL alarm (",(0,n.kt)("inlineCode",{parentName:"p"},'--critical-status=\'%{ping_status} ne "reachable" or %{services_status} ne "good"\''),") if:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"the 'ping status' of the device is not ",(0,n.kt)("strong",{parentName:"li"},"reachable")),(0,n.kt)("li",{parentName:"ul"},"the 'service_status' of the device is not ",(0,n.kt)("strong",{parentName:"li"},"good"))),(0,n.kt)("p",null,"Some thresholds can also be set on metrics with options ",(0,n.kt)("inlineCode",{parentName:"p"},"--warning-*")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"--critical-*"),"."),(0,n.kt)("p",null,"For each Plugin mode, all the options as well as all the available thresholds can be displayed by adding the ",(0,n.kt)("inlineCode",{parentName:"p"},"--help"),"\nparameter to the command:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"/usr/lib/centreon/plugins/centreon_versa_snmp.pl \\\n  --plugin=network::versa::director::restapi::plugin \\\n  --mode=devices \\\n  --help\n")),(0,n.kt)("h3",{id:"why-do-i-get-the-following-error"},"Why do I get the following error:"),(0,n.kt)("h4",{id:"unknown-500-cant-connect-to-myversadirector9182"},(0,n.kt)("inlineCode",{parentName:"h4"},"UNKNOWN: 500 Can't connect to myversadirector:9182")),(0,n.kt)("p",null,"This error message means that the Centreon Plugin couldn't successfully connect to the Versa Director API.\nCheck that no third party device (such as a firewall) is blocking the request.\nA proxy connection may also be necessary to connect to the API. This can be done by using the ",(0,n.kt)("inlineCode",{parentName:"p"},"--proxyurl")," option in the command."),(0,n.kt)("h4",{id:"unknown-501-protocol-scheme-connect-is-not-supported-"},(0,n.kt)("inlineCode",{parentName:"h4"},"UNKNOWN: 501 Protocol scheme 'connect' is not supported |")),(0,n.kt)("p",null,"When using a proxy to connect to the Versa Director API, this error message means that the Centreon Plugin library does not support\nthe proxy connection protocol.\nIn order to prevent this issue, use the ",(0,n.kt)("em",{parentName:"p"},"curl")," HTTP backend by adding the following option to the command: ",(0,n.kt)("inlineCode",{parentName:"p"},"--http-backend='curl'"),"."),(0,n.kt)("h4",{id:"unknown-cannot-load-module-netcurleasy"},(0,n.kt)("inlineCode",{parentName:"h4"},"UNKNOWN: Cannot load module 'Net::Curl::Easy'")),(0,n.kt)("p",null,"This error message means that a Perl library required to use the ",(0,n.kt)("em",{parentName:"p"},"curl")," backend is missing.\nIn order to fix this issue, install the Net::Curl::Easy Perl library using the following command:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"yum install perl-Net-Curl\n")))}g.isMDXComponent=!0}}]);