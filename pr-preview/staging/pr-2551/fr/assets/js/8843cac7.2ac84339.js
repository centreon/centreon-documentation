"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[95011],{99137:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>m,contentTitle:()=>d,default:()=>g,frontMatter:()=>o,metadata:()=>c,toc:()=>u});a(67294);var n=a(3905),r=a(51715),l=a(7626);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}function p(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const o={id:"applications-databases-elasticsearch",title:"Elasticsearch"},d=void 0,c={unversionedId:"integrations/plugin-packs/procedures/applications-databases-elasticsearch",id:"integrations/plugin-packs/procedures/applications-databases-elasticsearch",title:"Elasticsearch",description:"Vue d'ensemble",source:"@site/i18n/fr/docusaurus-plugin-content-docs-pp/current/integrations/plugin-packs/procedures/applications-databases-elasticsearch.md",sourceDirName:"integrations/plugin-packs/procedures",slug:"/integrations/plugin-packs/procedures/applications-databases-elasticsearch",permalink:"/centreon-documentation/pr-preview/staging/pr-2551/fr/pp/integrations/plugin-packs/procedures/applications-databases-elasticsearch",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/i18n/fr/docusaurus-plugin-content-docs-pp/current/integrations/plugin-packs/procedures/applications-databases-elasticsearch.md",tags:[],version:"current",frontMatter:{id:"applications-databases-elasticsearch",title:"Elasticsearch"},sidebar:"pp",previous:{title:"DB2 Database",permalink:"/centreon-documentation/pr-preview/staging/pr-2551/fr/pp/integrations/plugin-packs/procedures/applications-databases-db2"},next:{title:"Elasticsearch (d\xe9pr\xe9ci\xe9)",permalink:"/centreon-documentation/pr-preview/staging/pr-2551/fr/pp/integrations/plugin-packs/procedures/applications-elasticsearch"}},m={},u=[{value:"Vue d&#39;ensemble",id:"vue-densemble",level:2},{value:"Contenu du connecteur de supervision",id:"contenu-du-connecteur-de-supervision",level:2},{value:"Objets supervis\xe9s",id:"objets-supervis\xe9s",level:3},{value:"M\xe9triques Collect\xe9es",id:"m\xe9triques-collect\xe9es",level:3},{value:"Prerequis",id:"prerequis",level:2},{value:"Installation",id:"installation",level:2},{value:"Configuration",id:"configuration",level:2},{value:"FAQ",id:"faq",level:2},{value:"Comment tester en ligne de commande et que signifient les options principales ?",id:"comment-tester-en-ligne-de-commande-et-que-signifient-les-options-principales-",level:3},{value:"Comment interpr\xe9ter les erreurs suivantes ?",id:"comment-interpr\xe9ter-les-erreurs-suivantes-",level:3},{value:"UNKNOWN: 500 Can&#39;t connect",id:"unknown-500-cant-connect",level:4},{value:"UNKNOWN: 501 Protocol scheme &#39;connect&#39; is not supported",id:"unknown-501-protocol-scheme-connect-is-not-supported",level:4}],k={toc:u},N="wrapper";function g(e){var{components:t}=e,a=p(e,["components"]);return(0,n.kt)(N,s(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){i(e,t,a[t])}))}return e}({},k,a),{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"vue-densemble"},"Vue d'ensemble"),(0,n.kt)("p",null,"Elasticsearch est un moteur de recherche et d'analyse distribu\xe9 et en open source pour tout type de donn\xe9es, y compris les donn\xe9es textuelles, num\xe9riques, g\xe9ospatiales, structur\xe9es et non structur\xe9es. Elasticsearch a \xe9t\xe9 con\xe7u \xe0 partir d'Apache Lucene et a \xe9t\xe9 lanc\xe9 en 2010 par Elasticsearch N. V. (maintenant appel\xe9 Elastic). "),(0,n.kt)("h2",{id:"contenu-du-connecteur-de-supervision"},"Contenu du connecteur de supervision"),(0,n.kt)("h3",{id:"objets-supervis\xe9s"},"Objets supervis\xe9s"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Bases de donn\xe9ess"),(0,n.kt)("li",{parentName:"ul"},"Noeuds"),(0,n.kt)("li",{parentName:"ul"},"Partitions "),(0,n.kt)("li",{parentName:"ul"},"Clusters"),(0,n.kt)("li",{parentName:"ul"},"Indices"),(0,n.kt)("li",{parentName:"ul"},"Documents"),(0,n.kt)("li",{parentName:"ul"},"Licences")),(0,n.kt)("h3",{id:"m\xe9triques-collect\xe9es"},"M\xe9triques Collect\xe9es"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"cluster-statistics",label:"cluster-statistics",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"M\xe9trique"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Unit\xe9"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"display"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Nom du cluster Elasticsearch"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"status"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Status du cluster Elasticsearch"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"nodes_total"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Nombre de noeuds"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"nodes_donn\xe9e"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Nombre de donn\xe9es"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"nodes_coordinating"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Nombre de noeuds se coordonnants"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"nodes_master"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Nombre de noeuds ma\xeetres"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"nodes_ingest"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Nombre de donn\xe9es ing\xe9r\xe9es"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"indices_count"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Nombre d'indices"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"Shards_total"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Nombre total de partitions"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"Shards_active"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Nombre de partitions actives"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"Shards_unassigned"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Nombre de partitions non-assign\xe9es"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"Shards_relocating"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Nombre de partitions se relocalisants"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"active_Shards_percent"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Pourcentage de partitions active"),(0,n.kt)("td",{parentName:"tr",align:"left"},"%")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"tasks_pending"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Nombre de t\xe2ches suspendues"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"docs_count"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Nombre de documents"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"size_in_bytes"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Tailles de toutes les partitions assign\xe9es"),(0,n.kt)("td",{parentName:"tr",align:"left"},"B"))))),(0,n.kt)(l.Z,{value:"indice-statistics",label:"indice-statistics",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"M\xe9trique"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Unit\xe9"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"display"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Nom de l'Indice Elasticsearch"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"status"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Status de l'Indice Elasticsearch"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"Shards_active"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Nombre de partitions actives"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"Shards_unassigned"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Nombre de partitions non-assign\xe9es"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"docs_count"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Nombre de documents"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"size_in_bytes_primaries"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Taille de toute les partitions primaires"),(0,n.kt)("td",{parentName:"tr",align:"left"},"B")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"size_in_bytes_total"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Taille totale de toutes les partitions assign\xe9es"),(0,n.kt)("td",{parentName:"tr",align:"left"},"B"))))),(0,n.kt)(l.Z,{value:"license",label:"license",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"M\xe9trique"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Unit\xe9"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"type"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Type de Licence"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"status"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Status de la Licence"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"issued_to"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Propri\xe9taire de la licence"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"issue_date"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Date de concession de la licence"),(0,n.kt)("td",{parentName:"tr",align:"left"}))))),(0,n.kt)(l.Z,{value:"node-statistics",label:"node-statistics",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"M\xe9trique"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Unit\xe9"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"display"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Nom du noeud Elasticsearch"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"indices_count"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Nombre d'indices dans le noeud"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"heap_used_percent"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Pourcentage de m\xe9moire actuellement utilis\xe9e dans la pile"),(0,n.kt)("td",{parentName:"tr",align:"left"},"%")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"heap_used_in_bytes"),(0,n.kt)("td",{parentName:"tr",align:"left"},"M\xe9moire disponible pour la pile"),(0,n.kt)("td",{parentName:"tr",align:"left"},"B")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"heap_max_in_bytes"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Taille maximum de m\xe9moire disponible pour la pile"),(0,n.kt)("td",{parentName:"tr",align:"left"},"B")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"available_in_bytes"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Nombre total d'octets disponibles"),(0,n.kt)("td",{parentName:"tr",align:"left"},"B")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"total_in_bytes"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Taille totale de tous les fichiers stock\xe9s"),(0,n.kt)("td",{parentName:"tr",align:"left"},"B")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"docs_count"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Nombre de documents dans l'indice"),(0,n.kt)("td",{parentName:"tr",align:"left"})),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"size_in_bytes"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Taille totale de toutes les partitions assign\xe9es au noeud"),(0,n.kt)("td",{parentName:"tr",align:"left"},"B"))))),(0,n.kt)(l.Z,{value:"Rules",label:"Rules",mdxType:"TabItem"},(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Non de la r\xeagle"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"App-DB-Elasticsearch-Indice-Statistics"),(0,n.kt)("td",{parentName:"tr",align:"left"},"D\xe9couverte des indices sur votre BD Elasticsearch")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"App-DB-Elasticsearch-Node-Statistics"),(0,n.kt)("td",{parentName:"tr",align:"left"},"D\xe9couverte des noeuds sur votre BD Elasticsearch")))))),(0,n.kt)("p",null,"Utilisez le module de d\xe9couverte pour pouvoir superviser vos bases de donn\xe9e Elasticsearch, Allez dans  Configuration > Services > D\xe9couverte pour lancer l'analyse."),(0,n.kt)("h2",{id:"prerequis"},"Prerequis"),(0,n.kt)("p",null,"Afin de superviser un cluster Elasticsearch, celui-ci doit \xeatre configur\xe9 comme indiqu\xe9 dans la ",(0,n.kt)("a",{parentName:"p",href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.17/monitor-elasticsearch-cluster.html"},"documentation officielle Elasticsearch"),"."),(0,n.kt)("p",null,"Pour pouvoir communiquer avec le collecteurs Centreon poller, l'API du noeud Elasticsearch doit utiliser le protocole http et le port 9200."),(0,n.kt)("h2",{id:"installation"},"Installation"),(0,n.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"Licence Business & IT Editions en ligne",label:"Licence Business & IT Editions en ligne",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Installer le Plugin sur tous les collecteurs Centreon contr\xf4lants les ressources Elasticsearch:")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"yum install centreon-plugin-Applications-donn\xe9ebases-Elasticsearch\n")),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},"Installer le connecteur de supervision ",(0,n.kt)("em",{parentName:"li"},"Elasticsearch")," dans la page ",(0,n.kt)("em",{parentName:"li"},"Configuration  ",">","  Packs de plugins"),"  de l'interface Web Centreon"))),(0,n.kt)(l.Z,{value:"Licenses hors lignes",label:"Licenses hors lignes",mdxType:"TabItem"},(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Installer le Plugin sur tous les collecteurs Centreon contr\xf4lants les ressources Elasticsearch:")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"yum install centreon-plugin-Applications-donn\xe9ebases-Elasticsearch\n")),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},"Installer le connecteur de supervision RPM sur le serveur Centreon  ",(0,n.kt)("strong",{parentName:"li"},"Central"),":")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"yum install centreon-pack-applications-donn\xe9ebases-elasticsearch\n")),(0,n.kt)("ol",{start:3},(0,n.kt)("li",{parentName:"ol"},"Dans la page ",(0,n.kt)("em",{parentName:"li"},"Configuration  ",">"," Packs de plugins")," de l'interface Web Centreon, installer le connecteur de supervision ",(0,n.kt)("em",{parentName:"li"},"Elasticsearch"))))),(0,n.kt)("h2",{id:"configuration"},"Configuration"),(0,n.kt)("p",null,"Toujours dans l'interface Web Centreon, aller \xe0 la page  ",(0,n.kt)("em",{parentName:"p"},"Configuration ",">"," H\xf4stes")," et cliquer sur ",(0,n.kt)("em",{parentName:"p"},"Ajouter"),". Remplir alors les champs du formulaires.\nDans le champs ",(0,n.kt)("em",{parentName:"p"},"Mod\xe8les")," cliquer sur ",(0,n.kt)("em",{parentName:"p"},"+ Ajouter une nouvelle entr\xe9e")," puis s\xe9lectionner ",(0,n.kt)("em",{parentName:"p"},"App-DB-Elascticsearch-custom")),(0,n.kt)("p",null,"Cliquer sur le bouton ",(0,n.kt)("em",{parentName:"p"},"Sauvegarder"),"."),(0,n.kt)("p",null,"Les macros suivantes doivent \xeatre configur\xe9es sur l'h\xf4te:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Macro"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Description"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Valeur par d\xe9faut"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Exemple"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"ELASTICSEARCHPORT"),(0,n.kt)("td",{parentName:"tr",align:"left"},"The Elasticsearch instance port"),(0,n.kt)("td",{parentName:"tr",align:"left"},"9200"),(0,n.kt)("td",{parentName:"tr",align:"left"},"1234")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"ELASTICSEARCHPROTO"),(0,n.kt)("td",{parentName:"tr",align:"left"},"The Elasticsearch instance protocol"),(0,n.kt)("td",{parentName:"tr",align:"left"},"http"),(0,n.kt)("td",{parentName:"tr",align:"left"},"https")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"ELASTICSEARCHUSERNAME"),(0,n.kt)("td",{parentName:"tr",align:"left"},"The Elasticsearch instance username"),(0,n.kt)("td",{parentName:"tr",align:"left"}),(0,n.kt)("td",{parentName:"tr",align:"left"},"centreon")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"ELASTICSEARCHPASSWORD"),(0,n.kt)("td",{parentName:"tr",align:"left"},"The Elasticsearch instance password"),(0,n.kt)("td",{parentName:"tr",align:"left"}),(0,n.kt)("td",{parentName:"tr",align:"left"},"centreon")))),(0,n.kt)("h2",{id:"faq"},"FAQ"),(0,n.kt)("h3",{id:"comment-tester-en-ligne-de-commande-et-que-signifient-les-options-principales-"},"Comment tester en ligne de commande et que signifient les options principales ?"),(0,n.kt)("p",null,"Une fois que le Plugin est install\xe9, vous pouvez le tester directement en ligne de commande depuis votre collecteurs Centreon avec l'utilsiateur ",(0,n.kt)("em",{parentName:"p"},"centreon-engine"),":"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"su - centreon-engine \\\n/usr/lib/centreon/plugins/centreon_elasticsearch.pl \\ \n--hostname=168.253.16.125 \\\n--port=9200 \\\n--proto=http \\\n--plugin=database::elasticsearch::restapi::plugin \\\n--mode=node-statistics \\\n--filter-name='Node 1' \\\n--username='Elasticsearch_username' \\\n--password='Elasticsearch_password'\\\n--warning-disk-free='20%' \\\n--critical-disk-free='5%'\n\n")),(0,n.kt)("p",null,"Sortie: "),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"OK: Node 'i-Vertix Node 1' JVM Heap: 26%, Free Disk Space: 1.56TB, Documents: 4362761044, donn\xe9e: 1.26TB | 'i-Vertix Node 1#node.jvm.heap.usage.percentage'=26%;;;0;100 'i-Vertix Node 1#node.jvm.heap.usage.bytes'=36380302240B;;;0;137151119360 'i-Vertix Node 1#node.disk.free.bytes'=1710072680448B;;;0;3113589145600 'i-Vertix Node 1#node.documents.total.count'=4362761044;;;0; 'i-Vertix Node 1#node.donn\xe9e.size.bytes'=1386278479651B;;;0;\n")),(0,n.kt)("p",null,"La commande demande des statistiques au noeud Elasticsearch nomm\xe9 'Node 1' (",(0,n.kt)("inlineCode",{parentName:"p"},"--mode=node-statistics --filter-name='Node 1"),") qui poss\xe8de l'adresse IP/FQDN ",(0,n.kt)("em",{parentName:"p"},"168.253.16.125")," (",(0,n.kt)("inlineCode",{parentName:"p"},"--hostname=168.253.16.125"),"). Nous utiliserons le port 92000 (",(0,n.kt)("inlineCode",{parentName:"p"},"--port=9200"),") et le protocole http (",(0,n.kt)("inlineCode",{parentName:"p"},"proto=http''"),"). Le nom d'utilisateur de la base de donn\xe9e est ",(0,n.kt)("em",{parentName:"p"},"Elasticsearch_username")," (",(0,n.kt)("inlineCode",{parentName:"p"},"--username='Elasticsearch_username'"),") et son mot de passe ",(0,n.kt)("em",{parentName:"p"},"Elasticsearch_password"),"(",(0,n.kt)("inlineCode",{parentName:"p"},"--password='Elasticsearch_password'"),").\nCette commande d\xe9clenchera une alerte WARNING si il reste moins de 20% d'espace libre sur le disque (",(0,n.kt)("inlineCode",{parentName:"p"},"--warning-disk-free='20%''"),") et une alerte CRITICAL si moins de 5% (",(0,n.kt)("inlineCode",{parentName:"p"},"--critical-disk-free='5%'"),")."),(0,n.kt)("p",null,'On peut assigner des seuils  aux m\xe9triques avec les options "--warning-',(0,n.kt)("em",{parentName:"p"},'" et "--critical-'),'".'),(0,n.kt)("p",null,"Tous les modes disponibles peuvent \xeatre list\xe9s par la ligne de commande suivante:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"/usr/lib/centreon/plugins/centreon_elasticsearch.pl \\\n    --list-mode\n")),(0,n.kt)("p",null,"Et les options des diff\xe9rents modes peuvent \xeatre affich\xe9es gr\xe2ce au param\xe8tre ",(0,n.kt)("inlineCode",{parentName:"p"},"--help"),":  "),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"/usr/lib/centreon/plugins/centreon_elasticsearch.pl \\\n    --mode=node-statistics \\\n    --help\n")),(0,n.kt)("h3",{id:"comment-interpr\xe9ter-les-erreurs-suivantes-"},"Comment interpr\xe9ter les erreurs suivantes ?"),(0,n.kt)("h4",{id:"unknown-500-cant-connect"},"UNKNOWN: 500 Can't connect"),(0,n.kt)("p",null,"Ce message indique que la connexion a l'API a \xe9chou\xe9e."),(0,n.kt)("p",null,"Il est n\xe9cessaire de v\xe9rifier qu'aucun \xe9quipement tiers agissant en tant que Pare-Feu ne bloque le flux. Il est \xe9galement possible qu'une connexion via proxy soit requise. Dans ce cas, il vous est possible de renseigner l'adresse de votre proxy gr\xe2ce \xe0 l'option --proxyurl"),(0,n.kt)("h4",{id:"unknown-501-protocol-scheme-connect-is-not-supported"},"UNKNOWN: 501 Protocol scheme 'connect' is not supported"),(0,n.kt)("p",null,"SI vous utilisez un proxy, il est possible d'obtenir cette erreur. Lorsque c'est le cas, utiliser le Backend curl qui r\xe9soudra cette erreur:\n",(0,n.kt)("em",{parentName:"p"},"--http-backend='curl'"),"."))}g.isMDXComponent=!0}}]);