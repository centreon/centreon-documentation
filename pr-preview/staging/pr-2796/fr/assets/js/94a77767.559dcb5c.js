"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[46354],{36013:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>p,default:()=>N,frontMatter:()=>u,metadata:()=>d,toc:()=>m});n(67294);var a=n(3905),r=n(51715),i=n(7626);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const u={id:"openid",title:"Configurer une authentification par OpenId Connect"},p=void 0,d={unversionedId:"connect/openid",id:"version-23.10/connect/openid",title:"Configurer une authentification par OpenId Connect",description:"Centreon est compatible avec l'authentification OAuth 2.0/OpenId Connect.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-23.10/connect/openid.md",sourceDirName:"connect",slug:"/connect/openid",permalink:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/connect/openid",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/i18n/fr/docusaurus-plugin-content-docs/version-23.10/connect/openid.md",tags:[],version:"23.10",lastUpdatedAt:1699281350,formattedLastUpdatedAt:"6 nov. 2023",frontMatter:{id:"openid",title:"Configurer une authentification par OpenId Connect"},sidebar:"version-23.10/docs",previous:{title:"Configurer une authentification par SSO",permalink:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/connect/sso"},next:{title:"Configurer une authentification par SAML",permalink:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/connect/saml"}},c={},m=[{value:"Configurer l&#39;authentification OpenID Connect",id:"configurer-lauthentification-openid-connect",level:2},{value:"\xc9tape 1 : Activer l&#39;authentification",id:"\xe9tape-1--activer-lauthentification",level:3},{value:"\xc9tape 2 : Configurer les informations d&#39;acc\xe8s au fournisseur d&#39;identit\xe9",id:"\xe9tape-2--configurer-les-informations-dacc\xe8s-au-fournisseur-didentit\xe9",level:3},{value:"\xc9tape 3 : Configurer les conditions d&#39;authentification",id:"\xe9tape-3--configurer-les-conditions-dauthentification",level:3},{value:"\xc9tape 4 : G\xe9rer la cr\xe9ation d&#39;utilisateurs",id:"\xe9tape-4--g\xe9rer-la-cr\xe9ation-dutilisateurs",level:3},{value:"\xc9tape 5 : G\xe9rer les autorisations",id:"\xe9tape-5--g\xe9rer-les-autorisations",level:3},{value:"\xc9tape 6 : G\xe9rer les groupes de contacts",id:"\xe9tape-6--g\xe9rer-les-groupes-de-contacts",level:3},{value:"\xc9tape 7 : Configurer le fournisseur d&#39;identit\xe9",id:"\xe9tape-7--configurer-le-fournisseur-didentit\xe9",level:3},{value:"Exemples de configuration",id:"exemples-de-configuration",level:3}],k={toc:m},g="wrapper";function N(e){var{components:t}=e,n=s(e,["components"]);return(0,a.kt)(g,l(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){o(e,t,n[t])}))}return e}({},k,n),{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Centreon est compatible avec l'authentification OAuth 2.0/OpenId Connect."),(0,a.kt)("p",null,"Il est possible d'utiliser un fournisseur d'identit\xe9 (IdP) tel que Microsoft Azure AD, Okta, Keycloak, LemonLDAP::NG ou\ntout autre IdP compatible avec le flux d'autorisation via un code (Authorization Code Grant)."),(0,a.kt)("h2",{id:"configurer-lauthentification-openid-connect"},"Configurer l'authentification OpenID Connect"),(0,a.kt)("p",null,"L'authentification se param\xe8tre \xe0 la page ",(0,a.kt)("strong",{parentName:"p"},"Administration > Authentification > Configuration OpenId Connect"),"."),(0,a.kt)("h3",{id:"\xe9tape-1--activer-lauthentification"},"\xc9tape 1 : Activer l'authentification"),(0,a.kt)("p",null,"Activez l'authentification OpenID Connect :"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Activer l'authentification OpenID Connect")," : active/d\xe9sactive l'authentification OpenId Connect."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Mode d'authentification")," : indique si l'authentification doit se faire uniquement par OpenId Connect ou en\nutilisant \xe9galement l'authentification locale (",(0,a.kt)("strong",{parentName:"li"},"Mixte"),"). En mode mixte, des utilisateurs cr\xe9\xe9s manuellement dans\nCentreon (et non identifi\xe9s par OpenID) pourront \xe9galement se connecter.")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Lors du param\xe9trage, il est recommand\xe9 d'activer le mode \"mixte\". Cela vous permettra de garder l'acc\xe8s au compte\nlocal ",(0,a.kt)("inlineCode",{parentName:"p"},"admin")," en cas de configuration erron\xe9e.")),(0,a.kt)("h3",{id:"\xe9tape-2--configurer-les-informations-dacc\xe8s-au-fournisseur-didentit\xe9"},"\xc9tape 2 : Configurer les informations d'acc\xe8s au fournisseur d'identit\xe9"),(0,a.kt)("p",null,"Renseignez les informations du fournisseur d'identit\xe9 :"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"URL de base")," : d\xe9finit l'URL de base du fournisseur d'identit\xe9 pour les points d'entr\xe9e OpenId Connect (obligatoire)."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Point d'entr\xe9e d'autorisation")," : d\xe9finit le point d'entr\xe9e d'autorisation, par exemple ",(0,a.kt)("inlineCode",{parentName:"li"},"/authorize")," (obligatoire)."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Point d'entr\xe9e de jeton")," : d\xe9finit le point d'entr\xe9e du jeton, par exemple ",(0,a.kt)("inlineCode",{parentName:"li"},"/token")," (obligatoire)."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Identifiant client")," : d\xe9finit l'ID client (obligatoire)."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Secret de client")," : d\xe9finit le secret client (obligatoire)."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Port\xe9es")," : d\xe9finit la port\xe9e du fournisseur d'identit\xe9, par exemple ",(0,a.kt)("inlineCode",{parentName:"li"},"openid"),". S\xe9parez diff\xe9rentes port\xe9es par des espaces.",(0,a.kt)("blockquote",{parentName:"li"},(0,a.kt)("p",{parentName:"blockquote"},"Selon le fournisseur d'identit\xe9, il est n\xe9cessaire de saisir plusieurs port\xe9es (scopes) afin de r\xe9cup\xe9rer la valeur\n(claim) qui identifiera l'utilisateur. Ceci est indiqu\xe9 dans la documentation de configuration du fournisseur."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Valeur de la d\xe9claration de connexion")," : d\xe9finit quelle variable renvoy\xe9e par les points d'entr\xe9e\n",(0,a.kt)("strong",{parentName:"li"},"Point d'entr\xe9e de jeton d'introspection")," ou ",(0,a.kt)("strong",{parentName:"li"},"Point d'entr\xe9e d'information utilisateur")," doit \xeatre utilis\xe9e pour\nauthentifier l'utilisateur. Par exemple ",(0,a.kt)("inlineCode",{parentName:"li"},"sub")," ou ",(0,a.kt)("inlineCode",{parentName:"li"},"email"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Point d'entr\xe9e de fin de session")," : d\xe9finit le point d'entr\xe9e de d\xe9connexion, par exemple ",(0,a.kt)("inlineCode",{parentName:"li"},"/logout"),".")),(0,a.kt)("p",null,"Suivant votre fournisseur d'identit\xe9, d\xe9finissez l'un ou l'autre des deux endpoints suivants :"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Point d'entr\xe9e de jeton d'introspection")," : d\xe9finit le point d'entr\xe9e du jeton d'introspection, par exemple ",(0,a.kt)("inlineCode",{parentName:"li"},"/introspect")," (obligatoire)."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Point d'entr\xe9e d'information utilisateur")," : d\xe9finit le point d'entr\xe9e des informations utilisateur, par exemple ",(0,a.kt)("inlineCode",{parentName:"li"},"/userinfo"),".")),(0,a.kt)("p",null,"Vous pouvez \xe9galement configurer\xa0:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Utiliser l'authentification basique pour l'authentification du point d'entr\xe9e de jeton")," : si cette option est activ\xe9e, la\nm\xe9thode ",(0,a.kt)("inlineCode",{parentName:"li"},"Authorization: Basic")," sera utilis\xe9e. Activez cette option si votre fournisseur d'identit\xe9 le demande."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"D\xe9sactiver la v\xe9rification du pair")," : permet de d\xe9sactiver la validation des pairs SSL. Le certificat du fournisseur d'identit\xe9 ne\nsera pas v\xe9rifi\xe9 : cette option ne doit \xeatre utilis\xe9e qu'\xe0 des fins de test.")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Il est possible de d\xe9finir une URL compl\xe8te pour les points de entr\xe9e au cas o\xf9 la base de l'URL est diff\xe9rente\ndes autres.")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Vous pouvez activer ",(0,a.kt)("strong",{parentName:"p"},"Enregistrer les authentifications")," via le menu ",(0,a.kt)("strong",{parentName:"p"},"Administration > Param\xe8tres > D\xe9bogage")," pour comprendre les\n\xe9checs d'authentification et am\xe9liorer votre configuration.")),(0,a.kt)("h3",{id:"\xe9tape-3--configurer-les-conditions-dauthentification"},"\xc9tape 3 : Configurer les conditions d'authentification"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Vous pouvez ajouter des adresses IP en liste blanche ou liste noire. Si vous laissez ces deux champs vides, toutes les\nadresses IP seront autoris\xe9es \xe0 acc\xe9der \xe0 l'interface Centreon."),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Adresses de clients de confiance")," : Si vous entrez des adresses IP dans ce champ, seules ces adresses IP seront\nautoris\xe9es \xe0 acc\xe9der \xe0 l'interface Centreon. Toutes les autres adresses IP seront bloqu\xe9es. S\xe9parez les adressses IP\npar des virgules."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Adresses de clients sur liste noire")," : Ces adresses IP seront bloqu\xe9es. Toutes les autres adresses IP seront autoris\xe9es."))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Vous pouvez \xe9galement d\xe9finir des conditions selon lesquelles les utilisateurs seront autoris\xe9s \xe0 se connecter ou non, en\nfonction des donn\xe9es re\xe7ues par un point d'entr\xe9e particulier."),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"Activer les conditions sur le fournisseur d'identit\xe9"),".")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"D\xe9finissez quel attribut et quel point d'entr\xe9e seront utilis\xe9s pour valider les conditions.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Pour l'option ",(0,a.kt)("strong",{parentName:"p"},"D\xe9finir les valeurs des conditions autoris\xe9es"),", d\xe9finissez quelles valeurs renvoy\xe9es par ce\npoint d'entr\xe9e seront autoris\xe9es. Si vous entrez plusieurs valeurs, toutes devront \xeatre remplies pour que la condition soit valid\xe9e. Tous les\nutilisateurs qui tentent de se connecter avec une autre valeur ne pourront pas se connecter."),(0,a.kt)("p",{parentName:"li"},"Dans l'exemple ci-dessous, la valeur de ",(0,a.kt)("strong",{parentName:"p"},"Chemin de l'attribut des conditions")," est ",(0,a.kt)("strong",{parentName:"p"},"status")," et la valeur de\n",(0,a.kt)("strong",{parentName:"p"},"D\xe9finir les valeurs des conditions autoris\xe9es")," est ",(0,a.kt)("strong",{parentName:"p"},"activated"),". Si le point d'entr\xe9e ",(0,a.kt)("strong",{parentName:"p"},"Point d'entr\xe9e d'introspection"),"\nvous donne la r\xe9ponse suivante, l'utilisateur est autoris\xe9 \xe0 se connecter\xa0:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n    ...\n    "name": "OpenId Connect OIDC",\n    "given_name": "OpenId Connect",\n    "family_name": "OIDC",\n    "preferred_username": "oidc",\n    "email": "oidc@localhost",\n    "email_verified": false,\n    ...\n    "status": "activated"\n}\n')),(0,a.kt)("blockquote",{parentName:"li"},(0,a.kt)("p",{parentName:"blockquote"},"Actuellement, seules les valeurs de type cha\xeene de caract\xe8res peuvent \xeatre utilis\xe9es.")))))),(0,a.kt)("h3",{id:"\xe9tape-4--g\xe9rer-la-cr\xe9ation-dutilisateurs"},"\xc9tape 4 : G\xe9rer la cr\xe9ation d'utilisateurs"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(i.Z,{value:"Gestion automatique utilisateurs",label:"Gestion automatique",mdxType:"TabItem"},(0,a.kt)("p",null,"Si vous activez l'import automatique des utilisateurs, les utilisateurs qui se connecteront \xe0 Centreon pour la premi\xe8re fois\nseront cr\xe9\xe9s dans la configuration Centreon. (Activer l'option n'importe pas automatiquement tous les utilisateurs de votre infrastructure.)"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Activer l'importation automatique")," : active/d\xe9sactive l'import automatique des utilisateurs. Si l'import automatique des utilisateurs\nest d\xe9sactiv\xe9, vous devrez ",(0,a.kt)("a",{parentName:"li",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/monitoring/basic-objects/contacts-create"},"cr\xe9er chaque utilisateur manuellement")," avant que celui-ci ne se connecte."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Mod\xe8le de contact")," : s\xe9lectionnez un ",(0,a.kt)("a",{parentName:"li",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/monitoring/basic-objects/contacts-templates"},"mod\xe8le de contact")," qui sera appliqu\xe9 aux\nnouveaux utilisateurs import\xe9s.\nCela permet notamment de g\xe9rer le param\xe9trage par d\xe9faut des ",(0,a.kt)("a",{parentName:"li",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/alerts-notifications/notif-configuration"},"notifications"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Attribut de l'email")," : d\xe9finit quelle variable renvoy\xe9e par les points d'entr\xe9e ",(0,a.kt)("strong",{parentName:"li"},"Point d'entr\xe9e de jeton d'introspection")," ou\n",(0,a.kt)("strong",{parentName:"li"},"Point d'entr\xe9e d'information utilisateur")," doit \xeatre utilis\xe9e pour r\xe9cup\xe9rer l'adresse email de l'utilisateur."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Attribut du nom complet")," : d\xe9finit quelle variable renvoy\xe9e par les points d'entr\xe9e ",(0,a.kt)("strong",{parentName:"li"},"Point d'entr\xe9e de jeton d'introspection"),"\nou ",(0,a.kt)("strong",{parentName:"li"},"Point d'entr\xe9e d'information utilisateur")," doit \xeatre utilis\xe9e pour r\xe9cup\xe9rer le nom complet de l'utilisateur."))),(0,a.kt)(i.Z,{value:"Gestion manuelle utilisateurs",label:"Gestion manuelle",mdxType:"TabItem"},(0,a.kt)("p",null,"\xc0 la page ",(0,a.kt)("strong",{parentName:"p"},"Configuration > Utilisateurs > Contacts/Utilisateurs"),", ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/monitoring/basic-objects/contacts-create"},"cr\xe9ez les utilisateurs"),"\nqui se connecteront \xe0 Centreon avec OpenID Connect."))),(0,a.kt)("h3",{id:"\xe9tape-5--g\xe9rer-les-autorisations"},"\xc9tape 5 : G\xe9rer les autorisations"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(i.Z,{value:"Role automatic management",label:"Gestion automatique",mdxType:"TabItem"},(0,a.kt)("p",null,"Si vous activez l'option ",(0,a.kt)("strong",{parentName:"p"},"Activer la gestion automatique"),", les utilisateurs qui se connectent \xe0 Centreon se verront\nautomatiquement accorder des ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/administration/access-control-lists"},"droits"),", car ils seront li\xe9s \xe0 des\n",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/administration/access-control-lists#cr%C3%A9er-un-groupe-dacc%C3%A8s"},"groupes d'acc\xe8s")," selon les r\xe8gles que vous avez d\xe9finies."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"D\xe9finissez quel attribut et quel point d'entr\xe9e seront utilis\xe9s pour r\xe9cup\xe9rer des valeurs afin d'appliquer des relations\navec des groupes d'acc\xe8s."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Appliquer uniquement le premier r\xf4le"),": si plusieurs r\xf4les sont trouv\xe9s pour un utilisateur sp\xe9cifique dans les informations du fournisseur\nd'identit\xe9, alors seul le premier r\xf4le sera appliqu\xe9. Si l'option est d\xe9sactiv\xe9e, tous les r\xf4les seront appliqu\xe9s."),(0,a.kt)("li",{parentName:"ul"},"Faites correspondre un attribut extrait du fournisseur d'identit\xe9 avec le groupe d'acc\xe8s auquel vous souhaitez que l'utilisateur\nappartienne.")),(0,a.kt)("p",null,"Par exemple, le ",(0,a.kt)("strong",{parentName:"p"},"Point d'entr\xe9e d'introspection")," vous donne la r\xe9ponse suivante et l'option ",(0,a.kt)("strong",{parentName:"p"},"Appliquer uniquement le premier r\xf4le"),"\nest activ\xe9e. Le ",(0,a.kt)("strong",{parentName:"p"},"Chemin de l'attribut de r\xf4les")," sera ",(0,a.kt)("strong",{parentName:"p"},"realm_access.roles")," et l'option\n",(0,a.kt)("strong",{parentName:"p"},"D\xe9finir la relation entre les r\xf4les et les groupes d'acc\xe8s ACL")," \xe9tablira une relation entre la valeur ",(0,a.kt)("strong",{parentName:"p"},"centreon-editor"),"\net un groupe d'acc\xe8s d\xe9fini dans Centreon :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n    ...\n    "realm_access": {\n        "roles": ["centreon-editor", "centreon-admin", "user"]\n    },\n    ...\n}\n')),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Lors de la r\xe9cup\xe9ration des attributs, Centreon va fusionner les attributs r\xe9cup\xe9r\xe9s dans le JWT (JSON Web Token)\navec ceux r\xe9cup\xe9r\xe9s dans le point d'entr\xe9e s\xe9lectionn\xe9 en donnant priorit\xe9 aux attributs du JWT. Ainsi, si un attribut\nest disponible dans le JWT et dans le point d'entr\xe9e s\xe9lectionn\xe9, alors l'attribut retenu sera celui provenant du JWT.")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\xc0 chaque connexion de l'utilisateur, la gestion des autorisations est r\xe9initialis\xe9e pour prendre en compte toute nouvelle\ninformation en provenance du fournisseur d'identit\xe9."))),(0,a.kt)(i.Z,{value:"Role manual management",label:"Gestion manuelle",mdxType:"TabItem"},(0,a.kt)("p",null,"Si vous d\xe9sactivez l'option ",(0,a.kt)("strong",{parentName:"p"},"Activer la gestion automatique"),", vous devrez ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/administration/access-control-lists"},"attribuer des droits"),"\n\xe0 vos utilisateurs manuellement en liant ceux-ci \xe0 des ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/administration/access-control-lists#cr%C3%A9er-un-groupe-dacc%C3%A8s"},"groupes d'acc\xe8s"),"."))),(0,a.kt)("h3",{id:"\xe9tape-6--g\xe9rer-les-groupes-de-contacts"},"\xc9tape 6 : G\xe9rer les groupes de contacts"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(i.Z,{value:"Groups automatic management",label:"Gestion automatique",mdxType:"TabItem"},(0,a.kt)("p",null,"Si vous activez l'option ",(0,a.kt)("strong",{parentName:"p"},"Activer la gestion automatique"),", les utilisateurs qui se connectent \xe0 Centreon seront rattach\xe9s\naux ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/monitoring/basic-objects/contacts-groups#cr%C3%A9er-un-groupe-de-contacts"},"groupes de contacts")," que vous avez d\xe9finis."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"D\xe9finissez quel attribut et quel point d'entr\xe9e seront utilis\xe9s pour r\xe9cup\xe9rer des valeurs afin de cr\xe9er des relations avec\ndes groupes d'acc\xe8s."),(0,a.kt)("li",{parentName:"ul"},"Faites correspondre les attributs extraits du fournisseur d'identit\xe9 avec les groupes de contacts auxquels vous souhaitez\nque l'utilisateur appartienne.")),(0,a.kt)("p",null,"Par exemple, le ",(0,a.kt)("strong",{parentName:"p"},"Point d'entr\xe9e d'introspection")," vous donne la r\xe9ponse suivante. Le ",(0,a.kt)("strong",{parentName:"p"},"Chemin de l'attribut de groupes"),"\nsera ",(0,a.kt)("strong",{parentName:"p"},"groups")," et l'option ",(0,a.kt)("strong",{parentName:"p"},"D\xe9finir la relation entre les groupes et les groupes de contact")," \xe9tablira une relation entre\nla valeur ",(0,a.kt)("strong",{parentName:"p"},"Linux")," et un groupe de contacts d\xe9fini dans Centreon :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n    ...\n    "groups": ["Windows", "Linux", "DBA"],\n    ...\n}\n')),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"\xc0 chaque connexion de l'utilisateur, la gestion des groupes est r\xe9initialis\xe9e pour prendre en compte toute nouvelle\ninformation en provenance du fournisseur d'identit\xe9.")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Lors de la r\xe9cup\xe9ration des attributs, Centreon va fusionner les attributs r\xe9cup\xe9r\xe9s dans le JWT (JSON Web Token)\navec ceux r\xe9cup\xe9r\xe9s dans le point d'entr\xe9e s\xe9lectionn\xe9 en donnant priorit\xe9 aux attributs du JWT. Ainsi, si un attribut\nest disponible dans le JWT et dans le point d'entr\xe9e s\xe9lectionn\xe9, alors l'attribut retenu sera celui provenant du JWT."))),(0,a.kt)(i.Z,{value:"Groups manual management",label:"Gestion manuelle",mdxType:"TabItem"},(0,a.kt)("p",null,"Si vous d\xe9sactivez l'otion ",(0,a.kt)("strong",{parentName:"p"},"Activer la gestion automatique"),", vous devrez g\xe9rer manuellement les relations entre contacts et ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/monitoring/basic-objects/contacts-groups#cr%C3%A9er-un-groupe-de-contacts"},"groupes de contacts"),"."))),(0,a.kt)("h3",{id:"\xe9tape-7--configurer-le-fournisseur-didentit\xe9"},"\xc9tape 7 : Configurer le fournisseur d'identit\xe9"),(0,a.kt)("p",null,"Configurez votre fournisseur d'identit\xe9 pour ajouter l'application Centreon \xe0 utiliser le protocole OpenID Connect pour\nauthentifier vos utilisateur, et pour autoriser l'uri de redirection suivante une fois vos utilisateurs authentifi\xe9s :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"{protocol}://{server}:{port}/centreon/authentication/providers/configurations/openid\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Remplacez ",(0,a.kt)("inlineCode",{parentName:"p"},"{protocol}"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"{server}")," et ",(0,a.kt)("inlineCode",{parentName:"p"},"{port}")," par l'URI permettant d'acc\xe9der \xe0 votre serveur Centreon.\nPar exemple : ",(0,a.kt)("inlineCode",{parentName:"p"},"https://centreon.domain.net/centreon/authentication/providers/configurations/openid"))),(0,a.kt)("h3",{id:"exemples-de-configuration"},"Exemples de configuration"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(i.Z,{value:"Microsoft Azure AD",label:"Microsoft Azure AD",mdxType:"TabItem"},(0,a.kt)("p",null,"Voici un exemple de configuration pour Microsoft Azure Active Directory:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Champs"),(0,a.kt)("th",{parentName:"tr",align:null},"Valeurs"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Base Url"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"https://login.microsoftonline.com/$%7BtenantId%7D/oauth2/v2.0"},"https://login.microsoftonline.com/${tenantId}/oauth2/v2.0"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Authorization Endpoint"),(0,a.kt)("td",{parentName:"tr",align:null},"/authorize")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Token Endpoint"),(0,a.kt)("td",{parentName:"tr",align:null},"/token")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"User Information Endpoint"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"https://graph.microsoft.com/oidc/userinfo"},"https://graph.microsoft.com/oidc/userinfo"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"End Session Endpoint"),(0,a.kt)("td",{parentName:"tr",align:null})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Scope"),(0,a.kt)("td",{parentName:"tr",align:null},"openid")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Login claim value"),(0,a.kt)("td",{parentName:"tr",align:null},"email")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Client ID"),(0,a.kt)("td",{parentName:"tr",align:null},"${clientId}")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Client Secret"),(0,a.kt)("td",{parentName:"tr",align:null},"${clientSecret}")))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Remplacez ",(0,a.kt)("inlineCode",{parentName:"p"},"${tenantId}"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"${clientId}")," et ",(0,a.kt)("inlineCode",{parentName:"p"},"${clientSecret}")," par vos propres valeurs."))),(0,a.kt)(i.Z,{value:"Okta",label:"Okta",mdxType:"TabItem"},(0,a.kt)("p",null,"Voici un exemple de configuration pour Okta:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Champs"),(0,a.kt)("th",{parentName:"tr",align:null},"Valeurs"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Base Url"),(0,a.kt)("td",{parentName:"tr",align:null},"https://${theIdPdomain}/oauth2/v1")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Authorization Endpoint"),(0,a.kt)("td",{parentName:"tr",align:null},"/authorize")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Token Endpoint"),(0,a.kt)("td",{parentName:"tr",align:null},"/token")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Introspection Token Endpoint"),(0,a.kt)("td",{parentName:"tr",align:null},"/introspect")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"User Information Endpoint"),(0,a.kt)("td",{parentName:"tr",align:null},"/userinfo")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"End Session Endpoint"),(0,a.kt)("td",{parentName:"tr",align:null},"/logout")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Scope"),(0,a.kt)("td",{parentName:"tr",align:null},"profile openid")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Login claim value"),(0,a.kt)("td",{parentName:"tr",align:null},"username")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Client ID"),(0,a.kt)("td",{parentName:"tr",align:null},"${clientId}")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Client Secret"),(0,a.kt)("td",{parentName:"tr",align:null},"${clientSecret}")))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Remplacez ",(0,a.kt)("inlineCode",{parentName:"p"},"${theIdPdomain}"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"${clientId}")," et ",(0,a.kt)("inlineCode",{parentName:"p"},"${clientSecret}")," par vos propres valeurs."))),(0,a.kt)(i.Z,{value:"Keycloak",label:"Keycloak",mdxType:"TabItem"},(0,a.kt)("p",null,"Voici un exemple de configuration pour Keycloak:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Champs"),(0,a.kt)("th",{parentName:"tr",align:null},"Valeurs"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Base Url"),(0,a.kt)("td",{parentName:"tr",align:null},"https://${theIdPdomain}:8080/auth/realms/master/protocol/openid-connect")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Authorization Endpoint"),(0,a.kt)("td",{parentName:"tr",align:null},"/auth")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Token Endpoint"),(0,a.kt)("td",{parentName:"tr",align:null},"/token")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Introspection Token Endpoint"),(0,a.kt)("td",{parentName:"tr",align:null},"/token/introspect")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"User Information Endpoint"),(0,a.kt)("td",{parentName:"tr",align:null})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"End Session Endpoint"),(0,a.kt)("td",{parentName:"tr",align:null},"/logout")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Scope"),(0,a.kt)("td",{parentName:"tr",align:null},"openid")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Login claim value"),(0,a.kt)("td",{parentName:"tr",align:null},"email")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Client ID"),(0,a.kt)("td",{parentName:"tr",align:null},"${clientId}")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Client Secret"),(0,a.kt)("td",{parentName:"tr",align:null},"${clientSecret}")))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Remplacez ",(0,a.kt)("inlineCode",{parentName:"p"},"${theIdPdomain}"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"${clientId}")," et ",(0,a.kt)("inlineCode",{parentName:"p"},"${clientSecret}")," par vos propres valeurs."))),(0,a.kt)(i.Z,{value:"LemonLDAP::NG",label:"LemonLDAP::NG",mdxType:"TabItem"},(0,a.kt)("p",null,"Voici un exemple de configuration pour LemonLDAP::NG:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Champs"),(0,a.kt)("th",{parentName:"tr",align:null},"Valeurs"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Base Url"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("a",{parentName:"td",href:"http://auth.example.com/oauth2"},"http://auth.example.com/oauth2"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Authorization Endpoint"),(0,a.kt)("td",{parentName:"tr",align:null},"/authorize")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Token Endpoint"),(0,a.kt)("td",{parentName:"tr",align:null},"/token")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Introspection Token Endpoint"),(0,a.kt)("td",{parentName:"tr",align:null},"/introspect")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"User Information Endpoint"),(0,a.kt)("td",{parentName:"tr",align:null},"/userinfo")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"End Session Endpoint"),(0,a.kt)("td",{parentName:"tr",align:null})),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Scope"),(0,a.kt)("td",{parentName:"tr",align:null},"openid")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Login claim value"),(0,a.kt)("td",{parentName:"tr",align:null},"email")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Client ID"),(0,a.kt)("td",{parentName:"tr",align:null},"${clientId}")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Client Secret"),(0,a.kt)("td",{parentName:"tr",align:null},"${clientSecret}")))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Remplacez ",(0,a.kt)("inlineCode",{parentName:"p"},"auth.example.com"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"${clientId}")," et ",(0,a.kt)("inlineCode",{parentName:"p"},"${clientSecret}")," par vos propres valeurs."))),(0,a.kt)(i.Z,{value:"Autres",label:"Autres",mdxType:"TabItem"},(0,a.kt)("p",null,"La plupart des fournisseurs de services ont une URL pr\xe9sentant la configuration des param\xe8tres de configuration telle que\nd\xe9finie par ",(0,a.kt)("a",{parentName:"p",href:"https://openid.net/specs/openid-connect-discovery-1_0#ProviderConfig"},"le protocole"),"."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "issuer": "https://server.example.com",\n    "authorization_endpoint": "https://server.example.com/connect/authorize",\n    "token_endpoint": "https://server.example.com/connect/token",\n    "token_endpoint_auth_methods_supported": ["client_secret_basic", "private_key_jwt"],\n    "token_endpoint_auth_signing_alg_values_supported": ["RS256", "ES256"],\n    "userinfo_endpoint": "https://server.example.com/connect/userinfo",\n    "check_session_iframe": "https://server.example.com/connect/check_session",\n    "end_session_endpoint": "https://server.example.com/connect/end_session",\n    "jwks_uri": "https://server.example.com/jwks.json",\n    "registration_endpoint": "https://server.example.com/connect/register",\n    "scopes_supported": ["openid", "profile", "email", "address", "phone", "offline_access"],\n    "response_types_supported": ["code", "code id_token", "id_token", "token id_token"],\n    "acr_values_supported": ["urn:mace:incommon:iap:silver", "urn:mace:incommon:iap:bronze"],\n    "subject_types_supported": ["public", "pairwise"],\n    "userinfo_signing_alg_values_supported": ["RS256", "ES256", "HS256"],\n    "userinfo_encryption_alg_values_supported": ["RSA1_5", "A128KW"],\n    "userinfo_encryption_enc_values_supported": ["A128CBC-HS256", "A128GCM"],\n    "id_token_signing_alg_values_supported": ["RS256", "ES256", "HS256"],\n    "id_token_encryption_alg_values_supported": ["RSA1_5", "A128KW"],\n    "id_token_encryption_enc_values_supported": ["A128CBC-HS256", "A128GCM"],\n    "request_object_signing_alg_values_supported": ["none", "RS256", "ES256"],\n    "display_values_supported": ["page", "popup"],\n    "claim_types_supported": ["normal", "distributed"],\n    "claims_supported": ["sub", "iss", "auth_time", "acr",\n        "name", "given_name", "family_name", "nickname",\n        "profile", "picture", "website",\n        "email", "email_verified", "locale", "zoneinfo",\n        "http://example.info/claims/groups"\n    ],\n    "claims_parameter_supported": true,\n    "service_documentation": "http://server.example.com/connect/service_documentation",\n    "ui_locales_supported": ["en-US", "en-GB", "en-CA", "fr-FR", "fr-CA"]\n}\n')),(0,a.kt)("p",null,"R\xe9cup\xe9rez les param\xe8tres suivants pour configurer votre Centreon :"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"issuer (Base Url)"),(0,a.kt)("li",{parentName:"ul"},"authorization_endpoint"),(0,a.kt)("li",{parentName:"ul"},"token_endpoint"),(0,a.kt)("li",{parentName:"ul"},"userinfo_endpoint"),(0,a.kt)("li",{parentName:"ul"},"end_session_endpoint"),(0,a.kt)("li",{parentName:"ul"},"scopes_supported"),(0,a.kt)("li",{parentName:"ul"},"claims_supported (Login claim value)")))))}N.isMDXComponent=!0}}]);