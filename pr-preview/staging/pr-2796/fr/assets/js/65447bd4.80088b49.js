"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[98455],{83758:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>d,default:()=>N,frontMatter:()=>p,metadata:()=>m,toc:()=>g});n(67294);var a=n(3905),r=n(51715),l=n(7626);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const p={id:"sc-opsgenie",title:"Opsgenie integration"},d=void 0,m={unversionedId:"integrations/event-management/sc-opsgenie",id:"version-23.10/integrations/event-management/sc-opsgenie",title:"Opsgenie integration",description:"Avantages de l'int\xe9gration Opsgenie + Centreon",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-23.10/integrations/event-management/sc-opsgenie.md",sourceDirName:"integrations/event-management",slug:"/integrations/event-management/sc-opsgenie",permalink:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/integrations/event-management/sc-opsgenie",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/i18n/fr/docusaurus-plugin-content-docs/version-23.10/integrations/event-management/sc-opsgenie.md",tags:[],version:"23.10",lastUpdatedAt:1699281350,formattedLastUpdatedAt:"6 nov. 2023",frontMatter:{id:"sc-opsgenie",title:"Opsgenie integration"},sidebar:"version-23.10/docs",previous:{title:"HP OMI",permalink:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/integrations/event-management/sc-hp-omi"},next:{title:"PagerDuty Events",permalink:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/integrations/event-management/sc-pagerduty-events"}},u={},g=[{value:"Avantages de l&#39;int\xe9gration Opsgenie + Centreon",id:"avantages-de-lint\xe9gration-opsgenie--centreon",level:2},{value:"Comment \xe7a marche",id:"comment-\xe7a-marche",level:2},{value:"Pr\xe9requis",id:"pr\xe9requis",level:2},{value:"Support",id:"support",level:2},{value:"Guide d&#39;int\xe9gration",id:"guide-dint\xe9gration",level:2},{value:"Dans Opsgenie",id:"dans-opsgenie",level:3},{value:"int\xe9gration Opsgenie: alerts",id:"int\xe9gration-opsgenie-alerts",level:4},{value:"Opsgenie integration: incidents",id:"opsgenie-integration-incidents",level:4},{value:"Dans Centreon",id:"dans-centreon",level:3},{value:"Installation",id:"installation",level:4},{value:"Broker configuration",id:"broker-configuration",level:4},{value:"Configuration avanc\xe9e",id:"configuration-avanc\xe9e",level:4},{value:"Comment d\xe9sinstaller",id:"comment-d\xe9sinstaller",level:2},{value:"Macros",id:"macros",level:2},{value:"Host event macros",id:"host-event-macros",level:4},{value:"Service event macros",id:"service-event-macros",level:4},{value:"BA event macros",id:"ba-event-macros",level:4}],k={toc:g},c="wrapper";function N(e){var{components:t}=e,n=s(e,["components"]);return(0,a.kt)(c,o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){i(e,t,n[t])}))}return e}({},k,n),{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"avantages-de-lint\xe9gration-opsgenie--centreon"},"Avantages de l'int\xe9gration Opsgenie + Centreon"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"G\xe9rez vos notification quand une alerte est d\xe9tect\xe9e par Centreon"),(0,a.kt)("li",{parentName:"ul"},"Evitez les doublons d'alertes de Centreon"),(0,a.kt)("li",{parentName:"ul"},"Distinguez les alertes et les incidents en couplant Centreon BAM et Opsgenie"),(0,a.kt)("li",{parentName:"ul"},"Cr\xe9ez un reporting reposant sur les notifications de Centreon")),(0,a.kt)("h2",{id:"comment-\xe7a-marche"},"Comment \xe7a marche"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"A chaque fois que le statut d'un service, h\xf4te ou BA est contr\xf4l\xe9, l'\xe9v\xe8nement passe par Centreon Broker qui utilise le Stream Connector puor envoyer ce changement d'\xe9tat."),(0,a.kt)("li",{parentName:"ul"},"Un changement d'\xe9tat peut survenir en cas de d\xe9tection d'anomalie"),(0,a.kt)("li",{parentName:"ul"},"Un alias est g\xe9n\xe9r\xe9 pour chaque alerte afin de profiter de la d\xe9duplication d'Opsgenie")),(0,a.kt)("h2",{id:"pr\xe9requis"},"Pr\xe9requis"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"L'int\xe9gration d'Opsgenie n\xe9cessite deux cl\xe9 d'API diff\xe9rentes. La premi\xe8re est une cl\xe9 d'int\xe9gration provenant de l'int\xe9gration ",(0,a.kt)("strong",{parentName:"li"},"Rest API HTTPS over JSON"),". Cette int\xe9gration doit avoir les droits ",(0,a.kt)("strong",{parentName:"li"},"Create and Update Access"),". la seconde cl\xe9 est une cl\xe9 d'API provenant des ",(0,a.kt)("strong",{parentName:"li"},"APP Settings"),". Cette cl\xe9 doit avoir les droits d'acc\xe8s ",(0,a.kt)("strong",{parentName:"li"},"Create and Update")),(0,a.kt)("li",{parentName:"ul"},"Il est aussi n\xe9cessaire d'avoir un compte Centreon avec soit des ",(0,a.kt)("strong",{parentName:"li"},"droits admin")," ou alors la possibilit\xe9 ",(0,a.kt)("strong",{parentName:"li"},"d'exporter les configuration")," et ",(0,a.kt)("strong",{parentName:"li"},"configurer le broker"),". Il faut aussi un acc\xe8s en tant que ",(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"root")," en ligne de commande sur le serveur Centreon"),".")),(0,a.kt)("h2",{id:"support"},"Support"),(0,a.kt)("p",null,"Si vous avez besoin d'aide avec cette int\xe9gration, selon votre utilisation de Centreon, vous pouvez :"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Client Business Edition"),": Contactez le ",(0,a.kt)("a",{parentName:"li",href:"mailto:support@centreon.com"},"support Centreon"),"."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Utilisateurs open source")," ou ",(0,a.kt)("strong",{parentName:"li"},"Utilisateurs Centreon IT-100")," (version gratuite): Rejoignez notre ",(0,a.kt)("a",{parentName:"li",href:"https://centreon.github.io"},"communaut\xe9 slack")," o\xf9 les utiisateurs et les \xe9quipes Centreon pourront vous r\xe9pondre.")),(0,a.kt)("h2",{id:"guide-dint\xe9gration"},"Guide d'int\xe9gration"),(0,a.kt)("h3",{id:"dans-opsgenie"},"Dans Opsgenie"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Attention, cette documentation a \xe9t\xe9 \xe9crite en f\xe9vrier 2021, il est possible que des changements sur Opsgenie rendent obsol\xe8te des \xe9l\xe9ments d\xe9crits ci-dessous")),(0,a.kt)("h4",{id:"int\xe9gration-opsgenie-alerts"},"int\xe9gration Opsgenie: alerts"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Depuis le menu ",(0,a.kt)("strong",{parentName:"li"},"Setting"),", selectionnez ",(0,a.kt)("strong",{parentName:"li"},"Integration list")),(0,a.kt)("li",{parentName:"ol"},"Dans la liste des int\xe9grations, ajoutez l'int\xe9graiton ",(0,a.kt)("strong",{parentName:"li"},"API")," (Rest API HTTPS over JSON)"),(0,a.kt)("li",{parentName:"ol"},"Rendez vous dans le menu ",(0,a.kt)("strong",{parentName:"li"},"Configured integrations")," et \xe9ditez votre int\xe9gration ",(0,a.kt)("strong",{parentName:"li"},"API")," pour l'activer si elle ne l'est pas. Vous devez aussi donner les droits ",(0,a.kt)("strong",{parentName:"li"},"Create and Update Access"),". Sauvegardez votre coniguration ainsi que votre ",(0,a.kt)("strong",{parentName:"li"},"API Key")," qui est obligatoire pour l'envoi d'alertes depuis Centreon vers Opsgenie. Cette ",(0,a.kt)("strong",{parentName:"li"},"API Key")," est r\xe9f\xe9rr\xe9e en tant qu'",(0,a.kt)("strong",{parentName:"li"},"integration_api_token")," dans la configuration Centreon")),(0,a.kt)("h4",{id:"opsgenie-integration-incidents"},"Opsgenie integration: incidents"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Avant de commencer, cette int\xe9gration ne marchera que si vous utilisez le module Centreon BAM"),(0,a.kt)("li",{parentName:"ol"},"Depuis le menu ",(0,a.kt)("strong",{parentName:"li"},"Settings"),", allez dans la sous cat\xe9gorie ",(0,a.kt)("strong",{parentName:"li"},"APP SETTINGS")," pour y trouver le menu ",(0,a.kt)("strong",{parentName:"li"},"API key management")),(0,a.kt)("li",{parentName:"ol"},"Dans le menu ",(0,a.kt)("strong",{parentName:"li"},"API key management")," ajoutez une nouvelle ",(0,a.kt)("strong",{parentName:"li"},"API key")," avec les droits ",(0,a.kt)("strong",{parentName:"li"},"Create and Update")),(0,a.kt)("li",{parentName:"ol"},"Sauvegardez votre configuration et votre ",(0,a.kt)("strong",{parentName:"li"},"Api key")," qui est obligatoire pour envoyer des incidents depuis Centreon vers Opsgenie. Cette ",(0,a.kt)("strong",{parentName:"li"},"API key")," est r\xe9f\xe9rr\xe9e en tant qu'",(0,a.kt)("strong",{parentName:"li"},"app_api_token")," dans le configuration Centreon.")),(0,a.kt)("h3",{id:"dans-centreon"},"Dans Centreon"),(0,a.kt)("h4",{id:"installation"},"Installation"),(0,a.kt)("p",null,"Connectez vous en tant que ",(0,a.kt)("inlineCode",{parentName:"p"},"root")," sur le serveur Centreon central en utilisant votre client SSH pr\xe9f\xe9r\xe9."),(0,a.kt)("p",null,"Lancer la commande adapt\xe9e \xe0 votre syst\xe8me :"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-stream-connector-opsgenie\n"))),(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install centreon-stream-connector-opsgenie\n"))),(0,a.kt)(l.Z,{value:"Debian 11",label:"Debian_11",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"apt install centreon-stream-connector-opsgenie\n")))),(0,a.kt)("p",null,"Le Stream Connector Opsgenie est maintenant install\xe9 sur votre serveur Centreon central !"),(0,a.kt)("h4",{id:"broker-configuration"},"Broker configuration"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Connectez vous sur l'interface web votre Centreon avec un compte administrateur"),(0,a.kt)("li",{parentName:"ol"},"Rendez vous dans le menu ",(0,a.kt)("strong",{parentName:"li"},"Configuration")," > ",(0,a.kt)("strong",{parentName:"li"},"Collecteurs")," et allez dans ",(0,a.kt)("strong",{parentName:"li"},"Configuration Broker")),(0,a.kt)("li",{parentName:"ol"},"Cliquez sur la configuration broker ",(0,a.kt)("strong",{parentName:"li"},"central-broker-master")," et allez dans l'onglet ",(0,a.kt)("strong",{parentName:"li"},"ouput")),(0,a.kt)("li",{parentName:"ol"},"Ajoutez un nouvel output ",(0,a.kt)("strong",{parentName:"li"},"Generic - Stream connector"),"."),(0,a.kt)("li",{parentName:"ol"},"Nommez le comme vous le souhaitez (ex : ",(0,a.kt)("strong",{parentName:"li"},"Opsgenie"),") et indiquez le bon chemin pour le script LUA : ",(0,a.kt)("inlineCode",{parentName:"li"},"/usr/share/centreon-broker/lua/opsgenie.lua"),"."),(0,a.kt)("li",{parentName:"ol"},"Ajoutez au moins un param\xe8tre string. Ce param\xe8tre est une cl\xe9 d'API qui doit \xeatre configur\xe9e. Le nom du param\xe8tre ",(0,a.kt)("em",{parentName:"li"},"doit \xeatre")," ",(0,a.kt)("inlineCode",{parentName:"li"},"app_api_token")," (pour les alertes) ou ",(0,a.kt)("inlineCode",{parentName:"li"},"integration_api_token")," (pour les incidents, n\xe9cessite le module Centreon BAM). Si vous voulez utilisez ces deux aspects alors vous devez renseigner les deux param\xe8tres dans la configuration.")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Name"),(0,a.kt)("th",{parentName:"tr",align:null},"Type"),(0,a.kt)("th",{parentName:"tr",align:null},"Value"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"app_api_token")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"<paste your key here>"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"integration_api_token")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"<paste your key here>"))))),(0,a.kt)("ol",{start:7},(0,a.kt)("li",{parentName:"ol"},"Sauvegardez votre configuration puis naviguez dans le menu ",(0,a.kt)("strong",{parentName:"li"},"Configurtion")," > ",(0,a.kt)("strong",{parentName:"li"},"Collecteurs")," et choisissez ",(0,a.kt)("strong",{parentName:"li"},"collecteurs"),"."),(0,a.kt)("li",{parentName:"ol"},"S\xe9lectionnez le collecteur ",(0,a.kt)("strong",{parentName:"li"},"Central")," et cliquez sur ",(0,a.kt)("strong",{parentName:"li"},"Exporter la configuration")),(0,a.kt)("li",{parentName:"ol"},"Gardez ",(0,a.kt)("strong",{parentName:"li"},"G\xe9n\xe9rer les fichiers de configuration")," et ",(0,a.kt)("strong",{parentName:"li"},"Lancer le d\xe9bogage du moteur de supervision (-v)")," coch\xe9es et cochez aussi ",(0,a.kt)("strong",{parentName:"li"},"D\xe9placer les fichiers g\xe9n\xe9r\xe9s")," puis cliquez sur le bouton ",(0,a.kt)("strong",{parentName:"li"},"Exporter"),".."),(0,a.kt)("li",{parentName:"ol"},"Red\xe9marrez le service ",(0,a.kt)("inlineCode",{parentName:"li"},"cbd")," :")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"systemctl restart cbd\n")),(0,a.kt)("p",null,"Maintenant votre serveur central a charg\xe9 le Stream Connector Opsgenie et commence \xe0 envoyer de la donn\xe9e !"),(0,a.kt)("p",null,"To make sure that everything goes fine, you should have a look at ",(0,a.kt)("inlineCode",{parentName:"p"},"central-broker-master.log")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"connector-opsgenie.log"),", both located in ",(0,a.kt)("inlineCode",{parentName:"p"},"/var/log/centreon-broker"),".\nPour \xeatre s\xfbr que tout va bien, vous pouvez jeter un oeil aux fichiers de log ",(0,a.kt)("inlineCode",{parentName:"p"},"central-broker-master.log")," et ",(0,a.kt)("inlineCode",{parentName:"p"},"connector-opsgenie.log"),". Tous deux sont situ\xe9s dans ",(0,a.kt)("inlineCode",{parentName:"p"},"/var/log/centreon-broker"),"."),(0,a.kt)("h4",{id:"configuration-avanc\xe9e"},"Configuration avanc\xe9e"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Table des param\xe8tres")),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Name"),(0,a.kt)("th",{parentName:"tr",align:null},"Type"),(0,a.kt)("th",{parentName:"tr",align:null},"Default value"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"api_url")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"https://api.opsgenie.com")),(0,a.kt)("td",{parentName:"tr",align:null},"Adresse API d'Opsgenie. Utilisez ",(0,a.kt)("a",{parentName:"td",href:"https://api.eu.opsgenie.com"},"https://api.eu.opsgenie.com")," si votre instance est en Europe")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"proxy_address")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"Si besoint, l'adresse du serveur proxy (n\xe9cessite le param\xe8tre proxy_port)")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"proxy_port")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"Le port du serveur proxy")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"proxy_username")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"Si besoin, l'utilisateur pour le proxy (n\xe9cessite le param\xe8tre proxy_password)")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"proxy_password")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"Le mot de passe de l'utilisateur du serveur proxy")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"logfile")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"/var/log/centreon-broker/connector-opsgenie.log")),(0,a.kt)("td",{parentName:"tr",align:null},"Le fichier de log du stream connector")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"host_status")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"0,1,2")),(0,a.kt)("td",{parentName:"tr",align:null},"Envoie les \xe9v\xe8nements d'h\xf4te up, down and unreachable")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"service_status")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"0,1,2,3")),(0,a.kt)("td",{parentName:"tr",align:null},"Envoie les \xe9v\xe8nements de service ok, warning, critical, unknown services")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"ba_status")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"0,1,2")),(0,a.kt)("td",{parentName:"tr",align:null},"Envoie les \xe9v\xe8nements de BA ok, warning, critical business activities")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"hard_only")),(0,a.kt)("td",{parentName:"tr",align:null},"Number"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"1")),(0,a.kt)("td",{parentName:"tr",align:null},"Envoie uniquement les \xe9v\xe8nements en \xe9tat HARD")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"acknowledged")),(0,a.kt)("td",{parentName:"tr",align:null},"Number"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"0")),(0,a.kt)("td",{parentName:"tr",align:null},"Envoie uniquement les \xe9v\xe8nements qui ne sont pas acquitt\xe9s")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"element_type")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"host_status,service_status,ba_status")),(0,a.kt)("td",{parentName:"tr",align:null},"Envoie les \xe9v\xe8nements de statut des h\xf4tes, services et BA")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"category_type")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"neb,bam")),(0,a.kt)("td",{parentName:"tr",align:null},"Filtre les \xe9v\xe8nements qui ne sont pas du neb ou du bam")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"in_downtime")),(0,a.kt)("td",{parentName:"tr",align:null},"Number"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"0")),(0,a.kt)("td",{parentName:"tr",align:null},"Envoie uniquement les \xe9v\xe8nements qui ne sont pas en downtime")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"max_buffer_size")),(0,a.kt)("td",{parentName:"tr",align:null},"Number"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"1")),(0,a.kt)("td",{parentName:"tr",align:null},"Envoie les \xe9v\xe8nements un par un")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"max_buffer_age")),(0,a.kt)("td",{parentName:"tr",align:null},"Number"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"5")),(0,a.kt)("td",{parentName:"tr",align:null},"Stocke les \xe9v\xe8nements pendant 5 secondes \xe0 moins que le max_buffer_size soit atteint avant")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"max_stored_events")),(0,a.kt)("td",{parentName:"tr",align:null},"Number"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"10")),(0,a.kt)("td",{parentName:"tr",align:null},"Garde les \xe9v\xe8nements en m\xe9moire pour \xe9viter d'envoyer des duplicatas. Ne pas modifier sans ma\xeetriser les Stream Connectors")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"skip_anon_events")),(0,a.kt)("td",{parentName:"tr",align:null},"Number"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"1")),(0,a.kt)("td",{parentName:"tr",align:null},"N'envoie pas les \xe9v\xe8nements dont l'h\xf4te ou le service ne sont pas trouv\xe9s dans le cache du broker")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"skip_nil_id")),(0,a.kt)("td",{parentName:"tr",align:null},"Number"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"1")),(0,a.kt)("td",{parentName:"tr",align:null},"N'envoie pes les \xe9v\xe8nements qui n'ont pas d'ID. (meta-service la plupart du temps)")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"accepted_hostgroups")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"Liste des groupes d'h\xf4tes dans lequel un h\xf4te doit \xeatre (s\xe9parateur ",(0,a.kt)("inlineCode",{parentName:"td"},",")," ex : grp1,grp2,grp3)")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"date_format")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"%Y-%m-%d %H:%M:%S")),(0,a.kt)("td",{parentName:"tr",align:null},"Format de conversion par d\xe9faut des timestamps (",(0,a.kt)("a",{parentName:"td",href:"https://www.lua.org/pil/22.1"},"https://www.lua.org/pil/22.1"),")")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"host_alert_message")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"{last_update_date} {hostname} is {state}")),(0,a.kt)("td",{parentName:"tr",align:null},"Le message par d\xe9faut des alertes d'h\xf4te. Voir ",(0,a.kt)("a",{parentName:"td",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/integrations/event-management/sc-opsgenie#host-event-macros"},"host event macros")," pour plus de d\xe9tails sur les macros")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"host_alert_description")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"La description par d\xe9faut des alertes d'h\xf4te. See ",(0,a.kt)("a",{parentName:"td",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/integrations/event-management/sc-opsgenie#host-event-macros"},"host event macros")," for more details about macros")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"host_alert_alias")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"{hostname}_{state}")),(0,a.kt)("td",{parentName:"tr",align:null},"L'alias par d\xe9faut des alertes d'h\xf4te. Utile pour la d\xe9duplication d'alertes See ",(0,a.kt)("a",{parentName:"td",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/integrations/event-management/sc-opsgenie#host-event-macros"},"host event macros")," for more details about macros")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"service_alert_message")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"{last_update_date} {hostname} // {serviceDescription} is {state}")),(0,a.kt)("td",{parentName:"tr",align:null},"Le message par d\xe9faut des alertes de service. See ",(0,a.kt)("a",{parentName:"td",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/integrations/event-management/sc-opsgenie#service-event-macros"},"service event macros")," for more details about macros")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"service_alert_description")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"La description par d\xe9faut des alertes de service. See ",(0,a.kt)("a",{parentName:"td",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/integrations/event-management/sc-opsgenie#service-event-macros"},"service event macros")," for more details about macros")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"service_alert_alias")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"{hostname}_{serviceDescription}_{state}")),(0,a.kt)("td",{parentName:"tr",align:null},"L'alias par d\xe9faut des alertes de service. Utile pour la d\xe9duplication d'alertes. See ",(0,a.kt)("a",{parentName:"td",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/integrations/event-management/sc-opsgenie#service-event-macros"},"service event macros")," for more details about macros")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"ba_incident_message")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"{baName} is {state}, health level reached {level_nominal}")),(0,a.kt)("td",{parentName:"tr",align:null},"Le message par d\xe9faut des incidents de BA. See ",(0,a.kt)("a",{parentName:"td",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/integrations/event-management/sc-opsgenie#ba-event-macros"},"BA event macros")," for more details about macros")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"ba_incident_description")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"La description par d\xe9faut des incidents de BA. See ",(0,a.kt)("a",{parentName:"td",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/integrations/event-management/sc-opsgenie#ba-event-macros"},"BA event macros")," for more details about macros")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"enable_incident_tags")),(0,a.kt)("td",{parentName:"tr",align:null},"Number"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"1")),(0,a.kt)("td",{parentName:"tr",align:null},"Ajoute les tags pour les incidents")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"get_bv")),(0,a.kt)("td",{parentName:"tr",align:null},"Number"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"1")),(0,a.kt)("td",{parentName:"tr",align:null},"Ajoute le nom des BV dans les tags si ",(0,a.kt)("inlineCode",{parentName:"td"},"enable_incident_tags")," est \xe0 ",(0,a.kt)("inlineCode",{parentName:"td"},"1"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"ba_incident_tags")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"centreon,applications")),(0,a.kt)("td",{parentName:"tr",align:null},"Liste de tags pour un incident. Doit utiliser la virgule comme s\xe9parateur. Les noms des BV seront ajout\xe9s automatiquement dans les tags")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"enable_severity")),(0,a.kt)("td",{parentName:"tr",align:null},"Number"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"0")),(0,a.kt)("td",{parentName:"tr",align:null},"Si positionn\xe9 \xe0 1, essaie de lier une s\xe9v\xe9rit\xe9 de Centreon \xe0 une priorit\xe9 d'Opsgenie")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"priority_must_be_set")),(0,a.kt)("td",{parentName:"tr",align:null},"Number"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"0")),(0,a.kt)("td",{parentName:"tr",align:null},"Ignorera l'alerte si positionn\xe9 \xe0 1 et qu'aucune s\xe9v\xe9rit\xe9 ne correspond \xe0 une priorit\xe9 selon la relation \xe9tablie dans le param\xe8tre ",(0,a.kt)("inlineCode",{parentName:"td"},"priority_matching"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"priority_matching")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"P1=1,P2=2,P3=3,P4=4,P5=5")),(0,a.kt)("td",{parentName:"tr",align:null},"Associe une priorit\xe9 \xe0 une s\xe9v\xe9rit\xe9 selon la syntaxe suivante : nom_priorit\xe9=valeur_s\xe9v\xe9rit\xe9,nom_priorit\xe9=valeur_s\xe9v\xe9rit\xe9.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"opsgenie_priorities")),(0,a.kt)("td",{parentName:"tr",align:null},"String"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"P1,P2,P3,P4,P5")),(0,a.kt)("td",{parentName:"tr",align:null},"Liste des priorit\xe9s Opsgenie avec la virgule pour s\xe9parateur")))),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Remarques")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Une valeur de 2 pour  ",(0,a.kt)("inlineCode",{parentName:"li"},"log_level")," est valide pour un d\xe9but d'analyse en cas de dysfonctionnement. Cela peut cependant g\xe9n\xe9rer un grand volume de journaux si vous supervisez beaucoup d'h\xf4tes. Pour avoir moins de messages, vous devriez conserver la valeur \xe0 1.")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"comment-d\xe9sinstaller"},"Comment d\xe9sinstaller"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Connectez vous \xe0 l'interface web de Centreon avec un compte administrateur."),(0,a.kt)("li",{parentName:"ol"},"Naviguez dans le menu ",(0,a.kt)("strong",{parentName:"li"},"Configuration")," > ",(0,a.kt)("strong",{parentName:"li"},"Collecteurs")," et s\xe9lectionnez ",(0,a.kt)("strong",{parentName:"li"},"Configuration du broker"),"."),(0,a.kt)("li",{parentName:"ol"},"Cliquez sur la configuration broker ",(0,a.kt)("strong",{parentName:"li"},"central-broker-master")," puis allez dans l'onglet ",(0,a.kt)("strong",{parentName:"li"},"Output"),"."),(0,a.kt)("li",{parentName:"ol"},"Supprimez l'output ",(0,a.kt)("strong",{parentName:"li"},"Generic - Stream connector")," en cliquant sur l'ic\xf4ne de croix rouge en bout de ligne."),(0,a.kt)("li",{parentName:"ol"},"Sauvegardez votre configuration et rendez vous dans le menu ",(0,a.kt)("strong",{parentName:"li"},"Configuration")," > ",(0,a.kt)("strong",{parentName:"li"},"Collecteurs")," et s\xe9lectionnez ",(0,a.kt)("strong",{parentName:"li"},"Collecteurs"),"."),(0,a.kt)("li",{parentName:"ol"},"S\xe9lectionnez le collecteur ",(0,a.kt)("strong",{parentName:"li"},"Central")," et cliquez sur ",(0,a.kt)("strong",{parentName:"li"},"Exporter la configuration")),(0,a.kt)("li",{parentName:"ol"},"Gardez ",(0,a.kt)("strong",{parentName:"li"},"G\xe9n\xe9rer les fichiers de configuration")," et ",(0,a.kt)("strong",{parentName:"li"},"Lancer le d\xe9bogage du moteur de supervision (-v)")," coch\xe9es et cochez aussi ",(0,a.kt)("strong",{parentName:"li"},"D\xe9placer les fichiers g\xe9n\xe9r\xe9s")," puis cliquez sur le bouton ",(0,a.kt)("strong",{parentName:"li"},"Exporter"),"."),(0,a.kt)("li",{parentName:"ol"},"Red\xe9marrez le service ",(0,a.kt)("inlineCode",{parentName:"li"},"cbd")," :")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"systemctl restart cbd\n")),(0,a.kt)("p",null,"Le stream connecteur n'est alors plus actif !"),(0,a.kt)("ol",{start:9},(0,a.kt)("li",{parentName:"ol"},"Vous pouvez aussi supprimer le script LUA si vous le d\xe9sirez :")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"rm -f /usr/share/centreon-broker/lua/opsgenie.lua\n")),(0,a.kt)("h2",{id:"macros"},"Macros"),(0,a.kt)("p",null,"Les macros sont un outil pour cr\xe9er des messages dynamiques d\xe9pendant de l'\xe9v\xe8nement que vous envoyez. Elles doivent \xeatre mises entre {} (ex : {hostname}). Si une macro est une macro de type ",(0,a.kt)("em",{parentName:"p"},"time")," alors vous pouvez utiliser le suffixe ",(0,a.kt)("strong",{parentName:"p"},"_","date")," pour le convertir en un format lisible pour l'Homme. Vous pouvez changer le format de la date avec le param\xe8tre de type string ",(0,a.kt)("inlineCode",{parentName:"p"},"date_format"),". (ex : {last_update} est une macro sous la forme d'un timestamp. Vous pouvez utiliser {last_update_date} pour la convertir)"),(0,a.kt)("h4",{id:"host-event-macros"},"Host event macros"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Nom de la macro"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"hostname")))),(0,a.kt)("p",null,"Toutes les propri\xe9t\xe9s de la table ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/developer/developer-broker-mapping#host-status"},"Host status")," sont aussi utilisables"),(0,a.kt)("h4",{id:"service-event-macros"},"Service event macros"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Nom de la macro"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"hostname")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"serviceDescription")))),(0,a.kt)("p",null,"Toutes les propri\xe9t\xe9s de la table  ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/developer/developer-broker-mapping#service-status"},"Service status")," sont aussi utilisables"),(0,a.kt)("h4",{id:"ba-event-macros"},"BA event macros"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Nom de la macro"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"baName")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"baDescription")))),(0,a.kt)("p",null,"Toutes les propri\xe9t\xe9s de la table  ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/developer/developer-broker-mapping#ba-status-event"},"Ba status event")," sont aussi utilisables"))}N.isMDXComponent=!0}}]);