"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[78767],{3905:(e,r,t)=>{t.d(r,{Zo:()=>c,kt:()=>v});var n=t(67294);function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){o(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function s(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=n.createContext({}),p=function(e){var r=n.useContext(l),t=r;return e&&(t="function"==typeof e?e(r):i(i({},r),e)),t},c=function(e){var r=p(e.components);return n.createElement(l.Provider,{value:r},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},m=n.forwardRef((function(e,r){var t=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(t),m=o,v=u["".concat(l,".").concat(m)]||u[m]||d[m]||a;return t?n.createElement(v,i(i({ref:r},c),{},{components:t})):n.createElement(v,i({ref:r},c))}));function v(e,r){var t=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var a=t.length,i=new Array(a);i[0]=m;var s={};for(var l in r)hasOwnProperty.call(r,l)&&(s[l]=r[l]);s.originalType=e,s[u]="string"==typeof e?e:o,i[1]=s;for(var p=2;p<a;p++)i[p]=t[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}m.displayName="MDXCreateElement"},56634:(e,r,t)=>{t.d(r,{Z:()=>n});const n=t.p+"assets/files/repair_mysql_upgrade-6a98ee17c4823471a8a24a06bf18f9ec.sql"},20991:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>c,contentTitle:()=>l,default:()=>v,frontMatter:()=>s,metadata:()=>p,toc:()=>u});t(67294);var n=t(3905);function o(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function a(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):function(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})),e}function i(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)t=a[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}const s={id:"migrate",title:"Migrer l'extension"},l=void 0,p={unversionedId:"reporting/migrate",id:"version-23.10/reporting/migrate",title:"Migrer l'extension",description:"Cette section explique comment migrer votre serveur de reporting vers un",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-23.10/reporting/migrate.md",sourceDirName:"reporting",slug:"/reporting/migrate",permalink:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/reporting/migrate",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/i18n/fr/docusaurus-plugin-content-docs/version-23.10/reporting/migrate.md",tags:[],version:"23.10",lastUpdatedAt:1699281350,formattedLastUpdatedAt:"6 nov. 2023",frontMatter:{id:"migrate",title:"Migrer l'extension"},sidebar:"version-23.10/docs",previous:{title:"Monter de version l'extension",permalink:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/reporting/upgrade"},next:{title:"Sauvegarde et restauration",permalink:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/reporting/backup-restore"}},c={},u=[{value:"Installer le nouveau serveur de reporting",id:"installer-le-nouveau-serveur-de-reporting",level:2},{value:"Synchroniser les donn\xe9es",id:"synchroniser-les-donn\xe9es",level:2},{value:"D\xe9placer les rapports g\xe9n\xe9r\xe9s",id:"d\xe9placer-les-rapports-g\xe9n\xe9r\xe9s",level:2}],d={toc:u},m="wrapper";function v(e){var{components:r}=e,s=i(e,["components"]);return(0,n.kt)(m,a(function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){o(e,r,t[r])}))}return e}({},d,s),{components:r,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Cette section explique comment migrer votre serveur de reporting vers un\nnouveau serveur (par exemple si vous voulez passser \xe0 un OS support\xe9)."),(0,n.kt)("p",null,"La migration de l'interface se fait en m\xeame temps que la migration du serveur Centreon (voir ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/migrate/introduction"},"ce chapitre"),")."),(0,n.kt)("h2",{id:"installer-le-nouveau-serveur-de-reporting"},"Installer le nouveau serveur de reporting"),(0,n.kt)("p",null,"Installer le nouveau serveur de reporting sur le nouvel OS, installer\nle d\xe9p\xf4t Centreon Business et utiliser la documentation d'",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2796/fr/docs/reporting/installation"},"installation"),"."),(0,n.kt)("h2",{id:"synchroniser-les-donn\xe9es"},"Synchroniser les donn\xe9es"),(0,n.kt)("p",null,"Stopper mysqld sur les ",(0,n.kt)("strong",{parentName:"p"},"deux")," serveurs de reporting:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"service mysql stop\n")),(0,n.kt)("p",null,"Copier les fichiers \xe0 partir de l'ancien serveur de reporting vers le\nnouveau:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"rsync -avz /var/lib/mysql/* root@IP_New_Reporting_Server:/var/lib/mysql/\n")),(0,n.kt)("p",null,"Lancer la commande suivante pour assurer la compatibilit\xe9 des donn\xe9es:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"mysql_upgrade\n")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},'Si aucune erreur n\'appara\xeet, red\xe9marrez MariaDB et continuer \xe0 la\nsection ci-dessous "D\xe9placer les rapports g\xe9n\xe9r\xe9s".')),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Si des erreurs sont visibles, notamment sur les tables mysql\ninnodb","_","index","_","stats, innodb","_","table","_","stats, gtid","_","slave","_","pos, cela\npeut \xeatre d\xfb \xe0 une incompatibilit\xe9 entre MySQL/MariaDB 5.5 et\nMariaDB 10.5. Dans ce cas, effectuer les actions suivantes:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre"},"service mysql stop\ncp -a /var/lib/mysql/ /var/lib/mysql.bak\ncd /var/lib/mysql/mysql/\nrm innodb_index_stats.frm innodb_index_stats.ibd innodb_table_stats.frm innodb_table_stats.ibd gtid_slave_pos.frm gtid_slave_pos.ibd\nservice mysql start\n")),(0,n.kt)("p",{parentName:"li"},"Puis recr\xe9er les tables manuellement en utilisant la commande suivante:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre"},"    mysql mysql < repair_mysql_upgrade.sql\n")),(0,n.kt)("p",{parentName:"li"},"T\xe9l\xe9chargez le fichier ici : ",(0,n.kt)("a",{target:"_blank",href:t(56634).Z},"repair_mysql_upgrade.sql"),"."))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"Si vous aviez d\xe9velopp\xe9 des rapports & biblioth\xe8ques personnalis\xe9es,\npensez \xe0 les copier dans les m\xeames dossiers sur votre nouveau serveur de reporting.")),(0,n.kt)("h2",{id:"d\xe9placer-les-rapports-g\xe9n\xe9r\xe9s"},"D\xe9placer les rapports g\xe9n\xe9r\xe9s"),(0,n.kt)("p",null,"Synchroniser les rapports g\xe9n\xe9r\xe9s sur votre ancien serveur Centreon vers\nle nouveau pour \xeatre en mesure de les consulter via l'interface.\nConnectez vous sur l'ancien serveur Centreon puis:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"rsync -avz /var/lib/centreon/centreon-bi-server/archives/ root@IP_New_Centreon_Server:/var/lib/centreon/centreon-bi-server/archives/\n")))}v.isMDXComponent=!0}}]);