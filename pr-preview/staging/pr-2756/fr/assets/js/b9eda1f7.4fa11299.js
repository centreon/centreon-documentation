"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[60979],{48857:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>u,default:()=>N,frontMatter:()=>p,metadata:()=>c,toc:()=>m});n(67294);var a=n(3905),r=n(51715),l=n(7626);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const p={id:"update-centreon-platform",title:"Mise \xe0 jour d'une plateforme Centreon 23.04"},u=void 0,c={unversionedId:"update/update-centreon-platform",id:"version-23.10/update/update-centreon-platform",title:"Mise \xe0 jour d'une plateforme Centreon 23.04",description:"Ce chapitre d\xe9crit la proc\xe9dure de mise \xe0 jour de votre plate-forme Centreon",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-23.10/update/update-centreon-platform.md",sourceDirName:"update",slug:"/update/update-centreon-platform",permalink:"/centreon-documentation/pr-preview/staging/pr-2756/fr/docs/update/update-centreon-platform",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/i18n/fr/docusaurus-plugin-content-docs/version-23.10/update/update-centreon-platform.md",tags:[],version:"23.10",lastUpdatedAt:1699891870,formattedLastUpdatedAt:"13 nov. 2023",frontMatter:{id:"update-centreon-platform",title:"Mise \xe0 jour d'une plateforme Centreon 23.04"},sidebar:"version-23.10/docs",previous:{title:"Configurer l'envoi d'emails",permalink:"/centreon-documentation/pr-preview/staging/pr-2756/fr/docs/administration/postfix"},next:{title:"Introduction \xe0 la mont\xe9e de version",permalink:"/centreon-documentation/pr-preview/staging/pr-2756/fr/docs/upgrade/introduction"}},d={},m=[{value:"Sauvegarde",id:"sauvegarde",level:2},{value:"Mise \xe0 jour du serveur Centreon Central",id:"mise-\xe0-jour-du-serveur-centreon-central",level:2},{value:"Mise \xe0 jour de la solution Centreon",id:"mise-\xe0-jour-de-la-solution-centreon",level:3},{value:"Mise \xe0 jour des extensions",id:"mise-\xe0-jour-des-extensions",level:3},{value:"Mise \xe0 jour des Remote Servers",id:"mise-\xe0-jour-des-remote-servers",level:2},{value:"Mise \xe0 jour des collecteurs",id:"mise-\xe0-jour-des-collecteurs",level:2}],k={toc:m},g="wrapper";function N(e){var{components:t}=e,p=i(e,["components"]);return(0,a.kt)(g,s(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){o(e,t,n[t])}))}return e}({},k,p),{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Ce chapitre d\xe9crit la proc\xe9dure de mise \xe0 jour de votre plate-forme Centreon\n23.04 (c'est-\xe0-dire le passage de 23.04.x \xe0 23.04.y)."),(0,a.kt)("h2",{id:"sauvegarde"},"Sauvegarde"),(0,a.kt)("p",null,"Avant toute chose, il est pr\xe9f\xe9rable de s\u2019assurer de l\u2019\xe9tat et de la consistance\ndes sauvegardes de l\u2019ensemble des serveurs centraux de votre plate-forme :"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Serveur Centreon Central,"),(0,a.kt)("li",{parentName:"ul"},"Serveur de gestion de base de donn\xe9es.")),(0,a.kt)("h2",{id:"mise-\xe0-jour-du-serveur-centreon-central"},"Mise \xe0 jour du serveur Centreon Central"),(0,a.kt)("h3",{id:"mise-\xe0-jour-de-la-solution-centreon"},"Mise \xe0 jour de la solution Centreon"),(0,a.kt)("p",null,"Assurez-vous que tous les utilisateurs sont d\xe9connect\xe9s avant de commencer la proc\xe9dure de mise \xe0 jour."),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("p",null,"Videz le cache :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf clean all --enablerepo=*\n")),(0,a.kt)("p",null,"Mettez \xe0 jour l'ensemble des composants :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf update centreon\\*\n"))),(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("p",null,"Videz le cache :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf clean all --enablerepo=*\n")),(0,a.kt)("p",null,"Mettez \xe0 jour l'ensemble des composants :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf update centreon\\*\n"))),(0,a.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)("p",null,"Videz le cache :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"apt clean all\napt update\n")),(0,a.kt)("p",null,"Mettez \xe0 jour l'ensemble des composants :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"apt upgrade centreon\n")))),(0,a.kt)("p",null,"Vous devez maintenant finaliser la mise \xe0 jour :"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Avec l'assistant d'interface",label:"Avec l'assistant d'interface",mdxType:"TabItem"},(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Connectez-vous \xe0 l'interface web Centreon pour d\xe9marrer le processus de\nmise \xe0 jour. Cliquez sur ",(0,a.kt)("strong",{parentName:"p"},"Next")," :"),(0,a.kt)("p",{parentName:"li"},"  ",(0,a.kt)("img",{alt:"image",src:n(17068).Z,width:"650",height:"300"}))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Cliquez sur ",(0,a.kt)("strong",{parentName:"p"},"Next")," :"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("img",{alt:"image",src:n(63986).Z,width:"650",height:"300"}))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"La note de version pr\xe9sente les principaux changements, cliquez sur ",(0,a.kt)("strong",{parentName:"p"},"Next")," :"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("img",{alt:"image",src:n(88358).Z,width:"650",height:"300"}))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Le processus r\xe9alise les diff\xe9rentes mises \xe0 jour, cliquez sur ",(0,a.kt)("strong",{parentName:"p"},"Next")," :"),(0,a.kt)("p",{parentName:"li"},(0,a.kt)("img",{alt:"image",src:n(83376).Z,width:"650",height:"300"}))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Votre serveur Centreon est maintenant \xe0 jour, cliquez sur ",(0,a.kt)("strong",{parentName:"p"},"Finish")," pour\nacc\xe9der \xe0 la page de connexion :"),(0,a.kt)("p",{parentName:"li"},"  ",(0,a.kt)("img",{alt:"image",src:n(81229).Z,width:"650",height:"300"})),(0,a.kt)("blockquote",{parentName:"li"},(0,a.kt)("p",{parentName:"blockquote"},"Si le module Centreon BAM est install\xe9, r\xe9f\xe9rez-vous \xe0 la ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2756/fr/docs/service-mapping/update"},"documentation associ\xe9e")," pour le mettre \xe0 jour."))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"D\xe9ployez ensuite la configuration du Central depuis l'interface web en\nsuivant ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2756/fr/docs/monitoring/monitoring-servers/deploying-a-configuration"},"cette\nproc\xe9dure"),".")))),(0,a.kt)(l.Z,{value:"Avec l'API d\xe9di\xe9e",label:"Avec l'API d\xe9di\xe9e",mdxType:"TabItem"},(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Connectez-vous au serveur Central via le terminal pour poursuivre le processus de\nmise \xe0 jour."),(0,a.kt)("blockquote",{parentName:"li"},(0,a.kt)("p",{parentName:"blockquote"},"Vous avez besoin d'un token d'authentification pour acc\xe9der \xe0 l'endpoint de l'API. Suivez la proc\xe9dure ci-dessous pour obtenir un token.")),(0,a.kt)("p",{parentName:"li"},"  Dans notre cas, nous avons la configuration d\xe9crite ci-dessous (vous devez adapter la proc\xe9dure \xe0 votre configuration)."),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"adresse : 10.25.XX.XX"),(0,a.kt)("li",{parentName:"ul"},"port : 80"),(0,a.kt)("li",{parentName:"ul"},"version : 23.04"),(0,a.kt)("li",{parentName:"ul"},"identifiant : Admin"),(0,a.kt)("li",{parentName:"ul"},"mot de passe : xxxxx"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Entrez la requ\xeate suivante :"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'curl --location --request POST \'10.25.XX.XX:80/centreon/api/v23.04/login\' \\\n--header \'Content-Type: application/json\' \\\n--header \'Accept: application/json\' \\\n--data \'{\n  "security": {\n    "credentials": {\n      "login": "Admin",\n      "password": "xxxxx"\n    }\n  }\n}\'\n')),(0,a.kt)("p",{parentName:"li"},"Voici \xe0 quoi ressemble le r\xe9sultat :"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'{"contact":{"id":1,"name":"Admin Centreon","alias":"admin","email":"admin@localhost",  "is_admin":true},"security":{"token":"hwwE7w/ukiiMce2lwhNi2mcFxLNYPhB9bYSKVP3xeTRUeN8FuGQms3RhpLreDX/S"}}\n'))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"R\xe9cup\xe9rez le num\xe9ro du token pour l'utiliser lors de la prochaine requ\xeate.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Entrez ensuite cette requ\xeate :"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"curl --location --request PATCH 'http://10.25.XX.XX:80/centreon/api/latest/platform/updates' \\\n--header 'X-AUTH-TOKEN: hwwE7w/ukiiMce2lwhNi2mcFxLNYPhB9bYSKVP3xeTRUeN8FuGQms3RhpLreDX/S' \\\n--header 'Content-Type: application/json' \\\n--data '{\n    \"components\": [\n        {\n            \"name\": \"centreon-web\"\n        }\n    ]\n}'\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Cette requ\xeate ne renvoie aucun r\xe9sultat. Pour v\xe9rifier que la mise \xe0 jour a bien \xe9t\xe9 appliqu\xe9e, consultez le num\xe9ro de version affich\xe9 sur la page de connexion \xe0 l'interface web Centreon."))))),(0,a.kt)("p",null,"Enfin, red\xe9marrez Broker, Engine et Gorgone sur le serveur Central en ex\xe9cutant la commande suivante :"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart cbd centengine gorgoned\n")),(0,a.kt)("h3",{id:"mise-\xe0-jour-des-extensions"},"Mise \xe0 jour des extensions"),(0,a.kt)("p",null,"Depuis le menu ",(0,a.kt)("strong",{parentName:"p"},"Administration > Extensions > Gestionnaire"),", mettez \xe0 jour\ntoutes les extensions, en commen\xe7ant par les suivantes :"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"License Manager,"),(0,a.kt)("li",{parentName:"ul"},"Gestionnaire de connecteurs de supervision,"),(0,a.kt)("li",{parentName:"ul"},"Auto Discovery.")),(0,a.kt)("p",null,"Vous pouvez alors mettre \xe0 jour toutes les autres extensions commerciales."),(0,a.kt)("h2",{id:"mise-\xe0-jour-des-remote-servers"},"Mise \xe0 jour des Remote Servers"),(0,a.kt)("p",null,"Cette proc\xe9dure est identique \xe0 la mise \xe0 jour d'un serveur Centreon Central."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"En fin de mise \xe0 jour, la configuration doit \xeatre d\xe9ploy\xe9e depuis le serveur\nCentral.")),(0,a.kt)("h2",{id:"mise-\xe0-jour-des-collecteurs"},"Mise \xe0 jour des collecteurs"),(0,a.kt)(r.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Videz le cache :"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf clean all --enablerepo=*\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Mettez \xe0 jour l'ensemble des composants :"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf update centreon\\* --exclude=centreon-plugin*\n"))))),(0,a.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 9",label:"Alma / RHEL / Oracle Linux 9",mdxType:"TabItem"},(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Videz le cache :"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf clean all --enablerepo=*\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Mettez \xe0 jour l'ensemble des composants :"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"dnf update centreon\\* --exclude=centreon-plugin*\n"))))),(0,a.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Videz le cache :"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"apt clean all\napt update\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Mettez \xe0 jour l'ensemble des composants :"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"apt upgrade centreon\\* --exclude=centreon-plugin*\n")))))),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Acceptez les nouvelles cl\xe9s GPG des d\xe9p\xf4ts si n\xe9cessaire.")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"D\xe9ployez la configuration du collecteur depuis l'interface web en suivant ",(0,a.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2756/fr/docs/monitoring/monitoring-servers/deploying-a-configuration"},"cette\nproc\xe9dure"),", et\nen choisissant la m\xe9thode ",(0,a.kt)("strong",{parentName:"p"},"Red\xe9marrer")," pour le processus Engine.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Red\xe9marrez enfin le service Gorgone s'il est utilis\xe9 sur le collecteur :"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart centengine gorgoned\n")))))}N.isMDXComponent=!0},17068:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/web_update_1-229784d5ed7986045c49b65b99ce38cd.png"},63986:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/web_update_2-f12be23b17ba9e83853cbdbaaea65402.png"},88358:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/web_update_3-d505e49a3b4f60dfd887ff45ddbf006b.png"},83376:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/web_update_4-97901eb976096c68fb2bd9d37c4de9bc.png"},81229:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/web_update_5-01f8c54614c006d7c1bf9e03799c1b81.png"}}]);