"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[36329],{44855:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>k,frontMatter:()=>l,metadata:()=>p,toc:()=>m});a(67294);var n=a(3905);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})),e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}const l={id:"advanced-configuration",title:"Advanced configuration"},s=void 0,p={unversionedId:"monitoring/monitoring-servers/advanced-configuration",id:"version-23.10/monitoring/monitoring-servers/advanced-configuration",title:"Advanced configuration",description:"Centreon Broker and the firewall",source:"@site/versioned_docs/version-23.10/monitoring/monitoring-servers/advanced-configuration.md",sourceDirName:"monitoring/monitoring-servers",slug:"/monitoring/monitoring-servers/advanced-configuration",permalink:"/centreon-documentation/pr-preview/staging/pr-2756/docs/monitoring/monitoring-servers/advanced-configuration",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/versioned_docs/version-23.10/monitoring/monitoring-servers/advanced-configuration.md",tags:[],version:"23.10",lastUpdatedAt:1699891870,formattedLastUpdatedAt:"Nov 13, 2023",frontMatter:{id:"advanced-configuration",title:"Advanced configuration"},sidebar:"version-23.10/docs",previous:{title:"Attach a poller to a different remote server",permalink:"/centreon-documentation/pr-preview/staging/pr-2756/docs/monitoring/monitoring-servers/move-poller"},next:{title:"Offline installation",permalink:"/centreon-documentation/pr-preview/staging/pr-2756/docs/installation/offline"}},u={},m=[{value:"Centreon Broker and the firewall",id:"centreon-broker-and-the-firewall",level:2},{value:"Centreon Broker flow authentication",id:"centreon-broker-flow-authentication",level:2},{value:"Centreontrapd Configuration",id:"centreontrapd-configuration",level:2},{value:"Poller",id:"poller",level:3},{value:"Remote Server",id:"remote-server",level:3},{value:"Advanced configuration of Centreon Broker",id:"advanced-configuration-of-centreon-broker",level:2},{value:"Overview",id:"overview",level:3},{value:"Main configuration page",id:"main-configuration-page",level:3},{value:"Broker general configuration page",id:"broker-general-configuration-page",level:3},{value:"Broker input configuration page",id:"broker-input-configuration-page",level:3},{value:"Broker output configuration page",id:"broker-output-configuration-page",level:3},{value:"TCP outputs",id:"tcp-outputs",level:4},{value:"File outputs",id:"file-outputs",level:4},{value:"RRD outputs",id:"rrd-outputs",level:4},{value:"Storage Outputs",id:"storage-outputs",level:4},{value:"SQL outputs",id:"sql-outputs",level:4},{value:"Unified SQL outputs",id:"unified-sql-outputs",level:4},{value:"Lua outputs",id:"lua-outputs",level:4},{value:"Dumper reader/writer",id:"dumper-readerwriter",level:4}],c={toc:m},d="wrapper";function k(e){var{components:t}=e,l=i(e,["components"]);return(0,n.kt)(d,o(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){r(e,t,a[t])}))}return e}({},c,l),{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"centreon-broker-and-the-firewall"},"Centreon Broker and the firewall"),(0,n.kt)("p",null,"In certain cases you may not be able to initialize the Centreon Broker data flow\nfrom the poller (or the Remote Server) to the Central Server or the Remote\nServer."),(0,n.kt)("p",null,"Centreon has, however, developed a solution for initializing the flow from the\nCentreon Central Server, or from the Remote Server, to the poller."),(0,n.kt)("p",null,"Go to the ",(0,n.kt)("strong",{parentName:"p"},"Configuration > Pollers > Broker configuration")," menu and click\n",(0,n.kt)("strong",{parentName:"p"},"Centreon Broker SQL")," configuration on the Central Server or Remote Server."),(0,n.kt)("p",null,"Go to the ",(0,n.kt)("strong",{parentName:"p"},"Input")," tab panel and add a new ",(0,n.kt)("strong",{parentName:"p"},"TCP - IPv4")," entry."),(0,n.kt)("p",null,"Enter the ",(0,n.kt)("strong",{parentName:"p"},"Name")," of the configuration, the TCP ",(0,n.kt)("strong",{parentName:"p"},"Connection port")," for\nconnecting to the poller, and the ",(0,n.kt)("strong",{parentName:"p"},"Host to connect to"),". Then ",(0,n.kt)("strong",{parentName:"p"},"Save")," your\nconfiguration."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"image",src:a(65029).Z,width:"434",height:"133"})),(0,n.kt)("p",null,"Go to the ",(0,n.kt)("strong",{parentName:"p"},"Configuration > Pollers > Broker configuration")," menu and click\nthe ",(0,n.kt)("strong",{parentName:"p"},"Broker module")," of your poller."),(0,n.kt)("p",null,"On the ",(0,n.kt)("strong",{parentName:"p"},"Output")," tab panel, modify the ",(0,n.kt)("strong",{parentName:"p"},"Output 1 - IPv4")," form:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Remove the entry for ",(0,n.kt)("strong",{parentName:"li"},"Host to connect to"),"."),(0,n.kt)("li",{parentName:"ol"},"Check the ",(0,n.kt)("strong",{parentName:"li"},"Connection port"),"."),(0,n.kt)("li",{parentName:"ol"},"Set ",(0,n.kt)("strong",{parentName:"li"},"Yes")," for the ",(0,n.kt)("strong",{parentName:"li"},"One peer retention")," option.")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"image",src:a(66794).Z,width:"433",height:"456"})),(0,n.kt)("p",null,"Click ",(0,n.kt)("strong",{parentName:"p"},"Save")," and generate the configuration of the affected servers."),(0,n.kt)("h2",{id:"centreon-broker-flow-authentication"},"Centreon Broker flow authentication"),(0,n.kt)("p",null,"If you need to authenticate pollers that are sending data to the monitoring\nsystem, you can use the Centreon Broker authentication mechanism, which is based\non X.509 certificates."),(0,n.kt)("p",null,"First generate a Certificate Authority (CA) certificate with OpenSSL. ",(0,n.kt)("em",{parentName:"p"},"ca.key"),"\nwill be the private key (stored securely), while ",(0,n.kt)("em",{parentName:"p"},"ca.crt")," will be the public\ncertificate for authenticating incoming connections:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"openssl req -x509 -newkey rsa:2048 -nodes -keyout ca.key -out ca.crt -days 365\n")),(0,n.kt)("p",null,"Now generate the certificates using the CA key:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-shell"},"openssl req -new -newkey rsa:2048 -nodes -keyout central.key -out central.csr -days 365\nopenssl req -new -newkey rsa:2048 -nodes -keyout poller.key -out poller.csr -days 365\nopenssl x509 -req -in central.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out central.crt -days 365 -sha256\nopenssl x509 -req -in poller.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out poller.crt -days 365 -sha256\n")),(0,n.kt)("p",null,"Put ",(0,n.kt)("em",{parentName:"p"},"central.key"),", ",(0,n.kt)("em",{parentName:"p"},"central.crt")," and ",(0,n.kt)("em",{parentName:"p"},"ca.crt")," on the Centreon central server\n(e.g., in ",(0,n.kt)("strong",{parentName:"p"},"/etc/centreon-broker"),") and ",(0,n.kt)("em",{parentName:"p"},"poller.key"),", ",(0,n.kt)("em",{parentName:"p"},"poller.crt")," and ",(0,n.kt)("em",{parentName:"p"},"ca.crt"),"\non your poller."),(0,n.kt)("p",null,"You must now configure the Centreon Broker in order to use these files. Go to\n",(0,n.kt)("inlineCode",{parentName:"p"},"Configuration > Pollers > Broker configuration"),". For the\n",(0,n.kt)("em",{parentName:"p"},"central-broker-master"),", under the ",(0,n.kt)("strong",{parentName:"p"},"Input")," tab, set the following parameters\nfor ",(0,n.kt)("em",{parentName:"p"},"central-broker-master-input"),":"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Enable TLS encryption = Yes"),(0,n.kt)("li",{parentName:"ul"},"Private key file = /etc/centreon-broker/central.key"),(0,n.kt)("li",{parentName:"ul"},"Public certificate = /etc/centreon-broker/central.crt"),(0,n.kt)("li",{parentName:"ul"},"Trusted CA's certificate = /etc/centreon-broker/ca.crt")),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"image",src:a(39445).Z,width:"603",height:"133"})),(0,n.kt)("p",null,"As with the poller, you will have to modify the TCP output under the Output tab\nwith the following parameters:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Enable TLS encryption = Yes"),(0,n.kt)("li",{parentName:"ul"},"Private key file = /etc/centreon-broker/poller.key"),(0,n.kt)("li",{parentName:"ul"},"Public certificate = /etc/centreon-broker/poller.crt"),(0,n.kt)("li",{parentName:"ul"},"Trusted CA's certificate = /etc/centreon-broker/ca.crt")),(0,n.kt)("p",null,"Regenerate the configuration of the affected pollers (",(0,n.kt)("inlineCode",{parentName:"p"},"Configuration >\nPollers > Pollers"),") and the authentication will be complete."),(0,n.kt)("h2",{id:"centreontrapd-configuration"},"Centreontrapd Configuration"),(0,n.kt)("h3",{id:"poller"},"Poller"),(0,n.kt)("p",null,"You must edit the Centreontrapd configuration file to be able to use the local\nSQLite database. Refer to the chapter\n",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2756/docs/monitoring/passive-monitoring/enable-snmp-traps"},"Passive Monitoring"),"."),(0,n.kt)("h3",{id:"remote-server"},"Remote Server"),(0,n.kt)("p",null,"Configuring the Centreontrapd process is the same as on the Central Server."),(0,n.kt)("h2",{id:"advanced-configuration-of-centreon-broker"},"Advanced configuration of Centreon Broker"),(0,n.kt)("p",null,"This section will help you understand how Centreon Broker works and how it\nshould be configured according to Centreon's best practices. The various options\nused by Centreon Broker are described."),(0,n.kt)("h3",{id:"overview"},"Overview"),(0,n.kt)("p",null,"The Centreon Broker's core is a simple multiplexing engine that takes ",(0,n.kt)("em",{parentName:"p"},"inputs"),"\n(events) and sends them to various ",(0,n.kt)("em",{parentName:"p"},"outputs"),". Inputs are typically other Centreon\nBroker events received via TCP/IP, while outputs can be an SQL database,\nother brokers, a BI/BAM engine, Centreon Map, etc."),(0,n.kt)("p",null,"Each input or output has a ",(0,n.kt)("em",{parentName:"p"},"type")," that describes what it does plus several\nparameters, some mandatory and others optional. Additionally, an output can have\na ",(0,n.kt)("em",{parentName:"p"},"failover")," that will start when the output is in an error state in order to\nensure data retention."),(0,n.kt)("p",null,"An important distinction should be made between a standalone Centreon Broker and\na Centreon Broker installed as a Centreon Engine module. Both have the same\ncapabilities and support the same inputs and outputs. The difference is that the\nCentreon Broker configured as a module is automatically started when Centreon\nEngine starts. This broker automatically generates the events associated with\nthe Centreon Engine. Broker modules often only have one output to a Centreon\nBroker instance acting as a concentrator."),(0,n.kt)("h3",{id:"main-configuration-page"},"Main configuration page"),(0,n.kt)("p",null,"This section lists all the Centreon Broker instances configured in your\ninfrastructure, either in standalone or module mode. Each instance has a name,\nis associated with a poller, has a number of inputs, outputs","*",", and ",(0,n.kt)("em",{parentName:"p"},"loggers"),",\nand can be ",(0,n.kt)("em",{parentName:"p"},"enabled")," or ",(0,n.kt)("em",{parentName:"p"},"disabled"),"."),(0,n.kt)("p",null,"A ",(0,n.kt)("em",{parentName:"p"},"central"),"-type poller will have three Centreon Broker instances by default:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"one Centreon Broker installed as a module for a Centreon Engine (called a\n",(0,n.kt)("em",{parentName:"li"},"central-module-master"),")"),(0,n.kt)("li",{parentName:"ul"},"one Centreon Broker acting as a stand-alone concentrator (called a\n",(0,n.kt)("em",{parentName:"li"},"central-broker-master"),")"),(0,n.kt)("li",{parentName:"ul"},"one Centreon Broker that specializes in generating the RRD data used by graphs\n(called ",(0,n.kt)("em",{parentName:"li"},"central-rrd-master"),").")),(0,n.kt)("p",null,"The best practice is to always use a separate Centreon Broker instance to\ngenerate RRD data. This way, an issue occurring in the RRD stack will not have\nany impact on your main monitoring."),(0,n.kt)("p",null,"As expected, the ",(0,n.kt)("em",{parentName:"p"},"central-module-master")," has only one output and zero inputs.\nConfigured as a Centreon Engine module, it generates events on its own and\nforwards them to the standalone Centreon Broker instance."),(0,n.kt)("p",null,"A poller generally has only one Centreon Broker instance configured as a\nCentreon Engine module."),(0,n.kt)("h3",{id:"broker-general-configuration-page"},"Broker general configuration page"),(0,n.kt)("p",null,"This section lists all the general options associated with a Centreon Broker\ninstance."),(0,n.kt)("p",null,"Main options:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Poller",(0,n.kt)("br",{parentName:"p"}),"\n","The poller containing the instance.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Name",(0,n.kt)("br",{parentName:"p"}),"\n","The name of the instance.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Config file name",(0,n.kt)("br",{parentName:"p"}),"\n","The name of the configuration file used by this instance.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Retention path",(0,n.kt)("br",{parentName:"p"}),"\n","When an output is in an error state, a failover is launched. Failovers save\ndata in files called ",(0,n.kt)("em",{parentName:"p"},"retention files"),". These in turn are saved in the\ndirectory specified here. The best practice is ",(0,n.kt)("strong",{parentName:"p"},"/var/lib/centreon-broker/"),".\nFor security reasons, you can use these directories:"),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"/var/lib/centreon-broker/")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"/var/lib/centreon-engine/")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"/var/cache/centreon/")))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Status",(0,n.kt)("br",{parentName:"p"}),"\n","Used to enable or disable the instance."))),(0,n.kt)("p",null,"Log options:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Log directory\nPath where the log file will be created.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Log filename\nName of the log file. Default is ",(0,n.kt)("inlineCode",{parentName:"p"},"<name of this broker configuration entry>"),".log")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Maximum file size (in bytes)\nA value different from zero will cause the creation of a new numbered log\nfile as soon as the maximum size is reached. Recommended value is ",(0,n.kt)("inlineCode",{parentName:"p"},"0"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"core\nLog level for ",(0,n.kt)("inlineCode",{parentName:"p"},"core")," log messages, the main logs of centreon-broker.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"config\nLog level for ",(0,n.kt)("inlineCode",{parentName:"p"},"config")," log messages.\nUseful to troubleshoot configuration handling issues.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"sql\nLog level for ",(0,n.kt)("inlineCode",{parentName:"p"},"sql")," log messages.\nUseful for troubleshooting database query issues.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"processing\nLog level for ",(0,n.kt)("inlineCode",{parentName:"p"},"processing")," log messages. You should not change this unless\nyou know what you are looking for.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"perfdata\nLog level for ",(0,n.kt)("inlineCode",{parentName:"p"},"perfdata")," log messages.\nUseful for troubleshooting performance data processing issues.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"bbdo\nLog level for ",(0,n.kt)("inlineCode",{parentName:"p"},"bbdo")," log messages.\nUseful for troubleshooting ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2756/docs/developer/developer-broker-bbdo"},"broker binary data objects")," issues.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"tcp\nLog level for ",(0,n.kt)("inlineCode",{parentName:"p"},"tcp")," log messages.\nUseful for troubleshooting network-related issues.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"tls\nLog level for ",(0,n.kt)("inlineCode",{parentName:"p"},"tls")," log messages.\nUseful for troubleshooting TLS encryption issues.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"lua\nLog level for ",(0,n.kt)("inlineCode",{parentName:"p"},"lua")," log messages.\nUseful for troubleshooting ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2756/docs/developer/developer-broker-stream-connector"},"Lua Stream Connectors")," issues.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"bam\nLog level for ",(0,n.kt)("inlineCode",{parentName:"p"},"bam")," log messages.\nUseful for troubleshooting ",(0,n.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2756/docs/service-mapping/introduction"},"Business Activity Monitoring")," issues.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Write timestamp (applies to the ",(0,n.kt)("a",{parentName:"p",href:"#broker-logger-configuration-page-deprecated"},"deprecated logger options"),")\nIf activated, each log entry is preceded by the timestamp of the time it was\nwritten. This is useful to know when an error has occurred. Best practice is\n",(0,n.kt)("em",{parentName:"p"},"Yes"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Write thread id",(0,n.kt)("br",{parentName:"p"}),"\n","If activated, each log entry is preceded by the ID of the thread being\nexecuted at that instant. This is only used for advanced debugging purposes.\nBest practice is ",(0,n.kt)("em",{parentName:"p"},"No"),"."))),(0,n.kt)("p",null,"Advanced Options:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Statistics",(0,n.kt)("br",{parentName:"p"}),"\n","Centreon Broker has an on-demand status reporting mechanism that can be\nenabled here. This is used by Centreon Web to check the status of the\ninstance at any time and determine which inputs and outputs are in an error\nstate and to generate various statistics on event processing. Best practice\nis ",(0,n.kt)("em",{parentName:"p"},"Yes"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Correlation",(0,n.kt)("br",{parentName:"p"}),"\n","Centreon Broker has a top-level correlation mechanism. This should only be\nactivated if top-level correlation has been properly configured in Centreon\nWeb. In all other cases, default is ",(0,n.kt)("em",{parentName:"p"},"No"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Event queue max size",(0,n.kt)("br",{parentName:"p"}),"\n","The maximum size of the in-memory queue in events. If the number of events\nin memory exceeds this number, Centreon Broker will start to use temporary\nfiles to prevent the broker from using too much memory. This, however,\ncauses additional disk I/O. The exact number can be adjusted to use more or\nless memory. A suggested default is 50000."))),(0,n.kt)("p",null,"If ",(0,n.kt)("em",{parentName:"p"},"Statistics")," is enabled, on-demand status can be queried manually through a\nfile in ",(0,n.kt)("em",{parentName:"p"},"/var/lib/centreon-broker/name.stats"),"."),(0,n.kt)("h3",{id:"broker-input-configuration-page"},"Broker input configuration page"),(0,n.kt)("p",null,"This section lists all the inputs activated for this instance of Centreon\nBroker. Centreon Broker can have as many inputs as needed."),(0,n.kt)("p",null,"Inputs read events from a TCP connection. All inputs have the following\nparameters:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Name",(0,n.kt)("br",{parentName:"p"}),"\n","The name of the input. Must be unique.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Serialization protocol",(0,n.kt)("br",{parentName:"p"}),"\n","The protocol that was used to serialize the data. Can be either ",(0,n.kt)("em",{parentName:"p"},"BBDO")," or\n",(0,n.kt)("em",{parentName:"p"},"NDO"),". NDO is a legacy textual protocol with inferior performance, data\ndensity and security. BBDO is a next-generation binary protocol that is\neffective and secure. NDO is deprecated. It should never be used for a new\nsoftware installation. Best practice is ",(0,n.kt)("em",{parentName:"p"},"BBDO"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Compression",(0,n.kt)("br",{parentName:"p"}),"\n","If compression is used to serialize the data, the options are: ",(0,n.kt)("em",{parentName:"p"},"auto"),",\n",(0,n.kt)("em",{parentName:"p"},"yes"),", or ",(0,n.kt)("em",{parentName:"p"},"no"),". If left on ",(0,n.kt)("em",{parentName:"p"},"auto"),", the Centreon Broker will detect whether\ncompression was used during a TCP handshake (or assume that no compression\nwas used for files). Default is ",(0,n.kt)("em",{parentName:"p"},"auto")," for TCP, ",(0,n.kt)("em",{parentName:"p"},"no")," for files.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Filter category",(0,n.kt)("br",{parentName:"p"}),"\n","The categories of events accepted by this input. If empty, no restriction on\nevents accepted. If filled, only events of the given type will be processed.\nInputs that accept data from the Centreon Engine Broker module should be set\nto only accept ",(0,n.kt)("em",{parentName:"p"},"Neb")," events.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Connection Port",(0,n.kt)("br",{parentName:"p"}),"\n","The port that will be used for the connection. Mandatory.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Host to connect to",(0,n.kt)("br",{parentName:"p"}),"\n","This important parameter decides whether the input will listen or attempt to\ninitiate a connection. If left empty, the input will listen on its given\nport. If specified, it will attempt to initiate a connection to the given\nhost/port.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Enable TLS encryption",(0,n.kt)("br",{parentName:"p"}),"\n","Enables the encryption of the flow. For the encryption to work, the private\nkey file, the ",(0,n.kt)("em",{parentName:"p"},"Public certificate")," and the ",(0,n.kt)("em",{parentName:"p"},"Trusted CA's certificate")," need\nto be set on both ends. Default is ",(0,n.kt)("em",{parentName:"p"},"auto"),", i.e., ",(0,n.kt)("em",{parentName:"p"},"no")," unless TCP negotiation\nhas been activated and the remote endpoint has activated encryption.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Private Key File",(0,n.kt)("br",{parentName:"p"}),"\n","The private key file used for the encryption.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Public certificate",(0,n.kt)("br",{parentName:"p"}),"\n","The public certificate used for the encryption.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Trusted CA's certificate",(0,n.kt)("br",{parentName:"p"}),"\n","The trusted CA certificate used for the encryption.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Enable negotiation",(0,n.kt)("br",{parentName:"p"}),"\n","If set to ",(0,n.kt)("em",{parentName:"p"},"yes"),", this input will try to negotiate encryption and compression\nwith the remote endpoint.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"One peer retention mode",(0,n.kt)("br",{parentName:"p"}),"\n","By default, a listening input will accept any number of incoming\nconnections. In ",(0,n.kt)("em",{parentName:"p"},"one peer retention")," mode, only one connection at a time is\naccepted, on a first-come first-serve basis. Default is ",(0,n.kt)("em",{parentName:"p"},"no"),"."))),(0,n.kt)("p",null,"TCP ",(0,n.kt)("em",{parentName:"p"},"input")," can either listen on a given port or can attempt to initiate a\nconnection if a host is given. This allows flexible network topology."),(0,n.kt)("h3",{id:"broker-output-configuration-page"},"Broker output configuration page"),(0,n.kt)("p",null,"This section lists all the outputs activated for this Centreon Broker instance.\nCentreon Broker can have as many outputs as needed."),(0,n.kt)("p",null,"For each output, the parameters are:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Type\nThere are several types of output managed by the Centreon Broker:"),(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"TCP - IPV4")," and ",(0,n.kt)("strong",{parentName:"li"},"TCP - IPV6"),": This output forwards data to another\nserver, another Centreon Broker or Centreon Map."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"File"),": Writes data into a file."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"RRD"),": Generates RRD data from performance data."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"Storage"),": Writes metrics into the database and generates performance\ndata (deprecated)."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"SQL"),": Writes the real-time status into Centreon's database\n(deprecated)."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"unified-sql"),": Writes the real-time status into Centreon's database.\nOne such output replaces ",(0,n.kt)("strong",{parentName:"li"},"Storage")," and ",(0,n.kt)("strong",{parentName:"li"},"SQL")," outputs at the same\ntime."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"Dumper Reader"),": Reads from a database when Broker is asked to synchronize\ndatabases."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"Dumper Writer"),": Writes into a database when Broker is asked to\nsynchronize databases."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"BAM Monitoring"),": Generates BAM data from raw events and updates real-time\nBAM status."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"BAM Reporting"),": Writes long-term BAM logs that can then be used by BI."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("strong",{parentName:"li"},"Generic - Stream connector"),": This is a generic output. You need to\nwrite a Lua script to explain what you want."))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Failover\nA ",(0,n.kt)("em",{parentName:"p"},"failover"),' is an output that will be started when in an error state.\nExamples are TCP connections "gone haywire" or a MySQL server suddenly\ndisconnecting, etc. By default, each output has an automatic failover that\nwill always store data in retention files and replay it when the primary\noutput recovers from its error state. This is desirable 99% of the time.\nAlternatively, you can specify another output that will act as a failover if\nneeded.')),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Retry interval\nWhen the output is in an error state, this parameter controls the amount of\ntime the output will wait before retrying. Default is one attempt every 30\nseconds.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Buffering timeout",(0,n.kt)("br",{parentName:"p"}),"\n","When this output is in an error state, Centreon Broker will wait a specified\ntime before launching the failover. This is mainly useful if Centreon Broker\nshould wait for another program to initialize before activating its\nfailover. In all other cases, this parameter should not be used. Default is\n0 seconds.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Filter category\nThe categories of events accepted by this output. If left empty, no\nrestriction on events accepted. If filled, only events of the given type\nwill be processed. The exact best practices are output-specific:"),(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("em",{parentName:"li"},"BAM Reporting")," should only accept ",(0,n.kt)("em",{parentName:"li"},"BAM")," events."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("em",{parentName:"li"},"Dump Writer")," should only accept ",(0,n.kt)("em",{parentName:"li"},"dumper")," events."),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("em",{parentName:"li"},"RRD")," should only accept ",(0,n.kt)("em",{parentName:"li"},"storage")," events.")),(0,n.kt)("p",{parentName:"li"},"In all other cases, no restriction should be configured."))),(0,n.kt)("p",null,"Events generated by an output are reinjected into Centreon Broker's event queue."),(0,n.kt)("p",null,"Some outputs only work when consuming data generated by another output. An RRD\noutput consumes data from a storage output, a ",(0,n.kt)("em",{parentName:"p"},"dumper writer")," output consumes\ndata from a ",(0,n.kt)("em",{parentName:"p"},"dumper reader"),", and a ",(0,n.kt)("em",{parentName:"p"},"BAM reporting")," output consumes data from a\n",(0,n.kt)("em",{parentName:"p"},"BAM monitoring")," output."),(0,n.kt)("p",null,"Centreon Web needs at least an active output ",(0,n.kt)("em",{parentName:"p"},"SQL")," output to activate its\nreal-time monitoring capabilities. The storage and RRD outputs are needed to\nactivate Centreon Web metric plotting. The BAM monitoring output is needed for\nreal-time BAM data and the BAM reporting output for BI reports."),(0,n.kt)("p",null,"Due to the fully distributed nature of Centreon Broker, producer and consumer\noutputs can be located on logically or physically different instances as long as\nthey are connected to each other."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Important"),": Centreon Web 2.x features two databases, the configuration\ndatabase and the real-time database. Those are called ",(0,n.kt)("em",{parentName:"p"},"centreon"),"\nand ",(0,n.kt)("em",{parentName:"p"},"centreon-storage"),", respectively. Different outputs expect different databases in\ntheir configuration."),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Output Type"),(0,n.kt)("th",{parentName:"tr",align:null},"Expected database"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"SQL"),(0,n.kt)("td",{parentName:"tr",align:null},"centreon-storage")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Storage"),(0,n.kt)("td",{parentName:"tr",align:null},"centreon-storage")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Unified SQL"),(0,n.kt)("td",{parentName:"tr",align:null},"centreon-storage")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Dumper Reader"),(0,n.kt)("td",{parentName:"tr",align:null},"centreon")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Dumper Writer"),(0,n.kt)("td",{parentName:"tr",align:null},"centreon")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"BAM Monitoring"),(0,n.kt)("td",{parentName:"tr",align:null},"centreon")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"BAM Reporting"),(0,n.kt)("td",{parentName:"tr",align:null},"centreon-storage")))),(0,n.kt)("h4",{id:"tcp-outputs"},"TCP outputs"),(0,n.kt)("p",null,"TCP outputs forward events to a remote endpoint. As with TCP inputs, TCP outputs\ncan either listen on a given port or attempt to initiate a connection if a host\nparameter is given. This allows for flexible network topology."),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"TCP"),"-type outputs have the following parameters:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Serialization protocol",(0,n.kt)("br",{parentName:"p"}),"\n","The protocol used to serialize the data. Can be either ",(0,n.kt)("em",{parentName:"p"},"BBDO")," or ",(0,n.kt)("em",{parentName:"p"},"NDO"),". NDO\nis a legacy textual protocol with inferior performance, data density and\nsecurity. BBDO is a next-generation binary protocol that is effective and\nsecure. NDO is deprecated. It should never be used for new installations.\nBest practice is ",(0,n.kt)("em",{parentName:"p"},"BBDO"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Enable negotiation",(0,n.kt)("br",{parentName:"p"}),"\n","If ",(0,n.kt)("em",{parentName:"p"},"yes"),", this output will try to negotiate encryption and compression with\nthe remote endpoint.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Connection Port",(0,n.kt)("br",{parentName:"p"}),"\n","Port used for the connection. Mandatory.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Host to connect to",(0,n.kt)("br",{parentName:"p"}),"\n","This key parameter decides whether the input will listen or attempt to\ninitiate a connection. If left empty, the input will listen on its given\nport. If specified, it will attempt to initiate a connection to the given\nhost/port.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Enable TLS encryption",(0,n.kt)("br",{parentName:"p"}),"\n","Enables the encryption of the flow. For the encryption to work, the private\nkey file, ",(0,n.kt)("em",{parentName:"p"},"Public certificate")," and ",(0,n.kt)("em",{parentName:"p"},"Trusted CA's certificate")," need to be set\non both ends. Default is ",(0,n.kt)("em",{parentName:"p"},"auto"),", i.e., ",(0,n.kt)("em",{parentName:"p"},"no")," unless TCP negotiation has been\nactivated and the remote endpoint has activated encryption.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Private Key File",(0,n.kt)("br",{parentName:"p"}),"\n","The private key file used for the encryption.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Public certificate",(0,n.kt)("br",{parentName:"p"}),"\n","The public certificate used for the encryption.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Trusted CA's certificate",(0,n.kt)("br",{parentName:"p"}),"\n","The trusted CA certificate used for the encryption.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"One peer retention mode",(0,n.kt)("br",{parentName:"p"}),"\n","By default, a listening input will accept any number of incoming\nconnections. In ",(0,n.kt)("em",{parentName:"p"},"one peer retention")," mode, only one connection at a time is\naccepted, on a first-come first-serve basis. Default is ",(0,n.kt)("em",{parentName:"p"},"no"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Compression",(0,n.kt)("br",{parentName:"p"}),"\n","If compression should be used to serialize the data. Can be ",(0,n.kt)("em",{parentName:"p"},"auto"),", ",(0,n.kt)("em",{parentName:"p"},"yes"),",\nor ",(0,n.kt)("em",{parentName:"p"},"no"),". If left on ",(0,n.kt)("em",{parentName:"p"},"auto"),", Centreon Broker will detect if compression is\nsupported by the endpoint during a TCP negotiation. Default is ",(0,n.kt)("em",{parentName:"p"},"auto")," for\nTCP.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Compression Level",(0,n.kt)("br",{parentName:"p"}),"\n","The level of compression that should be used, from 1 to 9. Default (or if\nnot filled) is 6. The higher the compression level, the higher the\ncompression will be at the expense of processing power.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Compression Buffer",(0,n.kt)("br",{parentName:"p"}),"\n","The size of the compression buffer that should be used. Best practice is ",(0,n.kt)("em",{parentName:"p"},"0"),"\nor nothing."))),(0,n.kt)("h4",{id:"file-outputs"},"File outputs"),(0,n.kt)("p",null,"File ",(0,n.kt)("em",{parentName:"p"},"outputs")," send events into a file on the disk. Additionally, they have the\ncapability of replaying the data of this file if used as a failover output. Most\nfile outputs will be used as failovers."),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"File")," type outputs have the following parameters:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Serialization protocol",(0,n.kt)("br",{parentName:"p"}),"\n","The protocol that was used to serialize the data. Can be either ",(0,n.kt)("em",{parentName:"p"},"BBDO")," or\n",(0,n.kt)("em",{parentName:"p"},"NDO"),". NDO is a legacy textual protocol with inferior performance, data\ndensity and security. BBDO is a next-generation binary protocol that is\neffective and secure. NDO is deprecated. It should never be used for new\ninstallations. Best practice is ",(0,n.kt)("em",{parentName:"p"},"BBDO"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"File path",(0,n.kt)("br",{parentName:"p"}),"\n","The path of the file being written to.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Compression",(0,n.kt)("br",{parentName:"p"}),"\n","If compression should be used to serialize the data. Can be ",(0,n.kt)("em",{parentName:"p"},"auto"),", ",(0,n.kt)("em",{parentName:"p"},"yes"),",\nor ",(0,n.kt)("em",{parentName:"p"},"no"),". ",(0,n.kt)("em",{parentName:"p"},"auto")," is equal to ",(0,n.kt)("em",{parentName:"p"},"no")," for files.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Compression Level",(0,n.kt)("br",{parentName:"p"}),"\n","The level of compression to be used, from 1 to 9. Default (or if not filled)\nis 6. The higher the compression level, the higher the compression will\nbe at the expense of processing power.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Compression Buffer",(0,n.kt)("br",{parentName:"p"}),"\n","The size of the compression buffer to be used. Best practice is ",(0,n.kt)("em",{parentName:"p"},"0"),"."))),(0,n.kt)("h4",{id:"rrd-outputs"},"RRD outputs"),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"RRD")," outputs generate RRD data (used by Centreon Web to generate graphs) from\nmetrics data generated by a storage output. The best practice is to isolate this\noutput on its own Centreon Broker instance to ensure that an issue in the RRD\nstack will not have any impact on the main Centreon Broker instance."),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"RRD"),"-type outputs have the following parameters:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"RRD file directory for metrics",(0,n.kt)("br",{parentName:"p"}),"\n","The directory where the RRD files of the metrics will be written. A\nrecommended default is ",(0,n.kt)("em",{parentName:"p"},"/var/lib/centreon/metrics/"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"RRD file directory for status",(0,n.kt)("br",{parentName:"p"}),"\n","The directory where the RRD files of the status will be written. A\nrecommended default is ",(0,n.kt)("em",{parentName:"p"},"/var/lib/centreon/status/"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"TCP port",(0,n.kt)("br",{parentName:"p"}),"\n","The port used by RRDCached, if RRDCached has been configured on this server.\nIf not, leave empty.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Unix socket",(0,n.kt)("br",{parentName:"p"}),"\n","The Unix socket used by RRDCached, if RRDCached has been configured on this\nserver. If not, leave empty.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Write metrics",(0,n.kt)("br",{parentName:"p"}),"\n","Should RRD metric files be written? Default is ",(0,n.kt)("em",{parentName:"p"},"yes"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Write status",(0,n.kt)("br",{parentName:"p"}),"\n","Should RRD status files be written? Default is ",(0,n.kt)("em",{parentName:"p"},"yes"),"."))),(0,n.kt)("h4",{id:"storage-outputs"},"Storage Outputs"),(0,n.kt)("p",null,"Perfdata storage outputs save metric data into a database and generate RRD data\nused by the RRD output. This output usually generates multiple queries and is\nvery performance-intensive. If Centreon Broker is slow, try adjusting the\n",(0,n.kt)("em",{parentName:"p"},"maximum queries per transaction")," parameter to optimize processing speed."),(0,n.kt)("p",null,"This output can be tasked to rebuild RRD data from a database of stored metric\ndata. This is usually a slow, costly process, though you can simultaneously\nprocess new metric data at a reduced speed."),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"Storage"),"-type outputs have the following parameters:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"DB Type",(0,n.kt)("br",{parentName:"p"}),"\n","The type of the database being accessed. MariaDB is a state-of-the-art\ndatabase that has been extensively tested by Centreon. We advise using\nMariaDB.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"DB Port",(0,n.kt)("br",{parentName:"p"}),"\n","The port of the database being accessed.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"DB User\nThe user account for connecting to this database."))),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"DB Name",(0,n.kt)("br",{parentName:"p"}),"\n","The name of the database. In Centreon terms, this is the database containing\nthe real-time monitoring data, generally called ",(0,n.kt)("em",{parentName:"p"},"centreon-storage"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"DB Password",(0,n.kt)("br",{parentName:"p"}),"\n","The password used by the output to connect to this database.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Maximum queries per transaction",(0,n.kt)("br",{parentName:"p"}),"\n","This parameter is used to batch several queries in large transactions. This\nallows for improved performance but can generate latency if an insufficient\nnumber of queries are generated to fill those batches. The default is 20000\nqueries per transaction. If you have a low load and unexpectedly high\nlatency, try lowering this number. If you have a high load and high latency,\ntry raising it.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Transaction commit timeout",(0,n.kt)("br",{parentName:"p"}),"\n","Number of seconds allowed before a forced commit is made. Default is\ninfinite. If you have a low load and unexpectedly high latency, try 5\nseconds.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Replication enabled",(0,n.kt)("br",{parentName:"p"}),"\n","Should Centreon Broker check that the replication status of this database is\ncomplete before trying to insert data? Only useful if replication is enabled\nfor this database.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Rebuild check interval in seconds",(0,n.kt)("br",{parentName:"p"}),"\n","The number of seconds between each rebuild check. Default 300 seconds.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Store in performance data in data","_","bin",(0,n.kt)("br",{parentName:"p"}),"\n","Should this output save the metric data in the database? Default is ",(0,n.kt)("em",{parentName:"p"},"yes"),".\nIf ",(0,n.kt)("em",{parentName:"p"},"no"),", this output will generate RRD data without saving them into the\ndatabase, making a rebuild impossible.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Insert in index data",(0,n.kt)("br",{parentName:"p"}),"\n","Should new index data be inserted into the database? Default is ",(0,n.kt)("em",{parentName:"p"},"no"),". This\nshould never be modified unless prompted by Centreon Support or explicitly\nadvised in the documentation."))),(0,n.kt)("h4",{id:"sql-outputs"},"SQL outputs"),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"SQL")," outputs save real-time status data into the real-time database used by\nCentreon Web. This is the most important output for the operation of Centreon\nWeb."),(0,n.kt)("p",null,"Moreover, this output has a ",(0,n.kt)("em",{parentName:"p"},"garbage collector")," that will clean old data from\nthe database occasionally. This is an optional process, as old data is marked\n",(0,n.kt)("em",{parentName:"p"},"disabled"),", and can actually be useful to keep for debugging purposes."),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"SQL"),"-type outputs have the following parameters:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"DB Type",(0,n.kt)("br",{parentName:"p"}),"\n","The type of the database being accessed. MariaDB is a state-of-the-art\ndatabase that has been extensively tested by Centreon. We advise using\nMariaDB.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"DB Port",(0,n.kt)("br",{parentName:"p"}),"\n","The port of the database being accessed.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"DB User",(0,n.kt)("br",{parentName:"p"}),"\n","The user account for connecting to this database.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"DB Name",(0,n.kt)("br",{parentName:"p"}),"\n","The name of the database. In Centreon terms, this is the database containing\nthe real-time monitoring data, generally called ",(0,n.kt)("em",{parentName:"p"},"centreon-storage"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"DB Password",(0,n.kt)("br",{parentName:"p"}),"\n","The password used by the output to connect to this database.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Maximum queries per transaction",(0,n.kt)("br",{parentName:"p"}),"\n","This parameter is used to batch several queries in large transactions. This\nallows for improved performance but can generate latency if an insufficient\nnumber of queries are generated to fill those batches. The default is 20000\nqueries per transaction. If you have a low load and unexpectedly high\nlatency, try lowering this number. If you have a high load and high latency,\ntry raising this number.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Transaction commit timeout",(0,n.kt)("br",{parentName:"p"}),"\n","Number of seconds allowed before a forced commit is made. Default is\ninfinite. If you have a low load and unexpectedly high latency, try 5\nseconds.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Replication enabled",(0,n.kt)("br",{parentName:"p"}),"\n","Should Centreon Broker check that the replication status of this database is\ncomplete before trying to insert data? Only useful if replication is enabled\nfor this database.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Cleanup check interval",(0,n.kt)("br",{parentName:"p"}),"\n",'Number of seconds between each run of the garbage collector "cleaning" out\nold data in the database. Default is never.')),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Instance timeout",(0,n.kt)("br",{parentName:"p"}),"\n","Number of seconds before an instance is marked as ",(0,n.kt)("em",{parentName:"p"},"unresponding")," and all of\nits hosts and services marked as ",(0,n.kt)("em",{parentName:"p"},"unknown"),". Default is 300 seconds."))),(0,n.kt)("h4",{id:"unified-sql-outputs"},"Unified SQL outputs"),(0,n.kt)("p",null,"Unified SQL outputs are the union of ",(0,n.kt)("strong",{parentName:"p"},"Storage")," outputs and ",(0,n.kt)("strong",{parentName:"p"},"SQL")," outputs.\nThey save metric data into a database and generate RRD data used by the RRD\noutput."),(0,n.kt)("p",null,"This output usually generates multiple queries and is very performance-intensive.\nIf Centreon Broker is slow, try adjusting the\n",(0,n.kt)("strong",{parentName:"p"},"maximum queries per transaction")," parameter to optimize processing speed."),(0,n.kt)("p",null,"This output can be tasked to rebuild RRD data from a database of stored metric\ndata. This is usually a slow, costly process, though you can simultaneously\nprocess new metric data at a reduced speed."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Unified SQL")," outputs also save real-time status data into the real-time\ndatabase used by Centreon Web. This is the most important output for the\noperation of Centreon Web."),(0,n.kt)("p",null,"Moreover, this output has a ",(0,n.kt)("strong",{parentName:"p"},"garbage collector")," that will clean old data from\nthe database occasionally. This is an optional process, as old data is marked\n",(0,n.kt)("strong",{parentName:"p"},"disabled"),", and can actually be useful to keep for debugging purposes."),(0,n.kt)("p",null,"Since ",(0,n.kt)("strong",{parentName:"p"},"bbdo 3"),", this output is the preferred one instead of the ",(0,n.kt)("strong",{parentName:"p"},"storage")," and\n",(0,n.kt)("strong",{parentName:"p"},"sql")," outputs. That way, you just need one output to the database,\nconfigurations have to be entered once, and there are fewer conflicts between\noutputs."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"unified-sql"),"-type outputs have the following parameters:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"DB Type\nThe type of the database being accessed. MariaDB is a state-of-the-art\ndatabase that has been extensively tested by Centreon. We advise using\nMariaDB.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"DB Port\nThe port of the database being accessed.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"DB User\nThe user account for connecting to this database.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"DB Name\nThe name of the database. In Centreon terms, this is the database containing\nthe real-time monitoring data, generally called ",(0,n.kt)("em",{parentName:"p"},"centreon-storage"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"DB Password\nThe password used by the output to connect to this database.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Maximum queries per transaction\nThis parameter is used to batch several queries in large transactions. This\nallows for improved performance but can generate latency if an insufficient\nnumber of queries are generated to fill those batches. The default is 20000\nqueries per transaction. If you have a low load and unexpectedly high\nlatency, try lowering this number. If you have a high load and high latency,\ntry raising it.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Transaction commit timeout\nNumber of seconds allowed before a forced commit is made. Default is\ninfinite. If you have a low load and unexpectedly high latency, try 5\nseconds.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Replication enabled\nShould Centreon Broker check that the replication status of this database is\ncomplete before trying to insert data? Only useful if replication is enabled\nfor this database.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Rebuild check interval in seconds\nThe number of seconds between each rebuild check. Default 300 seconds.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Store performance data in data","_","bin\nShould this output save the metric data in the database? Default is ",(0,n.kt)("em",{parentName:"p"},"yes"),".\nIf ",(0,n.kt)("em",{parentName:"p"},"no"),", this output will generate RRD data without saving them into the\ndatabase, making a rebuild impossible.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Insert in index data\nShould new index data be inserted into the database? Default is ",(0,n.kt)("em",{parentName:"p"},"no"),". This\nshould never be modified unless prompted by Centreon Support or explicitly\nadvised in the documentation.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},'Cleanup check interval\nNumber of seconds between each run of the garbage collector "cleaning" out\nold data in the database. Default is never.')),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Instance timeout\nNumber of seconds before an instance is marked as ",(0,n.kt)("em",{parentName:"p"},"unresponding")," and all of\nits hosts and services marked as ",(0,n.kt)("em",{parentName:"p"},"unknown"),". Default is 300 seconds.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Connections count\nNumber of connections to the database maintained by this output. This allows\nthe broker to write data in parallel on several connections. This feature stays\nexperimental as it can lock the database writes."))),(0,n.kt)("h4",{id:"lua-outputs"},"Lua outputs"),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"Lua")," outputs send metrics information into a script by a key-value system. The\nLua script should reside on your server."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Path\nThe path of the Lua script in your server.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Filter category\nThe categories of events accepted by this output. If empty, no restriction\non events is accepted. If specified, only events of the given type will be\nprocessed. Outputs that accept data from Centreon Engine's Broker module\nshould be set to only accept ",(0,n.kt)("em",{parentName:"p"},"Neb")," events."))),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Lua parameter")),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Type\nType of metric value.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Name/Key\nName of metric value.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"Value\nValue of metric."))),(0,n.kt)("h4",{id:"dumper-readerwriter"},"Dumper reader/writer"),(0,n.kt)("p",null,"A ",(0,n.kt)("em",{parentName:"p"},"dumper reader/writer")," pair is used to synchronize part of a database between\ntwo instances of Centreon Broker. In the future we will provide an extensive\nsynchronization mechanism, but today this system is mainly used to synchronize\nBAs for the BAM Poller Display mechanism."),(0,n.kt)("p",null,"The BAM Poller Display configuration documentation explains how to properly\nconfigure these outputs."),(0,n.kt)("p",null,(0,n.kt)("em",{parentName:"p"},"Dumper Reader"),"-type and ",(0,n.kt)("em",{parentName:"p"},"Dumper Writer"),"-type outputs have the following\nparameters:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"DB Type",(0,n.kt)("br",{parentName:"p"}),"\n","The type of the database being accessed. MariaDB is a state-of-the-art\ndatabase that has been extensively tested by Centreon. We advise using\nMariaDB.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"DB Port",(0,n.kt)("br",{parentName:"p"}),"\n","The port of the database being accessed.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"DB User",(0,n.kt)("br",{parentName:"p"}),"\n","The user account for connecting to this database.")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"DB Name",(0,n.kt)("br",{parentName:"p"}),"\n","The name of the database. In Centreon terms, this is the database containing\nthe real-time monitoring data, generally called ",(0,n.kt)("em",{parentName:"p"},"centreon-storage"),".")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"DB Password",(0,n.kt)("br",{parentName:"p"}),"\n","The password used by the output to connect to this database."))))}k.isMDXComponent=!0},39445:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/broker-certificates-42dbbe021f4a6ce7c3c0cfb6d44d3a96.png"},65029:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/on-peer-configuration-1-a18dcbf35102015786f210538f2637cc.png"},66794:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/on-peer-configuration-2-6599d8bc3657a74985152de4040d94c2.png"}}]);