"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[30932],{78969:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>k,frontMatter:()=>p,metadata:()=>u,toc:()=>g});t(67294);var r=t(3905),a=t(51715),o=t(7626);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}const p={id:"using-sources",title:"Using sources"},c=void 0,u={unversionedId:"installation/installation-of-a-central-server/using-sources",id:"version-23.10/installation/installation-of-a-central-server/using-sources",title:"Using sources",description:"Prerequisites",source:"@site/versioned_docs/version-23.10/installation/installation-of-a-central-server/using-sources.md",sourceDirName:"installation/installation-of-a-central-server",slug:"/installation/installation-of-a-central-server/using-sources",permalink:"/centreon-documentation/pr-preview/staging/pr-2756/docs/installation/installation-of-a-central-server/using-sources",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/versioned_docs/version-23.10/installation/installation-of-a-central-server/using-sources.md",tags:[],version:"23.10",lastUpdatedAt:1699633150,formattedLastUpdatedAt:"Nov 10, 2023",frontMatter:{id:"using-sources",title:"Using sources"},sidebar:"version-23.10/docs",previous:{title:"Using a virtual machine (VM)",permalink:"/centreon-documentation/pr-preview/staging/pr-2756/docs/installation/installation-of-a-central-server/using-virtual-machines"},next:{title:"Web And Post Installation",permalink:"/centreon-documentation/pr-preview/staging/pr-2756/docs/installation/web-and-post-installation"}},d={},g=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Centreon library (Centreon CLIB)",id:"centreon-library-centreon-clib",level:2},{value:"Monitoring engine (Centreon Engine)",id:"monitoring-engine-centreon-engine",level:2},{value:"Prerequisites",id:"prerequisites-1",level:3},{value:"Installation",id:"installation",level:3},{value:"Stream Multiplexer (Centreon Broker)",id:"stream-multiplexer-centreon-broker",level:2},{value:"Prerequisites",id:"prerequisites-2",level:3},{value:"Installation",id:"installation-1",level:3},{value:"Centreon Plugins",id:"centreon-plugins",level:2},{value:"Centreon Gorgone",id:"centreon-gorgone",level:2},{value:"Secure the database",id:"secure-the-database",level:3},{value:"Server name",id:"server-name",level:2},{value:"Centreon",id:"centreon",level:2},{value:"Prerequisites check",id:"prerequisites-check",level:3},{value:"License agreement",id:"license-agreement",level:3},{value:"Main components",id:"main-components",level:3},{value:"Definition of installation paths",id:"definition-of-installation-paths",level:3},{value:"Centreon user and group",id:"centreon-user-and-group",level:3},{value:"Monitoring user",id:"monitoring-user",level:3},{value:"Monitoring logs directory",id:"monitoring-logs-directory",level:3},{value:"Sudo configuration",id:"sudo-configuration",level:3},{value:"Apache configuration",id:"apache-configuration",level:3},{value:"PHP FPM configuration",id:"php-fpm-configuration",level:3},{value:"Pear module installation",id:"pear-module-installation",level:3},{value:"Configuration file installation",id:"configuration-file-installation",level:3},{value:"Performance data component (Centstorage) installation",id:"performance-data-component-centstorage-installation",level:3},{value:"Plugin installation",id:"plugin-installation",level:3},{value:"Centreon SNMP trap management installation",id:"centreon-snmp-trap-management-installation",level:3},{value:"End",id:"end",level:4},{value:"PHP dependencies installation",id:"php-dependencies-installation",level:3},{value:"Javascript dependencies installation",id:"javascript-dependencies-installation",level:3},{value:"Any operating system",id:"any-operating-system",level:3},{value:"Web installation",id:"web-installation",level:2}],m={toc:g},h="wrapper";function k(e){var{components:n}=e,t=s(e,["components"]);return(0,r.kt)(h,i(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){l(e,n,t[n])}))}return e}({},m,t),{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Most CentOS users will find it easier to install Centreon Web by ",(0,r.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2756/docs/installation/installation-of-a-central-server/using-packages"},"using packages"),".")),(0,r.kt)(a.Z,{groupId:"sync",mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"Oracle Linux 8",label:"Oracle Linux 8",mdxType:"TabItem"},(0,r.kt)("p",null,"To install Centreon, you will need to enable the official Oracle CodeReady Builder repository supported by Oracle."),(0,r.kt)("p",null,"Enable the CodeReady Builder repository using these commands:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dnf -y install dnf-plugins-core oracle-epel-release-el8\ndnf config-manager --set-enabled ol8_codeready_builder\n")),(0,r.kt)("p",null,"Install the Centreon repository for additional perl dependencies:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install -y https://packages.centreon.com/rpm-standard/22.10/el8/stable/noarch/RPMS/centreon-release-22.10-1.el8.noarch.rpm\n")),(0,r.kt)("p",null,"Enable PHP 7.3 using the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dnf module enable php:7.3 -y\n")),(0,r.kt)("p",null,"Check that PHP 7.3 is activated:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dnf module list php\n")),(0,r.kt)("p",null,"You should have this result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"Oracle Linux 8 Application Stream (x86_64)\nName                                Stream                                 Profiles                                                 Summary\nphp                                 7.2 [d]                                common [d], devel, minimal                               PHP scripting language\nphp                                 7.3 [e]                                common [d], devel, minimal                               PHP scripting language\nphp                                 7.4                                    common [d], devel, minimal                               PHP scripting language\n\nHint: [d]efault, [e]nabled, [x]disabled, [i]nstalled\n")),(0,r.kt)("p",null,"The repositories are now installed."),(0,r.kt)("p",null,"You can now install the necessary prerequisites:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dnf update\ndnf install -y \\\n    cpp \\\n    dmidecode \\\n    fping \\\n    freetds \\\n    gcc \\\n    gcc-c++ \\\n    glib2-devel \\\n    gnutls \\\n    gnutls-devel \\\n    httpd \\\n    libstdc++ \\\n    lm_sensors \\\n    lua \\\n    lua-devel \\\n    mailx \\\n    make \\\n    net-snmp \\\n    net-snmp-libs \\\n    net-snmp-perl \\\n    net-snmp-utils \\\n    net-tools \\\n    npm \\\n    openssl \\\n    openwsman-perl \\\n    perl \\\n    perl-Crypt-DES \\\n    perl-DBD-MySQL \\\n    perl-DBI \\\n    perl-DateTime \\\n    perl-DateTime-Format-Duration-ISO8601 \\\n    perl-Digest-HMAC \\\n    perl-Digest-SHA1 \\\n    perl-Encode \\\n    perl-interpreter \\\n    perl-IO-Socket-INET6 \\\n    perl-JSON \\\n    perl-MQSeries \\\n    perl-MongoDB \\\n    perl-Net-Curl \\\n    perl-Redis \\\n    perl-Socket \\\n    perl-Socket6 \\\n    perl-Sys-Syslog \\\n    perl-URI \\\n    perl-UUID \\\n    perl-rrdtool \\\n    php \\\n    php-cli \\\n    php-common \\\n    php-devel \\\n    php-fpm \\\n    php-gd \\\n    php-intl \\\n    php-json \\\n    php-ldap \\\n    php-mbstring \\\n    php-mysqlnd \\\n    php-pdo \\\n    php-pear \\\n    php-process \\\n    php-snmp \\\n    php-xml \\\n    php-zip \\\n    plink \\\n    quota \\\n    rrdtool \\\n    rrdtool-devel \\\n    unixODBC\n")),(0,r.kt)("p",null,"Additional commands are necessary to configure the environment correctly:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"/bin/pear channel-update pear.php.net\n")),(0,r.kt)("p",null,"If you can\u2019t access the Internet directly but have to go via a proxy,\nuse the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"/bin/pear config-set http_proxy http://my_proxy.com:port\n")),(0,r.kt)("p",null,"Then execute:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"/bin/pear upgrade-all\n"))),(0,r.kt)(o.Z,{value:"RHEL 8",label:"RHEL 8",mdxType:"TabItem"},(0,r.kt)("p",null,"To install Centreon, you will need to enable the official CodeReady Builder repository supported by Redhat."),(0,r.kt)("p",null,"Enable the CodeReady Builder repository using these commands:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dnf -y install dnf-plugins-core https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm\nsubscription-manager repos --enable codeready-builder-for-rhel-8-x86_64-rpms\n")),(0,r.kt)("p",null,"Install the Centreon repository for additional perl dependencies:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install -y https://packages.centreon.com/rpm-standard/22.10/el8/stable/noarch/RPMS/centreon-release-22.10-1.el8.noarch.rpm\n")),(0,r.kt)("p",null,"Enable PHP 7.3 using the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dnf module enable php:7.3 -y\n")),(0,r.kt)("p",null,"Check that PHP 7.3 is activated:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dnf module list php\n")),(0,r.kt)("p",null,"You should have this result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"Red Hat Enterprise Linux 8 for x86_64 - AppStream (RPMs)\nName                                Stream                                 Profiles                                                 Summary\nphp                                 7.2 [d]                                common [d], devel, minimal                               PHP scripting language\nphp                                 7.3 [e]                                common [d], devel, minimal                               PHP scripting language\nphp                                 7.4                                    common [d], devel, minimal                               PHP scripting language\n\nHint: [d]efault, [e]nabled, [x]disabled, [i]nstalled\n")),(0,r.kt)("p",null,"The repositories are now installed."),(0,r.kt)("p",null,"You can now install the necessary prerequisites:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dnf update\ndnf install -y \\\n    cpp \\\n    dmidecode \\\n    fping \\\n    freetds \\\n    gcc \\\n    gcc-c++ \\\n    glib2-devel \\\n    gnutls \\\n    gnutls-devel \\\n    httpd \\\n    libstdc++ \\\n    lm_sensors \\\n    lua \\\n    lua-devel \\\n    mailx \\\n    make \\\n    net-snmp \\\n    net-snmp-libs \\\n    net-snmp-perl \\\n    net-snmp-utils \\\n    net-tools \\\n    npm \\\n    openssl \\\n    openwsman-perl \\\n    perl \\\n    perl-Crypt-DES \\\n    perl-DBD-MySQL \\\n    perl-DBI \\\n    perl-DateTime \\\n    perl-DateTime-Format-Duration-ISO8601 \\\n    perl-Digest-HMAC \\\n    perl-Digest-SHA1 \\\n    perl-Encode \\\n    perl-interpreter \\\n    perl-IO-Socket-INET6 \\\n    perl-JSON \\\n    perl-MQSeries \\\n    perl-MongoDB \\\n    perl-Net-Curl \\\n    perl-Redis \\\n    perl-Socket \\\n    perl-Socket6 \\\n    perl-Sys-Syslog \\\n    perl-URI \\\n    perl-UUID \\\n    perl-rrdtool \\\n    php \\\n    php-cli \\\n    php-common \\\n    php-devel \\\n    php-fpm \\\n    php-gd \\\n    php-intl \\\n    php-json \\\n    php-ldap \\\n    php-mbstring \\\n    php-mysqlnd \\\n    php-pdo \\\n    php-pear \\\n    php-process \\\n    php-snmp \\\n    php-xml \\\n    php-zip \\\n    plink \\\n    quota \\\n    rrdtool \\\n    rrdtool-devel \\\n    unixODBC\n")),(0,r.kt)("p",null,"Additional commands are necessary to configure the environment correctly:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"/bin/pear channel-update pear.php.net\n")),(0,r.kt)("p",null,"If you can\u2019t access the Internet directly but have to go via a proxy,\nuse the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"/bin/pear config-set http_proxy http://my_proxy.com:port\n")),(0,r.kt)("p",null,"Then execute:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"/bin/pear upgrade-all\n")))),(0,r.kt)("h2",{id:"centreon-library-centreon-clib"},"Centreon library (Centreon CLIB)"),(0,r.kt)("p",null,"Please install Centreon CLIB using ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/centreon/centreon-clib#fetching-sources"},"this procedure"),"."),(0,r.kt)("h2",{id:"monitoring-engine-centreon-engine"},"Monitoring engine (Centreon Engine)"),(0,r.kt)("h3",{id:"prerequisites-1"},"Prerequisites"),(0,r.kt)("p",null,"Create Centreon Engine user and group:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'groupadd -g 6001 centreon-engine\nuseradd -u 6001 -g centreon-engine -m -r -d /var/lib/centreon-engine -c "Centreon Engine" -s /bin/bash centreon-engine\n')),(0,r.kt)("h3",{id:"installation"},"Installation"),(0,r.kt)("p",null,"Please install Centreon Engine using ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/centreon/centreon-engine/blob/master/README.md#fetching-sources"},"this procedure"),"."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Remember to install the ",(0,r.kt)("a",{parentName:"p",href:"https://library.nagios.com/"},"Nagios plugins")," if you have not already done so.")),(0,r.kt)("h2",{id:"stream-multiplexer-centreon-broker"},"Stream Multiplexer (Centreon Broker)"),(0,r.kt)("h3",{id:"prerequisites-2"},"Prerequisites"),(0,r.kt)("p",null,"Create Centreon Broker user and group:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'groupadd -g 6002 centreon-broker\nuseradd -u 6002 -g centreon-broker -m -r -d /var/lib/centreon-broker -c "Centreon Broker"  -s /bin/bash centreon-broker\n')),(0,r.kt)("h3",{id:"installation-1"},"Installation"),(0,r.kt)("p",null,"Please install Centreon Broker using ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/centreon/centreon-broker/blob/master/README.md#fetching-sources"},"this procedure"),"."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"If you want to use Stream Connector functionality, please install ",(0,r.kt)("a",{parentName:"p",href:"https://luarocks.org/modules/moteus/lua-curl"},"lua-curl"),".")),(0,r.kt)("h2",{id:"centreon-plugins"},"Centreon Plugins"),(0,r.kt)("p",null,"Download the latest version from the ",(0,r.kt)("a",{parentName:"p",href:"https://download.centreon.com"},"Centreon download web site")," in the ",(0,r.kt)("strong",{parentName:"p"},"Custom Platforms"),"\ntab, then ",(0,r.kt)("strong",{parentName:"p"},"Plugins")," tab."),(0,r.kt)("p",null,"Then copy the tarball on your server in the ",(0,r.kt)("strong",{parentName:"p"},"/tmp")," directory and execute the following commands:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tar xzf centreon-plugins-20210317.tar.gz\ncd centreon-plugins-20210317\nchown centreon-engine: *\nchmod gu+x *\nmkdir -p /usr/lib/centreon/plugins\nmv * /usr/lib/centreon/plugins/\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Change the timestamp ",(0,r.kt)("strong",{parentName:"p"},"20210317")," date.")),(0,r.kt)("h2",{id:"centreon-gorgone"},"Centreon Gorgone"),(0,r.kt)("p",null,"Please install Centreon Gorgone using ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/centreon/centreon-gorgone/blob/master/docs/getting_started.md#installation"},"this procedure"),"."),(0,r.kt)("h3",{id:"secure-the-database"},"Secure the database"),(0,r.kt)("p",null,"Since MariaDB 10.5, it is mandatory to secure the database's root access before installing Centreon. Run the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"mysql_secure_installation\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Answer ",(0,r.kt)("strong",{parentName:"li"},"yes"),' to all questions except "Disallow root login remotely?".'),(0,r.kt)("li",{parentName:"ul"},"It is mandatory to set a password for the ",(0,r.kt)("strong",{parentName:"li"},"root")," user of the database. You will need this password during the ",(0,r.kt)("a",{parentName:"li",href:"/centreon-documentation/pr-preview/staging/pr-2756/docs/installation/web-and-post-installation"},"web installation"),".")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"For more information, please see the ",(0,r.kt)("a",{parentName:"p",href:"https://mariadb.com/kb/en/mysql_secure_installation/"},"official MariaDB documentation"),".")),(0,r.kt)("h2",{id:"server-name"},"Server name"),(0,r.kt)("p",null,"If you want, you can change the server name using the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"hostnamectl set-hostname new-server-name\n")),(0,r.kt)("p",null,"Replace ",(0,r.kt)("strong",{parentName:"p"},"new-server-name")," with the name of your choice. Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"hostnamectl set-hostname central\n")),(0,r.kt)("h2",{id:"centreon"},"Centreon"),(0,r.kt)("p",null,"Download the latest version from the ",(0,r.kt)("a",{parentName:"p",href:"https://download.centreon.com"},"Centreon download web site"),"\nin the ",(0,r.kt)("strong",{parentName:"p"},"Custom Platforms")," tab, and then the ",(0,r.kt)("strong",{parentName:"p"},"Web")," tab."),(0,r.kt)("p",null,"Extract the Centreon archive:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"tar zxf centreon-web-YY.MM.x.tar.gz\ncd centreon-web-YY.MM.x\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"The installation script allows customized configuration; this process will show you the best paths to use. Furthermore\nquick yes/no questions can be replied to by ","[y]"," most of the time."),(0,r.kt)("p",{parentName:"blockquote"},"If centreon sources have been downloaded from github, run these commands:"),(0,r.kt)("pre",{parentName:"blockquote"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"composer install --no-dev --optimize-autoloader\nnpm ci\nnpm run build\n")),(0,r.kt)("p",{parentName:"blockquote"},"you can download ",(0,r.kt)("strong",{parentName:"p"},"composer")," from ",(0,r.kt)("a",{parentName:"p",href:"https://getcomposer.org/doc/00-intro.md#installation-linux-unix-macos"},"official web site"),".")),(0,r.kt)("p",null,"Run the installation script:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"./install.sh -i\n")),(0,r.kt)("h3",{id:"prerequisites-check"},"Prerequisites check"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"If the Prerequisites installation step has been run successfully, you should have\nno problem during this stage. Otherwise, repeat the Prerequisites installation\nprocess:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"###############################################################################\n#                                                                             #\n#                         Centreon (www.centreon.com)                         #\n#                          Thanks for using Centreon                          #\n#                                                                             #\n#                                    vYY.MM.x                                 #\n#                                                                             #\n#                              infos@centreon.com                             #\n#                                                                             #\n#                   Make sure you have installed and configured               #\n#         centreon-gorgone - sudo - sed - php - apache - rrdtool - mysql      #\n#                                                                             #\n###############################################################################\n------------------------------------------------------------------------\n        Checking all needed binaries\n------------------------------------------------------------------------\nrm                                                         OK\ncp                                                         OK\nmv                                                         OK\n/bin/chmod                                                 OK\n/bin/chown                                                 OK\necho                                                       OK\nmore                                                       OK\nmkdir                                                      OK\nfind                                                       OK\n/bin/grep                                                  OK\n/bin/cat                                                   OK\n/bin/sed                                                   OK\n\n------------------------------------------------------------------------\n        Check mandatory gorgone service status\n------------------------------------------------------------------------\n\nIs the Gorgone module already installed?\n[y/n], default to [n]:\n> y\n")),(0,r.kt)("h3",{id:"license-agreement"},"License agreement"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"This General Public License does not permit incorporating your program into\nproprietary programs.  If your program is a subroutine library, you may\nconsider it more useful to permit linking proprietary applications with the\nlibrary.  If this is what you want to do, use the GNU Library General\nPublic License instead of this License.\n\nDo you accept the GPLv2 license?\n[y/n], default to [n]:\n> y\n")),(0,r.kt)("h3",{id:"main-components"},"Main components"),(0,r.kt)("p",null,"Answer ",(0,r.kt)("strong",{parentName:"p"},"[y]")," to all the questions:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"------------------------------------------------------------------------\n        Please choose what you want to install\n------------------------------------------------------------------------\n\nDo you want to install: Centreon Web Front\n[y/n], default to [n]:\n> y\n\nDo you want to install: Centreon Nagios Plugins\n[y/n], default to [n]:\n> y\n\nDo you want to install: CentreonTrapd process\n[y/n], default to [n]:\n> y\n")),(0,r.kt)("h3",{id:"definition-of-installation-paths"},"Definition of installation paths"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"------------------------------------------------------------------------\n        Start CentWeb Installation\n------------------------------------------------------------------------\n\nWhere is your Centreon directory?\ndefault to [/usr/local/centreon]\n> /usr/share/centreon\nPath /usr/share/centreon                                   OK\n\nWhere is your Centreon log directory?\ndefault to [/usr/local/centreon/log]\n> /var/log/centreon\n\nDo you want me to create this directory? [/var/log/centreon]\n[y/n], default to [n]:\n> y\nPath /var/log/centreon                                     OK\n\nWhere is your Centreon etc directory?\ndefault to [/etc/centreon]\n>\n\nDo you want me to create this directory? [/etc/centreon]\n[y/n], default to [n]:\n> y\nPath /etc/centreon                                         OK\n\nWhere is your Centreon variable state information directory?\ndefault to [/var/lib/centreon]\n>\n\nDo you want me to create this directory? [/var/lib/centreon]\n[y/n], default to [n]:\n> y\nPath /var/lib/centreon                                     OK\n\nWhere is rrdtool\ndefault to [/usr/bin/rrdtool]\n> /opt/rrdtool-broker/bin/rrdtool\n/opt/rrdtool-broker/bin/rrdtool                            OK\n\n/usr/bin/mail                                              OK\n\nWhere is your php binary?\ndefault to [/usr/bin/php]\n>\n/usr/bin/php                                               OK\n\nWhere is PEAR [PEAR.php]\ndefault to [/usr/share/pear/PEAR.php]\n> /usr/share/php/PEAR.php\nPath /usr/share/php/PEAR.php                               OK\n/usr/bin/perl                                              OK\nComposer dependencies are installed                        OK\nFrontend application is built                              OK\nEnable Apache configuration                                OK\nConf centreon already enabled\nFinding Apache user:                                      www-data\nFinding Apache group:                                     www-data\n")),(0,r.kt)("h3",{id:"centreon-user-and-group"},"Centreon user and group"),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"centreon")," group of applications is used for access rights\nbetween the various programs of the Centreon suite:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"What is the Centreon group? [centreon]\ndefault to [centreon]\n>\n\nWhat is the Centreon user? [centreon]\ndefault to [centreon]\n>\n")),(0,r.kt)("h3",{id:"monitoring-user"},"Monitoring user"),(0,r.kt)("p",null,"This is the user used to run the monitoring engine (Centreon Engine)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"What is the Monitoring engine user? [centreon-engine]\ndefault to [centreon-engine]\n>\n")),(0,r.kt)("p",null,"This is the user used to run the stream broker (Centreon Broker)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"What is your Centreon Broker user? [centreon-broker]\ndefault to [centreon-broker]\n>\n")),(0,r.kt)("h3",{id:"monitoring-logs-directory"},"Monitoring logs directory"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"What is the Monitoring engine log directory?[/var/log/centreon-engine]\ndefault to [/var/log/centreon-engine]\n>\nPath                                                       OK\nPath                                                       OK\nAdd group centreon to user www-data                        OK\nAdd group centreon to user centreon-engine                 OK\nAdd group centreon-engine to user www-data                 OK\nAdd group centreon-engine to user centreon                 OK\nAdd group www-data to user centreon                        OK\n")),(0,r.kt)("h3",{id:"sudo-configuration"},"Sudo configuration"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"------------------------------------------------------------------------\n        Configure Sudo\n------------------------------------------------------------------------\n\nWhere is the sudo configuration file?\ndefault to [/etc/sudoers.d/centreon]\n>\n\nDo you want me to create this file? [/etc/sudoers.d/centreon]\n[y/n], default to [n]:\n>  y\n/etc/sudoers.d/centreon                                    OK\n\nWhat is the Monitoring engine binary? [/usr/sbin/centengine]\ndefault to [/usr/sbin/centengine]\n>\n\nWhere is the Monitoring engine configuration directory? [/etc/centreon-engine]\ndefault to [/etc/centreon-engine]\n>\n\nWhere is the configuration directory for the broker module? [/etc/centreon-broker]\ndefault to [/etc/centreon-broker]\n>\n\nWhere is your service command binary?\ndefault to [/usr/sbin/service]\n>\nYour sudo is not configured\n\nDo you want me to configure your sudo? (WARNING)\n[y/n], default to [n]:\n>  y\nConfiguring Sudo                                           OK\n")),(0,r.kt)("h3",{id:"apache-configuration"},"Apache configuration"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"------------------------------------------------------------------------\n        Configure Apache server\n------------------------------------------------------------------------\n\nDo you want to add the Centreon Apache sub configuration file?\n[y/n], default to [n]:\n> y\nCreate '/etc/apache2/conf-available/centreon.conf'         OK\nConfiguring Apache                                         OK\n\nDo you want to reload your Apache?\n[y/n], default to [n]:\n> y\nReloading Apache service                                   OK\n")),(0,r.kt)("h3",{id:"php-fpm-configuration"},"PHP FPM configuration"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"------------------------------------------------------------------------\n        Configure PHP FPM service\n------------------------------------------------------------------------\n\nDo you want to add the Centreon PHP FPM sub configuration file?\n[y/n], default to [n]:\n> y\nCreating directory /var/lib/centreon/sessions              OK\nCreate 'etc/php/7.2/fpm/pool.d/centreon.conf'              OK\nConfiguring PHP FPM                                        OK\n\nDo you want to reload PHP FPM service ?\n[y/n], default to [n]:\n> y\nReloading PHP FPM service                                  OK\nPreparing Centreon temporary files                         OK\nChange right on /var/log/centreon                          OK\nChange right on /etc/centreon                              OK\nChange macros for insertBaseConf.sql                       OK\nChange macros for sql update files                         OK\nChange macros for php files                                OK\nChange macros for php config file                          OK\nChange macros for perl binary                              OK\nChange right on /etc/centreon-engine                       OK\nAdd group centreon-broker to user www-data                 OK\nAdd group centreon-broker to user centreon-engine          OK\nAdd group centreon to user centreon-broker                 OK\nChange right on /etc/centreon-broker                       OK\nCopy CentWeb in system directory                           OK\nInstall CentWeb (web front of centreon)                    OK\nChange right for install directory                         OK\nInstall libraries                                          OK\nWrite right to Smarty Cache                                OK\nChange macros for centreon.cron                            OK\nInstall Centreon cron.d file                               OK\nChange macros for centAcl.php                              OK\nChange macros for downtimeManager.php                      OK\nChange macros for centreon-backup.pl                       OK\nInstall cron directory                                     OK\nChange right for eventReportBuilder                        OK\nChange right for dashboardBuilder                          OK\nChange right for centreon-backup.pl                        OK\nChange right for centreon-backup-mysql.pl                  OK\nChange macros for centreon.logrotate                       OK\nInstall Centreon logrotate.d file                          OK\nPrepare centFillTrapDB                                     OK\nInstall centFillTrapDB                                     OK\nPrepare centreon_trap_send                                 OK\nInstall centreon_trap_send                                 OK\nPrepare centreon_check_perfdata                            OK\nInstall centreon_check_perfdata                            OK\nPrepare centreonSyncPlugins                                OK\nInstall centreonSyncPlugins                                OK\nPrepare centreonSyncArchives                               OK\nInstall centreonSyncArchives                               OK\nPrepare generateSqlLite                                    OK\nInstall generateSqlLite                                    OK\nInstall changeRrdDsName.pl                                 OK\nPrepare export-mysql-indexes                               OK\nInstall export-mysql-indexes                               OK\nPrepare import-mysql-indexes                               OK\nInstall import-mysql-indexes                               OK\nPrepare clapi binary                                       OK\nInstall clapi binary                                       OK\nCentreon Web Perl lib installed                            OK\n")),(0,r.kt)("h3",{id:"pear-module-installation"},"Pear module installation"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"------------------------------------------------------------------------\nPear Modules\n------------------------------------------------------------------------\nCheck PEAR modules\nPEAR                            1.4.9       1.10.8         OK\nDB                              1.7.6       1.9.2          OK\nDate                            1.4.6       1.4.7          OK\nAll PEAR modules                                           OK\n")),(0,r.kt)("h3",{id:"configuration-file-installation"},"Configuration file installation"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"------------------------------------------------------------------------\n            Centreon Post Install\n------------------------------------------------------------------------\nCreate /usr/share/centreon/www/install/install.conf.php    OK\nCreate /etc/centreon/instCentWeb.conf                      OK\n")),(0,r.kt)("h3",{id:"performance-data-component-centstorage-installation"},"Performance data component (Centstorage) installation"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"------------------------------------------------------------------------\n        Starting CentStorage Installation\n------------------------------------------------------------------------\n\nWhere is your Centreon Run Dir directory?\ndefault to [/var/run/centreon]\n>\n\nDo you want me to create this directory? [/var/run/centreon]\n[y/n], default to [n]:\n> y\nPath /var/run/centreon                                     OK\n\nWhere is your CentStorage binary directory?\ndefault to [/usr/share/centreon/bin]\n>\nPath /usr/share/centreon/bin                               OK\n\nWhere is your CentStorage RRD directory?\ndefault to [/var/lib/centreon]\n>\nPath /var/lib/centreon                                     OK\nPreparing Centreon temporary files\n/tmp/centreon-setup exists, it will be moved...\ninstall www/install/createTablesCentstorage.sql            OK\nCreating Centreon Directory '/var/lib/centreon/status'     OK\nCreating Centreon Directory '/var/lib/centreon/metrics'    OK\nChange right: /var/run/centreon                           OK\nInstall logAnalyserBroker                                  OK\nInstall nagiosPerfTrace                                    OK\nChange macros for centstorage.cron                         OK\nInstall CentStorage cron                                   OK\nCreate /etc/centreon/instCentStorage.conf                  OK\n")),(0,r.kt)("h3",{id:"plugin-installation"},"Plugin installation"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"------------------------------------------------------------------------\n        Starting Centreon Plugins Installation\n------------------------------------------------------------------------\nPath                                                       OK\nPath                                                       OK\n\nWhere is your CentPlugins lib directory\ndefault to [/var/lib/centreon/centplugins]\n>\n\nDo you want me to create this directory? [/var/lib/centreon/centplugins]\n[y/n], default to [n]:\n> y\nPath /var/lib/centreon/centplugins                         OK\nCreate /etc/centreon/instCentPlugins.conf                  OK\n")),(0,r.kt)("h3",{id:"centreon-snmp-trap-management-installation"},"Centreon SNMP trap management installation"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"------------------------------------------------------------------------\n        Starting CentreonTrapD Installation\n------------------------------------------------------------------------\n\nPath                                                       OK\nPath                                                       OK\n\nWhere is your SNMP configuration directory?\ndefault to [/etc/snmp]\n>\n/etc/snmp                                                  OK\n\nWhere is your CentreonTrapd binaries directory?\ndefault to [/usr/local/centreon/bin]\n> /usr/share/centreon/bin\n/usr/share/centreon/bin                                    OK\n\nFinding Apache user:                                      www-data\nPreparing Centreon temporary files\nChange macros for snmptrapd.conf                           OK\nReplace CentreonTrapd init script Macro                    OK\nReplace CentreonTrapd default script Macro                 OK\n\nDo you want me to install CentreonTrapd init script?\n[y/n], default to [n]:\n> y\nCentreonTrapd init script installed                        OK\nCentreonTrapd default script installed                     OK\n\nDo you want me to install CentreonTrapd run level?\n[y/n], default to [n]:\n> y\ntrapd Perl lib installed                                   OK\nInstall: snmptrapd.conf                                   OK\nInstall: centreontrapdforward                             OK\nInstall: centreontrapd                                    OK\nChange macros for centreontrapd.logrotate                  OK\nInstall Centreon Trapd logrotate.d file                    OK\nCreate /etc/centreon/instCentPlugins.conf                  OK\n")),(0,r.kt)("h4",{id:"end"},"End"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"###############################################################################\n#                                                                             #\n#                         Thanks for using Centreon.                          #\n#                          -----------------------                            #\n#                                                                             #\n#                 Go to the URL: http://localhost.localdomain/centreon/      #\n#                          to finish the setup                                #\n#                                                                             #\n#                Please read the documentation available here:               #\n#                         documentation.centreon.com                          #\n#                                                                             #\n#      ------------------------------------------------------------------     #\n#                                                                             #\n#         Report bugs at https://github.com/centreon/centreon/issues          #\n#                                                                             #\n#                        Contact : contact@centreon.com                       #\n#                          http://www.centreon.com                            #\n#                                                                             #\n#                          -----------------------                            #\n#              For security issues, please read our security policy           #\n#              https://github.com/centreon/centreon/security/policy           #\n#                                                                             #\n###############################################################################\n")),(0,r.kt)("h3",{id:"php-dependencies-installation"},"PHP dependencies installation"),(0,r.kt)("p",null,"First, you need to install PHP dependency installer ",(0,r.kt)("strong",{parentName:"p"},"composer"),". Composer can be downloaded\n",(0,r.kt)("a",{parentName:"p",href:"https://getcomposer.org/download/"},"here")," (it is also available in EPEL repository)."),(0,r.kt)("p",null,"Once composer is installed, go to the centreon directory (usually ",(0,r.kt)("strong",{parentName:"p"},"/usr/share/centreon/"),") and run the following\ncommand:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"composer install --no-dev --optimize-autoloader\n")),(0,r.kt)("h3",{id:"javascript-dependencies-installation"},"Javascript dependencies installation"),(0,r.kt)("p",null,"First, you need to install javascript runtime ",(0,r.kt)("strong",{parentName:"p"},"nodejs"),". Installation instructions are available\n",(0,r.kt)("a",{parentName:"p",href:"https://nodejs.org/en/download/package-manager/"},"here"),"."),(0,r.kt)("p",null,"Once nodejs is installed, copy the JSON files to the installation folder:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"cp /usr/local/src/centreon-web-YY.MM.x/package* /usr/share/centreon/\n")),(0,r.kt)("p",null,"Then go to the centreon directory (usually ",(0,r.kt)("strong",{parentName:"p"},"/usr/share/centreon/"),") and run the following commands:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"npm install\nnpm run build\nrm -rf node_modules\n")),(0,r.kt)("h3",{id:"any-operating-system"},"Any operating system"),(0,r.kt)("p",null,"SELinux should be disabled; to do this, modify the file ",(0,r.kt)("strong",{parentName:"p"},"/etc/sysconfig/selinux"),"\nand replace ",(0,r.kt)("strong",{parentName:"p"},"enforcing")," by ",(0,r.kt)("strong",{parentName:"p"},"disabled"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"SELINUX=disabled\n")),(0,r.kt)("p",null,"After saving the file, please reboot your operating system to apply the changes."),(0,r.kt)("p",null,"Timezone and mandatory PHP parameters must be set: go to the ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/php/7.2/cli/conf.d")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"/etc/php/7.2/apache2/conf.d"),"\ndirectory and create a file named ",(0,r.kt)("inlineCode",{parentName:"p"},"centreon.ini")," that contains the following lines:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"date.timezone = Europe/Paris\nmax_execution_time = 300\nsession.use_strict_mode = 1\nsession.gc_maxlifetime = 7200\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Replace ",(0,r.kt)("strong",{parentName:"p"},"Europe/Paris")," with your time zone. You can find the list of\nsupported time zones ",(0,r.kt)("a",{parentName:"p",href:"http://php.net/manual/en/timezones.php"},"here"),".")),(0,r.kt)("p",null,"After saving the file, please remember to restart the apache server."),(0,r.kt)("p",null,"The Mysql database server should be available to complete the installation (locally or not). MariaDB is recommended."),(0,r.kt)("p",null,"After this step, you should connect to Centreon to finalize the installation process."),(0,r.kt)("h2",{id:"web-installation"},"Web installation"),(0,r.kt)("p",null,"Finish the installation by performing\n",(0,r.kt)("a",{parentName:"p",href:"/centreon-documentation/pr-preview/staging/pr-2756/docs/installation/web-and-post-installation#web-installation"},"web installation steps"),"."))}k.isMDXComponent=!0}}]);