---
id: poller-troubleshoot
title: Troubleshooting your pollers
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

This document provides procedures to troubleshoot issues with the Centreon pollers **in the Centreon Cloud environment**.

## What's inside a poller?

A poller basically consists of two services:

* **Gorgone** (the **gorgoned** process) is responsible for managing the monitoring configuration. It receives and applies configurations on the poller when a user [deploys the configuration](../monitoring/monitoring-servers/deploying-a-configuration.md) for this poller from the Centreon Cloud interface.

* **centengine** or **centreon-engine**/Engine is responsible for scheduling and executing checks on monitored resources and for sending check results to the Centreon Cloud platform.

Both of them are connected to services hosted by Centreon.

## Installation issues

Check the following log file for any errors (located in the folder created by the installation script in the directory where the installation script was executed).

```shell
less ./log/register-poller.log
```

## Monitoring changes are not taken into account when I deploy the configuration

Typically, checks are not executed. Perform the following checks: if a step has worked for you, then go to the next step.

### Step 1: Test Gorgone's Connection to the platform

Check that Gorgone can connect to your Centreon Cloud platform.

```shell
nc -zv -w 5 gorgone-<organization_code>.euwest1.centreon.cloud 443
```

A message like this one should be printed:

```shell
Ncat: Connected to n.n.n.n:443.
```

If you get a timeout instead, this means that the network configuration doesn't allow the poller to talk to the platform. Check whether you need a proxy, or whether you need to [open some flows](prerequisites.md#network) or [allow some IP ranges](prerequisites.md#allowing-traffic-tofrom-aws-ip-ranges).

### Step 2: Check that Gorgone is running

Run the following command:

```shell
systemctl status gorgoned
```

If the status is not **active (running)**, restart Gorgone:

```shell
systemctl restart gorgoned
```

### Step 3: Check Gorgone logs

Gorgone logs are written in the following file: check them for any errors.

```shell
/var/log/centreon-gorgone/gorgoned.log
```

### Step 4: Set Gorgone log level to info or debug

The default log level for Gorgone is **error**. If you need more details about what Gorgone is doing:

1. Edit the following file:

   ```shell
   /etc/sysconfig/gorgoned
   ```

2. Change the **--severity** parameter value to **info** or **debug**.

3. Restart the **gorgoned** process:

   ```shell
   systemctl restart gorgoned
   ```

### Step 5: Check Gorgone's connection

Once you have set the log level to info or debug, this INFO message should appear in Gorgone logs:

```shell
INFO - [pullwss] websocket connected
```

If you get another message, this means that there is a problem with the network configuration or an authentication problem.

### Step 6: Check that the deploy command works

Check the log messages generated by Gorgone while the configuration is being deployed. The log should contain the following lines, which mean that the poller has received the configuration.

```shell
2024-09-13 14:28:50 - INFO - [action] Copy processing - Received chunk for '/etc/centreon-engine//'
2024-09-13 14:28:51 - INFO - [action] Copy processing - Copy to '/etc/centreon-engine//' finished successfully
2024-09-13 14:28:51 - INFO - [action] Copy processing - Received chunk for '/etc/centreon-broker/'
2024-09-13 14:28:51 - INFO - [action] Copy processing - Copy to '/etc/centreon-broker/' finished successfully
```

If all previous steps were OK but the log does not show that the poller has received the configuration, contact [our support team](https://support.centreon.com/hc/en-us).

### Step 7: Check that configuration files are correctly updated

Check the modification dates of configuration files: if you see that the files were not updated when you deployed the configuration, check that the **gorgone** user has rights on this folder.

```shell
ls -l /etc/centreon-engine
```

### Step 8: Check that Engine reloads or restarts correctly

Check Engine's log file according to the method you have selected when deploying the configuration.

1. Open the log file:

```shell
vi /var/log/centreon-engine/centengine.log
```

2. [Deploy the configuration](../monitoring/monitoring-servers/deploying-a-configuration.md) from the interface using either the **reload** or **restart** method.

3. Check the log file for the following messages:

* If you have selected the **reload** method, the log file should contain:

```shell
[process] [info] [646] Starting to reload configuration.
(...)
[process] [info] [646] Reload configuration finished.
```

* If you have selected the **restart** method, the log file should contain:

```shell
[process] [info] [3142] Centreon Engine yy.mm.p starting ...
```

If it doesn't, check that **gorgoned** has the right to write in `/etc/centreon-engine` and that **centengine** has the right to read in it.

## The poller does not send any data to the platform

### Step 1: Test network connectivity

Check that the poller can send real-time data to the Centreon Cloud platform. Execute the following command (replace **{org-code}** by your organization code):

```shell
nc -zv -w 5 broker-{org-code}.euwest1.centreon.cloud 443
```

The command should print a message like this one:

```shell
Ncat: Connected to n.n.n.n:443.
```

If you get a different message, check your network configuration. For instance, check that no domain name filtering blocks the **broker** process.

### Step 2: Check that Engine is running

Run the following command:

```shell
systemctl status centengine
```

If the status is not **active (running)**, restart **centengine**:

```shell
systemctl restart centengine
```

### Step 3: Check whether any retention files exist

Inspect the folder containing retention files to know if there is currently some retention on the poller.

```shell
ls -l /var/lib/centreon-engine
```

If the previous 2 tests are OK but there is retention on the poller, contact [our support team](https://support.centreon.com/hc/en-us).

### Step 4: Enable and review Engine logs

Modify log levels to get more information about what Engine is doing.

1. Edit the **centengine.cfg** file.

   ```shell
   vi /etc/centreon-engine/centengine.cfg
   ```

2. Locate and adjust parameters prefixed with **log\_level\_**. The default values are:

   ```text
   log_level_functions=warning
   log_level_config=info
   log_level_events=info
   log_level_checks=info
   log_level_notifications=info
   log_level_eventbroker=warning
   log_level_external_command=info
   log_level_commands=warning
   log_level_downtimes=info
   log_level_comments=info
   log_level_macros=warning
   log_level_process=info
   log_level_runtime=warning
   ```

3. Restart Centreon Engine.

   ```shell
   systemctl restart centengine
   ```

> Note: This change will be overwritten next time the configuration is deployed.

### Step 5: Enable and review cbmod logs

1. Edit the Centreon Broker module configuration (replace **{hostname}** by the correct value):

   ```shell
   vi /etc/centreon-broker/{hostname}-module.json
   ```

2. Adjust the **centreonBroker.log.loggers** object to the desired log level.

3. Restart Centreon Engine.

   ```shell
    systemctl restart centengine
   ```

> Note: This change will be overwritten next time the configuration is deployed.

### Step 6: Check export statistics

Some statistics about real-time data exported to Centreon Cloud are available in a JSON file. Check this file for any errors.

```shell
cat /var/lib/centreon-engine/*-module-stats.json
```

> Note: This file is a UNIX pipe file and is only accessible when the **centengine** service is running.

If all troubleshooting steps have failed, contact [our support team](https://support.centreon.com/hc/en-us).
